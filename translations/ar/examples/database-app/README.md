# ูุดุฑ ูุงุนุฏุฉ ุจูุงูุงุช Microsoft SQL ูุชุทุจูู ููุจ ุจุงุณุชุฎุฏุงู AZD

โฑ๏ธ **ุงูููุช ุงูููุฏุฑ**: 20-30 ุฏูููุฉ | ๐ฐ **ุงูุชูููุฉ ุงูููุฏุฑุฉ**: ~$15-25/ุดูุฑููุง | โญ **ุงูุชุนููุฏ**: ูุชูุณุท

ููุถุญ ูุฐุง ุงููุซุงู ุงููุงูู ูุงูุนููู ููููุฉ ุงุณุชุฎุฏุงู [Azure Developer CLI (azd)](https://learn.microsoft.com/azure/developer/azure-developer-cli/) ููุดุฑ ุชุทุจูู ููุจ Python Flask ูุน ูุงุนุฏุฉ ุจูุงูุงุช Microsoft SQL ุฅูู Azure. ูุชุถูู ูู ุงูููุฏ ููุฌุฑุจ โ ูุง ุชูุฌุฏ ุชุจุนูุงุช ุฎุงุฑุฌูุฉ ูุทููุจุฉ.

## ูุง ุงูุฐู ุณุชุชุนููู

ุจุฅููุงู ูุฐุง ุงููุซุงูุ ุณูู:
- ูุดุฑ ุชุทุจูู ูุชุนุฏุฏ ุงูุทุจูุงุช (ุชุทุจูู ููุจ + ูุงุนุฏุฉ ุจูุงูุงุช) ุจุงุณุชุฎุฏุงู ุงูุจููุฉ ุงูุชุญุชูุฉ ูุฑูุฒ
- ุชูููู ุงุชุตุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุดูู ุขูู ุฏูู ุชุถููู ุงูุฃุณุฑุงุฑ ูู ุงูุดููุฑุฉ
- ูุฑุงูุจุฉ ุตุญุฉ ุงูุชุทุจูู ุจุงุณุชุฎุฏุงู Application Insights
- ุฅุฏุงุฑุฉ ููุงุฑุฏ Azure ุจููุงุกุฉ ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ AZD CLI
- ุงุชุจุงุน ุฃูุถู ููุงุฑุณุงุช Azure ููุฃููุ ุชุญุณูู ุงูุชูููุฉุ ููุงุจููุฉ ุงููุฑุงูุจุฉ

## ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุณููุงุฑูู
- **ุชุทุจูู ุงูููุจ**: ูุงุฌูุฉ ุจุฑูุฌุฉ REST API ุจุงุณุชุฎุฏุงู Python Flask ูุน ุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: Azure SQL Database ูุน ุจูุงูุงุช ุชุฌุฑูุจูุฉ
- **ุงูุจููุฉ ุงูุชุญุชูุฉ**: Provision ุจุงุณุชุฎุฏุงู Bicep (ููุงูุจ ูุนูุงุฑูุฉ ููุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู)
- **ุงููุดุฑ**: ูุคุชูุช ุจุงููุงูู ุจุงุณุชุฎุฏุงู ุฃูุงูุฑ `azd`
- **ุงููุฑุงูุจุฉ**: Application Insights ููุณุฌูุงุช ูุงูููุงุณุงุช

## ุงููุชุทูุจุงุช ุงููุณุจูุฉ

### ุงูุฃุฏูุงุช ุงููุทููุจุฉ

ูุจู ุงูุจุฏุกุ ุชุญูู ูู ุชุซุจูุช ุงูุฃุฏูุงุช ุงูุชุงููุฉ:

1. **[Azure CLI](https://learn.microsoft.com/cli/azure/install-azure-cli)** (ุงูุฅุตุฏุงุฑ 2.50.0 ุฃู ุฃุญุฏุซ)
   ```sh
   az --version
   # ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ: azure-cli 2.50.0 ุฃู ุฅุตุฏุงุฑ ุฃุนูู
   ```

2. **[Azure Developer CLI (azd)](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd)** (ุงูุฅุตุฏุงุฑ 1.0.0 ุฃู ุฃุญุฏุซ)
   ```sh
   azd version
   # ุงูุฅุฎุฑุงุฌ ุงููุชููุน: ุฅุตุฏุงุฑ azd 1.0.0 ุฃู ุฃุนูู
   ```

3. **[Python 3.8+](https://www.python.org/downloads/)** (ูุชุทููุฑ ูุญูู)
   ```sh
   python --version
   # ุงูุฅุฎุฑุงุฌ ุงููุชููุน: ุจุงูุซูู 3.8 ุฃู ุฃุญุฏุซ
   ```

4. **[Docker](https://www.docker.com/get-started)** (ุงุฎุชูุงุฑูุ ููุชุทููุฑ ุงููุญุงุท ุจุงูุญุงููุงุช ูุญูููุง)
   ```sh
   docker --version
   # ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ: ุฅุตุฏุงุฑ Docker 20.10 ุฃู ุฃุนูู
   ```

### ูุชุทูุจุงุช Azure

- ุงุดุชุฑุงู **Azure** ูุดุท ([create a free account](https://azure.microsoft.com/free/))
- ุฃุฐููุงุช ูุฅูุดุงุก ุงูููุงุฑุฏ ูู ุงูุงุดุชุฑุงู ุงูุฎุงุต ุจู
- ุฏูุฑ **Owner** ุฃู **Contributor** ุนูู ุงูุงุดุชุฑุงู ุฃู ูุฌููุนุฉ ุงูููุงุฑุฏ

### ุงููุชุทูุจุงุช ุงููุนุฑููุฉ

ูุฐุง ูุซุงู ุจูุณุชูู **ูุชูุณุท**. ูุฌุจ ุฃู ุชููู ุนูู ุฏุฑุงูุฉ ุจู:
- ุฃุณุงุณูุงุช ุงุณุชุฎุฏุงู ุณุทุฑ ุงูุฃูุงูุฑ
- ููุงููู ุงูุณุญุงุจุฉ ุงูุฃุณุงุณูุฉ (ุงูููุงุฑุฏุ ูุฌููุนุงุช ุงูููุงุฑุฏ)
- ููู ุฃุณุงุณู ูุชุทุจููุงุช ุงูููุจ ูููุงุนุฏ ุงูุจูุงูุงุช

**ุฌุฏูุฏ ุนูู AZDุ** ุงุจุฏุฃ ุจุฏููู [Getting Started guide](../../docs/chapter-01-foundation/azd-basics.md) ุฃููุงู.

## ุงูุจููุฉ ุงููุนูุงุฑูุฉ

ููุดุฑ ูุฐุง ุงููุซุงู ุจููุฉ ุฐุงุช ุทุจูุชูู ูุน ุชุทุจูู ููุจ ููุงุนุฏุฉ ุจูุงูุงุช SQL:

```
โโโโโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโโโโโโโโโ
โ  User Browser   โโโโโโโโโบโ   Azure Web App      โ
โโโโโโโโโโโโโโโโโโโ        โ   (Flask API)        โ
                           โ   - /health          โ
                           โ   - /products        โ
                           โโโโโโโโโโโโฌโโโโโโโโโโโโ
                                      โ
                                      โ Secure Connection
                                      โ (Encrypted)
                                      โ
                           โโโโโโโโโโโโผโโโโโโโโโโโโ
                           โ Azure SQL Database   โ
                           โ   - Products table   โ
                           โ   - Sample data      โ
                           โโโโโโโโโโโโโโโโโโโโโโโโ
```

**ูุดุฑ ุงูููุงุฑุฏ:**
- **Resource Group**: ุญุงููุฉ ููู ุงูููุงุฑุฏ
- **App Service Plan**: ุงุณุชุถุงูุฉ ูุจููุฉ ุนูู Linux (ุงูุฏุฑุฌุฉ B1 ูููุงุกุฉ ุงูุชูููุฉ)
- **Web App**: ููุช ุชุดุบูู Python 3.11 ูุน ุชุทุจูู Flask
- **SQL Server**: ุฎุงุฏู ูุงุนุฏุฉ ุจูุงูุงุช ูุฏุงุฑ ูุน TLS 1.2 ูุญุฏ ุฃุฏูู
- **SQL Database**: ุงููุฆุฉ ุงูุฃุณุงุณูุฉ (2GBุ ููุงุณุจุฉ ููุชุทููุฑ/ุงูุงุฎุชุจุงุฑ)
- **Application Insights**: ุงููุฑุงูุจุฉ ูุงูุชุณุฌูู
- **Log Analytics Workspace**: ุชุฎุฒูู ูุฑูุฒู ููุณุฌูุงุช

**ุงูุชุดุจูู**: ููุฑ ูู ูุฐุง ููุทุนู (ุชุทุจูู ุงูููุจ) ูุน ุซูุงุฌุฉ ูุฎุฒูุฉ ุฏุงุฎููุฉ (ูุงุนุฏุฉ ุงูุจูุงูุงุช). ุงูุฒุจุงุฆู ูุทูุจูู ูู ุงููุงุฆูุฉ (ููุงุท ููุงูุฉ ุงูู API)ุ ูุงููุทุจุฎ (ุชุทุจูู Flask) ูุณุชุฎุฑุฌ ุงูููููุงุช (ุงูุจูุงูุงุช) ูู ุงูุซูุงุฌุฉ. ูุฏูุฑ ุงููุทุนู (Application Insights) ูุชุชุจุน ูู ูุง ูุญุฏุซ.

## ูููู ุงููุฌูุฏุงุช

ุฌููุน ุงููููุงุช ูุถููุฉ ูู ูุฐุง ุงููุซุงู โ ูุง ุชูุฌุฏ ุชุจุนูุงุช ุฎุงุฑุฌูุฉ ูุทููุจุฉ:

```
examples/database-app/
โ
โโโ README.md                    # This file
โโโ azure.yaml                   # AZD configuration file
โโโ .env.sample                  # Sample environment variables
โโโ .gitignore                   # Git ignore patterns
โ
โโโ infra/                       # Infrastructure as Code (Bicep)
โ   โโโ main.bicep              # Main orchestration template
โ   โโโ abbreviations.json      # Azure naming conventions
โ   โโโ resources/              # Modular resource templates
โ       โโโ sql-server.bicep    # SQL Server configuration
โ       โโโ sql-database.bicep  # Database configuration
โ       โโโ app-service-plan.bicep  # Hosting plan
โ       โโโ app-insights.bicep  # Monitoring setup
โ       โโโ web-app.bicep       # Web application
โ
โโโ src/
    โโโ web/                    # Application source code
        โโโ app.py              # Flask REST API
        โโโ requirements.txt    # Python dependencies
        โโโ Dockerfile          # Container definition
```

**ูุง ูุธููุฉ ูู ููู:**
- **azure.yaml**: ูุฎุจุฑ AZD ุจูุง ูุชู ูุดุฑู ูุฃูู
- **infra/main.bicep**: ููุณู ุฌููุน ููุงุฑุฏ Azure
- **infra/resources/*.bicep**: ุชุนุฑููุงุช ุงูููุงุฑุฏ ุงููุฑุฏูุฉ (ูุนูุงุฑูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู)
- **src/web/app.py**: ุชุทุจูู Flask ูุน ููุทู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **requirements.txt**: ุชุจุนูุงุช ุญุฒู Python
- **Dockerfile**: ุชุนูููุงุช ุงูุญุงููุฉ ูููุดุฑ

## ุจุฏุงูุฉ ุณุฑูุนุฉ (ุฎุทูุฉ ุจุฎุทูุฉ)

### ุงูุฎุทูุฉ 1: ุงุณุชูุณุงุฎ ูุงูุชููู

```sh
git clone https://github.com/microsoft/AZD-for-beginners.git
cd AZD-for-beginners/examples/database-app
```

**โ ูุญุต ุงููุฌุงุญ**: ุชุญูู ูู ุฑุคูุฉ `azure.yaml` ููุฌูุฏ `infra/`:
```sh
ls
# ุงููุชูููุน: README.mdุ azure.yamlุ infra/ุ src/
```

### ุงูุฎุทูุฉ 2: ุงููุตุงุฏูุฉ ูุน Azure

```sh
azd auth login
```

ุณููุชุญ ูุฐุง ูุชุตูุญู ูููุตุงุฏูุฉ ูู Azure. ุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ุงุนุชูุงุฏ Azure ุงูุฎุงุตุฉ ุจู.

**โ ูุญุต ุงููุฌุงุญ**: ูุฌุจ ุฃู ุชุฑู:
```
Logged in to Azure.
```

### ุงูุฎุทูุฉ 3: ุชููุฆุฉ ุงูุจูุฆุฉ

```sh
azd init
```

**ูุง ุงูุฐู ูุญุฏุซ**: ููุดุฆ AZD ุชูููููุง ูุญูููุง ููุดุฑู.

**ุงููุทุงูุจุงุช ุงูุชู ุณุชุฑู**:
- **Environment name**: ุฃุฏุฎู ุงุณููุง ูุตูุฑูุง (ูุซู `dev`, `myapp`)
- **Azure subscription**: ุงุฎุชุฑ ุงุดุชุฑุงูู ูู ุงููุงุฆูุฉ
- **Azure location**: ุงุฎุชุฑ ููุทูุฉ (ูุซู `eastus`, `westeurope`)

**โ ูุญุต ุงููุฌุงุญ**: ูุฌุจ ุฃู ุชุฑู:
```
SUCCESS: New project initialized!
```

### ุงูุฎุทูุฉ 4: ุชูููุฑ ููุงุฑุฏ Azure

```sh
azd provision
```

**ูุง ุงูุฐู ูุญุฏุซ**: ููุดุฑ AZD ูู ุงูุจููุฉ ุงูุชุญุชูุฉ (ูุณุชุบุฑู 5-8 ุฏูุงุฆู):
1. ููุดุฆ ูุฌููุนุฉ ููุงุฑุฏ
2. ููุดุฆ SQL Server ูDatabase
3. ููุดุฆ App Service Plan
4. ููุดุฆ Web App
5. ููุดุฆ Application Insights
6. ูููุฆ ุงูุดุจูุงุช ูุงูุฃูุงู

**ุณููุทูุจ ููู**:
- **SQL admin username**: ุฃุฏุฎู ุงุณู ูุณุชุฎุฏู (ูุซุงู `sqladmin`)
- **SQL admin password**: ุฃุฏุฎู ูููุฉ ูุฑูุฑ ูููุฉ (ุงุญูุธูุง!)

**โ ูุญุต ุงููุฌุงุญ**: ูุฌุจ ุฃู ุชุฑู:
```
SUCCESS: Your application was provisioned in Azure in X minutes Y seconds.
You can view the resources created under the resource group rg-<env-name> in Azure Portal:
https://portal.azure.com/#@/resource/subscriptions/.../resourceGroups/rg-<env-name>
```

**โฑ๏ธ ุงูููุช**: 5-8 ุฏูุงุฆู

### ุงูุฎุทูุฉ 5: ูุดุฑ ุงูุชุทุจูู

```sh
azd deploy
```

**ูุง ุงูุฐู ูุญุฏุซ**: ูุจูู AZD ูููุดุฑ ุชุทุจูู Flask ุงูุฎุงุต ุจู:
1. ูุฌูุน ุชุทุจูู Python
2. ูุจูู ุญุงููุฉ Docker
3. ูุฏูุนูุง ุฅูู Azure Web App
4. ูููุฆ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
5. ูุจุฏุก ุงูุชุทุจูู

**โ ูุญุต ุงููุฌุงุญ**: ูุฌุจ ุฃู ุชุฑู:
```
SUCCESS: Your application was deployed to Azure in X minutes Y seconds.
You can view the resources created under the resource group rg-<env-name> in Azure Portal:
https://portal.azure.com/#@/resource/subscriptions/.../resourceGroups/rg-<env-name>
```

**โฑ๏ธ ุงูููุช**: 3-5 ุฏูุงุฆู

### ุงูุฎุทูุฉ 6: ุชุตูุญ ุงูุชุทุจูู

```sh
azd browse
```

ููุชุญ ูุฐุง ุชุทุจูู ุงูููุจ ุงูููุดูุฑ ูู ุงููุชุตูุญ ุนูู `https://app-<unique-id>.azurewebsites.net`

**โ ูุญุต ุงููุฌุงุญ**: ูุฌุจ ุฃู ุชุฑู ุฅุฎุฑุงุฌ JSON:
```json
{
  "message": "Welcome to the Database App API",
  "endpoints": {
    "/": "This help message",
    "/health": "Health check endpoint",
    "/products": "List all products",
    "/products/<id>": "Get product by ID"
  }
}
```

### ุงูุฎุทูุฉ 7: ุงุฎุชุจุงุฑ ููุงุท ููุงูุฉ ุงูู API

**ูุญุต ุงูุตุญุฉ** (ุงูุชุญูู ูู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช):
```sh
curl https://app-<your-id>.azurewebsites.net/health
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุชููุนุฉ**:
```json
{
  "status": "healthy",
  "database": "connected"
}
```

**ูุงุฆูุฉ ุงูููุชุฌุงุช** (ุจูุงูุงุช ุชุฌุฑูุจูุฉ):
```sh
curl https://app-<your-id>.azurewebsites.net/products
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุชููุนุฉ**:
```json
[
  {
    "id": 1,
    "name": "Laptop",
    "description": "High-performance laptop",
    "price": 1299.99,
    "created_at": "2025-11-19T10:30:00"
  },
  ...
]
```

**ุงูุญุตูู ุนูู ููุชุฌ ูุงุญุฏ**:
```sh
curl https://app-<your-id>.azurewebsites.net/products/1
```

**โ ูุญุต ุงููุฌุงุญ**: ุชุนูุฏ ุฌููุน ุงูููุงุท ุจูุงูุงุช JSON ุฏูู ุฃุฎุทุงุก.

---

**๐ ุชูุงูููุง!** ููุฏ ูุฌุญุช ูู ูุดุฑ ุชุทุจูู ููุจ ูุน ูุงุนุฏุฉ ุจูุงูุงุช ุฅูู Azure ุจุงุณุชุฎุฏุงู AZD.

## ุงุณุชุนุฑุงุถ ุชูุตููู ููุฅุนุฏุงุฏ

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ุชูุฏุงุฑ ุงูุฃุณุฑุงุฑ ุจุฃูุงู ุนุจุฑ ุชูููู Azure App Serviceโ**ูุง ุชูู ุจุชุถููููุง ูู ุงูุดููุฑุฉ ุงููุตุฏุฑูุฉ**.

**ููุนุฏ ุชููุงุฆููุง ุจูุงุณุทุฉ AZD**:
- `SQL_CONNECTION_STRING`: ุณูุณูุฉ ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน ุจูุงูุงุช ุงุนุชูุงุฏ ูุดูุฑุฉ
- `APPLICATIONINSIGHTS_CONNECTION_STRING`: ููุทุฉ ููุงูุฉ ููุงุณ ุงููุฑุงูุจุฉ
- `SCM_DO_BUILD_DURING_DEPLOYMENT`: ููููู ุงูุชุซุจูุช ุงูุชููุงุฆู ููุชุจุนูุงุช ุฃุซูุงุก ุงููุดุฑ

**ุฃูู ุชูุฎุฒู ุงูุฃุณุฑุงุฑ**:
1. ุฃุซูุงุก `azd provision`ุ ุชุฒูุฏ ุจูุงูุงุช ุงุนุชูุงุฏ SQL ุนุจุฑ ูุทุงูุจุงุช ุขููุฉ
2. ูุฎุฒู AZD ูุฐู ูู ููู `.azure/<env-name>/.env` ุงููุญูู (ูุณุชุจุนุฏ ูู Git)
3. ูุญูููุง AZD ูู ุชูููู Azure App Service (ูุดูุฑุฉ ุฃุซูุงุก ุงูุณููู)
4. ููุฑุฃ ุงูุชุทุจูู ูุฐู ุงููุชุบูุฑุงุช ุนุจุฑ `os.getenv()` ููุช ุงูุชุดุบูู

### ุงูุชุทููุฑ ุงููุญูู

ูุงุฎุชุจุงุฑ ูุญููุ ุฃูุดุฆ ููู `.env` ูู ุงูุนููุฉ:

```sh
cp .env.sample .env
# ุญุฑูุฑ ููู .env ููุญุชูู ุนูู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญููุฉ
```

**ุณูุฑ ุนูู ุงูุชุทููุฑ ุงููุญูู**:
```sh
# ุชุซุจูุช ุงูุชุจุนูุงุช
cd src/web
pip install -r requirements.txt

# ุชุนููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
export SQL_CONNECTION_STRING="your-local-connection-string"

# ุชุดุบูู ุงูุชุทุจูู
python app.py
```

**ุงุฎุชุจุฑ ูุญูููุง**:
```sh
curl http://localhost:8000/health
# ุงููุชููุน: {"status": "healthy", "database": "connected"}
```

### ุงูุจููุฉ ุงูุชุญุชูุฉ ูุฑูุฒ

ูู ููุงุฑุฏ Azure ูุนุฑูุฉ ูู **ููุงูุจ Bicep** (`infra/` ูุฌูุฏ):

- **ุชุตููู ูุนูุงุฑู**: ูู ููุน ููุฑุฏ ูู ูููู ุงูุฎุงุต ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- **ูุนุงูููุฉ**: ุชุฎุตูุต SKUsุ ุงูููุงุทูุ ุงุชูุงููุงุช ุงูุชุณููุฉ
- **ุฃูุถู ุงูููุงุฑุณุงุช**: ูุชุจุน ูุนุงููุฑ ุชุณููุฉ Azure ูุฅุนุฏุงุฏุงุช ุงูุฃูุงู ุงูุงูุชุฑุงุถูุฉ
- **ูุชุญูู ุจุงูุฅุตุฏุงุฑ**: ุชุบููุฑุงุช ุงูุจููุฉ ุงูุชุญุชูุฉ ูุชุนูุจุฉ ูู Git

**ูุซุงู ููุชุฎุตูุต**:
ูุชุบููุฑ ูุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ุญุฑุฑ `infra/resources/sql-database.bicep`:
```bicep
sku: {
  name: 'Standard'  // Changed from 'Basic'
  tier: 'Standard'
  capacity: 10
}
```

## ุฃูุถู ููุงุฑุณุงุช ุงูุฃูุงู

ูุชุจุน ูุฐุง ุงููุซุงู ุฃูุถู ููุงุฑุณุงุช ุฃูุงู Azure:

### 1. **ูุง ุชูุฌุฏ ุฃุณุฑุงุฑ ูู ุงูุดููุฑุฉ ุงููุตุฏุฑูุฉ**
- โ ุจูุงูุงุช ุงูุงุนุชูุงุฏ ูุฎุฒูุฉ ูู ุชูููู Azure App Service (ูุดูุฑุฉ)
- โ ูููุงุช `.env` ูุณุชุจุนุฏุฉ ูู Git ุนุจุฑ `.gitignore`
- โ ุชููุฑูุฑ ุงูุฃุณุฑุงุฑ ุนุจุฑ ูุนุงููุงุช ุขููุฉ ุฃุซูุงุก ุงูุชูููุฑ

### 2. **ุงุชุตุงูุงุช ูุดูุฑุฉ**
- โ TLS 1.2 ูุญุฏ ุฃุฏูู ูุฎุงุฏู SQL
- โ ูุฑุถ HTTPS ููุท ูุชุทุจูู ุงูููุจ
- โ ุงุชุตุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุณุชุฎุฏู ูููุงุช ูุดูุฑุฉ

### 3. **ุฃูุงู ุงูุดุจูุฉ**
- โ ุฌุฏุงุฑ ุญูุงูุฉ ุฎุงุฏู SQL ูููุฃ ููุณูุงุญ ุจุฎุฏูุงุช Azure ููุท
- โ ุงููุตูู ุงูุนุงู ููุดุจูุฉ ูููุฏ (ูููู ุชูููุฏู ุฃูุซุฑ ุจุงุณุชุฎุฏุงู Private Endpoints)
- โ FTPS ูุนุทู ุนูู Web App

### 4. **ุงููุตุงุฏูุฉ ูุงูุชูููุถ**
- โ๏ธ **ุงูุญุงูู**: ูุตุงุฏูุฉ SQL (ุงุณู ูุณุชุฎุฏู/ูููุฉ ูุฑูุฑ)
- โ **ุชูุตูุฉ ููุฅูุชุงุฌ**: ุงุณุชุฎุฏู Managed Identity ูู Azure ูููุตุงุฏูุฉ ุจุฏูู ูููุงุช ูุฑูุฑ

**ููุชุฑููุฉ ุฅูู Managed Identity** (ููุฅูุชุงุฌ):
1. ูู ุจุชูููู Managed Identity ุนูู Web App
2. ุงููุญ ุงููููุฉ ุฃุฐููุงุช SQL
3. ุญุฏูุซ ุณูุณูุฉ ุงูุงุชุตุงู ูุงุณุชุฎุฏุงู Managed Identity
4. ุฃุฒู ุงููุตุงุฏูุฉ ุงููุนุชูุฏุฉ ุนูู ูููุฉ ุงููุฑูุฑ

### 5. **ุงูุชุฏููู ูุงูุงูุชุซุงู**
- โ Application Insights ูุณุฌู ูู ุงูุทูุจุงุช ูุงูุฃุฎุทุงุก
- โ ุชุฏููู SQL Database ููููู (ูููู ุชููููู ููุงูุชุซุงู)
- โ ุฌููุน ุงูููุงุฑุฏ ูุนูููุฉ ููุญูููุฉ ูุงูุฅุฏุงุฑุฉ

**ูุงุฆูุฉ ุงูุชุญูู ุงูุฃูููุฉ ูุจู ุงูุฅูุชุงุฌ**:
- [ ] ุชูููู Azure Defender ูู SQL
- [ ] ุชูููู Private Endpoints ูู SQL Database
- [ ] ุชูููู Web Application Firewall (WAF)
- [ ] ุชูููุฐ Azure Key Vault ูุชุฏููุฑ ุงูุฃุณุฑุงุฑ
- [ ] ุชูููู ูุตุงุฏูุฉ Azure AD
- [ ] ุชูููู ุชุณุฌูู ุงูุชุดุฎูุต ููู ุงูููุงุฑุฏ

## ุชุญุณูู ุงูุชูููุฉ

**ุงูุชูุงููู ุงูุดูุฑูุฉ ุงูููุฏุฑุฉ** (ุญุชู ููููุจุฑ 2025):

| Resource | SKU/Tier | Estimated Cost |
|----------|----------|----------------|
| App Service Plan | B1 (Basic) | ~$13/month |
| SQL Database | Basic (2GB) | ~$5/month |
| Application Insights | Pay-as-you-go | ~$2/month (low traffic) |
| **ุงููุฌููุน** | | **~$20/month** |

**๐ก ูุตุงุฆุญ ูุชูููู ุงูุชูููุฉ**:

1. **ุงุณุชุฎุฏู ุงูุทุจูุฉ ุงููุฌุงููุฉ ููุชุนูู**:
   - App Service: ูุฆุฉ F1 (ูุฌุงููุฉุ ุณุงุนุงุช ูุญุฏูุฏุฉ)
   - SQL Database: ุงุณุชุฎุฏู Azure SQL Database serverless
   - Application Insights: 5GB/ุดูุฑ ุฅุฏุฎุงู ูุฌุงูู

2. **ุฅููุงู ุงูููุงุฑุฏ ุนูุฏ ุนุฏู ุงูุงุณุชุฎุฏุงู**:
   ```sh
   # ุฃููู ุชุทุจูู ุงูููุจ (ุณุชุณุชูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุงุญุชุณุงุจ ุงูุฑุณูู)
   az webapp stop --name <app-name> --resource-group <rg-name>
   
   # ุฃุนุฏ ุงูุชุดุบูู ุนูุฏ ุงูุญุงุฌุฉ
   az webapp start --name <app-name> --resource-group <rg-name>
   ```

3. **ุญุฐู ูู ุดูุก ุจุนุฏ ุงูุงุฎุชุจุงุฑ**:
   ```sh
   azd down
   ```
   ูุฐุง ูุฒูู ูู ุงูููุงุฑุฏ ููููู ุงูุฑุณูู.

4. **ูุฆุงุช ุงูุชุทููุฑ ููุงุจู ุงูุฅูุชุงุฌ**:
   - **ุงูุชุทููุฑ**: ุงููุฆุฉ ุงูุฃุณุงุณูุฉ (ุงููุณุชุฎุฏูุฉ ูู ูุฐุง ุงููุซุงู)
   - **ุงูุฅูุชุงุฌ**: ูุฆุงุช Standard/Premium ูุน ุงูุชูุฑุงุฑ

**ูุฑุงูุจุฉ ุงูุชูููุฉ**:
- ุนุฑุถ ุงูุชูุงููู ูู [Azure Cost Management](https://portal.azure.com/#view/Microsoft_Azure_CostManagement)
- ุฅุนุฏุงุฏ ุชูุจููุงุช ุงูุชูููุฉ ูุชุฌูุจ ุงูููุงุฌุขุช
- ูุณู ูู ุงูููุงุฑุฏ ุจู `azd-env-name` ููุชุชุจุน

**ุจุฏูู ุงููุฆุฉ ุงููุฌุงููุฉ**:
ูุฃุบุฑุงุถ ุงูุชุนููุ ููููู ุชุนุฏูู `infra/resources/app-service-plan.bicep`:
```bicep
sku: {
  name: 'F1'  // Free tier
  tier: 'Free'
}
```
**ููุงุญุธุฉ**: ูููุฆุฉ ุงููุฌุงููุฉ ูููุฏ (60 ุฏูููุฉ/ููู CPUุ ูุง ููุฌุฏ always-on).

## ุงููุฑุงูุจุฉ ููุงุจููุฉ ุงูููุงุญุธุฉ

### ุชูุงูู Application Insights

ูุชุถูู ูุฐุง ุงููุซุงู **Application Insights** ูููุฑุงูุจุฉ ุงูุดุงููุฉ:

**ูุง ุงูุฐู ูุชู ูุฑุงูุจุชู**:
- โ ุทูุจุงุช HTTP (ุงูููููุ ุฑููุฒ ุงูุญุงูุฉุ ููุงุท ุงูููุงูุฉ)
- โ ุฃุฎุทุงุก ูุงุณุชุซูุงุกุงุช ุงูุชุทุจูู
- โ ุงูุชุณุฌูู ุงููุฎุตุต ูู ุชุทุจูู Flask
- โ ุตุญุฉ ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ููุงููุณ ุงูุฃุฏุงุก (CPUุ ุงูุฐุงูุฑุฉ)

**ุงููุตูู ุฅูู Application Insights**:
1. ุงูุชุญ [Azure Portal](https://portal.azure.com)
2. ุงูุชูู ุฅูู ูุฌููุนุฉ ุงูููุงุฑุฏ ุงูุฎุงุตุฉ ุจู (`rg-<env-name>`)
3. ุงููุฑ ุนูู ููุฑุฏ Application Insights (`appi-<unique-id>`)

**ุงุณุชุนูุงูุงุช ูููุฏุฉ** (Application Insights โ ุงูุณุฌูุงุช):

**ุนุฑุถ ูู ุงูุทูุจุงุช**:
```kusto
requests
| where timestamp > ago(1h)
| order by timestamp desc
| project timestamp, name, url, resultCode, duration
```

**ุงูุนุซูุฑ ุนูู ุงูุฃุฎุทุงุก**:
```kusto
exceptions
| where timestamp > ago(24h)
| order by timestamp desc
| project timestamp, type, outerMessage, operation_Name
```

**ุงูุชุญูู ูู ููุทุฉ ููุงูุฉ ุงูุตุญุฉ**:
```kusto
requests
| where name contains "health"
| summarize count() by resultCode, bin(timestamp, 1h)
```

### ุชุฏููู SQL Database

**ุชู ุชูููู ุชุฏููู SQL Database** ูุชุชุจุน:
- ุฃููุงุท ุงููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุญุงููุงุช ุฏุฎูู ูุงุดูุฉ
- ุชุบููุฑุงุช ุงููุฎุทุท
- ุงููุตูู ุฅูู ุงูุจูุงูุงุช (ููุงูุชุซุงู)

**ุงููุตูู ุฅูู ุณุฌูุงุช ุงูุชุฏููู**:
1. ุจูุงุจุฉ Azure โ SQL Database โ ุงูุชุฏููู
2. ุนุฑุถ ุงูุณุฌูุงุช ูู Log Analytics workspace

### ุงููุฑุงูุจุฉ ูู ุงูุฒูู ุงูุญูููู

**ุนุฑุถ ุงูููุงููุณ ุงูุญูุฉ**:
1. Application Insights โ Live Metrics
2. ุดุงูุฏ ุงูุทูุจุงุชุ ุงูุฃุฎุทุงุกุ ูุงูุฃุฏุงุก ูู ุงูุฒูู ุงูุญูููู

**ุฅุนุฏุงุฏ ุงูุชูุจููุงุช**:
ุฃูุดุฆ ุชูุจููุงุช ููุฃุญุฏุงุซ ุงูุญุฑุฌุฉ:
- ุฃุฎุทุงุก HTTP 500 > 5 ุฎูุงู 5 ุฏูุงุฆู
- ูุดู ุงุชุตุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฃููุงุช ุงุณุชุฌุงุจุฉ ูุฑุชูุนุฉ (>2 ุซูุงูู)

**ูุซุงู ุนูู ุฅูุดุงุก ุชูุจูู**:
```sh
az monitor metrics alert create \
  --name "High-Response-Time" \
  --resource-group <rg-name> \
  --scopes <app-insights-resource-id> \
  --condition "avg requests/duration > 2000" \
  --description "Alert when response time exceeds 2 seconds"
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง

### ุงููุดุงูู ูุงูุญููู ุงูุดุงุฆุนุฉ

#### 1. `azd provision` ููุดู ูุน "ุงููููุน ุบูุฑ ูุชุงุญ"

**ุงูุนูุฑูุถ**:
```
Error: The subscription is not registered for the resource type 'components' in the location 'centralus'.
```

**ุงูุญู**:
ุงุฎุชุฑ ููุทูุฉ Azure ูุฎุชููุฉ ุฃู ุณุฌููู ูุฒูุฏ ุงูููุงุฑุฏ:
```sh
az provider register --namespace Microsoft.Insights
```

#### 2. ูุดู ุงุชุตุงู SQL ุฃุซูุงุก ุงููุดุฑ

**ุงูุนูุฑูุถ**:
```
pyodbc.OperationalError: ('08001', '[08001] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider...')
```

**ุงูุญู**:
- ุชุญูู ูู ุฃู ุฌุฏุงุฑ ุญูุงูุฉ SQL Server ูุณูุญ ูุฎุฏูุงุช Azure (ููููููู ุชููุงุฆููุง)
- ุชุฃูุฏ ูู ุฅุฏุฎุงู ูููุฉ ูุฑูุฑ ูุณุคูู SQL ุจุดูู ุตุญูุญ ุฃุซูุงุก `azd provision`
- ุชุฃูุฏ ูู ุฃู SQL Server ูููุดุฃ ุจุงููุงูู (ูุฏ ูุณุชุบุฑู 2-3 ุฏูุงุฆู)

**ุงูุชุญูู ูู ุงูุงุชุตุงู**:
```sh
# ูู ุจูุงุจุฉ Azureุ ุงูุชูู ุฅูู ูุงุนุฏุฉ ุจูุงูุงุช SQL โ ูุญุฑุฑ ุงูุงุณุชุนูุงู
# ุญุงูู ุงูุงุชุตุงู ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ุงูุงุนุชูุงุฏ ุงูุฎุงุตุฉ ุจู
```

#### 3. ุชุทุจูู ุงูููุจ ูุนุฑุถ "ุฎุทุฃ ูู ุงูุชุทุจูู"

**ุงูุนูุฑูุถ**:
ูุนุฑุถ ุงููุชุตูุญ ุตูุญุฉ ุฎุทุฃ ุนุงูุฉ.

**ุงูุญู**:
ุชุญูู ูู ุณุฌูุงุช ุงูุชุทุจูู:
```sh
# ุนุฑุถ ุงูุณุฌูุงุช ุงูุฃุฎูุฑุฉ
az webapp log tail --name <app-name> --resource-group <rg-name>
```

**ุงูุฃุณุจุงุจ ุงูุดุงุฆุนุฉ**:
- ูุชุบูุฑุงุช ุจูุฆุฉ ููููุฏุฉ (ุชุญูู ูู App Service โ Configuration)
- ูุดู ุชุซุจูุช ุญุฒูุฉ Python (ุชุญูู ูู ุณุฌูุงุช ุงููุดุฑ)
- ุฎุทุฃ ูู ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุชุญูู ูู ุงุชุตุงู SQL)

#### 4. ูุดู `azd deploy` ูุน "ุฎุทุฃ ูู ุงูุจูุงุก"

**ุงูุนูุฑูุถ**:
```
Error: Failed to build project
```

**ุงูุญู**:
- ุชุฃูุฏ ูู ุฃู `requirements.txt` ุฎุงูู ูู ุฃุฎุทุงุก ุงูุตูุงุบุฉ
- ุชุญูู ูู ุชุญุฏูุฏ Python 3.11 ูู `infra/resources/web-app.bicep`
- ุชุฃูุฏ ูู ุฃู Dockerfile ูุญุชูู ุนูู ุตูุฑุฉ ุฃุณุงุณูุฉ ุตุญูุญุฉ

**ุงูุชุตุญูุญ ูุญูููุง**:
```sh
cd src/web
docker build -t test-app .
docker run -p 8000:8000 test-app
```

#### 5. "Unauthorized" ุนูุฏ ุชุดุบูู ุฃูุงูุฑ AZD

**ุงูุนูุฑูุถ**:
```
ERROR: (Unauthorized) The client '<id>' with object id '<id>' does not have authorization
```

**ุงูุญู**:
ุฃุนุฏ ุงููุตุงุฏูุฉ ูุน Azure:
```sh
azd auth login
az login
```

ุชุญูู ูู ุฃู ูุฏูู ุงูุฃุฐููุงุช ุงูุตุญูุญุฉ (ุฏูุฑ Contributor) ุนูู ุงูุงุดุชุฑุงู.

#### 6. ุชูุงููู ูุงุนุฏุฉ ุจูุงูุงุช ูุฑุชูุนุฉ

**ุงูุนูุฑูุถ**:
ูุงุชูุฑุฉ Azure ุบูุฑ ูุชููุนุฉ.

**ุงูุญู**:
- ุชุญูู ููุง ุฅุฐุง ูุณูุช ุชุดุบูู `azd down` ุจุนุฏ ุงูุงุฎุชุจุงุฑ
- ุชุญูู ูู ุฃู SQL Database ุชุณุชุฎุฏู ุงููุฆุฉ Basic (ููุณุช Premium)
- ุฑุงุฌุน ุงูุชูุงููู ูู Azure Cost Management
- ุฅุนุฏุงุฏ ุชูุจููุงุช ุงูุชูุงููู

### ุงูุญุตูู ุนูู ุงููุณุงุนุฏุฉ

**ุนุฑุถ ุฌููุน ูุชุบูุฑุงุช ุจูุฆุฉ AZD**:
```sh
azd env get-values
```

**ุชุญูู ูู ุญุงูุฉ ุงููุดุฑ**:
```sh
az webapp show --name <app-name> --resource-group <rg-name> --query state
```

**ุงููุตูู ุฅูู ุณุฌูุงุช ุงูุชุทุจูู**:
```sh
az webapp log download --name <app-name> --resource-group <rg-name> --log-file app-logs.zip
```

**ุชุญุชุงุฌ ุฅูู ูุฒูุฏ ูู ุงููุณุงุนุฏุฉุ**
- [ุฏููู ุงุณุชูุดุงู ุฃุฎุทุงุก AZD ูุฅุตูุงุญูุง](../../docs/chapter-07-troubleshooting/common-issues.md)
- [ุงุณุชูุดุงู ุฃุฎุทุงุก Azure App Service ูุฅุตูุงุญูุง](https://learn.microsoft.com/azure/app-service/troubleshoot-diagnostic-logs)
- [ุงุณุชูุดุงู ุฃุฎุทุงุก Azure SQL ูุฅุตูุงุญูุง](https://learn.microsoft.com/azure/azure-sql/database/troubleshoot-common-errors-issues)

## ุงูุชูุงุฑูู ุงูุนูููุฉ

### ุงูุชูุฑูู 1: ุงูุชุญูู ูู ูุดุฑ ุงูุชุทุจูู (ูุจุชุฏุฆ)

**ุงููุฏู**: ุงูุชุฃูุฏ ูู ูุดุฑ ุฌููุน ุงูููุงุฑุฏ ูุฃู ุงูุชุทุจูู ูุนูู.

**ุงูุฎุทูุงุช**:
1. ูู ุจุฅุฏุฑุงุฌ ุฌููุน ุงูููุงุฑุฏ ูู ูุฌููุนุฉ ุงูููุงุฑุฏ ุงูุฎุงุตุฉ ุจู:
   ```sh
   az resource list --resource-group rg-<env-name> --output table
   ```
   **ูุชููุน**: 6-7 ููุงุฑุฏ (Web App, SQL Server, SQL Database, App Service Plan, Application Insights, Log Analytics)

2. ุงุฎุชุจุฑ ุฌููุน ููุงุท ููุงูุฉ API:
   ```sh
   curl https://app-<your-id>.azurewebsites.net/
   curl https://app-<your-id>.azurewebsites.net/health
   curl https://app-<your-id>.azurewebsites.net/products
   curl https://app-<your-id>.azurewebsites.net/products/1
   ```
   **ูุชููุน**: ูููุง ุชุนูุฏ JSON ุตุงูุญ ุจุฏูู ุฃุฎุทุงุก

3. ุชุญูู ูู Application Insights:
   - ุงูุชูู ุฅูู Application Insights ูู ุจูุงุจุฉ Azure
   - ุงุฐูุจ ุฅูู "Live Metrics"
   - ูู ุจุชุญุฏูุซ ูุชุตูุญู ุนูู ุชุทุจูู ุงูููุจ
   **ูุชููุน**: ุดุงูุฏ ุงูุทูุจุงุช ุชุธูุฑ ูู ุงูููุช ุงูุญูููู

**ูุนุงููุฑ ุงููุฌุงุญ**: ูุฌูุฏ ุฌููุน ุงูููุงุฑุฏ (6-7)ุ ุชุนูุฏ ุฌููุน ููุงุท ุงูููุงูุฉ ุจูุงูุงุชุ ููุธูุฑ ูุดุงุท ูู Live Metrics.

---

### ุงูุชูุฑูู 2: ุฅุถุงูุฉ ููุทุฉ ููุงูุฉ API ุฌุฏูุฏุฉ (ูุชูุณุท)

**ุงููุฏู**: ุชูุณูุน ุชุทุจูู Flask ุจุฅุถุงูุฉ ููุทุฉ ููุงูุฉ ุฌุฏูุฏุฉ.

**ููุฏ ุงูุจุฏุงูุฉ**: ููุงุท ุงูููุงูุฉ ุงูุญุงููุฉ ูู `src/web/app.py`

**ุงูุฎุทูุงุช**:
1. ูู ุจุชุญุฑูุฑ `src/web/app.py` ูุฃุถู ููุทุฉ ููุงูุฉ ุฌุฏูุฏุฉ ุจุนุฏ ุฏุงูุฉ `get_product()`:
   ```python
   @app.route('/products/search/<keyword>')
   def search_products(keyword):
       """Search products by name or description."""
       try:
           conn = get_db_connection()
           cursor = conn.cursor()
           cursor.execute(
               "SELECT id, name, description, price, created_at FROM products WHERE name LIKE ? OR description LIKE ?",
               (f'%{keyword}%', f'%{keyword}%')
           )
           
           products = []
           for row in cursor.fetchall():
               products.append({
                   'id': row[0],
                   'name': row[1],
                   'description': row[2],
                   'price': float(row[3]) if row[3] else None,
                   'created_at': row[4].isoformat() if row[4] else None
               })
           
           cursor.close()
           conn.close()
           
           logger.info(f"Search for '{keyword}' returned {len(products)} results")
           return jsonify(products), 200
           
       except Exception as e:
           logger.error(f"Error searching products: {str(e)}")
           return jsonify({'error': str(e)}), 500
   ```

2. ุงูุดุฑ ุงูุชุทุจูู ุงููุญุฏุซ:
   ```sh
   azd deploy
   ```

3. ุงุฎุชุจุฑ ููุทุฉ ุงูููุงูุฉ ุงูุฌุฏูุฏุฉ:
   ```sh
   curl https://app-<your-id>.azurewebsites.net/products/search/laptop
   ```
   **ูุชููุน**: ุชุนูุฏ ููุชุฌุงุช ุชุทุงุจู "laptop"

**ูุนุงููุฑ ุงููุฌุงุญ**: ุชุนูู ููุทุฉ ุงูููุงูุฉ ุงูุฌุฏูุฏุฉุ ุชุนูุฏ ูุชุงุฆุฌ ูููุชุฑุฉุ ุชุธูุฑ ูู ุณุฌูุงุช Application Insights.

---

### ุงูุชูุฑูู 3: ุฅุถุงูุฉ ุงููุฑุงูุจุฉ ูุงูุชูุจููุงุช (ูุชูุฏู)

**ุงููุฏู**: ุฅุนุฏุงุฏ ูุฑุงูุจุฉ ุงุณุชุจุงููุฉ ูุน ุชูุจููุงุช.

**ุงูุฎุทูุงุช**:
1. ุฃูุดุฆ ุชูุจูููุง ูุฃุฎุทุงุก HTTP 500:
   ```sh
   # ุงูุญุตูู ุนูู ูุนุฑูู ููุฑุฏ Application Insights
   AI_ID=$(az monitor app-insights component show \
     --app appi-<your-id> \
     --resource-group rg-<env-name> \
     --query id -o tsv)
   
   # ุฅูุดุงุก ุชูุจูู
   az monitor metrics alert create \
     --name "High-Error-Rate" \
     --resource-group rg-<env-name> \
     --scopes $AI_ID \
     --condition "count requests/failed > 5" \
     --window-size 5m \
     --evaluation-frequency 1m \
     --description "Alert when >5 failed requests in 5 minutes"
   ```

2. ูู ุจุฅุซุงุฑุฉ ุงูุชูุจูู ุจุชูููุฏ ุฃุฎุทุงุก:
   ```sh
   # ุทูุจ ููุชุฌ ุบูุฑ ููุฌูุฏ
   for i in {1..10}; do curl https://app-<your-id>.azurewebsites.net/products/999; done
   ```

3. ุชุญูู ููุง ุฅุฐุง ุชู ุชูุนูู ุงูุชูุจูู:
   - ุจูุงุจุฉ Azure โ Alerts โ Alert Rules
   - ุชุญูู ูู ุจุฑูุฏู ุงูุฅููุชุฑููู (ุฅุฐุง ุชู ุชููููู)

**ูุนุงููุฑ ุงููุฌุงุญ**: ุชู ุฅูุดุงุก ูุงุนุฏุฉ ุงูุชูุจููุ ุชููุนูู ุนูุฏ ุญุฏูุซ ุฃุฎุทุงุกุ ูุชู ุงุณุชูุงู ุงูุฅุดุนุงุฑุงุช.

---

### ุงูุชูุฑูู 4: ุชุบููุฑุงุช ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุชูุฏู)

**ุงููุฏู**: ุฅุถุงูุฉ ุฌุฏูู ุฌุฏูุฏ ูุชุนุฏูู ุงูุชุทุจูู ูุงุณุชุฎุฏุงูู.

**ุงูุฎุทูุงุช**:
1. ุงุชุตู ุจูุงุนุฏุฉ ุจูุงูุงุช SQL ุนุจุฑ ูุญุฑุฑ ุงูุงุณุชุนูุงู ูู ุจูุงุจุฉ Azure

2. ุฃูุดุฆ ุฌุฏูููุง ุฌุฏูุฏูุง `categories`:
   ```sql
   CREATE TABLE categories (
       id INT PRIMARY KEY IDENTITY(1,1),
       name NVARCHAR(50) NOT NULL,
       description NVARCHAR(200)
   );
   
   INSERT INTO categories (name, description) VALUES
   ('Electronics', 'Electronic devices and accessories'),
   ('Office Supplies', 'Office equipment and supplies');
   
   -- Add category to products table
   ALTER TABLE products ADD category_id INT;
   UPDATE products SET category_id = 1; -- Set all to Electronics
   ```

3. ุญุฏูุซ `src/web/app.py` ูุชุถููู ูุนูููุงุช ุงููุฆุฉ ูู ุงูุฑุฏูุฏ

4. ุงูุดุฑ ูุงุฎุชุจุฑ

**ูุนุงููุฑ ุงููุฌุงุญ**: ูุฌูุฏ ุงูุฌุฏูู ุงูุฌุฏูุฏุ ุนุฑุถ ุงูููุชุฌุงุช ูุนูููุงุช ุงููุฆุฉุ ููุณุชูุฑ ุงูุชุทุจูู ูู ุงูุนูู.

---

### ุงูุชูุฑูู 5: ุชูููุฐ ุงูุชุฎุฒูู ุงููุคูุช (ุฎุจูุฑ)

**ุงููุฏู**: ุฅุถุงูุฉ Azure Redis Cache ูุชุญุณูู ุงูุฃุฏุงุก.

**ุงูุฎุทูุงุช**:
1. ุฃุถู Redis Cache ุฅูู `infra/main.bicep`
2. ุญุฏูุซ `src/web/app.py` ูุชุฎุฒูู ูุชุงุฆุฌ ุงุณุชุนูุงูุงุช ุงูููุชุฌุงุช ูุคูุชูุง
3. ููุณ ุชุญุณูู ุงูุฃุฏุงุก ุจุงุณุชุฎุฏุงู Application Insights
4. ูุงุฑู ุฃููุงุช ุงูุงุณุชุฌุงุจุฉ ูุจู ูุจุนุฏ ุงูุชุฎุฒูู ุงููุคูุช

**ูุนุงููุฑ ุงููุฌุงุญ**: ุชู ูุดุฑ Redisุ ูุนูู ุงูุชุฎุฒูู ุงููุคูุชุ ุชุชุญุณู ุฃููุงุช ุงูุงุณุชุฌุงุจุฉ ุจุฃูุซุฑ ูู 50%.

**ุชูููุญ**: ุงุจุฏุฃ ุจู [ุชูุซูู Azure Cache for Redis](https://learn.microsoft.com/azure/azure-cache-for-redis/).

---

## ุงูุชูุธูู

ูุชุฌูุจ ุงูุชูุงููู ุงููุณุชูุฑุฉุ ุงุญุฐู ุฌููุน ุงูููุงุฑุฏ ุนูุฏ ุงูุงูุชูุงุก:

```sh
azd down
```

**ููุฌู ุงูุชุฃููุฏ**:
```
? Total resources to delete: 7, are you sure you want to continue? (y/N)
```

ุงูุชุจ `y` ููุชุฃููุฏ.

**โ ุงูุชุญูู ูู ุงููุฌุงุญ**: 
- ุชู ุญุฐู ุฌููุน ุงูููุงุฑุฏ ูู ุจูุงุจุฉ Azure
- ูุง ุชูุฌุฏ ุฑุณูู ูุณุชูุฑุฉ
- ูููู ุญุฐู ุงููุฌูุฏ ุงููุญูู `.azure/<env-name>`

**ุจุฏูู** (ุงูุงุญุชูุงุธ ุจุงูุจููุฉ ุงูุชุญุชูุฉุ ุญุฐู ุงูุจูุงูุงุช):
```sh
# ุงุญุฐู ูุฌููุนุฉ ุงูููุงุฑุฏ ููุท (ุงุญุชูุธ ุจุชูููู AZD)
az group delete --name rg-<env-name> --yes
```
## ุชุนุฑูู ุนูู ุงููุฒูุฏ

### ุงููุซุงุฆู ุฐุงุช ุงูุตูุฉ
- [ุชูุซูู Azure Developer CLI](https://learn.microsoft.com/azure/developer/azure-developer-cli/)
- [ุชูุซูู Azure SQL Database](https://learn.microsoft.com/azure/azure-sql/database/)
- [ุชูุซูู Azure App Service](https://learn.microsoft.com/azure/app-service/)
- [ุชูุซูู Application Insights](https://learn.microsoft.com/azure/azure-monitor/app/app-insights-overview)
- [ูุฑุฌุน ูุบุฉ Bicep](https://learn.microsoft.com/azure/azure-resource-manager/bicep/)

### ุงูุฎุทูุงุช ุงูุชุงููุฉ ูู ูุฐู ุงูุฏูุฑุฉ
- **[ูุซุงู ุชุทุจููุงุช ุงูุญุงููุงุช](../../../../examples/container-app)**: ูุดุฑ ุงูุฎุฏูุงุช ุงููุตุบุฑุฉ ุจุงุณุชุฎุฏุงู Azure Container Apps
- **[ุฏููู ุชูุงูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู](../../../../docs/ai-foundry)**: ุฅุถุงูุฉ ูุฏุฑุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุฅูู ุชุทุจููู
- **[ุฃูุถู ููุงุฑุณุงุช ุงููุดุฑ](../../docs/chapter-04-infrastructure/deployment-guide.md)**: ุฃููุงุท ูุดุฑ ูู ุงูุจูุฆุงุช ุงูุฅูุชุงุฌูุฉ

### ููุงุถูุน ูุชูุฏูุฉ
- **Managed Identity**: ุฅุฒุงูุฉ ูููุงุช ุงููุฑูุฑ ูุงุณุชุฎุฏุงู ูุตุงุฏูุฉ Azure AD
- **ููุงุท ููุงูุฉ ุฎุงุตุฉ**: ุชุฃููู ุงุชุตุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฏุงุฎู ุดุจูุฉ ุงูุชุฑุงุถูุฉ
- **ุฏูุฌ CI/CD**: ุฃุชูุชุฉ ุนูููุงุช ุงููุดุฑ ุจุงุณุชุฎุฏุงู GitHub Actions ุฃู Azure DevOps
- **ุจูุฆุงุช ูุชุนุฏุฏุฉ**: ุฅุนุฏุงุฏ ุจูุฆุงุช ุงูุชุทููุฑ ูุงูุงุฎุชุจุงุฑ ูุงูุฅูุชุงุฌ
- **ุชุฑุญูู ููุงุนุฏ ุงูุจูุงูุงุช**: ุงุณุชุฎุฏู Alembic ุฃู Entity Framework ูุฅุฏุงุฑุฉ ุฅุตุฏุงุฑุงุช ุงููุฎุทุท

### ุงูููุงุฑูุฉ ูุน ุงูููุฌ ุงูุฃุฎุฑู

**AZD ููุงุจู ููุงูุจ ARM**:
- โ AZD: ูุณุชูู ุชุฌุฑูุฏู ุฃุนููุ ุฃูุงูุฑ ุฃุจุณุท
- โ๏ธ ARM: ุฃูุซุฑ ุชูุตููุงูุ ุชุญูู ุฃุฏู

**AZD ููุงุจู Terraform**:
- โ AZD: ูุฏูุฌ ุฃุตูุงู ูุน Azureุ ูุชูุงูู ูุน ุฎุฏูุงุช Azure
- โ๏ธ Terraform: ูุฏุนู ุชุนุฏุฏ ุงูุณุญุจ ุงูุณุญุงุจูุฉุ ูุธุงู ุจูุฆู ุฃูุจุฑ

**AZD ููุงุจู ุจูุงุจุฉ Azure**:
- โ AZD: ูุงุจู ููุชูุฑุงุฑุ ุฎุงุถุน ููุชุญูู ุจุงูุฅุตุฏุงุฑุ ูุงุจู ููุฃุชูุชุฉ
- โ๏ธ ุงูุจูุงุจุฉ: ููุฑุงุช ูุฏููุฉุ ุตุนุจ ุฅุนุงุฏุฉ ุงูุฅูุชุงุฌ

**ููุฑ ูู AZD ูู**: Docker Compose ูุฃุฌู Azureโุชููุฆุฉ ูุจุณุทุฉ ูููุดุฑ ุงููุนูุฏ.

---

## ุงูุฃุณุฆูุฉ ุงููุชูุฑุฑุฉ

**ุณ: ูู ูููููู ุงุณุชุฎุฏุงู ูุบุฉ ุจุฑูุฌุฉ ูุฎุชููุฉุ**  
ุฌ: ูุนู! ุงุณุชุจุฏู `src/web/` ุจู Node.jsุ C#ุ Goุ ุฃู ุฃู ูุบุฉ. ุญุฏูุซ `azure.yaml` ูBicep ููููุง ูุฐูู.

**ุณ: ููู ุฃุถูู ุงููุฒูุฏ ูู ููุงุนุฏ ุงูุจูุงูุงุชุ**  
ุฌ: ุฃุถู ูุญุฏุฉ SQL Database ุฃุฎุฑู ูู `infra/main.bicep` ุฃู ุงุณุชุฎุฏู PostgreSQL/MySQL ูู ุฎุฏูุงุช ููุงุนุฏ ุจูุงูุงุช Azure.

**ุณ: ูู ูููููู ุงุณุชุฎุฏุงู ูุฐุง ููุฅูุชุงุฌุ**  
ุฌ: ูุฐุง ููุทุฉ ุจุฏุงูุฉ. ููุฅูุชุงุฌุ ุฃุถู: managed identityุ ุงูููุงุท ุงูููุงุฆูุฉ ุงูุฎุงุตุฉุ ุงูุชูุฑุงุฑุ ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทูุ WAFุ ููุฑุงูุจุฉ ูุญุณูุฉ.

**ุณ: ูุงุฐุง ูู ุฃุฑุฏุช ุงุณุชุฎุฏุงู ุงูุญุงููุงุช ุจุฏูุงู ูู ูุดุฑ ุงูููุฏุ**  
ุฌ: ุงุทูุน ุนูู [ูุซุงู ุชุทุจููุงุช ุงูุญุงููุงุช](../../../../examples/container-app) ุงูุฐู ูุณุชุฎุฏู ุญุงููุงุช Docker ูู ุฌููุน ุงูุฃุฌุฒุงุก.

**ุณ: ููู ุฃุชุตู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุฌูุงุฒู ุงููุญููุ**  
ุฌ: ุฃุถู ุนููุงู IP ุงูุฎุงุต ุจู ุฅูู ุฌุฏุงุฑ ุญูุงูุฉ SQL Server:
```sh
az sql server firewall-rule create \
  --resource-group rg-<env-name> \
  --server sql-<unique-id> \
  --name AllowMyIP \
  --start-ip-address <your-ip> \
  --end-ip-address <your-ip>
```

**ุณ: ูู ูููููู ุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุจูุงูุงุช ููุฌูุฏุฉ ุจุฏููุง ูู ุฅูุดุงุก ูุงุญุฏุฉ ุฌุฏูุฏุฉุ**  
ุฌ: ูุนูุ ุนุฏูู `infra/main.bicep` ููุฅุดุงุฑุฉ ุฅูู SQL Server ููุฌูุฏ ููู ุจุชุญุฏูุซ ูุนููุงุช ุณูุณูุฉ ุงูุงุชุตุงู.

---

> **ููุงุญุธุฉ:** ููุถุญ ูุฐุง ุงููุซุงู ุฃูุถู ุงูููุงุฑุณุงุช ููุดุฑ ุชุทุจูู ููุจ ูุน ูุงุนุฏุฉ ุจูุงูุงุช ุจุงุณุชุฎุฏุงู AZD. ูุชุถูู ููุฏูุง ุนููููุงุ ูุชูุซูููุง ุดุงููุงูุ ูุชูุงุฑูู ุนูููุฉ ูุชุนุฒูุฒ ุงูุชุนูู. ููุดุฑ ุงูุฅูุชุงุฌุ ุฑุงุฌุน ูุชุทูุจุงุช ุงูุฃูุงูุ ูุงูุชุญุฌููุ ูุงูุงูุชุซุงูุ ูุงููุชุทูุจุงุช ุงููุชุนููุฉ ุจุงูุชูููุฉ ุงูุฎุงุตุฉ ุจููุธูุชู.

**๐ ุชููู ุงูุฏูุฑุฉ:**
- โ ุงูุณุงุจู: [ูุซุงู ุชุทุจููุงุช ุงูุญุงููุงุช](../../../../examples/container-app)
- โ ุงูุชุงูู: [ุฏููู ุชูุงูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู](../../../../docs/ai-foundry)
- ๐ [ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ููุฏูุฑุฉ](../../README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
ุฅุฎูุงุก ุงููุณุคูููุฉ:
ุชูุช ุชุฑุฌูุฉ ูุฐุง ุงููุณุชูุฏ ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงูุชุฑุฌูุฉ ุงูุขููุฉ [Co-op Translator](https://github.com/Azure/co-op-translator). ุจูููุง ูุณุนู ุฅูู ุงูุฏูุฉุ ูุฑุฌู ุงูุนูู ุจุฃู ุงูุชุฑุฌูุงุช ุงูุขููุฉ ูุฏ ุชุญุชูู ุนูู ุฃุฎุทุงุก ุฃู ูุนูููุงุช ุบูุฑ ุฏูููุฉ. ูุฌุจ ุงุนุชุจุงุฑ ุงููุณุชูุฏ ุงูุฃุตูู ุจูุบุชู ุงูุฃุตููุฉ ุงููุตุฏุฑ ุงููุฑุฌุนู ูุงูููุซูู ุจู. ูููุนูููุงุช ุงูุญุณุงุณุฉ ุฃู ุงูุญุฑุฌุฉุ ูููุตุญ ุจุงูุงุณุชุนุงูุฉ ุจุชุฑุฌูุฉ ุจุดุฑูุฉ ูุญุชุฑูุฉ. ูุญู ุบูุฑ ูุณุคูููู ุนู ุฃู ุณูุก ููู ุฃู ุชูุณูุฑ ุฎุงุทุฆ ูุงุชุฌ ุนู ุงุณุชุฎุฏุงู ูุฐู ุงูุชุฑุฌูุฉ.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->