# ูุดุฑ ูุงุนุฏุฉ ุจูุงูุงุช Microsoft SQL ูุชุทุจูู ููุจ ุจุงุณุชุฎุฏุงู AZD

โฑ๏ธ **ุงูููุช ุงูููุฏุฑ**: 20-30 ุฏูููุฉ | ๐ฐ **ุงูุชูููุฉ ุงูููุฏุฑุฉ**: ~15-25 ุฏููุงุฑ/ุดูุฑ | โญ **ุงููุณุชูู**: ูุชูุณุท

ูุฐุง **ูุซุงู ูุงูู ูุนููู** ููุถุญ ููููุฉ ุงุณุชุฎุฏุงู [Azure Developer CLI (azd)](https://learn.microsoft.com/azure/developer/azure-developer-cli/) ููุดุฑ ุชุทุจูู ููุจ Python Flask ูุน ูุงุนุฏุฉ ุจูุงูุงุช Microsoft SQL ุนูู Azure. ุฌููุน ุงูุฃููุงุฏ ูุถููุฉ ููุฎุชุจุฑุฉโูุง ุญุงุฌุฉ ูุงุนุชูุงุฏูุงุช ุฎุงุฑุฌูุฉ.

## ูุง ุณุชุชุนููู

ุนูุฏ ุฅููุงู ูุฐุง ุงููุซุงูุ ุณุชุชุนูู:
- ูุดุฑ ุชุทุจูู ูุชุนุฏุฏ ุงูุทุจูุงุช (ุชุทุจูู ููุจ + ูุงุนุฏุฉ ุจูุงูุงุช) ุจุงุณุชุฎุฏุงู ุงูุจููุฉ ุงูุชุญุชูุฉ ูููุฏ
- ุชูููู ุงุชุตุงูุงุช ูุงุนุฏุฉ ุจูุงูุงุช ุขููุฉ ุฏูู ุชุถููู ุงูุฃุณุฑุงุฑ ูู ุงูููุฏ
- ูุฑุงูุจุฉ ุตุญุฉ ุงูุชุทุจูู ุจุงุณุชุฎุฏุงู Application Insights
- ุฅุฏุงุฑุฉ ููุงุฑุฏ Azure ุจููุงุกุฉ ุจุงุณุชุฎุฏุงู AZD CLI
- ุงุชุจุงุน ุฃูุถู ููุงุฑุณุงุช Azure ููุฃูุงูุ ุชุญุณูู ุงูุชูููุฉุ ูุงููุฑุงูุจุฉ

## ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุณููุงุฑูู
- **ุชุทุจูู ููุจ**: ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช REST ุจุงุณุชุฎุฏุงู Python Flask ูุน ุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ูุงุนุฏุฉ ุจูุงูุงุช Azure SQL ูุน ุจูุงูุงุช ุชุฌุฑูุจูุฉ
- **ุงูุจููุฉ ุงูุชุญุชูุฉ**: ูุชู ุฅูุดุงุคูุง ุจุงุณุชุฎุฏุงู Bicep (ููุงูุจ ูุนูุงุฑูุฉ ููุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู)
- **ุงููุดุฑ**: ูุคุชูุช ุจุงููุงูู ุจุงุณุชุฎุฏุงู ุฃูุงูุฑ `azd`
- **ุงููุฑุงูุจุฉ**: Application Insights ูุชุณุฌูู ุงูุจูุงูุงุช ูุงูููุงุณุงุช

## ุงููุชุทูุจุงุช ุงููุณุจูุฉ

### ุงูุฃุฏูุงุช ุงููุทููุจุฉ

ูุจู ุงูุจุฏุกุ ุชุฃูุฏ ูู ุชุซุจูุช ุงูุฃุฏูุงุช ุงูุชุงููุฉ:

1. **[Azure CLI](https://learn.microsoft.com/cli/azure/install-azure-cli)** (ุงูุฅุตุฏุงุฑ 2.50.0 ุฃู ุฃุนูู)
   ```sh
   az --version
   # ุงูุฅุตุฏุงุฑ ุงููุชููุน: azure-cli 2.50.0 ุฃู ุฃุนูู
   ```

2. **[Azure Developer CLI (azd)](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd)** (ุงูุฅุตุฏุงุฑ 1.0.0 ุฃู ุฃุนูู)
   ```sh
   azd version
   # ุงูุฅุตุฏุงุฑ ุงููุชููุน: azd ุงูุฅุตุฏุงุฑ 1.0.0 ุฃู ุฃุนูู
   ```

3. **[Python 3.8+](https://www.python.org/downloads/)** (ููุชุทููุฑ ุงููุญูู)
   ```sh
   python --version
   # ุงูุฅุตุฏุงุฑ ุงููุชููุน: ุจุงูุซูู 3.8 ุฃู ุฃุนูู
   ```

4. **[Docker](https://www.docker.com/get-started)** (ุงุฎุชูุงุฑูุ ููุชุทููุฑ ุงููุญูู ุจุงุณุชุฎุฏุงู ุงูุญุงููุงุช)
   ```sh
   docker --version
   # ุงูุฅุตุฏุงุฑ ุงููุชููุน: Docker ุงูุฅุตุฏุงุฑ 20.10 ุฃู ุฃุนูู
   ```

### ูุชุทูุจุงุช Azure

- ุงุดุชุฑุงู Azure ูุดุท ([ุฅูุดุงุก ุญุณุงุจ ูุฌุงูู](https://azure.microsoft.com/free/))
- ุฃุฐููุงุช ูุฅูุดุงุก ุงูููุงุฑุฏ ูู ุงุดุชุฑุงูู
- ุฏูุฑ **Owner** ุฃู **Contributor** ุนูู ุงูุงุดุชุฑุงู ุฃู ูุฌููุนุฉ ุงูููุงุฑุฏ

### ุงููุนุฑูุฉ ุงููุณุจูุฉ

ูุฐุง ูุซุงู **ูุชูุณุท ุงููุณุชูู**. ูุฌุจ ุฃู ุชููู ุนูู ุฏุฑุงูุฉ ุจู:
- ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ ูุณุทุฑ ุงูุฃูุงูุฑ
- ููุงููู ุงูุณุญุงุจุฉ ุงูุฃุณุงุณูุฉ (ุงูููุงุฑุฏุ ูุฌููุนุงุช ุงูููุงุฑุฏ)
- ููู ุฃุณุงุณู ูุชุทุจููุงุช ุงูููุจ ูููุงุนุฏ ุงูุจูุงูุงุช

**ุฌุฏูุฏ ุนูู AZDุ** ุงุจุฏุฃ ุจุฏููู [ุงูุจุฏุก ุงูุณุฑูุน](../../docs/getting-started/azd-basics.md) ุฃููุงู.

## ุงูุจููุฉ ุงููุนูุงุฑูุฉ

ูููู ูุฐุง ุงููุซุงู ุจูุดุฑ ุจููุฉ ูู ุทุจูุชูู ูุน ุชุทุจูู ููุจ ููุงุนุฏุฉ ุจูุงูุงุช SQL:

```
โโโโโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโโโโโโโโโ
โ  User Browser   โโโโโโโโโบโ   Azure Web App      โ
โโโโโโโโโโโโโโโโโโโ        โ   (Flask API)        โ
                           โ   - /health          โ
                           โ   - /products        โ
                           โโโโโโโโโโโโฌโโโโโโโโโโโโ
                                      โ
                                      โ Secure Connection
                                      โ (Encrypted)
                                      โ
                           โโโโโโโโโโโโผโโโโโโโโโโโโ
                           โ Azure SQL Database   โ
                           โ   - Products table   โ
                           โ   - Sample data      โ
                           โโโโโโโโโโโโโโโโโโโโโโโโ
```

**ูุดุฑ ุงูููุงุฑุฏ:**
- **ูุฌููุนุฉ ุงูููุงุฑุฏ**: ุญุงููุฉ ูุฌููุน ุงูููุงุฑุฏ
- **ุฎุทุฉ ุฎุฏูุฉ ุงูุชุทุจููุงุช**: ุงุณุชุถุงูุฉ ุชุนุชูุฏ ุนูู Linux (ุงููุณุชูู B1 ูุชูููุฑ ุงูุชูููุฉ)
- **ุชุทุจูู ููุจ**: ููุช ุชุดุบูู Python 3.11 ูุน ุชุทุจูู Flask
- **ุฎุงุฏู SQL**: ุฎุงุฏู ูุงุนุฏุฉ ุจูุงูุงุช ููุฏุงุฑ ูุน TLS 1.2 ูุญุฏ ุฃุฏูู
- **ูุงุนุฏุฉ ุจูุงูุงุช SQL**: ุงููุณุชูู ุงูุฃุณุงุณู (2 ุฌูุฌุงุจุงูุชุ ููุงุณุจ ููุชุทููุฑ/ุงูุงุฎุชุจุงุฑ)
- **Application Insights**: ุงููุฑุงูุจุฉ ูุชุณุฌูู ุงูุจูุงูุงุช
- **Log Analytics Workspace**: ุชุฎุฒูู ูุฑูุฒู ููุณุฌูุงุช

**ุชุดุจูู**: ููุฑ ูู ูุฐุง ูุฃูู ูุทุนู (ุชุทุจูู ููุจ) ูุน ูุฑูุฒุฑ (ูุงุนุฏุฉ ุจูุงูุงุช). ูุทูุจ ุงูุนููุงุก ูู ุงููุงุฆูุฉ (ููุงุท ููุงูุฉ API)ุ ูุงููุทุจุฎ (ุชุทุจูู Flask) ูุณุชุฑุฌุน ุงูููููุงุช (ุงูุจูุงูุงุช) ูู ุงููุฑูุฒุฑ. ูุฏูุฑ ุงููุทุนู (Application Insights) ูุชุชุจุน ูู ูุง ูุญุฏุซ.

## ูููู ุงููุฌูุฏุงุช

ุฌููุน ุงููููุงุช ูุถููุฉ ูู ูุฐุง ุงููุซุงูโูุง ุญุงุฌุฉ ูุงุนุชูุงุฏูุงุช ุฎุงุฑุฌูุฉ:

```
examples/database-app/
โ
โโโ README.md                    # This file
โโโ azure.yaml                   # AZD configuration file
โโโ .env.sample                  # Sample environment variables
โโโ .gitignore                   # Git ignore patterns
โ
โโโ infra/                       # Infrastructure as Code (Bicep)
โ   โโโ main.bicep              # Main orchestration template
โ   โโโ abbreviations.json      # Azure naming conventions
โ   โโโ resources/              # Modular resource templates
โ       โโโ sql-server.bicep    # SQL Server configuration
โ       โโโ sql-database.bicep  # Database configuration
โ       โโโ app-service-plan.bicep  # Hosting plan
โ       โโโ app-insights.bicep  # Monitoring setup
โ       โโโ web-app.bicep       # Web application
โ
โโโ src/
    โโโ web/                    # Application source code
        โโโ app.py              # Flask REST API
        โโโ requirements.txt    # Python dependencies
        โโโ Dockerfile          # Container definition
```

**ูุธููุฉ ูู ููู:**
- **azure.yaml**: ูุญุฏุฏ ูู AZD ูุง ุงูุฐู ูุฌุจ ูุดุฑู ูุฃูู
- **infra/main.bicep**: ููุธู ุฌููุน ููุงุฑุฏ Azure
- **infra/resources/*.bicep**: ุชุนุฑููุงุช ุงูููุงุฑุฏ ุงููุฑุฏูุฉ (ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู)
- **src/web/app.py**: ุชุทุจูู Flask ูุน ููุทู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **requirements.txt**: ุงุนุชูุงุฏูุงุช ุญุฒู Python
- **Dockerfile**: ุชุนูููุงุช ุงูุญุงููุฉ ูููุดุฑ

## ุงูุจุฏุก ุงูุณุฑูุน (ุฎุทูุฉ ุจุฎุทูุฉ)

### ุงูุฎุทูุฉ 1: ุงุณุชูุณุงุฎ ูุงูุชูู

```sh
git clone https://github.com/microsoft/AZD-for-beginners.git
cd AZD-for-beginners/examples/database-app
```

**โ ุชุญูู ุงููุฌุงุญ**: ุชุฃูุฏ ูู ุฑุคูุฉ `azure.yaml` ููุฌูุฏ `infra/`:
```sh
ls
# ุงููุชููุน: README.mdุ azure.yamlุ infra/ุ src/
```

### ุงูุฎุทูุฉ 2: ุงููุตุงุฏูุฉ ูุน Azure

```sh
azd auth login
```

ุณููุชุญ ูุฐุง ูุชุตูุญู ูููุตุงุฏูุฉ ูุน Azure. ูู ุจุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ุงุนุชูุงุฏ Azure ุงูุฎุงุตุฉ ุจู.

**โ ุชุญูู ุงููุฌุงุญ**: ูุฌุจ ุฃู ุชุฑู:
```
Logged in to Azure.
```

### ุงูุฎุทูุฉ 3: ุชููุฆุฉ ุงูุจูุฆุฉ

```sh
azd init
```

**ูุง ูุญุฏุซ**: ูููู AZD ุจุฅูุดุงุก ุชูููู ูุญูู ููุดุฑู.

**ุงููุทุงูุจุงุช ุงูุชู ุณุชุฑุงูุง**:
- **ุงุณู ุงูุจูุฆุฉ**: ุฃุฏุฎู ุงุณููุง ูุตูุฑูุง (ูุซู `dev`ุ `myapp`)
- **ุงุดุชุฑุงู Azure**: ุงุฎุชุฑ ุงุดุชุฑุงูู ูู ุงููุงุฆูุฉ
- **ูููุน Azure**: ุงุฎุชุฑ ููุทูุฉ (ูุซู `eastus`ุ `westeurope`)

**โ ุชุญูู ุงููุฌุงุญ**: ูุฌุจ ุฃู ุชุฑู:
```
SUCCESS: New project initialized!
```

### ุงูุฎุทูุฉ 4: ุชูููุฑ ููุงุฑุฏ Azure

```sh
azd provision
```

**ูุง ูุญุฏุซ**: ูููู AZD ุจูุดุฑ ุฌููุน ุงูุจููุฉ ุงูุชุญุชูุฉ (ูุณุชุบุฑู 5-8 ุฏูุงุฆู):
1. ุฅูุดุงุก ูุฌููุนุฉ ุงูููุงุฑุฏ
2. ุฅูุดุงุก ุฎุงุฏู SQL ููุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุฅูุดุงุก ุฎุทุฉ ุฎุฏูุฉ ุงูุชุทุจููุงุช
4. ุฅูุดุงุก ุชุทุจูู ููุจ
5. ุฅูุดุงุก Application Insights
6. ุชูููู ุงูุดุจูุงุช ูุงูุฃูุงู

**ุณููุทูุจ ููู**:
- **ุงุณู ูุณุชุฎุฏู SQL admin**: ุฃุฏุฎู ุงุณู ูุณุชุฎุฏู (ูุซู `sqladmin`)
- **ูููุฉ ูุฑูุฑ SQL admin**: ุฃุฏุฎู ูููุฉ ูุฑูุฑ ูููุฉ (ุงุญูุธูุง!)

**โ ุชุญูู ุงููุฌุงุญ**: ูุฌุจ ุฃู ุชุฑู:
```
SUCCESS: Your application was provisioned in Azure in X minutes Y seconds.
You can view the resources created under the resource group rg-<env-name> in Azure Portal:
https://portal.azure.com/#@/resource/subscriptions/.../resourceGroups/rg-<env-name>
```

**โฑ๏ธ ุงูููุช**: 5-8 ุฏูุงุฆู

### ุงูุฎุทูุฉ 5: ูุดุฑ ุงูุชุทุจูู

```sh
azd deploy
```

**ูุง ูุญุฏุซ**: ูููู AZD ุจุจูุงุก ููุดุฑ ุชุทุจูู Flask ุงูุฎุงุต ุจู:
1. ุญุฒู ุชุทุจูู Python
2. ุจูุงุก ุญุงููุฉ Docker
3. ุฏูุนูุง ุฅูู ุชุทุจูู ููุจ Azure
4. ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุจูุงูุงุช ุชุฌุฑูุจูุฉ
5. ุจุฏุก ุชุดุบูู ุงูุชุทุจูู

**โ ุชุญูู ุงููุฌุงุญ**: ูุฌุจ ุฃู ุชุฑู:
```
SUCCESS: Your application was deployed to Azure in X minutes Y seconds.
You can view the resources created under the resource group rg-<env-name> in Azure Portal:
https://portal.azure.com/#@/resource/subscriptions/.../resourceGroups/rg-<env-name>
```

**โฑ๏ธ ุงูููุช**: 3-5 ุฏูุงุฆู

### ุงูุฎุทูุฉ 6: ุชุตูุญ ุงูุชุทุจูู

```sh
azd browse
```

ุณููุชุญ ูุฐุง ุชุทุจูู ุงูููุจ ุงูููุดูุฑ ูู ุงููุชุตูุญ ุนูู `https://app-<unique-id>.azurewebsites.net`

**โ ุชุญูู ุงููุฌุงุญ**: ูุฌุจ ุฃู ุชุฑู ูุฎุฑุฌุงุช JSON:
```json
{
  "message": "Welcome to the Database App API",
  "endpoints": {
    "/": "This help message",
    "/health": "Health check endpoint",
    "/products": "List all products",
    "/products/<id>": "Get product by ID"
  }
}
```

### ุงูุฎุทูุฉ 7: ุงุฎุชุจุงุฑ ููุงุท ููุงูุฉ API

**ุงูุชุญูู ูู ุงูุตุญุฉ** (ุงูุชุญูู ูู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช):
```sh
curl https://app-<your-id>.azurewebsites.net/health
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุชููุนุฉ**:
```json
{
  "status": "healthy",
  "database": "connected"
}
```

**ูุงุฆูุฉ ุงูููุชุฌุงุช** (ุจูุงูุงุช ุชุฌุฑูุจูุฉ):
```sh
curl https://app-<your-id>.azurewebsites.net/products
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุชููุนุฉ**:
```json
[
  {
    "id": 1,
    "name": "Laptop",
    "description": "High-performance laptop",
    "price": 1299.99,
    "created_at": "2025-11-19T10:30:00"
  },
  ...
]
```

**ุงูุญุตูู ุนูู ููุชุฌ ูุงุญุฏ**:
```sh
curl https://app-<your-id>.azurewebsites.net/products/1
```

**โ ุชุญูู ุงููุฌุงุญ**: ุฌููุน ุงูููุงุท ุงูููุงุฆูุฉ ุชุนูุฏ ุจูุงูุงุช JSON ุจุฏูู ุฃุฎุทุงุก.

---

**๐ ุชูุงูููุง!** ููุฏ ููุช ุจูุฌุงุญ ุจูุดุฑ ุชุทุจูู ููุจ ูุน ูุงุนุฏุฉ ุจูุงูุงุช ุนูู Azure ุจุงุณุชุฎุฏุงู AZD.

## ูุธุฑุฉ ูุนููุฉ ุนูู ุงูุชูููู

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ูุชู ุฅุฏุงุฑุฉ ุงูุฃุณุฑุงุฑ ุจุฃูุงู ุนุจุฑ ุชูููู Azure App Serviceโ**ูุง ูุชู ุชุถููููุง ุฃุจุฏูุง ูู ุงูููุฏ ุงููุตุฏุฑู**.

**ูุชู ุชูููููุง ุชููุงุฆููุง ุจูุงุณุทุฉ AZD**:
- `SQL_CONNECTION_STRING`: ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน ุจูุงูุงุช ุงุนุชูุงุฏ ูุดูุฑุฉ
- `APPLICATIONINSIGHTS_CONNECTION_STRING`: ููุทุฉ ููุงูุฉ ููุงุณุงุช ุงููุฑุงูุจุฉ
- `SCM_DO_BUILD_DURING_DEPLOYMENT`: ุชูููู ุชุซุจูุช ุงูุงุนุชูุงุฏูุงุช ุชููุงุฆููุง

**ุฃูู ูุชู ุชุฎุฒูู ุงูุฃุณุฑุงุฑ**:
1. ุฃุซูุงุก `azd provision`ุ ุชูุฏู ุจูุงูุงุช ุงุนุชูุงุฏ SQL ุนุจุฑ ูุทุงูุจุงุช ุขููุฉ
2. ูููู AZD ุจุชุฎุฒูููุง ูู ููู `.azure/<env-name>/.env` ุงููุญูู (ูุณุชุซูู ูู Git)
3. ูููู AZD ุจุญูููุง ูู ุชูููู Azure App Service (ูุดูุฑ ุฃุซูุงุก ุงูุฑุงุญุฉ)
4. ููุฑุฃ ุงูุชุทุจูู ูุฐู ุงูุจูุงูุงุช ุนุจุฑ `os.getenv()` ุฃุซูุงุก ุงูุชุดุบูู

### ุงูุชุทููุฑ ุงููุญูู

ููุงุฎุชุจุงุฑ ุงููุญููุ ูู ุจุฅูุดุงุก ููู `.env` ูู ุงูุนููุฉ:

```sh
cp .env.sample .env
# ูู ุจุชุญุฑูุฑ .env ุจุงุณุชุฎุฏุงู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญููุฉ ุงูุฎุงุตุฉ ุจู
```

**ุณูุฑ ุนูู ุงูุชุทููุฑ ุงููุญูู**:
```sh
# ุชุซุจูุช ุงูุชุจุนูุงุช
cd src/web
pip install -r requirements.txt

# ุชุนููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
export SQL_CONNECTION_STRING="your-local-connection-string"

# ุชุดุบูู ุงูุชุทุจูู
python app.py
```

**ุงุฎุชุจุฑ ูุญูููุง**:
```sh
curl http://localhost:8000/health
# ูุชููุน: {"status": "healthy", "database": "connected"}
```

### ุงูุจููุฉ ุงูุชุญุชูุฉ ูููุฏ

ุฌููุน ููุงุฑุฏ Azure ูุนุฑูุฉ ูู **ููุงูุจ Bicep** (`infra/` ูุฌูุฏ):

- **ุชุตููู ูุนูุงุฑู**: ููู ููุน ููุฑุฏ ููู ุฎุงุต ุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- **ูุนููุงุช**: ุชุฎุตูุต SKUsุ ุงูููุงุทูุ ุงุชูุงููุงุช ุงูุชุณููุฉ
- **ุฃูุถู ุงูููุงุฑุณุงุช**: ูุชุจุน ูุนุงููุฑ ุงูุชุณููุฉ ุงูุงูุชุฑุงุถูุฉ ูุงูุฃูุงู ูู Azure
- **ุชุญุช ุงูุชุญูู ุจุงูุฅุตุฏุงุฑ**: ูุชู ุชุชุจุน ุชุบููุฑุงุช ุงูุจููุฉ ุงูุชุญุชูุฉ ูู Git

**ูุซุงู ุนูู ุงูุชุฎุตูุต**:
ูุชุบููุฑ ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูู ุจุชุญุฑูุฑ `infra/resources/sql-database.bicep`:
```bicep
sku: {
  name: 'Standard'  // Changed from 'Basic'
  tier: 'Standard'
  capacity: 10
}
```

## ุฃูุถู ููุงุฑุณุงุช ุงูุฃูุงู

ูุชุจุน ูุฐุง ุงููุซุงู ุฃูุถู ููุงุฑุณุงุช ุงูุฃูุงู ูู Azure:

### 1. **ูุง ุฃุณุฑุงุฑ ูู ุงูููุฏ ุงููุตุฏุฑู**
- โ ูุชู ุชุฎุฒูู ุจูุงูุงุช ุงูุงุนุชูุงุฏ ูู ุชูููู Azure App Service (ูุดูุฑ)
- โ ูููุงุช `.env` ูุณุชุซูุงุฉ ูู Git ุนุจุฑ `.gitignore`
- โ ูุชู ุชูุฑูุฑ ุงูุฃุณุฑุงุฑ ุนุจุฑ ูุนููุงุช ุขููุฉ ุฃุซูุงุก ุงูุชูููุฑ

### 2. **ุงุชุตุงูุงุช ูุดูุฑุฉ**
- โ TLS 1.2 ูุญุฏ ุฃุฏูู ูุฎุงุฏู SQL
- โ ูุฑุถ HTTPS ููุท ูุชุทุจูู ุงูููุจ
- โ ุชุณุชุฎุฏู ุงุชุตุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุงุช ูุดูุฑุฉ

### 3. **ุฃูุงู ุงูุดุจูุฉ**
- โ ุชู ุชูููู ุฌุฏุงุฑ ุญูุงูุฉ ุฎุงุฏู SQL ููุณูุงุญ ุจุฎุฏูุงุช Azure ููุท
- โ ุชู ุชูููุฏ ุงููุตูู ุฅูู ุงูุดุจูุฉ ุงูุนุงูุฉ (ูููู ุชุฃูููู ุฃูุซุฑ ุจุงุณุชุฎุฏุงู ููุงุท ุงูููุงูุฉ ุงูุฎุงุตุฉ)
- โ ุชู ุชุนุทูู FTPS ุนูู ุชุทุจูู ุงูููุจ

### 4. **ุงููุตุงุฏูุฉ ูุงูุชูููุถ**
- โ๏ธ **ุงูุญุงูู**: ูุตุงุฏูุฉ SQL (ุงุณู ูุณุชุฎุฏู/ูููุฉ ูุฑูุฑ)
- โ **ุชูุตูุฉ ููุฅูุชุงุฌ**: ุงุณุชุฎุฏุงู Azure Managed Identity ูููุตุงุฏูุฉ ุจุฏูู ูููุฉ ูุฑูุฑ

**ููุชุฑููุฉ ุฅูู Managed Identity** (ููุฅูุชุงุฌ):
1. ุชูููู ุงููููุฉ ุงูููุฏุงุฑุฉ ุนูู ุชุทุจูู ุงูููุจ
2. ููุญ ุงููููุฉ ุฃุฐููุงุช SQL
3. ุชุญุฏูุซ ุณูุณูุฉ ุงูุงุชุตุงู ูุงุณุชุฎุฏุงู ุงููููุฉ ุงูููุฏุงุฑุฉ
4. ุฅุฒุงูุฉ ุงููุตุงุฏูุฉ ุงููุณุชูุฏุฉ ุฅูู ูููุฉ ุงููุฑูุฑ

### 5. **ุงูุชุฏููู ูุงูุงูุชุซุงู**
- โ ูููู Application Insights ุจุชุณุฌูู ุฌููุน ุงูุทูุจุงุช ูุงูุฃุฎุทุงุก
- โ ุชู ุชูููู ุชุฏููู ูุงุนุฏุฉ ุจูุงูุงุช SQL (ูููู ุชููููู ููุงูุชุซุงู)
- โ ุชู ูุถุน ุนูุงูุงุช ุนูู ุฌููุน ุงูููุงุฑุฏ ููุญูู

**ูุงุฆูุฉ ุงูุชุญูู ุงูุฃูููุฉ ูุจู ุงูุฅูุชุงุฌ**:
- [ ] ุชูููู Azure Defender ูู SQL
- [ ] ุชูููู ููุงุท ุงูููุงูุฉ ุงูุฎุงุตุฉ ููุงุนุฏุฉ ุจูุงูุงุช SQL
- [ ] ุชูููู ุฌุฏุงุฑ ุญูุงูุฉ ุชุทุจูู ุงูููุจ (WAF)
- [ ] ุชูููุฐ Azure Key Vault ูุชุฏููุฑ ุงูุฃุณุฑุงุฑ
- [ ] ุชูููู ูุตุงุฏูุฉ Azure AD
- [ ] ุชูููู ุชุณุฌูู ุงูุชุดุฎูุต ูุฌููุน ุงูููุงุฑุฏ

## ุชุญุณูู ุงูุชูููุฉ

**ุงูุชูุงููู ุงูุดูุฑูุฉ ุงูููุฏุฑุฉ** (ุงุนุชุจุงุฑูุง ูู ููููุจุฑ 2025):

| ุงูููุฑุฏ | SKU/ุงููุณุชูู | ุงูุชูููุฉ ุงูููุฏุฑุฉ |
|--------|-------------|-----------------|
| ุฎุทุฉ ุฎุฏูุฉ ุงูุชุทุจููุงุช | B1 (ุฃุณุงุณู) | ~13 ุฏููุงุฑ/ุดูุฑ |
| ูุงุนุฏุฉ ุจูุงูุงุช SQL | ุฃุณุงุณู (2 ุฌูุฌุงุจุงูุช) | ~5 ุฏููุงุฑ/ุดูุฑ |
| Application Insights | ุงูุฏูุน ุญุณุจ ุงูุงุณุชุฎุฏุงู | ~2 ุฏููุงุฑ/ุดูุฑ (ุญุฑูุฉ ูุฑูุฑ ููุฎูุถุฉ) |
| **ุงูุฅุฌูุงูู** | | **~20 ุฏููุงุฑ/ุดูุฑ** |

**๐ก ูุตุงุฆุญ ูุชูููุฑ ุงูุชูููุฉ**:

1. **ุงุณุชุฎุฏุงู ุงููุณุชูู ุงููุฌุงูู ููุชุนูู**:
   - ุฎุฏูุฉ ุงูุชุทุจููุงุช: ุงููุณุชูู F1 (ูุฌุงููุ ุณุงุนุงุช ูุญุฏูุฏุฉ)
   - ูุงุนุฏุฉ ุจูุงูุงุช SQL: ุงุณุชุฎุฏุงู ุฎุงุฏู ูุงุนุฏุฉ ุจูุงูุงุช Azure SQL ุจุฏูู ุฎุงุฏู
   - Application Insights: 5 ุฌูุฌุงุจุงูุช/ุดูุฑ ูุฌุงููุฉ ููุฅุฏุฎุงู

2. **ุฅููุงู ุงูููุงุฑุฏ ุนูุฏ ุนุฏู ุงูุงุณุชุฎุฏุงู**:
   ```sh
   # ุฃููู ุชุทุจูู ุงูููุจ (ูุง ุชุฒุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชูุฑุถ ุฑุณูููุง)
   az webapp stop --name <app-name> --resource-group <rg-name>
   
   # ุฃุนุฏ ุงูุชุดุบูู ุนูุฏ ุงูุญุงุฌุฉ
   az webapp start --name <app-name> --resource-group <rg-name>
   ```

3. **ุญุฐู ูู ุดูุก ุจุนุฏ ุงูุงุฎุชุจุงุฑ**:
   ```sh
   azd down
   ```
   ูุฐุง ูุฒูู ุฌููุน ุงูููุงุฑุฏ ููููู ุงูุชูุงููู.

4. **SKUs ููุชุทููุฑ ููุงุจู ุงูุฅูุชุงุฌ**:
   - **ุงูุชุทููุฑ**: ุงููุณุชูู ุงูุฃุณุงุณู (ุงููุณุชุฎุฏู ูู ูุฐุง ุงููุซุงู)
   - **ุงูุฅูุชุงุฌ**: ุงููุณุชูู ุงูููุงุณู/ุงููุชููุฒ ูุน ุงูุชูุฑุงุฑ

**ูุฑุงูุจุฉ ุงูุชูููุฉ**:
- ุนุฑุถ ุงูุชูุงููู ูู [ุฅุฏุงุฑุฉ ุชูุงููู Azure](https://portal.azure.com/#view/Microsoft_Azure_CostManagement)
- ุฅุนุฏุงุฏ ุชูุจููุงุช ุงูุชูููุฉ ูุชุฌูุจ ุงูููุงุฌุขุช
- ูุถุน ุนูุงูุงุช ุนูู ุฌููุน ุงูููุงุฑุฏ ุจู `azd-env-name` ููุชุชุจุน

**ุจุฏูู ุงููุณุชูู ุงููุฌุงูู**:
ูุฃุบุฑุงุถ ุงูุชุนููุ ููููู ุชุนุฏูู `infra/resources/app-service-plan.bicep`:
```bicep
sku: {
  name: 'F1'  // Free tier
  tier: 'Free'
}
```
**ููุงุญุธุฉ**: ูุญุชูู ุงููุณุชูู ุงููุฌุงูู ุนูู ูููุฏ (60 ุฏูููุฉ/ููู CPUุ ูุง ููุฌุฏ ุชุดุบูู ุฏุงุฆู).

## ุงููุฑุงูุจุฉ ูุงูููุงุญุธุฉ

### ุชูุงูู Application Insights

ูุชุถูู ูุฐุง ุงููุซุงู **Application Insights** ูููุฑุงูุจุฉ ุงูุดุงููุฉ:

**ูุง ูุชู ูุฑุงูุจุชู**:
- โ ุทูุจุงุช HTTP (ุฒูู ุงูุงุณุชุฌุงุจุฉุ ุฑููุฒ ุงูุญุงูุฉุ ููุงุท ุงูููุงูุฉ)
- โ ุฃุฎุทุงุก ุงูุชุทุจูู ูุงูุงุณุชุซูุงุกุงุช
- โ ุชุณุฌูู ูุฎุตุต ูู ุชุทุจูู Flask
- โ ุตุญุฉ ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ููุงููุณ ุงูุฃุฏุงุก (CPUุ ุงูุฐุงูุฑุฉ)

**ุงููุตูู ุฅูู Application Insights**:
1. ุงูุชุญ [ุจูุงุจุฉ Azure](https://portal.azure.com)
2. ุงูุชูู ุฅูู ูุฌููุนุฉ ุงูููุงุฑุฏ ุงูุฎุงุตุฉ ุจู (`rg-<env-name>`)
3. ุงููุฑ ุนูู ููุฑุฏ Application Insights (`appi-<unique-id>`)

**ุงุณุชุนูุงูุงุช ูููุฏุฉ** (Application Insights โ ุงูุณุฌูุงุช):

**ุนุฑุถ ุฌููุน ุงูุทูุจุงุช**:
```kusto
requests
| where timestamp > ago(1h)
| order by timestamp desc
| project timestamp, name, url, resultCode, duration
```

**ุงูุจุญุซ ุนู ุงูุฃุฎุทุงุก**:
```kusto
exceptions
| where timestamp > ago(24h)
| order by timestamp desc
| project timestamp, type, outerMessage, operation_Name
```

**ุงูุชุญูู ูู ููุทุฉ ุงูููุงูุฉ ุงูุตุญูุฉ**:
```kusto
requests
| where name contains "health"
| summarize count() by resultCode, bin(timestamp, 1h)
```

### ุชุฏููู ูุงุนุฏุฉ ุจูุงูุงุช SQL

**ุชู ุชูููู ุชุฏููู ูุงุนุฏุฉ ุจูุงูุงุช SQL** ูุชุชุจุน:
- ุฃููุงุท ุงููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุญุงููุงุช ุชุณุฌูู ุงูุฏุฎูู ุงููุงุดูุฉ
- ุชุบููุฑุงุช ุงููุฎุทุท
- ุงููุตูู ุฅูู ุงูุจูุงูุงุช (ููุงูุชุซุงู)

**ุงููุตูู ุฅูู ุณุฌูุงุช ุงูุชุฏููู**:
1. ุจูุงุจุฉ Azure โ ูุงุนุฏุฉ ุจูุงูุงุช SQL โ ุงูุชุฏููู
2. ุนุฑุถ ุงูุณุฌูุงุช ูู ูุณุงุญุฉ ุนูู Log Analytics

### ุงููุฑุงูุจุฉ ูู ุงูููุช ุงููุนูู

**ุนุฑุถ ุงูููุงููุณ ุงููุจุงุดุฑุฉ**:
1. Application Insights โ ุงูููุงููุณ ุงููุจุงุดุฑุฉ
2. ุนุฑุถ ุงูุทูุจุงุชุ ุงูุฅุฎูุงูุงุชุ ูุงูุฃุฏุงุก ูู ุงูููุช ุงููุนูู

**ุฅุนุฏุงุฏ ุงูุชูุจููุงุช**:
ุฅูุดุงุก ุชูุจููุงุช ููุฃุญุฏุงุซ ุงูุญุฑุฌุฉ:
- ุฃุฎุทุงุก HTTP 500 > 5 ูู 5 ุฏูุงุฆู
- ูุดู ุงุชุตุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฃููุงุช ุงุณุชุฌุงุจุฉ ุนุงููุฉ (>2 ุซุงููุฉ)

**ูุซุงู ุนูู ุฅูุดุงุก ุชูุจูู**:
```sh
az monitor metrics alert create \
  --name "High-Response-Time" \
  --resource-group <rg-name> \
  --scopes <app-insights-resource-id> \
  --condition "avg requests/duration > 2000" \
  --description "Alert when response time exceeds 2 seconds"
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง

### ุงููุดููุงุช ุงูุดุงุฆุนุฉ ูุงูุญููู

#### 1. ูุดู `azd provision` ูุน ุฑุณุงูุฉ "ุงููููุน ุบูุฑ ูุชุงุญ"

**ุงูุฃุนุฑุงุถ**:
```
Error: The subscription is not registered for the resource type 'components' in the location 'centralus'.
```

**ุงูุญู**:
ุงุฎุชุฑ ููุทูุฉ Azure ูุฎุชููุฉ ุฃู ูู ุจุชุณุฌูู ูููุฑ ุงูููุงุฑุฏ:
```sh
az provider register --namespace Microsoft.Insights
```

#### 2. ูุดู ุงูุงุชุตุงู ุจู SQL ุฃุซูุงุก ุงููุดุฑ

**ุงูุฃุนุฑุงุถ**:
```
pyodbc.OperationalError: ('08001', '[08001] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider...')
```

**ุงูุญู**:
- ุชุญูู ูู ุฃู ุฌุฏุงุฑ ุงูุญูุงูุฉ ุงูุฎุงุต ุจู SQL Server ูุณูุญ ุจุฎุฏูุงุช Azure (ูุชู ุชููููู ุชููุงุฆููุง)
- ุชุฃูุฏ ูู ุฅุฏุฎุงู ูููุฉ ูุฑูุฑ ูุณุคูู SQL ุจุดูู ุตุญูุญ ุฃุซูุงุก `azd provision`
- ุชุฃูุฏ ูู ุฃู SQL Server ูุฏ ุชู ุชูููุฑู ุจุงููุงูู (ูุฏ ูุณุชุบุฑู 2-3 ุฏูุงุฆู)

**ุงูุชุญูู ูู ุงูุงุชุตุงู**:
```sh
# ูู ุจูุงุจุฉ Azureุ ุงูุชูู ุฅูู ูุงุนุฏุฉ ุจูุงูุงุช SQL โ ูุญุฑุฑ ุงูุงุณุชุนูุงู
# ุญุงูู ุงูุงุชุตุงู ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ุงุนุชูุงุฏู
```

#### 3. ูุนุฑุถ ุชุทุจูู ุงูููุจ "ุฎุทุฃ ูู ุงูุชุทุจูู"

**ุงูุฃุนุฑุงุถ**:
ูุนุฑุถ ุงููุชุตูุญ ุตูุญุฉ ุฎุทุฃ ุนุงูุฉ.

**ุงูุญู**:
ุชุญูู ูู ุณุฌูุงุช ุงูุชุทุจูู:
```sh
# ุนุฑุถ ุงูุณุฌูุงุช ุงูุฃุฎูุฑุฉ
az webapp log tail --name <app-name> --resource-group <rg-name>
```

**ุงูุฃุณุจุงุจ ุงูุดุงุฆุนุฉ**:
- ููุต ูุชุบูุฑุงุช ุงูุจูุฆุฉ (ุชุญูู ูู App Service โ ุงูุฅุนุฏุงุฏุงุช)
- ูุดู ุชุซุจูุช ุญุฒู Python (ุชุญูู ูู ุณุฌูุงุช ุงููุดุฑ)
- ุฎุทุฃ ูู ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุชุญูู ูู ุงุชุตุงู SQL)

#### 4. ูุดู `azd deploy` ูุน ุฑุณุงูุฉ "ุฎุทุฃ ูู ุงูุจูุงุก"

**ุงูุฃุนุฑุงุถ**:
```
Error: Failed to build project
```

**ุงูุญู**:
- ุชุฃูุฏ ูู ุฃู `requirements.txt` ุฎุงูู ูู ุงูุฃุฎุทุงุก ุงููุญููุฉ
- ุชุญูู ูู ุฃู Python 3.11 ูุญุฏุฏ ูู `infra/resources/web-app.bicep`
- ุชุฃูุฏ ูู ุฃู Dockerfile ูุญุชูู ุนูู ุตูุฑุฉ ุงูุฃุณุงุณ ุงูุตุญูุญุฉ

**ุชุตุญูุญ ูุญูู**:
```sh
cd src/web
docker build -t test-app .
docker run -p 8000:8000 test-app
```

#### 5. "ุบูุฑ ูุตุฑุญ" ุนูุฏ ุชุดุบูู ุฃูุงูุฑ AZD

**ุงูุฃุนุฑุงุถ**:
```
ERROR: (Unauthorized) The client '<id>' with object id '<id>' does not have authorization
```

**ุงูุญู**:
ุฃุนุฏ ุงููุตุงุฏูุฉ ูุน Azure:
```sh
azd auth login
az login
```

ุชุญูู ูู ุฃู ูุฏูู ุงูุฃุฐููุงุช ุงูุตุญูุญุฉ (ุฏูุฑ ุงููุณุงูู) ุนูู ุงูุงุดุชุฑุงู.

#### 6. ุชูุงููู ูุงุนุฏุฉ ุจูุงูุงุช ูุฑุชูุนุฉ

**ุงูุฃุนุฑุงุถ**:
ูุงุชูุฑุฉ Azure ุบูุฑ ูุชููุนุฉ.

**ุงูุญู**:
- ุชุญูู ููุง ุฅุฐุง ููุช ูุฏ ูุณูุช ุชุดุบูู `azd down` ุจุนุฏ ุงูุงุฎุชุจุงุฑ
- ุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุจูุงูุงุช SQL ุชุณุชุฎุฏู ุงูุทุจูุฉ ุงูุฃุณุงุณูุฉ (ูููุณ ุงูุทุจูุฉ ุงููููุฒุฉ)
- ุฑุงุฌุน ุงูุชูุงููู ูู ุฅุฏุงุฑุฉ ุชูุงููู Azure
- ูู ุจุฅุนุฏุงุฏ ุชูุจููุงุช ุงูุชูุงููู

### ุงูุญุตูู ุนูู ุงููุณุงุนุฏุฉ

**ุนุฑุถ ุฌููุน ูุชุบูุฑุงุช ุจูุฆุฉ AZD**:
```sh
azd env get-values
```

**ุงูุชุญูู ูู ุญุงูุฉ ุงููุดุฑ**:
```sh
az webapp show --name <app-name> --resource-group <rg-name> --query state
```

**ุงููุตูู ุฅูู ุณุฌูุงุช ุงูุชุทุจูู**:
```sh
az webapp log download --name <app-name> --resource-group <rg-name> --log-file app-logs.zip
```

**ุชุญุชุงุฌ ุฅูู ูุฒูุฏ ูู ุงููุณุงุนุฏุฉุ**
- [ุฏููู ุงุณุชูุดุงู ุฃุฎุทุงุก AZD](../../docs/troubleshooting/common-issues.md)
- [ุงุณุชูุดุงู ุฃุฎุทุงุก Azure App Service](https://learn.microsoft.com/azure/app-service/troubleshoot-diagnostic-logs)
- [ุงุณุชูุดุงู ุฃุฎุทุงุก Azure SQL](https://learn.microsoft.com/azure/azure-sql/database/troubleshoot-common-errors-issues)

## ุชูุงุฑูู ุนูููุฉ

### ุงูุชูุฑูู 1: ุงูุชุญูู ูู ุงููุดุฑ ุงูุฎุงุต ุจู (ูุจุชุฏุฆ)

**ุงููุฏู**: ุชุฃูุฏ ูู ูุดุฑ ุฌููุน ุงูููุงุฑุฏ ูุฃู ุงูุชุทุจูู ูุนูู.

**ุงูุฎุทูุงุช**:
1. ูู ุจุณุฑุฏ ุฌููุน ุงูููุงุฑุฏ ูู ูุฌููุนุฉ ุงูููุงุฑุฏ ุงูุฎุงุตุฉ ุจู:
   ```sh
   az resource list --resource-group rg-<env-name> --output table
   ```
   **ุงููุชููุน**: 6-7 ููุงุฑุฏ (ุชุทุจูู ููุจุ SQL Serverุ ูุงุนุฏุฉ ุจูุงูุงุช SQLุ ุฎุทุฉ ุฎุฏูุฉ ุงูุชุทุจููุงุชุ Application Insightsุ Log Analytics)

2. ุงุฎุชุจุฑ ุฌููุน ููุงุท ููุงูุฉ API:
   ```sh
   curl https://app-<your-id>.azurewebsites.net/
   curl https://app-<your-id>.azurewebsites.net/health
   curl https://app-<your-id>.azurewebsites.net/products
   curl https://app-<your-id>.azurewebsites.net/products/1
   ```
   **ุงููุชููุน**: ุฌููุนูุง ุชุนูุฏ JSON ุตุงูุญูุง ุจุฏูู ุฃุฎุทุงุก

3. ุชุญูู ูู Application Insights:
   - ุงูุชูู ุฅูู Application Insights ูู ุจูุงุจุฉ Azure
   - ุงูุชูู ุฅูู "ุงูููุงุณุงุช ุงูุญูุฉ"
   - ูู ุจุชุญุฏูุซ ูุชุตูุญู ุนูู ุชุทุจูู ุงูููุจ
   **ุงููุชููุน**: ุฑุคูุฉ ุงูุทูุจุงุช ุชุธูุฑ ูู ุงูููุช ุงููุนูู

**ูุนุงููุฑ ุงููุฌุงุญ**: ูุฌูุฏ ุฌููุน ุงูููุงุฑุฏ (6-7)ุ ุฌููุน ููุงุท ุงูููุงูุฉ ุชุนูุฏ ุงูุจูุงูุงุชุ ุชุธูุฑ ุงูุฃูุดุทุฉ ูู ุงูููุงุณุงุช ุงูุญูุฉ.

---

### ุงูุชูุฑูู 2: ุฅุถุงูุฉ ููุทุฉ ููุงูุฉ API ุฌุฏูุฏุฉ (ูุชูุณุท)

**ุงููุฏู**: ูู ุจุชูุณูุน ุชุทุจูู Flask ุจุฅุถุงูุฉ ููุทุฉ ููุงูุฉ ุฌุฏูุฏุฉ.

**ุงูููุฏ ุงููุจุฏุฆู**: ููุงุท ุงูููุงูุฉ ุงูุญุงููุฉ ูู `src/web/app.py`

**ุงูุฎุทูุงุช**:
1. ูู ุจุชุญุฑูุฑ `src/web/app.py` ูุฃุถู ููุทุฉ ููุงูุฉ ุฌุฏูุฏุฉ ุจุนุฏ ูุธููุฉ `get_product()`:
   ```python
   @app.route('/products/search/<keyword>')
   def search_products(keyword):
       """Search products by name or description."""
       try:
           conn = get_db_connection()
           cursor = conn.cursor()
           cursor.execute(
               "SELECT id, name, description, price, created_at FROM products WHERE name LIKE ? OR description LIKE ?",
               (f'%{keyword}%', f'%{keyword}%')
           )
           
           products = []
           for row in cursor.fetchall():
               products.append({
                   'id': row[0],
                   'name': row[1],
                   'description': row[2],
                   'price': float(row[3]) if row[3] else None,
                   'created_at': row[4].isoformat() if row[4] else None
               })
           
           cursor.close()
           conn.close()
           
           logger.info(f"Search for '{keyword}' returned {len(products)} results")
           return jsonify(products), 200
           
       except Exception as e:
           logger.error(f"Error searching products: {str(e)}")
           return jsonify({'error': str(e)}), 500
   ```

2. ูู ุจูุดุฑ ุงูุชุทุจูู ุงููุญุฏุซ:
   ```sh
   azd deploy
   ```

3. ุงุฎุชุจุฑ ููุทุฉ ุงูููุงูุฉ ุงูุฌุฏูุฏุฉ:
   ```sh
   curl https://app-<your-id>.azurewebsites.net/products/search/laptop
   ```
   **ุงููุชููุน**: ุชุนูุฏ ุงูููุชุฌุงุช ุงูุชู ุชุทุงุจู "laptop"

**ูุนุงููุฑ ุงููุฌุงุญ**: ุชุนูู ููุทุฉ ุงูููุงูุฉ ุงูุฌุฏูุฏุฉุ ุชุนูุฏ ุงููุชุงุฆุฌ ุงููููุชุฑุฉุ ุชุธูุฑ ูู ุณุฌูุงุช Application Insights.

---

### ุงูุชูุฑูู 3: ุฅุถุงูุฉ ูุฑุงูุจุฉ ูุชูุจููุงุช (ูุชูุฏู)

**ุงููุฏู**: ุฅุนุฏุงุฏ ูุฑุงูุจุฉ ุงุณุชุจุงููุฉ ูุน ุงูุชูุจููุงุช.

**ุงูุฎุทูุงุช**:
1. ูู ุจุฅูุดุงุก ุชูุจูู ูุฃุฎุทุงุก HTTP 500:
   ```sh
   # ุงุญุตู ุนูู ูุนุฑู ููุฑุฏ ุชุทุจูู Insights
   AI_ID=$(az monitor app-insights component show \
     --app appi-<your-id> \
     --resource-group rg-<env-name> \
     --query id -o tsv)
   
   # ุฅูุดุงุก ุชูุจูู
   az monitor metrics alert create \
     --name "High-Error-Rate" \
     --resource-group rg-<env-name> \
     --scopes $AI_ID \
     --condition "count requests/failed > 5" \
     --window-size 5m \
     --evaluation-frequency 1m \
     --description "Alert when >5 failed requests in 5 minutes"
   ```

2. ูู ุจุชูุนูู ุงูุชูุจูู ุนู ุทุฑูู ุงูุชุณุจุจ ูู ุฃุฎุทุงุก:
   ```sh
   # ุทูุจ ููุชุฌ ุบูุฑ ููุฌูุฏ
   for i in {1..10}; do curl https://app-<your-id>.azurewebsites.net/products/999; done
   ```

3. ุชุญูู ููุง ุฅุฐุง ุชู ุชุดุบูู ุงูุชูุจูู:
   - ุจูุงุจุฉ Azure โ ุงูุชูุจููุงุช โ ููุงุนุฏ ุงูุชูุจูู
   - ุชุญูู ูู ุจุฑูุฏู ุงูุฅููุชุฑููู (ุฅุฐุง ุชู ุชููููู)

**ูุนุงููุฑ ุงููุฌุงุญ**: ุชู ุฅูุดุงุก ูุงุนุฏุฉ ุงูุชูุจููุ ูุชู ุชุดุบูููุง ุนูุฏ ุงูุฃุฎุทุงุกุ ูุชู ุงุณุชูุงู ุงูุฅุดุนุงุฑุงุช.

---

### ุงูุชูุฑูู 4: ุชุบููุฑุงุช ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุชูุฏู)

**ุงููุฏู**: ุฅุถุงูุฉ ุฌุฏูู ุฌุฏูุฏ ูุชุนุฏูู ุงูุชุทุจูู ูุงุณุชุฎุฏุงูู.

**ุงูุฎุทูุงุช**:
1. ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุจูุงูุงุช SQL ุนุจุฑ ูุญุฑุฑ ุงุณุชุนูุงู ุจูุงุจุฉ Azure

2. ุฅูุดุงุก ุฌุฏูู ุฌุฏูุฏ `categories`:
   ```sql
   CREATE TABLE categories (
       id INT PRIMARY KEY IDENTITY(1,1),
       name NVARCHAR(50) NOT NULL,
       description NVARCHAR(200)
   );
   
   INSERT INTO categories (name, description) VALUES
   ('Electronics', 'Electronic devices and accessories'),
   ('Office Supplies', 'Office equipment and supplies');
   
   -- Add category to products table
   ALTER TABLE products ADD category_id INT;
   UPDATE products SET category_id = 1; -- Set all to Electronics
   ```

3. ุชุญุฏูุซ `src/web/app.py` ูุชุถููู ูุนูููุงุช ุงููุฆุฉ ูู ุงูุฑุฏูุฏ

4. ุงููุดุฑ ูุงูุงุฎุชุจุงุฑ

**ูุนุงููุฑ ุงููุฌุงุญ**: ูุฌูุฏ ุงูุฌุฏูู ุงูุฌุฏูุฏุ ุนุฑุถ ุงูููุชุฌุงุช ูุนูููุงุช ุงููุฆุฉุ ุงุณุชูุฑุงุฑ ุนูู ุงูุชุทุจูู.

---

### ุงูุชูุฑูู 5: ุชูููุฐ ุงูุชุฎุฒูู ุงููุคูุช (ุฎุจูุฑ)

**ุงููุฏู**: ุฅุถุงูุฉ Azure Redis Cache ูุชุญุณูู ุงูุฃุฏุงุก.

**ุงูุฎุทูุงุช**:
1. ุฃุถู Redis Cache ุฅูู `infra/main.bicep`
2. ูู ุจุชุญุฏูุซ `src/web/app.py` ูุชุฎุฒูู ุงุณุชุนูุงูุงุช ุงูููุชุฌุงุช ูุคูุชูุง
3. ููุงุณ ุชุญุณูู ุงูุฃุฏุงุก ุจุงุณุชุฎุฏุงู Application Insights
4. ููุงุฑูุฉ ุฃููุงุช ุงูุงุณุชุฌุงุจุฉ ูุจู/ุจุนุฏ ุงูุชุฎุฒูู ุงููุคูุช

**ูุนุงููุฑ ุงููุฌุงุญ**: ุชู ูุดุฑ Redisุ ูุนูู ุงูุชุฎุฒูู ุงููุคูุชุ ุชุญุณู ุฃููุงุช ุงูุงุณุชุฌุงุจุฉ ุจุฃูุซุฑ ูู 50%.

**ุชูููุญ**: ุงุจุฏุฃ ุจู [ูุซุงุฆู Azure Cache for Redis](https://learn.microsoft.com/azure/azure-cache-for-redis/).

---

## ุงูุชูุธูู

ูุชุฌูุจ ุงูุชูุงููู ุงููุณุชูุฑุฉุ ูู ุจุญุฐู ุฌููุน ุงูููุงุฑุฏ ุนูุฏ ุงูุงูุชูุงุก:

```sh
azd down
```

**ููุฌู ุงูุชุฃููุฏ**:
```
? Total resources to delete: 7, are you sure you want to continue? (y/N)
```

ุงูุชุจ `y` ููุชุฃููุฏ.

**โ ุชุญูู ูู ุงููุฌุงุญ**: 
- ุชู ุญุฐู ุฌููุน ุงูููุงุฑุฏ ูู ุจูุงุจุฉ Azure
- ูุง ุชูุฌุฏ ุชูุงููู ูุณุชูุฑุฉ
- ูููู ุญุฐู ุงููุฌูุฏ ุงููุญูู `.azure/<env-name>`

**ุจุฏูู** (ุงุญุชูุธ ุจุงูุจููุฉ ุงูุชุญุชูุฉุ ุงุญุฐู ุงูุจูุงูุงุช):
```sh
# ุงุญุฐู ูุฌููุนุฉ ุงูููุงุฑุฏ ููุท (ุงุญุชูุธ ุจุชูููู AZD)
az group delete --name rg-<env-name> --yes
```
## ุชุนุฑู ุนูู ุงููุฒูุฏ

### ุงููุซุงุฆู ุฐุงุช ุงูุตูุฉ
- [ูุซุงุฆู Azure Developer CLI](https://learn.microsoft.com/azure/developer/azure-developer-cli/)
- [ูุซุงุฆู ูุงุนุฏุฉ ุจูุงูุงุช Azure SQL](https://learn.microsoft.com/azure/azure-sql/database/)
- [ูุซุงุฆู Azure App Service](https://learn.microsoft.com/azure/app-service/)
- [ูุซุงุฆู Application Insights](https://learn.microsoft.com/azure/azure-monitor/app/app-insights-overview)
- [ูุฑุฌุน ูุบุฉ Bicep](https://learn.microsoft.com/azure/azure-resource-manager/bicep/)

### ุงูุฎุทูุงุช ุงูุชุงููุฉ ูู ูุฐู ุงูุฏูุฑุฉ
- **[ูุซุงู ุชุทุจููุงุช ุงูุญุงููุงุช](../../../../examples/container-app)**: ูุดุฑ ุงูุฎุฏูุงุช ุงููุตุบุฑุฉ ุจุงุณุชุฎุฏุงู Azure Container Apps
- **[ุฏููู ุชูุงูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู](../../../../docs/ai-foundry)**: ุฅุถุงูุฉ ูุฏุฑุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุฅูู ุชุทุจููู
- **[ุฃูุถู ููุงุฑุณุงุช ุงููุดุฑ](../../docs/deployment/deployment-guide.md)**: ุฃููุงุท ุงููุดุฑ ููุฅูุชุงุฌ

### ููุงุถูุน ูุชูุฏูุฉ
- **ุงููููุฉ ุงูููุฏุงุฑุฉ**: ุฅุฒุงูุฉ ูููุงุช ุงููุฑูุฑ ูุงุณุชุฎุฏุงู ูุตุงุฏูุฉ Azure AD
- **ุงูููุงุท ุงูููุงุฆูุฉ ุงูุฎุงุตุฉ**: ุชุฃููู ุงุชุตุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฏุงุฎู ุดุจูุฉ ุงูุชุฑุงุถูุฉ
- **ุชูุงูู CI/CD**: ุฃุชูุชุฉ ุงููุดุฑ ุจุงุณุชุฎุฏุงู GitHub Actions ุฃู Azure DevOps
- **ุงูุจูุฆุงุช ุงููุชุนุฏุฏุฉ**: ุฅุนุฏุงุฏ ุจูุฆุงุช ุงูุชุทููุฑุ ุงูุงุฎุชุจุงุฑุ ูุงูุฅูุชุงุฌ
- **ุชุฑุญูู ููุงุนุฏ ุงูุจูุงูุงุช**: ุงุณุชุฎุฏุงู Alembic ุฃู Entity Framework ูุฅุตุฏุงุฑ ุงููุฎุทุทุงุช

### ููุงุฑูุฉ ูุน ุทุฑู ุฃุฎุฑู

**AZD ููุงุจู ููุงูุจ ARM**:
- โ AZD: ุชุฌุฑูุฏ ุนุงูู ุงููุณุชููุ ุฃูุงูุฑ ุฃุจุณุท
- โ๏ธ ARM: ุฃูุซุฑ ุชูุตููุงูุ ุชุญูู ุฏููู

**AZD ููุงุจู Terraform**:
- โ AZD: ุฃุตูู ูู Azureุ ูุชูุงูู ูุน ุฎุฏูุงุช Azure
- โ๏ธ Terraform: ุฏุนู ูุชุนุฏุฏ ุงูุณุญุงุจุงุชุ ูุธุงู ุจูุฆู ุฃูุจุฑ

**AZD ููุงุจู ุจูุงุจุฉ Azure**:
- โ AZD: ูุงุจู ููุชูุฑุงุฑุ ุฎุงุถุน ููุชุญูู ุจุงูุฅุตุฏุงุฑุ ูุงุจู ููุฃุชูุชุฉ
- โ๏ธ ุงูุจูุงุจุฉ: ููุฑุงุช ูุฏููุฉุ ุตุนูุจุฉ ูู ุงูุชูุฑุงุฑ

**ููุฑ ูู AZD ูู**: Docker Compose ูู Azureโุชูููู ูุจุณุท ูููุดุฑุงุช ุงููุนูุฏุฉ.

---

## ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

**ุณ: ูู ูููููู ุงุณุชุฎุฏุงู ูุบุฉ ุจุฑูุฌุฉ ูุฎุชููุฉุ**  
ุฌ: ูุนู! ุงุณุชุจุฏู `src/web/` ุจู Node.jsุ C#ุ Goุ ุฃู ุฃู ูุบุฉ. ูู ุจุชุญุฏูุซ `azure.yaml` ูBicep ููููุง ูุฐูู.

**ุณ: ููู ุฃุถูู ุงููุฒูุฏ ูู ููุงุนุฏ ุงูุจูุงูุงุชุ**  
ุฌ: ุฃุถู ูุญุฏุฉ ูุงุนุฏุฉ ุจูุงูุงุช SQL ุฃุฎุฑู ูู `infra/main.bicep` ุฃู ุงุณุชุฎุฏู PostgreSQL/MySQL ูู ุฎุฏูุงุช ูุงุนุฏุฉ ุจูุงูุงุช Azure.

**ุณ: ูู ูููููู ุงุณุชุฎุฏุงู ูุฐุง ููุฅูุชุงุฌุ**  
ุฌ: ูุฐุง ููุทุฉ ุงูุทูุงู. ููุฅูุชุงุฌุ ุฃุถู: ุงููููุฉ ุงูููุฏุงุฑุฉุ ุงูููุงุท ุงูููุงุฆูุฉ ุงูุฎุงุตุฉุ ุงูุชูุฑุงุฑุ ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทูุ WAFุ ูุงููุฑุงูุจุฉ ุงููุญุณูุฉ.

**ุณ: ูุงุฐุง ูู ุฃุฑุฏุช ุงุณุชุฎุฏุงู ุงูุญุงููุงุช ุจุฏูุงู ูู ูุดุฑ ุงูููุฏุ**  
ุฌ: ุชุญูู ูู [ูุซุงู ุชุทุจููุงุช ุงูุญุงููุงุช](../../../../examples/container-app) ุงูุฐู ูุณุชุฎุฏู ุญุงููุงุช Docker ุจุงููุงูู.

**ุณ: ููู ุฃุชุตู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุฌูุงุฒู ุงููุญููุ**  
ุฌ: ุฃุถู ุนููุงู IP ุงูุฎุงุต ุจู ุฅูู ุฌุฏุงุฑ ุงูุญูุงูุฉ ุงูุฎุงุต ุจู SQL Server:
```sh
az sql server firewall-rule create \
  --resource-group rg-<env-name> \
  --server sql-<unique-id> \
  --name AllowMyIP \
  --start-ip-address <your-ip> \
  --end-ip-address <your-ip>
```

**ุณ: ูู ูููููู ุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุจูุงูุงุช ููุฌูุฏุฉ ุจุฏูุงู ูู ุฅูุดุงุก ูุงุญุฏุฉ ุฌุฏูุฏุฉุ**  
ุฌ: ูุนูุ ูู ุจุชุนุฏูู `infra/main.bicep` ููุฅุดุงุฑุฉ ุฅูู SQL Server ููุฌูุฏ ููู ุจุชุญุฏูุซ ูุนููุงุช ุณูุณูุฉ ุงูุงุชุตุงู.

---

> **ููุงุญุธุฉ:** ููุถุญ ูุฐุง ุงููุซุงู ุฃูุถู ุงูููุงุฑุณุงุช ููุดุฑ ุชุทุจูู ููุจ ูุน ูุงุนุฏุฉ ุจูุงูุงุช ุจุงุณุชุฎุฏุงู AZD. ูุชุถูู ููุฏูุง ุนููููุงุ ูุซุงุฆู ุดุงููุฉุ ูุชูุงุฑูู ุนูููุฉ ูุชุนุฒูุฒ ุงูุชุนูู. ููุฒูุฏ ูู ุงููุดุฑุงุช ุงูุฅูุชุงุฌูุฉุ ุฑุงุฌุน ูุชุทูุจุงุช ุงูุฃูุงูุ ุงูุชูุณุนุ ุงูุงูุชุซุงูุ ูุงูุชูุงููู ุงูุฎุงุตุฉ ุจูุคุณุณุชู.

**๐ ุชููู ุงูุฏูุฑุฉ:**
- โ ุงูุณุงุจู: [ูุซุงู ุชุทุจููุงุช ุงูุญุงููุงุช](../../../../examples/container-app)
- โ ุงูุชุงูู: [ุฏููู ุชูุงูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู](../../../../docs/ai-foundry)
- ๐ [ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ููุฏูุฑุฉ](../../README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**ุฅุฎูุงุก ุงููุณุคูููุฉ**:  
ุชู ุชุฑุฌูุฉ ูุฐุง ุงููุณุชูุฏ ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงูุชุฑุฌูุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู [Co-op Translator](https://github.com/Azure/co-op-translator). ุจูููุง ูุณุนู ูุชุญููู ุงูุฏูุฉุ ูุฑุฌู ุงูุนูู ุฃู ุงูุชุฑุฌูุงุช ุงูุขููุฉ ูุฏ ุชุญุชูู ุนูู ุฃุฎุทุงุก ุฃู ุนุฏู ุฏูุฉ. ูุฌุจ ุงุนุชุจุงุฑ ุงููุณุชูุฏ ุงูุฃุตูู ุจูุบุชู ุงูุฃุตููุฉ ุงููุตุฏุฑ ุงูุฑุณูู. ููุญุตูู ุนูู ูุนูููุงุช ุญุงุณูุฉุ ูููุตู ุจุงูุชุฑุฌูุฉ ุงูุจุดุฑูุฉ ุงูุงุญุชุฑุงููุฉ. ูุญู ุบูุฑ ูุณุคูููู ุนู ุฃู ุณูุก ููู ุฃู ุชูุณูุฑุงุช ุฎุงุทุฆุฉ ุชูุดุฃ ุนู ุงุณุชุฎุฏุงู ูุฐู ุงูุชุฑุฌูุฉ.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->