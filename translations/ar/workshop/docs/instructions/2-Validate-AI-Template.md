<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "7816c6ec50c694c331e7c6092371be4d",
  "translation_date": "2025-09-24T12:10:59+00:00",
  "source_file": "workshop/docs/instructions/2-Validate-AI-Template.md",
  "language_code": "ar"
}
-->
# 2. التحقق من صحة القالب

!!! tip "بنهاية هذه الوحدة ستكون قادرًا على"

- [ ] تحليل بنية الحلول الذكية
- [ ] فهم سير عمل نشر AZD
- [ ] استخدام GitHub Copilot للحصول على مساعدة في استخدام AZD
- [ ] **المختبر 2:** نشر والتحقق من صحة قالب وكلاء الذكاء الاصطناعي

---

## 1. المقدمة

[Azure Developer CLI](https://learn.microsoft.com/en-us/azure/developer/azure-developer-cli/) أو `azd` هو أداة مفتوحة المصدر تعمل على تبسيط سير عمل المطور عند بناء ونشر التطبيقات على Azure.

[قوالب AZD](https://learn.microsoft.com/azure/developer/azure-developer-cli/azd-templates) هي مستودعات قياسية تتضمن كود تطبيقات تجريبية، أصول _البنية التحتية ككود_، وملفات تكوين `azd` لتوفير بنية حلول متكاملة. يصبح توفير البنية التحتية بسيطًا مثل تنفيذ أمر `azd provision` - بينما يسمح استخدام `azd up` بتوفير البنية التحتية **ونشر التطبيق** في خطوة واحدة!

نتيجة لذلك، يمكن أن يكون بدء عملية تطوير التطبيق بسيطًا مثل العثور على _قالب AZD Starter_ المناسب الذي يقترب من احتياجات التطبيق والبنية التحتية - ثم تخصيص المستودع ليناسب متطلبات السيناريو الخاص بك.

قبل أن نبدأ، دعنا نتأكد من تثبيت Azure Developer CLI لديك.

1. افتح نافذة VS Code واكتب هذا الأمر:

      ```bash title="" linenums="0"
      azd version
      ```

1. يجب أن ترى شيئًا مثل هذا!

      ```bash title="" linenums="0"
      azd version 1.19.0 (commit b3d68cea969b2bfbaa7b7fa289424428edb93e97)
      ```

**أنت الآن جاهز لاختيار ونشر قالب باستخدام azd**

---

## 2. اختيار القالب

تأتي منصة Azure AI Foundry مع [مجموعة من قوالب AZD الموصى بها](https://learn.microsoft.com/en-us/azure/ai-foundry/how-to/develop/ai-template-get-started) التي تغطي سيناريوهات الحلول الشائعة مثل _أتمتة سير العمل متعدد الوكلاء_ و_معالجة المحتوى متعدد الوسائط_. يمكنك أيضًا اكتشاف هذه القوالب من خلال زيارة بوابة Azure AI Foundry.

1. قم بزيارة [https://ai.azure.com/templates](https://ai.azure.com/templates)
1. قم بتسجيل الدخول إلى بوابة Azure AI Foundry عندما يُطلب منك ذلك - سترى شيئًا مثل هذا.

![Pick](../../../../../translated_images/01-pick-template.60d2d5fff5ebc374d04f05f556f505a3800b2b5fb08e03153b1b878939b49da6.ar.png)

**الخيارات الأساسية** هي قوالب البداية الخاصة بك:

1. [ ] [البدء مع دردشة الذكاء الاصطناعي](https://github.com/Azure-Samples/get-started-with-ai-chat) الذي ينشر تطبيق دردشة أساسي _مع بياناتك_ على Azure Container Apps. استخدم هذا لاستكشاف سيناريو دردشة الذكاء الاصطناعي الأساسي.
1. [X] [البدء مع وكلاء الذكاء الاصطناعي](https://github.com/Azure-Samples/get-started-with-ai-agents) الذي ينشر أيضًا وكيل ذكاء اصطناعي قياسي (مع خدمة Azure AI Agent). استخدم هذا للتعرف على حلول الذكاء الاصطناعي الوكيلية التي تتضمن الأدوات والنماذج.

قم بزيارة الرابط الثاني في علامة تبويب جديدة في المتصفح (أو انقر على `Open in GitHub` للبطاقة ذات الصلة). يجب أن ترى المستودع الخاص بهذا القالب AZD. خذ دقيقة لاستكشاف ملف README. تبدو بنية التطبيق كما يلي:

![Arch](../../../../../translated_images/architecture.8cec470ec15c65c743dcc1aa383d2500be4d6a9270693b8bfeb3d8deca4a22e1.ar.png)

---

## 3. تفعيل القالب

دعونا نحاول نشر هذا القالب والتأكد من أنه صالح. سنتبع الإرشادات في قسم [البدء](https://github.com/Azure-Samples/get-started-with-ai-agents?tab=readme-ov-file#getting-started).

1. انقر على [هذا الرابط](https://github.com/codespaces/new/Azure-Samples/get-started-with-ai-agents) - أكد الإجراء الافتراضي لـ `Create codespace`
1. يفتح هذا علامة تبويب جديدة في المتصفح - انتظر حتى يتم تحميل جلسة GitHub Codespaces
1. افتح نافذة VS Code في Codespaces - واكتب الأمر التالي:

   ```bash title="" linenums="0"
   azd up
   ```

أكمل خطوات سير العمل التي سيتم تشغيلها:

1. سيتم مطالبتك بتسجيل الدخول إلى Azure - اتبع التعليمات للمصادقة
1. أدخل اسم بيئة فريد لك - على سبيل المثال، استخدمت `nitya-mshack-azd`
1. سيؤدي ذلك إلى إنشاء مجلد `.azure/` - سترى مجلدًا فرعيًا باسم البيئة
1. سيتم مطالبتك باختيار اسم الاشتراك - اختر الافتراضي
1. سيتم مطالبتك بموقع - استخدم `East US 2`

الآن، انتظر حتى يكتمل التوفير. **يستغرق هذا 10-15 دقيقة**

1. عند الانتهاء، ستظهر رسالة SUCCESS في وحدة التحكم مثل هذه:
      ```bash title="" linenums="0"
      SUCCESS: Your up workflow to provision and deploy to Azure completed in 10 minutes 17 seconds.
      ```
1. سيكون لديك الآن مجموعة موارد مخصصة في بوابة Azure باسم البيئة:

![Infra](../../../../../translated_images/02-provisioned-infra.46c706b14f56e0bf36cb90ba441d16690ce10a00d42990bb9441126ceff08990.ar.png)

1. **أنت الآن جاهز للتحقق من صحة البنية التحتية والتطبيق المنشور**.

---

## 4. التحقق من صحة القالب

1. قم بزيارة صفحة [مجموعات الموارد](https://portal.azure.com/#browse/resourcegroups) في بوابة Azure - قم بتسجيل الدخول عندما يُطلب منك ذلك
1. انقر على مجموعة الموارد لاسم بيئتك - سترى الصفحة أعلاه

- انقر على مورد Azure Container Apps
- انقر على رابط Application Url في قسم _Essentials_ (أعلى اليمين)

1. يجب أن ترى واجهة مستخدم أمامية للتطبيق المستضاف مثل هذا:

![App](../../../../../translated_images/03-test-application.471910da12c3038e4a3c20e98ebf080abb227e122699ef7b7a262b87af6f98c3.ar.png)

1. حاول طرح بعض [الأسئلة التجريبية](https://github.com/Azure-Samples/get-started-with-ai-agents/blob/main/docs/sample_questions.md)

- اسأل: ```ما هي عاصمة فرنسا؟``` 
- اسأل: ```ما هو أفضل خيمة تحت 200 دولار لشخصين، وما الميزات التي تتضمنها؟```

1. يجب أن تحصل على إجابات مشابهة لما هو موضح أدناه. _لكن كيف يعمل هذا؟_

![App](../../../../../translated_images/03-test-question.521c1e863cbaddb604172e95d704407b4b6304c0e04d9130e51b7994f951b026.ar.png)

---

## 5. التحقق من صحة الوكيل

يقوم تطبيق Azure Container App بنشر نقطة نهاية تتصل بوكيل الذكاء الاصطناعي الذي تم توفيره في مشروع Azure AI Foundry لهذا القالب. دعونا نلقي نظرة على ما يعنيه ذلك.

1. عد إلى صفحة _Overview_ لمجموعة الموارد الخاصة بك في بوابة Azure

1. انقر على مورد `Azure AI Foundry` في تلك القائمة

1. يجب أن ترى هذا. انقر على زر `Go to Azure AI Foundry Portal`. 
![Foundry](../../../../../translated_images/04-view-foundry-project.fb94ca41803f28f3a7baa67099e11360380dc7f17bfb0583689cf34419b80498.ar.png)

1. يجب أن ترى صفحة مشروع Foundry لتطبيق الذكاء الاصطناعي الخاص بك
![Project](../../../../../translated_images/05-visit-foundry-portal.d734e98135892d7e96324cebee01acfa6c339706b2d5e50ede4682beb5d431d9.ar.png)

1. انقر على `Agents` - سترى الوكيل الافتراضي الذي تم توفيره في مشروعك
![Agents](../../../../../translated_images/06-visit-agents.bccb263f77b00a0917878ae22b420c3b0df0ade50c0df8e20e6e45d49a220514.ar.png)

1. اختره - وسترى تفاصيل الوكيل. لاحظ ما يلي:

- يستخدم الوكيل البحث في الملفات بشكل افتراضي (دائمًا)
- يشير `Knowledge` الخاص بالوكيل إلى أنه تم تحميل 32 ملفًا (للبحث في الملفات)
![Agents](../../../../../translated_images/07-view-agent-details.0e049f37f61eae6292faf47da2651994dab9ac9cf06c20e7c996c54dbca02245.ar.png)

1. ابحث عن خيار `Data+indexes` في القائمة اليسرى وانقر للحصول على التفاصيل.

- يجب أن ترى 32 ملف بيانات تم تحميلها للمعرفة.
- ستتوافق هذه مع 12 ملفًا للعميل و20 ملفًا للمنتجات تحت `src/files` 
![Data](../../../../../translated_images/08-visit-data-indexes.5a4cc1686fa0d19a49625f0d4956f3b22681ae275a62c35516dabf1eb9d49a89.ar.png)

**لقد تحققت من صحة تشغيل الوكيل!**

1. تعتمد استجابات الوكيل على المعرفة الموجودة في تلك الملفات.
1. يمكنك الآن طرح أسئلة تتعلق بتلك البيانات، والحصول على استجابات مستندة.
1. مثال: يصف `customer_info_10.json` المشتريات الثلاثة التي قامت بها "Amanda Perez"

عد إلى علامة التبويب في المتصفح مع نقطة نهاية تطبيق Container واسأل: `ما هي المنتجات التي تمتلكها Amanda Perez؟`. يجب أن ترى شيئًا مثل هذا:

![Data](../../../../../translated_images/09-ask-in-aca.4102297fc465a4d5617af2a71501c3b7607d198df9e598f84abacc32423c17b9.ar.png)

---

## 6. ملعب الوكيل

دعونا نبني بعض الحدس حول قدرات Azure AI Foundry، من خلال تجربة الوكيل في ملعب الوكلاء.

1. عد إلى صفحة `Agents` في Azure AI Foundry - اختر الوكيل الافتراضي
1. انقر على خيار `Try in Playground` - يجب أن تحصل على واجهة ملعب مثل هذه
1. اسأل نفس السؤال: `ما هي المنتجات التي تمتلكها Amanda Perez؟`

![Data](../../../../../translated_images/09-ask-in-playground.a1b93794f78fa676c13e7b81dd60bc8589c742cf1069dc4589acf36ac050298d.ar.png)

تحصل على نفس الاستجابة (أو مشابهة) - ولكنك تحصل أيضًا على معلومات إضافية يمكنك استخدامها لفهم جودة، تكلفة، وأداء تطبيقك الوكلي. على سبيل المثال:

1. لاحظ أن الاستجابة تستشهد بملفات البيانات المستخدمة "لتأسيس" الاستجابة
1. مرر فوق أي من هذه تسميات الملفات - هل تتطابق البيانات مع استفسارك والاستجابة المعروضة؟

ترى أيضًا صف _الإحصائيات_ أسفل الاستجابة.

1. مرر فوق أي مقياس - على سبيل المثال، الأمان. سترى شيئًا مثل هذا
1. هل تتطابق التقييمات المقدرة مع حدسك لمستوى أمان الاستجابة؟

![Data](../../../../../translated_images/10-view-run-info-meter.6cdb89a0eea5531fced8249c58037ab5fb939478145db95b840a6aab8b21d85e.ar.png)

---

## 7. المراقبة المدمجة

المراقبة تتعلق بتجهيز تطبيقك لتوليد بيانات يمكن استخدامها لفهم، تصحيح، وتحسين عملياته. للحصول على فكرة عن ذلك:

1. انقر على زر `View Run Info` - يجب أن ترى هذه العرضة. هذا مثال على [تتبع الوكيل](https://learn.microsoft.com/en-us/azure/ai-foundry/how-to/develop/trace-agents-sdk#view-trace-results-in-the-azure-ai-foundry-agents-playground) أثناء العمل. _يمكنك أيضًا الحصول على هذه العرضة بالنقر على Thread Logs في القائمة العلوية_.

- احصل على فكرة عن خطوات التشغيل والأدوات التي يستخدمها الوكيل
- فهم إجمالي عدد الرموز (مقابل استخدام رموز الإخراج) للاستجابة
- فهم التأخير وأين يتم إنفاق الوقت في التنفيذ

![Agent](../../../../../translated_images/10-view-run-info.b20ebd75fef6a1cc01382282300bc7d4afe4aa289de08bc97d1e097d7dc4b77d.ar.png)

1. انقر على علامة التبويب `Metadata` لرؤية سمات إضافية للتشغيل، التي قد توفر سياقًا مفيدًا لتصحيح المشكلات لاحقًا.

![Agent](../../../../../translated_images/11-view-run-info-metadata.7966986122c7c2dfef2df06e56db549f922c09658b51496fac040106de75e2b9.ar.png)

1. انقر على علامة التبويب `Evaluations` لرؤية التقييمات التلقائية التي تم إجراؤها على استجابة الوكيل. تتضمن هذه التقييمات تقييمات الأمان (مثل، إيذاء النفس) وتقييمات خاصة بالوكيل (مثل، حل النية، الالتزام بالمهمة).

![Agent](../../../../../translated_images/12-view-run-info-evaluations.ef25e4577d70efeb777dfadf51fed1694661fa370dd5a4e5fea4aec8de234568.ar.png)

1. أخيرًا وليس آخرًا، انقر على علامة التبويب `Monitoring` في القائمة الجانبية.

- اختر علامة التبويب `Resource usage` في الصفحة المعروضة - وشاهد المقاييس.
- تتبع استخدام التطبيق من حيث التكاليف (الرموز) والتحميل (الطلبات).
- تتبع تأخير التطبيق إلى أول بايت (معالجة الإدخال) وآخر بايت (الإخراج).

![Agent](../../../../../translated_images/13-monitoring-resources.5148015f7311807f774aaa6a45b7156969ce1b1861d1c34d191c98b61d6d8b84.ar.png)

---

## 8. متغيرات البيئة

حتى الآن، قمنا بالسير عبر النشر في المتصفح - وتحققنا من أن البنية التحتية قد تم توفيرها وأن التطبيق يعمل. ولكن للعمل مع التطبيق _كود أولًا_، نحتاج إلى تكوين بيئة التطوير المحلية لدينا مع المتغيرات ذات الصلة المطلوبة للعمل مع هذه الموارد. يجعل استخدام `azd` الأمر سهلاً.

1. يستخدم Azure Developer CLI [متغيرات البيئة](https://learn.microsoft.com/en-us/azure/developer/azure-developer-cli/manage-environment-variables?tabs=bash) لتخزين وإدارة إعدادات التكوين لنشر التطبيقات.

1. يتم تخزين متغيرات البيئة في `.azure/<env-name>/.env` - هذا يحدد نطاقها إلى البيئة `env-name` المستخدمة أثناء النشر ويساعدك على عزل البيئات بين أهداف النشر المختلفة في نفس المستودع.

1. يتم تحميل متغيرات البيئة تلقائيًا بواسطة أمر `azd` كلما نفذ أمرًا معينًا (مثل، `azd up`). لاحظ أن `azd` لا يقرأ تلقائيًا متغيرات البيئة _على مستوى نظام التشغيل_ (مثل، التي تم تعيينها في الصدفة) - بدلاً من ذلك استخدم `azd set env` و`azd get env` لنقل المعلومات داخل النصوص.

دعونا نجرب بعض الأوامر:

1. احصل على جميع متغيرات البيئة التي تم تعيينها لـ `azd` في هذه البيئة:

      ```bash title="" linenums="0"
      azd env get-values
      ```
      
ترى شيئًا مثل:

      ```bash title="" linenums="0"
      AZURE_AI_AGENT_DEPLOYMENT_NAME="gpt-4o-mini"
      AZURE_AI_AGENT_NAME="agent-template-assistant"
      AZURE_AI_EMBED_DEPLOYMENT_NAME="text-embedding-3-small"
      AZURE_AI_EMBED_DIMENSIONS=100
      ...
      ```

1. احصل على قيمة محددة - على سبيل المثال، أريد أن أعرف ما إذا كنا قد قمنا بتعيين قيمة `AZURE_AI_AGENT_MODEL_NAME`

      ```bash title="" linenums="0"
      azd env get-value AZURE_AI_AGENT_MODEL_NAME 
      ```
      
ترى شيئًا مثل هذا - لم يتم تعيينه افتراضيًا!

      ```bash title="" linenums="0"
      ERROR: key 'AZURE_AI_AGENT_MODEL_NAME' not found in the environment values
      ```

1. قم بتعيين متغير بيئة جديد لـ `azd`. هنا، نقوم بتحديث اسم نموذج الوكيل. _ملاحظة: أي تغييرات يتم إجراؤها ستنعكس فورًا في ملف `.azure/<env-name>/.env`.

      ```bash title="" linenums="0"
      azd env set AZURE_AI_AGENT_MODEL_NAME gpt-4.1
      azd env set AZURE_AI_AGENT_MODEL_VERSION 2025-04-14
      azd env set AZURE_AI_AGENT_DEPLOYMENT_CAPACITY 150
      ```

الآن، يجب أن نجد أن القيمة قد تم تعيينها:

      ```bash title="" linenums="0"
      azd env get-value AZURE_AI_AGENT_MODEL_NAME 
      ```

1. لاحظ أن بعض الموارد دائمة (مثل، نشر النماذج) وستتطلب أكثر من مجرد `azd up` لإجبار إعادة النشر. دعونا نحاول إزالة النشر الأصلي وإعادة النشر مع تغيير متغيرات البيئة.

1. **تحديث** إذا كنت قد قمت سابقًا بنشر البنية التحتية باستخدام قالب azd - يمكنك _تحديث_ حالة متغيرات البيئة المحلية بناءً على الحالة الحالية لنشر Azure باستخدام هذا الأمر:
      ```bash title="" linenums="0"
      azd env refresh
      ```

      هذه طريقة قوية لمزامنة متغيرات البيئة عبر بيئتين أو أكثر من بيئات التطوير المحلية (مثل فريق يضم عدة مطورين) - مما يسمح للبنية التحتية المنشورة بأن تكون المصدر الأساسي لحالة متغيرات البيئة. يمكن لأعضاء الفريق ببساطة تحديث المتغيرات للعودة إلى حالة التزامن.

---

## 9. تهانينا 🏆

لقد أكملت للتو سير عمل شامل حيث:

- [X] اخترت قالب AZD الذي تريد استخدامه
- [X] أطلقت القالب باستخدام GitHub Codespaces
- [X] نشرت القالب وتأكدت من أنه يعمل

---

