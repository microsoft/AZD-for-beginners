# рд╕рд╛рдзрд╛ Flask API - рдХрдВрдЯреЗрдирд░ рдЕреЕрдк рдЙрджрд╛рд╣рд░рдг

**рд╢рд┐рдХрдгреНрдпрд╛рдЪрд╛ рдорд╛рд░реНрдЧ:** рдирд╡рд╢рд┐рдХреНрдпрд╛ тнР | **рд╡реЗрд│:** реирел-рейрел рдорд┐рдирд┐рдЯреЗ | **рдЦрд░реНрдЪ:** $реж-резрел/рдорд╣рд┐рдирд╛

рдПрдХ рдкреВрд░реНрдг, рдХрд╛рд░реНрдпрд░рдд Python Flask REST API рдЬреЛ Azure Container Apps рд╡рд░ Azure Developer CLI (azd) рд╡рд╛рдкрд░реВрди рдбрд┐рдкреНрд▓реЙрдп рдХреЗрд▓рд╛ рдЖрд╣реЗ. рд╣реЗ рдЙрджрд╛рд╣рд░рдг рдХрдВрдЯреЗрдирд░ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ, рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ, рдЖрдгрд┐ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧрдЪреНрдпрд╛ рдореВрд▓рднреВрдд рдЧреЛрд╖реНрдЯреА рджрд╛рдЦрд╡рддреЗ.

## ЁЯОп рддреБрдореНрд╣реА рдХрд╛рдп рд╢рд┐рдХрд╛рд▓

- рдХрдВрдЯреЗрдирд░рд╛рдЗрдЬреНрдб Python рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди Azure рд╡рд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдгреЗ
- рд╕реНрдХреЗрд▓-рдЯреВ-рдЭрд┐рд░реЛрд╕рд╣ рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рдгреЗ
- рд╣реЗрд▓реНрде рдкреНрд░реЙрдмреНрд╕ рдЖрдгрд┐ рд░реЗрдбреАрдиреЗрд╕ рдЪреЗрдХреНрд╕ рд▓рд╛рдЧреВ рдХрд░рдгреЗ
- рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЙрдЧреНрд╕ рдЖрдгрд┐ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдореЙрдирд┐рдЯрд░ рдХрд░рдгреЗ
- рдЬрд▓рдж рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯрд╕рд╛рдареА Azure Developer CLI рд╡рд╛рдкрд░рдгреЗ

## ЁЯУж рдХрд╛рдп рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдЖрд╣реЗ

тЬЕ **Flask рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди** - CRUD рдСрдкрд░реЗрд╢рдиреНрд╕рд╕рд╣ рдкреВрд░реНрдг REST API (`src/app.py`)  
тЬЕ **Dockerfile** - рдкреНрд░реЙрдбрдХреНрд╢рди-рд░реЗрдбреА рдХрдВрдЯреЗрдирд░ рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди  
тЬЕ **Bicep Infrastructure** - рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рд╡рд╛рддрд╛рд╡рд░рдг рдЖрдгрд┐ API рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ  
тЬЕ **AZD рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди** - рдПрдХ-рдХрдорд╛рдВрдб рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд╕реЗрдЯрдЕрдк  
тЬЕ **рд╣реЗрд▓реНрде рдкреНрд░реЙрдмреНрд╕** - рд▓рд┐рд╡реНрд╣рдиреЗрд╕ рдЖрдгрд┐ рд░реЗрдбреАрдиреЗрд╕ рдЪреЗрдХреНрд╕ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХреЗрд▓реЗрд▓реЗ  
тЬЕ **рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ** - HTTP рд▓реЛрдбрдиреБрд╕рд╛рд░ реж-резреж рд░реЗрдкреНрд▓рд┐рдХрд╛рдЬ  

## рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ   Azure Container Apps Environment      тФВ
тФВ                                         тФВ
тФВ  тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР тФВ
тФВ  тФВ   Flask API Container             тФВ тФВ
тФВ  тФВ   - Health endpoints              тФВ тФВ
тФВ  тФВ   - REST API                      тФВ тФВ
тФВ  тФВ   - Auto-scaling (0-10 replicas)  тФВ тФВ
тФВ  тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ тФВ
тФВ                                         тФВ
тФВ  Application Insights тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

## рдкреВрд░реНрд╡рддрдпрд╛рд░реА

### рдЖрд╡рд╢реНрдпрдХ
- **Azure Developer CLI (azd)** - [рдЗрдВрд╕реНрдЯреЙрд▓ рдЧрд╛рдИрдб](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd)
- **Azure рд╕рдмрд╕реНрдХреНрд░рд┐рдкреНрд╢рди** - [рдлреНрд░реА рдЕрдХрд╛рдЙрдВрдЯ](https://azure.microsoft.com/free/)
- **Docker Desktop** - [Docker рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рд╛](https://www.docker.com/products/docker-desktop/) (рд╕реНрдерд╛рдирд┐рдХ рдЪрд╛рдЪрдгреАрд╕рд╛рдареА)

### рдкреВрд░реНрд╡рддрдпрд╛рд░реА рддрдкрд╛рд╕рд╛

```bash
# azd рдЖрд╡реГрддреНрддреА рддрдкрд╛рд╕рд╛ (1.5.0 рдХрд┐рдВрд╡рд╛ рддреНрдпрд╛рд╣реВрди рдЕрдзрд┐рдХ рдЖрд╡рд╢реНрдпрдХ)
azd version

# Azure рд▓реЙрдЧрд┐рди рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛
azd auth login

# Docker рддрдкрд╛рд╕рд╛ (рдРрдЪреНрдЫрд┐рдХ, рд╕реНрдерд╛рдирд┐рдХ рдЪрд╛рдЪрдгреАрд╕рд╛рдареА)
docker --version
```

## тП▒я╕П рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдЯрд╛рдЗрдорд▓рд╛рдЗрди

| рдЯрдкреНрдкрд╛ | рдХрд╛рд▓рд╛рд╡рдзреА | рдХрд╛рдп рдШрдбрддреЗ |
|-------|----------|--------------||
| рд╡рд╛рддрд╛рд╡рд░рдг рд╕реЗрдЯрдЕрдк | рейреж рд╕реЗрдХрдВрдж | azd рд╡рд╛рддрд╛рд╡рд░рдг рддрдпрд╛рд░ рдХрд░рд╛ |
| рдХрдВрдЯреЗрдирд░ рддрдпрд╛рд░ рдХрд░рд╛ | реи-рей рдорд┐рдирд┐рдЯреЗ | Docker Flask рдЕреЕрдк рддрдпрд╛рд░ рдХрд░рд╛ |
| рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдкреНрд░реЛрд╡реНрд╣рд┐рдЬрди рдХрд░рд╛ | рей-рел рдорд┐рдирд┐рдЯреЗ | рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕, рд░рдЬрд┐рд╕реНрдЯреНрд░реА, рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рддрдпрд╛рд░ рдХрд░рд╛ |
| рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди рдбрд┐рдкреНрд▓реЙрдп рдХрд░рд╛ | реи-рей рдорд┐рдирд┐рдЯреЗ | рдЗрдореЗрдЬ рдкреБрд╢ рдХрд░рд╛ рдЖрдгрд┐ рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕рд╡рд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рд╛ |
| **рдПрдХреВрдг** | **рео-резреи рдорд┐рдирд┐рдЯреЗ** | рдкреВрд░реНрдг рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рддрдпрд╛рд░ |

## рдЬрд▓рдж рдкреНрд░рд╛рд░рдВрдн

```bash
# рдЙрджрд╛рд╣рд░рдгрд╛рдХрдбреЗ рдЬрд╛
cd examples/container-app/simple-flask-api

# рд╡рд╛рддрд╛рд╡рд░рдг рдкреНрд░рд╛рд░рдВрдн рдХрд░рд╛ (рдЕрджреНрд╡рд┐рддреАрдп рдирд╛рд╡ рдирд┐рд╡рдбрд╛)
azd env new myflaskapi

# рд╕рд░реНрд╡рдХрд╛рд╣реА рддреИрдирд╛рдд рдХрд░рд╛ (рдкрд╛рдпрд╛рднреВрдд рд╕реБрд╡рд┐рдзрд╛ + рдЕрдиреБрдкреНрд░рдпреЛрдЧ)
azd up
# рддреБрдореНрд╣рд╛рд▓рд╛ рд╕реВрдЪрд┐рдд рдХреЗрд▓реЗ рдЬрд╛рдИрд▓:
# 1. Azure рд╕рджрд╕реНрдпрддрд╛ рдирд┐рд╡рдбрд╛
# 2. рд╕реНрдерд╛рди рдирд┐рд╡рдбрд╛ (рдЙрджрд╛., eastus2)
# 3. рддреИрдирд╛рддреАрд╕рд╛рдареА 8-12 рдорд┐рдирд┐рдЯреЗ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рд╛

# рддреБрдордЪрд╛ API рдПрдВрдбрдкреЙрдЗрдВрдЯ рдорд┐рд│рд╡рд╛
azd env get-values

# API рдЪрд╛рдЪрдгреА рдХрд░рд╛
curl $(azd env get-value API_ENDPOINT)/health
```

**рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ:**
```json
{
  "status": "healthy",
  "timestamp": "2025-11-19T10:30:00Z",
  "service": "simple-flask-api",
  "version": "1.0.0"
}
```

## тЬЕ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛

### рдкрд╛рдпрд░реА рез: рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд╕реНрдерд┐рддреА рддрдкрд╛рд╕рд╛

```bash
# рддреИрдирд╛рдд рд╕реЗрд╡рд╛ рдкрд╣рд╛
azd show

# рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ рджрд░реНрд╢рд╡рд┐рддреЗ:
# - рд╕реЗрд╡рд╛: api
# - рдПрдВрдбрдкреЙрдЗрдВрдЯ: https://ca-api-[env].xxx.azurecontainerapps.io
# - рд╕реНрдерд┐рддреА: рдЪрд╛рд▓реВ
```

### рдкрд╛рдпрд░реА реи: API рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдЪрд╛рдЪрдгреА рдХрд░рд╛

```bash
# API рд╢реЗрд╡рдЯрдЪрд╛ рдмрд┐рдВрджреВ рдорд┐рд│рд╡рд╛
API_URL=$(azd env get-value API_ENDPOINT)

# рдЖрд░реЛрдЧреНрдп рддрдкрд╛рд╕рд╛
curl $API_URL/health

# рдореВрд│ рд╢реЗрд╡рдЯрдЪрд╛ рдмрд┐рдВрджреВ рддрдкрд╛рд╕рд╛
curl $API_URL/

# рдЖрдпрдЯрдо рддрдпрд╛рд░ рдХрд░рд╛
curl -X POST $API_URL/api/items \
  -H "Content-Type: application/json" \
  -d '{"name": "Test Item", "description": "My first item"}'

# рд╕рд░реНрд╡ рдЖрдпрдЯрдо рдорд┐рд│рд╡рд╛
curl $API_URL/api/items
```

**рдпрд╢рд╕реНрд╡реА рдирд┐рдХрд╖:**
- тЬЕ рд╣реЗрд▓реНрде рдПрдВрдбрдкреЙрдЗрдВрдЯ HTTP 200 рдкрд░рдд рдХрд░рддреЛ
- тЬЕ рд░реВрдЯ рдПрдВрдбрдкреЙрдЗрдВрдЯ API рдорд╛рд╣рд┐рддреА рджрд╛рдЦрд╡рддреЛ
- тЬЕ POST рдЖрдпрдЯрдо рддрдпрд╛рд░ рдХрд░рддреЛ рдЖрдгрд┐ HTTP 201 рдкрд░рдд рдХрд░рддреЛ
- тЬЕ GET рддрдпрд╛рд░ рдХреЗрд▓реЗрд▓реЗ рдЖрдпрдЯрдо рдкрд░рдд рдХрд░рддреЛ

### рдкрд╛рдпрд░реА рей: рд▓реЙрдЧреНрд╕ рдкрд╣рд╛

```bash
# рдереЗрдЯ рд▓реЙрдЧ рдкреНрд░рд╡рд╛рд╣рд┐рдд рдХрд░рд╛
azd logs api --follow

# рддреБрдореНрд╣рд╛рд▓рд╛ рджрд┐рд╕реЗрд▓:
# - рдЧреБрдирд┐рдХреЙрд░реНрди рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рд╕рдВрджреЗрд╢
# - HTTP рд╡рд┐рдирдВрддреА рд▓реЙрдЧ
# - рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдорд╛рд╣рд┐рддреА рд▓реЙрдЧ
```

## рдкреНрд░рдХрд▓реНрдк рд╕рдВрд░рдЪрдирд╛

```
simple-flask-api/
тФЬтФАтФА azure.yaml              # AZD configuration
тФЬтФАтФА infra/
тФВ   тФЬтФАтФА main.bicep         # Main infrastructure
тФВ   тФЬтФАтФА main.parameters.json
тФВ   тФФтФАтФА app/
тФВ       тФЬтФАтФА container-env.bicep
тФВ       тФФтФАтФА api.bicep
тФФтФАтФА src/
    тФЬтФАтФА app.py             # Flask application
    тФЬтФАтФА requirements.txt
    тФФтФАтФА Dockerfile
```

## API рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕

| рдПрдВрдбрдкреЙрдЗрдВрдЯ | рдкрджреНрдзрдд | рд╡рд░реНрдгрди |
|----------|--------|-------------|
| `/health` | GET | рд╣реЗрд▓реНрде рдЪреЗрдХ |
| `/api/items` | GET | рд╕рд░реНрд╡ рдЖрдпрдЯрдореНрд╕ рдпрд╛рджреА |
| `/api/items` | POST | рдирд╡реАрди рдЖрдпрдЯрдо рддрдпрд╛рд░ рдХрд░рд╛ |
| `/api/items/{id}` | GET | рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрдпрдЯрдо рдорд┐рд│рд╡рд╛ |
| `/api/items/{id}` | PUT | рдЖрдпрдЯрдо рдЕрдкрдбреЗрдЯ рдХрд░рд╛ |
| `/api/items/{id}` | DELETE | рдЖрдпрдЯрдо рд╣рдЯрд╡рд╛ |

## рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди

### рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рд╡реНрд╣реЗрд░рд┐рдПрдмрд▓реНрд╕

```bash
# рд╕рд╛рдиреБрдХреВрд▓ рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди рд╕реЗрдЯ рдХрд░рд╛
azd env set PORT 8000
azd env set LOG_LEVEL info
azd env set MAX_REPLICAS 20
```

### рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди

API HTTP рдЯреНрд░реЕрдлрд┐рдХрдиреБрд╕рд╛рд░ рдЖрдкреЛрдЖрдк рд╕реНрдХреЗрд▓ рд╣реЛрддреЛ:
- **рдХрд┐рдорд╛рди рд░реЗрдкреНрд▓рд┐рдХрд╛рдЬ**: реж (рдирд┐рд╖реНрдХреНрд░рд┐рдп рдЕрд╕рддрд╛рдирд╛ рдЭрд┐рд░реЛрд╡рд░ рд╕реНрдХреЗрд▓ рд╣реЛрддреЛ)
- **рдХрдорд╛рд▓ рд░реЗрдкреНрд▓рд┐рдХрд╛рдЬ**: резреж
- **рдкреНрд░рддреНрдпреЗрдХ рд░реЗрдкреНрд▓рд┐рдХрд╛рд╡рд░ рдПрдХрддреНрд░рд┐рдд рд╡рд┐рдирдВрддреНрдпрд╛**: релреж

## рд╡рд┐рдХрд╛рд╕

### рд╕реНрдерд╛рдирд┐рдХ рдЪрд╛рд▓рд╡рд╛

```bash
# рдЕрд╡рд▓рдВрдмрди рд╕реНрдерд╛рдкрд┐рдд рдХрд░рд╛
cd src
pip install -r requirements.txt

# рдЕреЕрдк рдЪрд╛рд▓рд╡рд╛
python app.py

# рд╕реНрдерд╛рдирд┐рдХрдкрдгреЗ рдЪрд╛рдЪрдгреА рдХрд░рд╛
curl http://localhost:8000/health
```

### рдХрдВрдЯреЗрдирд░ рддрдпрд╛рд░ рдХрд░рд╛ рдЖрдгрд┐ рдЪрд╛рдЪрдгреА рдХрд░рд╛

```bash
# рдбреЙрдХрд░ рдЗрдореЗрдЬ рддрдпрд╛рд░ рдХрд░рд╛
docker build -t flask-api:local ./src

# рдХрдВрдЯреЗрдирд░ рд╕реНрдерд╛рдирд┐рдХ рд╕реНрддрд░рд╛рд╡рд░ рдЪрд╛рд▓рд╡рд╛
docker run -p 8000:8000 flask-api:local

# рдХрдВрдЯреЗрдирд░ рдЪрд╛рдЪрдгреА рдХрд░рд╛
curl http://localhost:8000/health
```

## рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ

### рдкреВрд░реНрдг рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ

```bash
# рдкрд╛рдпрд╛рднреВрдд рд╕реБрд╡рд┐рдзрд╛ рдЖрдгрд┐ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рддреИрдирд╛рдд рдХрд░рд╛
azd up
```

### рдлрдХреНрдд рдХреЛрдб рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ

```bash
# рдлрдХреНрдд рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдХреЛрдб рддреИрдирд╛рдд рдХрд░рд╛ (рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд)
azd deploy api
```

### рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди рдЕрдкрдбреЗрдЯ рдХрд░рд╛

```bash
# рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд▓ рдмрджрд▓ рдЕрджреНрдпрддрдирд┐рдд рдХрд░рд╛
azd env set API_KEY "new-api-key"

# рдирд╡реАрди рд╕рдВрд░рдЪрдиреЗрд╕рд╣ рдкреБрдиреНрд╣рд╛ рддреИрдирд╛рдд рдХрд░рд╛
azd deploy api
```

## рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ

### рд▓реЙрдЧреНрд╕ рдкрд╣рд╛

```bash
# рдереЗрдЯ рд▓реЙрдЧ рдкреНрд░рд╡рд╛рд╣рд┐рдд рдХрд░рд╛
azd logs api --follow

# рд╢реЗрд╡рдЯрдЪреНрдпрд╛ 100 рдУрд│реА рдкрд╣рд╛
azd logs api --tail 100
```

### рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдореЙрдирд┐рдЯрд░ рдХрд░рд╛

```bash
# Azure Monitor рдбреЕрд╢рдмреЛрд░реНрдб рдЙрдШрдбрд╛
azd monitor --overview

# рд╡рд┐рд╢рд┐рд╖реНрдЯ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдкрд╣рд╛
az monitor metrics list \
  --resource $(azd show --output json | jq -r '.services.api.resourceId') \
  --metric "Requests,ResponseTime"
```

## рдЪрд╛рдЪрдгреА

### рд╣реЗрд▓реНрде рдЪреЗрдХ

```bash
curl $(azd show --output json | jq -r '.services.api.endpoint')/health
```

рдЕрдкреЗрдХреНрд╖рд┐рдд рдкреНрд░рддрд┐рд╕рд╛рдж:
```json
{
  "status": "healthy",
  "timestamp": "2025-11-19T10:30:00Z"
}
```

### рдЖрдпрдЯрдо рддрдпрд╛рд░ рдХрд░рд╛

```bash
curl -X POST $(azd show --output json | jq -r '.services.api.endpoint')/api/items \
  -H "Content-Type: application/json" \
  -d '{"name": "Test Item", "description": "A test item"}'
```

### рд╕рд░реНрд╡ рдЖрдпрдЯрдореНрд╕ рдорд┐рд│рд╡рд╛

```bash
curl $(azd show --output json | jq -r '.services.api.endpoint')/api/items
```

## рдЦрд░реНрдЪ рдСрдкреНрдЯрд┐рдорд╛рдпрдЭреЗрд╢рди

рд╣реЗ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд╕реНрдХреЗрд▓-рдЯреВ-рдЭрд┐рд░реЛ рд╡рд╛рдкрд░рддреЗ, рддреНрдпрд╛рдореБрд│реЗ API рд╡рд┐рдирдВрддреНрдпрд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рдд рдЕрд╕рддрд╛рдирд╛ рддреБрдореНрд╣рд╛рд▓рд╛ рдлрдХреНрдд рдкреИрд╕реЗ рджреНрдпрд╛рд╡реЗ рд▓рд╛рдЧрддрд╛рдд:

- **рдирд┐рд╖реНрдХреНрд░рд┐рдп рдЦрд░реНрдЪ**: ~$реж/рдорд╣рд┐рдирд╛ (рдЭрд┐рд░реЛрд╡рд░ рд╕реНрдХреЗрд▓ рдХреЗрд▓реЗрд▓реЗ)
- **рд╕рдХреНрд░рд┐рдп рдЦрд░реНрдЪ**: ~$реж.режрежрежрежреирек/рд╕реЗрдХрдВрдж рдкреНрд░рддрд┐ рд░реЗрдкреНрд▓рд┐рдХрд╛
- **рдЕрдкреЗрдХреНрд╖рд┐рдд рдорд╛рд╕рд┐рдХ рдЦрд░реНрдЪ** (рд╣рд▓рдХрд╛ рд╡рд╛рдкрд░): $рел-резрел

### рдЦрд░реНрдЪ рдЖрдгрдЦреА рдХрдореА рдХрд░рд╛

```bash
# рдбреЗрд╡реНрд╣рд╕рд╛рдареА рдХрдорд╛рд▓ рдкреНрд░рддрд┐рдХреГрддреА рдХрдореА рдХрд░рд╛
azd env set MAX_REPLICAS 3

# рд▓рд╣рд╛рди рдирд┐рд╖реНрдХреНрд░рд┐рдп рд╡реЗрд│ рд╡рд╛рдкрд░рд╛
azd env set SCALE_TO_ZERO_TIMEOUT 300  # рел рдорд┐рдирд┐рдЯреЗ
```

## рд╕рдорд╕реНрдпрд╛ рдирд┐рд╡рд╛рд░рдг

### рдХрдВрдЯреЗрдирд░ рд╕реБрд░реВ рд╣реЛрдд рдирд╛рд╣реА

```bash
# рдХрдВрдЯреЗрдирд░ рд▓реЙрдЧреНрд╕ рддрдкрд╛рд╕рд╛
azd logs api --tail 100

# рд╕реНрдерд╛рдирд┐рдХрдкрдгреЗ рдбреЙрдХрд░ рдЗрдореЗрдЬ рдмрд┐рд▓реНрдбреНрд╕ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛
docker build -t test ./src
```

### API рдкреНрд░рд╡реЗрд╢рдпреЛрдЧреНрдп рдирд╛рд╣реА

```bash
# рдЗрдирдЧреНрд░реЗрд╕ рдмрд╛рд╣реНрдп рдЖрд╣реЗ рдпрд╛рдЪреА рдкрдбрддрд╛рд│рдгреА рдХрд░рд╛
az containerapp show --name api --resource-group rg-simple-flask-api \
  --query properties.configuration.ingress.external
```

### рдкреНрд░рддрд┐рд╕рд╛рдж рд╡реЗрд│рд╛ рдЬрд╛рд╕реНрдд рдЖрд╣реЗрдд

```bash
# CPU/рдореЗрдорд░реА рд╡рд╛рдкрд░ рддрдкрд╛рд╕рд╛
az monitor metrics list \
  --resource $(azd show --output json | jq -r '.services.api.resourceId') \
  --metric "CPUPercentage,MemoryPercentage"

# рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реНрдпрд╛рд╕ рд╕рдВрд╕рд╛рдзрдиреЗ рд╡рд╛рдврд╡рд╛
az containerapp update --name api --resource-group rg-simple-flask-api \
  --cpu 1.0 --memory 2Gi
```

## рд╕рд╛рдлрд╕рдлрд╛рдИ

```bash
# рд╕рд░реНрд╡ рд╕рдВрд╕рд╛рдзрдиреЗ рд╣рдЯрд╡рд╛
azd down --force --purge
```

## рдкреБрдвреАрд▓ рдкрд╛рдпрд▒реНрдпрд╛

### рд╣реЗ рдЙрджрд╛рд╣рд░рдг рд╡рд┐рд╕реНрддреГрдд рдХрд░рд╛

1. **рдбреЗрдЯрд╛рдмреЗрд╕ рдЬреЛрдбрд╛** - Azure Cosmos DB рдХрд┐рдВрд╡рд╛ SQL Database рд╕рдорд╛рдХрд▓рд┐рдд рдХрд░рд╛
   ```bash
   # рдЗрдиреНрдлреНрд░рд╛/main.bicep рдордзреНрдпреЗ Cosmos DB рдореЙрдбреНрдпреВрд▓ рдЬреЛрдбрд╛
   # database рдХрдиреЗрдХреНрд╢рдирд╕рд╣ app.py рдЕрджреНрдпрддрдирд┐рдд рдХрд░рд╛
   ```

2. **рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдЬреЛрдбрд╛** - Azure AD рдХрд┐рдВрд╡рд╛ API рдХреАрдЬ рд▓рд╛рдЧреВ рдХрд░рд╛
   ```python
   # рдЕреЕрдк.py рдордзреНрдпреЗ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдорд┐рдбрд▓рд╡реЗрдЕрд░ рдЬреЛрдбрд╛
   from functools import wraps
   ```

3. **CI/CD рд╕реЗрдЯ рдХрд░рд╛** - GitHub Actions рд╡рд░реНрдХрдлреНрд▓реЛ
   ```yaml
   # Create .github/workflows/deploy.yml
   name: Deploy to Azure
   on: [push]
   ```

4. **рдореЕрдиреЗрдЬреНрдб рдЖрдпрдбреЗрдВрдЯрд┐рдЯреА рдЬреЛрдбрд╛** - Azure рд╕реЗрд╡рд╛рдВрд╡рд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдкреНрд░рд╡реЗрд╢ рдорд┐рд│рд╡рд╛
   ```bicep
   # Update infra/app/api.bicep
   identity: { type: 'SystemAssigned' }
   ```

### рд╕рдВрдмрдВрдзрд┐рдд рдЙрджрд╛рд╣рд░рдгреЗ

- **[рдбреЗрдЯрд╛рдмреЗрд╕ рдЕреЕрдк](../../../../../examples/database-app)** - SQL Database рд╕рд╣ рдкреВрд░реНрдг рдЙрджрд╛рд╣рд░рдг
- **[рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕](../../../../../examples/container-app/microservices)** - рдорд▓реНрдЯреА-рд╕рд░реНрд╡реНрд╣рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░
- **[рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рдорд╛рд╕реНрдЯрд░ рдЧрд╛рдИрдб](../README.md)** - рд╕рд░реНрд╡ рдХрдВрдЯреЗрдирд░ рдкреЕрдЯрд░реНрдиреНрд╕

### рд╢рд┐рдХрдгреНрдпрд╛рдЪреА рд╕рдВрд╕рд╛рдзрдиреЗ

- ЁЯУЪ [AZD рдирд╡рд╢рд┐рдХреНрдпрд╛рдВрд╕рд╛рдареА рдХреЛрд░реНрд╕](../../../README.md) - рдореБрдЦреНрдп рдХреЛрд░реНрд╕ рд╣реЛрдо
- ЁЯУЪ [рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рдкреЕрдЯрд░реНрдиреНрд╕](../README.md) - рдЕрдзрд┐рдХ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдкреЕрдЯрд░реНрдиреНрд╕
- ЁЯУЪ [AZD рдЯреЗрдореНрдкреНрд▓реЗрдЯреНрд╕ рдЧреЕрд▓рд░реА](https://azure.github.io/awesome-azd/) - рд╕рдореБрджрд╛рдп рдЯреЗрдореНрдкреНрд▓реЗрдЯреНрд╕

## рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рдВрд╕рд╛рдзрдиреЗ

### рджрд╕реНрддрдРрд╡рдЬ
- **[Flask рджрд╕реНрддрдРрд╡рдЬ](https://flask.palletsprojects.com/)** - Flask рдлреНрд░реЗрдорд╡рд░реНрдХ рдЧрд╛рдИрдб
- **[Azure рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕](https://learn.microsoft.com/azure/container-apps/)** - рдЕрдзрд┐рдХреГрдд Azure рджрд╕реНрддрдРрд╡рдЬ
- **[Azure Developer CLI](https://learn.microsoft.com/azure/developer/azure-developer-cli/)** - azd рдХрдорд╛рдВрдб рд╕рдВрджрд░реНрдн

### рдЯреНрдпреБрдЯреЛрд░рд┐рдпрд▓реНрд╕
- **[рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рдХреНрд╡рд┐рдХрд╕реНрдЯрд╛рд░реНрдЯ](https://learn.microsoft.com/azure/container-apps/quickstart-portal)** - рддреБрдордЪреЗ рдкрд╣рд┐рд▓реЗ рдЕреЕрдк рдбрд┐рдкреНрд▓реЙрдп рдХрд░рд╛
- **[Python on Azure](https://learn.microsoft.com/azure/developer/python/)** - Python рд╡рд┐рдХрд╛рд╕ рдЧрд╛рдИрдб
- **[Bicep рднрд╛рд╖рд╛](https://learn.microsoft.com/azure/azure-resource-manager/bicep/)** - рдХреЛрдб рдореНрд╣рдгреВрди рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░

### рд╕рд╛рдзрдиреЗ
- **[Azure рдкреЛрд░реНрдЯрд▓](https://portal.azure.com)** - рд╕рдВрд╕рд╛рдзрдиреЗ рд╡реНрд╣рд┐рдЬреНрдпреБрдЕрд▓реА рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдХрд░рд╛
- **[VS Code Azure рдПрдХреНрд╕реНрдЯреЗрдВрд╢рди](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurecontainerapps)** - IDE рдПрдХрддреНрд░реАрдХрд░рдг

---

**ЁЯОЙ рдЕрднрд┐рдирдВрджрди!** рддреБрдореНрд╣реА Azure Container Apps рд╡рд░ рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдЖрдгрд┐ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧрд╕рд╣ рдкреНрд░реЙрдбрдХреНрд╢рди-рд░реЗрдбреА Flask API рдбрд┐рдкреНрд▓реЙрдп рдХреЗрд▓реЗ рдЖрд╣реЗ.

**рдкреНрд░рд╢реНрди?** [рдЗрд╢реНрдпреВ рдЙрдШрдбрд╛](https://github.com/microsoft/AZD-for-beginners/issues) рдХрд┐рдВрд╡рд╛ [FAQ](../../../resources/faq.md) рддрдкрд╛рд╕рд╛

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рднрд╛рд╖рд╛рдВрддрд░ рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рд╡рд╛рдкрд░реВрди рднрд╛рд╖рд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рдд рдЖрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрдирд╢реАрд▓ рдЕрд╕рд▓реЛ рддрд░реА, рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдареЗрд╡рд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рднрд╛рд╖рд╛рдВрддрд░реЗ рддреНрд░реБрдЯреА рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪреНрдпрд╛ рдЕрднрд╛рд╡рд╛рдиреЗ рдпреБрдХреНрдд рдЕрд╕реВ рд╢рдХрддрд╛рдд. рдореВрд│ рднрд╛рд╖реЗрддреАрд▓ рджрд╕реНрддрдРрд╡рдЬ рд╣рд╛ рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реА рдЬрд╛рддреЗ. рдпрд╛ рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдЙрджреНрднрд╡рд▓реЗрд▓реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬ рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрдерд╛рд╕рд╛рдареА рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рд░рд╛рд╣рдгрд╛рд░ рдирд╛рд╣реА.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->