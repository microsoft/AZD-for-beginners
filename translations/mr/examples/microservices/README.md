# рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ - рдХрдВрдЯреЗрдирд░ рдЕреЕрдк рдЙрджрд╛рд╣рд░рдг

тП▒я╕П **рдЕрдиреБрдорд╛рдирд┐рдд рд╡реЗрд│**: реирел-рейрел рдорд┐рдирд┐рдЯреЗ | ЁЯТ░ **рдЕрдиреБрдорд╛рдирд┐рдд рдЦрд░реНрдЪ**: ~$релреж-резрежреж/рдорд╣рд┐рдирд╛ | тнР **рдЬрдЯрд┐рд▓рддрд╛**: рдкреНрд░рдЧрдд

**ЁЯУЪ рд╢рд┐рдХрдгреНрдпрд╛рдЪрд╛ рдорд╛рд░реНрдЧ:**
- тЖР рдорд╛рдЧреАрд▓: [рд╕рд┐рдВрдкрд▓ рдлреНрд▓рд╛рд╕реНрдХ API](../../../../examples/container-app/simple-flask-api) - рд╕рд┐рдВрдЧрд▓ рдХрдВрдЯреЗрдирд░рдЪреА рдореВрд▓рднреВрдд рдорд╛рд╣рд┐рддреА
- ЁЯОп **рддреБрдореНрд╣реА рдпреЗрдереЗ рдЖрд╣рд╛рдд**: рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ (реи-рд╕рд░реНрд╡реНрд╣рд┐рд╕ рдлрд╛рдЙрдВрдбреЗрд╢рди)
- тЖТ рдкреБрдвреЗ: [AI рдЗрдВрдЯрд┐рдЧреНрд░реЗрд╢рди](../../../../docs/ai-foundry) - рддреБрдордЪреНрдпрд╛ рд╕реЗрд╡рд╛рдВрдордзреНрдпреЗ рдмреБрджреНрдзрд┐рдорддреНрддрд╛ рдЬреЛрдбрд╛
- ЁЯПа [рдХреЛрд░реНрд╕ рд╣реЛрдо](../../README.md)

---

рдПрдХ **рд╕реЛрдкреЗ рдкрдг рдХрд╛рд░реНрдпрдХреНрд╖рдо** рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░, AZD CLI рд╡рд╛рдкрд░реВрди Azure Container Apps рд╡рд░ рдбрд┐рдкреНрд▓реЙрдп рдХреЗрд▓реЗрд▓реЗ. рд╣реЗ рдЙрджрд╛рд╣рд░рдг рд╕реЗрд╡рд╛-рддреЗ-рд╕реЗрд╡рд╛ рд╕рдВрд╡рд╛рдж, рдХрдВрдЯреЗрдирд░ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди, рдЖрдгрд┐ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧрд╕рд╣ реи-рд╕рд░реНрд╡реНрд╣рд┐рд╕ рд╕реЗрдЯрдЕрдкрдЪреЗ рдкреНрд░рд╛рддреНрдпрдХреНрд╖рд┐рдХ рджреЗрддреЗ.

> **ЁЯУЪ рд╢рд┐рдХрдгреНрдпрд╛рдЪрд╛ рджреГрд╖реНрдЯрд┐рдХреЛрди**: рд╣реЗ рдЙрджрд╛рд╣рд░рдг рдПрдХрд╛ рдорд┐рдирд┐рдорд▓ реи-рд╕рд░реНрд╡реНрд╣рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рдкрд╛рд╕реВрди (API рдЧреЗрдЯрд╡реЗ + рдмреЕрдХрдПрдВрдб рд╕рд░реНрд╡реНрд╣рд┐рд╕) рд╕реБрд░реВ рд╣реЛрддреЗ, рдЬреЗ рддреБрдореНрд╣реА рдкреНрд░рддреНрдпрдХреНрд╖рд╛рдд рдбрд┐рдкреНрд▓реЙрдп рдХрд░реВ рд╢рдХрддрд╛ рдЖрдгрд┐ рд╢рд┐рдХреВ рд╢рдХрддрд╛. рдпрд╛ рдкрд╛рдпрд╛рднреВрдд рдЧреЛрд╖реНрдЯреАрдВрдордзреНрдпреЗ рдкреНрд░рд╡реАрдг рдЭрд╛рд▓реНрдпрд╛рдирдВрддрд░, рдЖрдореНрд╣реА рд╕рдВрдкреВрд░реНрдг рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕ рдЗрдХреЛрд╕рд┐рд╕реНрдЯрдордордзреНрдпреЗ рд╡рд┐рд╕реНрддрд╛рд░рд╛рд╕рд╛рдареА рдорд╛рд░реНрдЧрджрд░реНрд╢рди рдкреНрд░рджрд╛рди рдХрд░рддреЛ.

## рддреБрдореНрд╣реА рдХрд╛рдп рд╢рд┐рдХрд╛рд▓

рд╣реЗ рдЙрджрд╛рд╣рд░рдг рдкреВрд░реНрдг рдХрд░реВрди, рддреБрдореНрд╣реА:
- Azure Container Apps рд╡рд░ рдПрдХрд╛рдзрд┐рдХ рдХрдВрдЯреЗрдирд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рд╛рд▓
- рдЕрдВрддрд░реНрдЧрдд рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧрд╕рд╣ рд╕реЗрд╡рд╛-рддреЗ-рд╕реЗрд╡рд╛ рд╕рдВрд╡рд╛рдж рдЕрдВрдорд▓рд╛рдд рдЖрдгрд╛рд▓
- рдкрд░реНрдпрд╛рд╡рд░рдг-рдЖрдзрд╛рд░рд┐рдд рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдЖрдгрд┐ рд╣реЗрд▓реНрде рдЪреЗрдХреНрд╕ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рд╛рд▓
- Application Insights рд╕рд╣ рд╡рд┐рддрд░рд┐рдд рдЕрдиреБрдкреНрд░рдпреЛрдЧрд╛рдВрдЪреЗ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдХрд░рд╛рд▓
- рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдкреЕрдЯрд░реНрди рдЖрдгрд┐ рд╕рд░реНрд╡реЛрддреНрддрдо рдкрджреНрдзрддреА рд╕рдордЬреВрди рдШреНрдпрд╛рд▓
- рд╕реЛрдкреНрдпрд╛ рддреЗ рдЬрдЯрд┐рд▓ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рдордзреНрдпреЗ рдкреНрд░рдЧрдд рд╡рд┐рд╕реНрддрд╛рд░ рд╢рд┐рдХрд╛рд▓

## рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░

### рдЯрдкреНрдкрд╛ рез: рдЖрдкрдг рдХрд╛рдп рддрдпрд╛рд░ рдХрд░рдд рдЖрд╣реЛрдд (рдпрд╛ рдЙрджрд╛рд╣рд░рдгрд╛рдд рд╕рдорд╛рд╡рд┐рд╖реНрдЯ)

```mermaid
graph TB
    Internet[рдЗрдВрдЯрд░рдиреЗрдЯ/рд╡рд╛рдкрд░рдХрд░реНрддрд╛]
    Gateway[API рдЧреЗрдЯрд╡реЗ<br/>Node.js рдХрдВрдЯреЗрдирд░<br/>рдкреЛрд░реНрдЯ 8080]
    Product[рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛<br/>Python рдХрдВрдЯреЗрдирд░<br/>рдкреЛрд░реНрдЯ 8000]
    AppInsights[рдЕрд░реНрдЬ рдЕрдВрддрд░реНрджреГрд╖реНрдЯреА<br/>рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдЖрдгрд┐ рд▓реЙрдЧреНрд╕]
    
    Internet -->|HTTPS| Gateway
    Gateway -->|HTTP рдЕрдВрддрд░реНрдЧрдд| Product
    Gateway -.->|рдЯреЗрд▓реАрдореЗрдЯреНрд░реА| AppInsights
    Product -.->|рдЯреЗрд▓реАрдореЗрдЯреНрд░реА| AppInsights
    
    style Gateway fill:#2196F3,stroke:#1976D2,stroke-width:3px,color:#fff
    style Product fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
    style Internet fill:#FF9800,stroke:#F57C00,stroke-width:2px,color:#fff
    style AppInsights fill:#9C27B0,stroke:#7B1FA2,stroke-width:2px,color:#fff
```
**рдШрдЯрдХ рддрдкрд╢реАрд▓:**

| рдШрдЯрдХ | рдЙрджреНрджреЗрд╢ | рдкреНрд░рд╡реЗрд╢ | рд╕рдВрд╕рд╛рдзрдиреЗ |
|------|--------|-------|----------|
| **API рдЧреЗрдЯрд╡реЗ** | рдмрд╛рд╣реНрдп рд╡рд┐рдирдВрддреНрдпрд╛ рдмреЕрдХрдПрдВрдб рд╕реЗрд╡рд╛рдВрдХрдбреЗ рд░реВрдЯ рдХрд░рддреЛ | рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ (HTTPS) | рез vCPU, реиGB RAM, реи-реиреж рдкреНрд░рддрд┐рдХреГрддреА |
| **рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕** | рдЗрди-рдореЗрдорд░реА рдбреЗрдЯрд╛рд╕рд╣ рдкреНрд░реЙрдбрдХреНрдЯ рдХреЕрдЯрд▓реЙрдЧ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ | рдлрдХреНрдд рдЕрдВрддрд░реНрдЧрдд | реж.рел vCPU, резGB RAM, рез-резреж рдкреНрд░рддрд┐рдХреГрддреА |
| **Application Insights** | рдХреЗрдВрджреНрд░реАрдХреГрдд рд▓реЙрдЧрд┐рдВрдЧ рдЖрдгрд┐ рд╡рд┐рддрд░рд┐рдд рдЯреНрд░реЗрд╕рд┐рдВрдЧ | Azure рдкреЛрд░реНрдЯрд▓ | рез-реи GB/рдорд╣рд┐рдирд╛ рдбреЗрдЯрд╛ рдЗрдирдЬреЗрд╢рди |

**рд╕реЛрдкреЗ рдХрд╛ рд╕реБрд░реВ рдХрд░рд╛рд╡реЗ?**
- тЬЕ рдкрдЯрдХрди рдбрд┐рдкреНрд▓реЙрдп рдХрд░рд╛ рдЖрдгрд┐ рд╕рдордЬреВрди рдШреНрдпрд╛ (реирел-рейрел рдорд┐рдирд┐рдЯреЗ)
- тЬЕ рдЬрдЯрд┐рд▓рддреЗрд╢рд┐рд╡рд╛рдп рдореБрдЦреНрдп рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕ рдкреЕрдЯрд░реНрди рд╢рд┐рдХрд╛
- тЬЕ рдХрд╛рд░реНрдпрд░рдд рдХреЛрдб рдЬреЛ рддреБрдореНрд╣реА рдмрджрд▓реВ рдЖрдгрд┐ рдкреНрд░рдпреЛрдЧ рдХрд░реВ рд╢рдХрддрд╛
- тЬЕ рд╢рд┐рдХрдгреНрдпрд╛рд╕рд╛рдареА рдХрдореА рдЦрд░реНрдЪ (~$релреж-резрежреж/рдорд╣рд┐рдирд╛ рд╡рд┐ $рейрежреж-резрекрежреж/рдорд╣рд┐рдирд╛)
- тЬЕ рдбреЗрдЯрд╛рдмреЗрд╕ рдЖрдгрд┐ рдореЗрд╕реЗрдЬ рдХреНрдпреВрдЬ рдЬреЛрдбрдгреНрдпрд╛рдкреВрд░реНрд╡реА рдЖрддреНрдорд╡рд┐рд╢реНрд╡рд╛рд╕ рдирд┐рд░реНрдорд╛рдг рдХрд░рд╛

**рдЙрджрд╛рд╣рд░рдг**: рдпрд╛рд▓рд╛ рдЧрд╛рдбреА рдЪрд╛рд▓рд╡рд╛рдпрд▓рд╛ рд╢рд┐рдХрдгреНрдпрд╛рд╕рд╛рд░рдЦреЗ рд╕рдордЬрд╛. рддреБрдореНрд╣реА рд░рд┐рдХрд╛рдореНрдпрд╛ рдкрд╛рд░реНрдХрд┐рдВрдЧ рд▓реЙрдЯрдкрд╛рд╕реВрди (реи рд╕реЗрд╡рд╛) рд╕реБрд░реБрд╡рд╛рдд рдХрд░рддрд╛, рдореВрд▓рднреВрдд рдЧреЛрд╖реНрдЯреА рд╢рд┐рдХрддрд╛, рдЖрдгрд┐ рдирдВрддрд░ рд╢рд╣рд░рд╛рдЪреНрдпрд╛ рд╡рд╛рд╣рддреБрдХреАрдд (рел+ рд╕реЗрд╡рд╛ рдбреЗрдЯрд╛рдмреЗрд╕рд╕рд╣) рдкреНрд░рдЧрддреА рдХрд░рддрд╛.

### рдЯрдкреНрдкрд╛ реи: рднрд╡рд┐рд╖реНрдпрд╛рддреАрд▓ рд╡рд┐рд╕реНрддрд╛рд░ (рд╕рдВрджрд░реНрдн рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░)

реи-рд╕рд░реНрд╡реНрд╣рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рдордзреНрдпреЗ рдкреНрд░рд╡реАрдг рдЭрд╛рд▓реНрдпрд╛рдирдВрддрд░, рддреБрдореНрд╣реА рдпрд╛рдЪрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░реВ рд╢рдХрддрд╛:

```mermaid
graph TB
    User[рд╡рд╛рдкрд░рдХрд░реНрддрд╛]
    Gateway[API рдЧреЗрдЯрд╡реЗ<br/>тЬЕ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ]
    Product[рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛<br/>тЬЕ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ]
    Order[рдСрд░реНрдбрд░ рд╕реЗрд╡рд╛<br/>ЁЯФЬ рдкреБрдвреЗ рдЬреЛрдбрд╛]
    UserSvc[рд╡рд╛рдкрд░рдХрд░реНрддрд╛ рд╕реЗрд╡рд╛<br/>ЁЯФЬ рдкреБрдвреЗ рдЬреЛрдбрд╛]
    Notify[рд╕реВрдЪрдирд╛ рд╕реЗрд╡рд╛<br/>ЁЯФЬ рд╢реЗрд╡рдЯреА рдЬреЛрдбрд╛]
    
    CosmosDB[(рдХреЙрд╕рдореЙрд╕ DB<br/>ЁЯФЬ рдЙрддреНрдкрд╛рджрди рдбреЗрдЯрд╛)]
    AzureSQL[(Azure SQL<br/>ЁЯФЬ рдСрд░реНрдбрд░ рдбреЗрдЯрд╛)]
    ServiceBus[Azure рд╕реЗрд╡рд╛ рдмрд╕<br/>ЁЯФЬ рдЕрд╕рд┐рдВрдХреНрд░реЛрди рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕]
    AppInsights[рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕<br/>тЬЕ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ]
    
    User --> Gateway
    Gateway --> Product
    Gateway --> Order
    Gateway --> UserSvc
    
    Product --> CosmosDB
    Order --> AzureSQL
    UserSvc --> AzureSQL
    
    Product -.->|рдЙрддреНрдкрд╛рджрди рддрдпрд╛рд░ рдХреЗрд▓реЗ рдЗрд╡реНрд╣реЗрдВрдЯ| ServiceBus
    ServiceBus -.->|рд╕рджрд╕реНрдпрддрд╛ рдШреНрдпрд╛| Notify
    ServiceBus -.->|рд╕рджрд╕реНрдпрддрд╛ рдШреНрдпрд╛| Order
    
    Gateway -.-> AppInsights
    Product -.-> AppInsights
    Order -.-> AppInsights
    UserSvc -.-> AppInsights
    Notify -.-> AppInsights
    
    style Product fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
    style Gateway fill:#2196F3,stroke:#1976D2,stroke-width:3px,color:#fff
    style Order fill:#9E9E9E,stroke:#616161,stroke-width:2px,color:#fff
    style UserSvc fill:#9E9E9E,stroke:#616161,stroke-width:2px,color:#fff
    style Notify fill:#9E9E9E,stroke:#616161,stroke-width:2px,color:#fff
```
"рд╡рд┐рд╕реНрддрд╛рд░ рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ" рд╡рд┐рднрд╛рдЧрд╛рдд рдЪрд░рдг-рджрд░-рдЪрд░рдг рд╕реВрдЪрдирд╛ рдкрд╣рд╛.

## рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рд╡реИрд╢рд┐рд╖реНрдЯреНрдпреЗ

тЬЕ **рд╕реЗрд╡рд╛ рд╢реЛрдз**: рдХрдВрдЯреЗрдирд░рдордзреАрд▓ рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд DNS-рдЖрдзрд╛рд░рд┐рдд рд╢реЛрдз  
тЬЕ **рд▓реЛрдб рдмреЕрд▓рдиреНрд╕рд┐рдВрдЧ**: рдкреНрд░рддрд┐рдХреГрддреАрдВрдордзреНрдпреЗ рдЕрдВрдЧрднреВрдд рд▓реЛрдб рдмреЕрд▓рдиреНрд╕рд┐рдВрдЧ  
тЬЕ **рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ**: HTTP рд╡рд┐рдирдВрддреНрдпрд╛рдВрд╡рд░ рдЖрдзрд╛рд░рд┐рдд рд╕реНрд╡рддрдВрддреНрд░ рд╕реЗрд╡рд╛ рд╕реНрдХреЗрд▓рд┐рдВрдЧ  
тЬЕ **рд╣реЗрд▓реНрде рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ**: рджреЛрдиреНрд╣реА рд╕реЗрд╡рд╛рдВрд╕рд╛рдареА рд▓рд╛рдпрд╡реНрд╣рдиреЗрд╕ рдЖрдгрд┐ рд░реЗрдбреАрдиреЗрд╕ рдкреНрд░реЙрдмреНрд╕  
тЬЕ **рд╡рд┐рддрд░рд┐рдд рд▓реЙрдЧрд┐рдВрдЧ**: Application Insights рд╕рд╣ рдХреЗрдВрджреНрд░реАрдХреГрдд рд▓реЙрдЧрд┐рдВрдЧ  
тЬЕ **рдЕрдВрддрд░реНрдЧрдд рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ**: рд╕реБрд░рдХреНрд╖рд┐рдд рд╕реЗрд╡рд╛-рддреЗ-рд╕реЗрд╡рд╛ рд╕рдВрд╡рд╛рдж  
тЬЕ **рдХрдВрдЯреЗрдирд░ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди**: рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдЖрдгрд┐ рд╕реНрдХреЗрд▓рд┐рдВрдЧ  
тЬЕ **рд╢реВрдиреНрдп-рдбрд╛рдЙрдирдЯрд╛рдЗрдо рдЕрдкрдбреЗрдЯреНрд╕**: рд░рд┐рд╡реНрд╣рд┐рдЬрди рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдирд╛рд╕рд╣ рд░реЛрд▓рд┐рдВрдЧ рдЕрдкрдбреЗрдЯреНрд╕  

## рдкреВрд░реНрд╡рдЕрдЯреА

### рдЖрд╡рд╢реНрдпрдХ рд╕рд╛рдзрдиреЗ

рд╕реБрд░реБрд╡рд╛рдд рдХрд░рдгреНрдпрд╛рдкреВрд░реНрд╡реА, рддреБрдордЪреНрдпрд╛рдХрдбреЗ рд╣реА рд╕рд╛рдзрдиреЗ рд╕реНрдерд╛рдкрд┐рдд рдЖрд╣реЗрдд рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛:

1. **[Azure Developer CLI (azd)](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd)** (рдЖрд╡реГрддреНрддреА рез.реж.реж рдХрд┐рдВрд╡рд╛ рддреНрдпрд╛рд╣реВрди рдЕрдзрд┐рдХ)
   ```bash
   azd version
   # рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ: azd рдЖрд╡реГрддреНрддреА 1.0.0 рдХрд┐рдВрд╡рд╛ рдЙрдЪреНрдЪ
   ```

2. **[Azure CLI](https://learn.microsoft.com/cli/azure/install-azure-cli)** (рдЖрд╡реГрддреНрддреА реи.релреж.реж рдХрд┐рдВрд╡рд╛ рддреНрдпрд╛рд╣реВрди рдЕрдзрд┐рдХ)
   ```bash
   az --version
   # рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ: azure-cli 2.50.0 рдХрд┐рдВрд╡рд╛ рдЙрдЪреНрдЪ
   ```

3. **[Docker](https://www.docker.com/get-started)** (рд╕реНрдерд╛рдирд┐рдХ рд╡рд┐рдХрд╛рд╕/рдЪрд╛рдЪрдгреАрд╕рд╛рдареА - рдРрдЪреНрдЫрд┐рдХ)
   ```bash
   docker --version
   # рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ: Docker рдЖрд╡реГрддреНрддреА 20.10 рдХрд┐рдВрд╡рд╛ рддреНрдпрд╛рд╣реВрди рдЕрдзрд┐рдХ
   ```

### рддреБрдордЪреА рд╕реЗрдЯрдЕрдк рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛

рддреБрдореНрд╣реА рддрдпрд╛рд░ рдЖрд╣рд╛рдд рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╣реЗ рдЖрджреЗрд╢ рдЪрд╛рд▓рд╡рд╛:

```bash
# Azure Developer CLI рддрдкрд╛рд╕рд╛
azd version
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: azd рдЖрд╡реГрддреНрддреА 1.0.0 рдХрд┐рдВрд╡рд╛ рдЙрдЪреНрдЪ

# Azure CLI рддрдкрд╛рд╕рд╛
az --version
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: azure-cli 2.50.0 рдХрд┐рдВрд╡рд╛ рдЙрдЪреНрдЪ

# Docker рддрдкрд╛рд╕рд╛ (рдРрдЪреНрдЫрд┐рдХ)
docker --version
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: Docker рдЖрд╡реГрддреНрддреА 20.10 рдХрд┐рдВрд╡рд╛ рдЙрдЪреНрдЪ
```

**рдпрд╢рд╕реНрд╡реА рдирд┐рдХрд╖**: рд╕рд░реНрд╡ рдЖрджреЗрд╢ рдХрд┐рдорд╛рди рдХрд┐рдВрд╡рд╛ рддреНрдпрд╛рд╣реВрди рдЕрдзрд┐рдХ рдЖрд╡реГрддреНрддреА рдХреНрд░рдорд╛рдВрдХ рдкрд░рдд рдХрд░рддрд╛рдд.

### Azure рдЖрд╡рд╢реНрдпрдХрддрд╛

- рд╕рдХреНрд░рд┐рдп **Azure рд╕рджрд╕реНрдпрддрд╛** ([рдлреНрд░реА рдЦрд╛рддреЗ рддрдпрд╛рд░ рдХрд░рд╛](https://azure.microsoft.com/free/))
- рддреБрдордЪреНрдпрд╛ рд╕рджрд╕реНрдпрддреНрд╡рд╛рдордзреНрдпреЗ рд╕рдВрд╕рд╛рдзрдиреЗ рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рдЪреА рдкрд░рд╡рд╛рдирдЧреА
- рд╕рджрд╕реНрдпрддреНрд╡ рдХрд┐рдВрд╡рд╛ рд╕рдВрд╕рд╛рдзрди рдЧрдЯрд╛рд╡рд░ **Contributor** рднреВрдорд┐рдХрд╛

### рдЬреНрдЮрд╛рди рдкреВрд░реНрд╡рдЕрдЯреА

рд╣реЗ рдПрдХ **рдкреНрд░рдЧрдд-рд╕реНрддрд░рд╛рдЪреЗ** рдЙрджрд╛рд╣рд░рдг рдЖрд╣реЗ. рддреБрдореНрд╣рд╛рд▓рд╛:
- [рд╕рд┐рдВрдкрд▓ рдлреНрд▓рд╛рд╕реНрдХ API рдЙрджрд╛рд╣рд░рдг](../../../../examples/container-app/simple-flask-api) рдкреВрд░реНрдг рдХреЗрд▓реЗрд▓реЗ рдЕрд╕рд╛рд╡реЗ
- рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рдЪреА рдореВрд▓рднреВрдд рд╕рдордЬ рдЕрд╕рд╛рд╡реА
- REST APIs рдЖрдгрд┐ HTTP рдЪреА рдУрд│рдЦ рдЕрд╕рд╛рд╡реА
- рдХрдВрдЯреЗрдирд░ рд╕рдВрдХрд▓реНрдкрдирд╛рдВрдЪреА рд╕рдордЬ рдЕрд╕рд╛рд╡реА

**рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕рд╕рд╛рдареА рдирд╡реАрди?** рдореВрд▓рднреВрдд рдЧреЛрд╖реНрдЯреА рд╢рд┐рдХрдгреНрдпрд╛рд╕рд╛рдареА рдкреНрд░рдердо [рд╕рд┐рдВрдкрд▓ рдлреНрд▓рд╛рд╕реНрдХ API рдЙрджрд╛рд╣рд░рдг](../../../../examples/container-app/simple-flask-api) рд╕реБрд░реВ рдХрд░рд╛.

## рдЬрд▓рдж рдкреНрд░рд╛рд░рдВрдн (рдЪрд░рдг-рджрд░-рдЪрд░рдг)

### рдЪрд░рдг рез: рдХреНрд▓реЛрди рдХрд░рд╛ рдЖрдгрд┐ рдиреЗрд╡реНрд╣рд┐рдЧреЗрдЯ рдХрд░рд╛

```bash
git clone https://github.com/microsoft/AZD-for-beginners.git
cd AZD-for-beginners/examples/microservices
```

**тЬУ рдпрд╢рд╕реНрд╡реА рддрдкрд╛рд╕рдгреА**: `azure.yaml` рджрд┐рд╕рдд рдЕрд╕рд▓реНрдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛:
```bash
ls
# рдЕрдкреЗрдХреНрд╖рд┐рдд: README.md, azure.yaml, infra/, src/
```

### рдЪрд░рдг реи: Azure рд╕рд╣ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд░рд╛

```bash
azd auth login
```

рд╣реЗ Azure рдкреНрд░рдорд╛рдгреАрдХрд░рдгрд╛рд╕рд╛рдареА рддреБрдордЪрд╛ рдмреНрд░рд╛рдЙрдЭрд░ рдЙрдШрдбрддреЗ. рддреБрдордЪреНрдпрд╛ Azure рдХреНрд░реЗрдбреЗрдиреНрд╢рд┐рдпрд▓реНрд╕рд╕рд╣ рд╕рд╛рдЗрди рдЗрди рдХрд░рд╛.

**тЬУ рдпрд╢рд╕реНрд╡реА рддрдкрд╛рд╕рдгреА**: рддреБрдореНрд╣рд╛рд▓рд╛ рд╣реЗ рджрд┐рд╕рд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ:
```
Logged in to Azure.
```

### рдЪрд░рдг рей: рдкрд░реНрдпрд╛рд╡рд░рдг рдкреНрд░рд╛рд░рдВрдн рдХрд░рд╛

```bash
azd init
```

**рддреБрдореНрд╣рд╛рд▓рд╛ рджрд┐рд╕рдгрд╛рд░реЗ рдкреНрд░реЙрдореНрдкреНрдЯреНрд╕**:
- **рдкрд░реНрдпрд╛рд╡рд░рдг рдирд╛рд╡**: рдПрдХ рд▓рд╣рд╛рди рдирд╛рд╡ рдкреНрд░рд╡рд┐рд╖реНрдЯ рдХрд░рд╛ (рдЙрджрд╛., `microservices-dev`)
- **Azure рд╕рджрд╕реНрдпрддрд╛**: рддреБрдордЪреА рд╕рджрд╕реНрдпрддрд╛ рдирд┐рд╡рдбрд╛
- **Azure рд╕реНрдерд╛рди**: рдПрдХ рдкреНрд░рджреЗрд╢ рдирд┐рд╡рдбрд╛ (рдЙрджрд╛., `eastus`, `westeurope`)

**тЬУ рдпрд╢рд╕реНрд╡реА рддрдкрд╛рд╕рдгреА**: рддреБрдореНрд╣рд╛рд▓рд╛ рд╣реЗ рджрд┐рд╕рд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ:
```
SUCCESS: New project initialized!
```

### рдЪрд░рдг рек: рдкрд╛рдпрд╛рднреВрдд рд╕реБрд╡рд┐рдзрд╛ рдЖрдгрд┐ рд╕реЗрд╡рд╛ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рд╛

```bash
azd up
```

**рдХрд╛рдп рдШрдбрддреЗ** (рео-резреи рдорд┐рдирд┐рдЯреЗ рд▓рд╛рдЧрддрд╛рдд):

```mermaid
graph LR
    A[azd up] --> B[рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк рддрдпрд╛рд░ рдХрд░рд╛]
    B --> C[рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░рд┐ рддреИрдирд╛рдд рдХрд░рд╛]
    C --> D[рд▓реЙрдЧ рдЕреЕрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рддреИрдирд╛рдд рдХрд░рд╛]
    D --> E[рдЕреЕрдк рдЗрдирд╕рд╛рдЗрдЯреНрд╕ рддреИрдирд╛рдд рдХрд░рд╛]
    E --> F[рдХрдВрдЯреЗрдирд░ рд╡рд╛рддрд╛рд╡рд░рдг рддрдпрд╛рд░ рдХрд░рд╛]
    F --> G[API рдЧреЗрдЯрд╡реЗ рдЗрдореЗрдЬ рддрдпрд╛рд░ рдХрд░рд╛]
    F --> H[рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕ рдЗрдореЗрдЬ рддрдпрд╛рд░ рдХрд░рд╛]
    G --> I[рд░рдЬрд┐рд╕реНрдЯреНрд░рд┐ рдордзреНрдпреЗ рдкреБрд╢ рдХрд░рд╛]
    H --> I
    I --> J[API рдЧреЗрдЯрд╡реЗ рддреИрдирд╛рдд рдХрд░рд╛]
    I --> K[рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕ рддреИрдирд╛рдд рдХрд░рд╛]
    J --> L[рдЗрдиреНрдЧреНрд░реЗрд╕ рдЖрдгрд┐ рд╣реЗрд▓реНрде рдЪреЗрдХреНрд╕ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рд╛]
    K --> L
    L --> M[рддреИрдирд╛рддреА рдкреВрд░реНрдг тЬУ]
    
    style A fill:#2196F3,stroke:#1976D2,stroke-width:3px,color:#fff
    style M fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
```
**тЬУ рдпрд╢рд╕реНрд╡реА рддрдкрд╛рд╕рдгреА**: рддреБрдореНрд╣рд╛рд▓рд╛ рд╣реЗ рджрд┐рд╕рд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ:
```
SUCCESS: Your application was deployed to Azure in X minutes Y seconds.
Endpoint: https://api-gateway-<unique-id>.azurecontainerapps.io
```

**тП▒я╕П рд╡реЗрд│**: рео-резреи рдорд┐рдирд┐рдЯреЗ

### рдЪрд░рдг рел: рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯрдЪреА рдЪрд╛рдЪрдгреА рдХрд░рд╛

```bash
# рдЧреЗрдЯрд╡реЗ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдорд┐рд│рд╡рд╛
GATEWAY_URL=$(azd env get-values | grep API_GATEWAY_URL | cut -d '=' -f2 | tr -d '"')

# API рдЧреЗрдЯрд╡реЗрдЪреА рдЖрд░реЛрдЧреНрдп рд╕реНрдерд┐рддреА рддрдкрд╛рд╕рд╛
curl $GATEWAY_URL/health
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ**:
```json
{
  "status": "healthy",
  "service": "api-gateway",
  "timestamp": "2025-11-19T10:30:00Z"
}
```

**рдЧреЗрдЯрд╡реЗрджреНрд╡рд╛рд░реЗ рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕рдЪреА рдЪрд╛рдЪрдгреА рдХрд░рд╛**:
```bash
# рдЙрддреНрдкрд╛рджрдиреЗ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рд╛
curl $GATEWAY_URL/api/products
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ**:
```json
[
  {"id":1,"name":"Laptop","price":999.99,"stock":50},
  {"id":2,"name":"Mouse","price":29.99,"stock":200},
  {"id":3,"name":"Keyboard","price":79.99,"stock":150}
]
```

**тЬУ рдпрд╢рд╕реНрд╡реА рддрдкрд╛рд╕рдгреА**: рджреЛрдиреНрд╣реА рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рддреНрд░реБрдЯреАрд╢рд┐рд╡рд╛рдп JSON рдбреЗрдЯрд╛ рдкрд░рдд рдХрд░рддрд╛рдд.

---

**ЁЯОЙ рдЕрднрд┐рдирдВрджрди!** рддреБрдореНрд╣реА Azure рд╡рд░ рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдбрд┐рдкреНрд▓реЙрдп рдХреЗрд▓реЗ рдЖрд╣реЗ!

## рдкреНрд░рдХрд▓реНрдк рд╕рдВрд░рдЪрдирд╛

рд╕рд░реНрд╡ рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА рдлрд╛рдпрд▓реА рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдЖрд╣реЗрддтАФрд╣реЗ рдПрдХ рдкреВрд░реНрдг, рдХрд╛рд░реНрдпрд░рдд рдЙрджрд╛рд╣рд░рдг рдЖрд╣реЗ:

```
microservices/
тФВ
тФЬтФАтФА README.md                         # This file
тФЬтФАтФА azure.yaml                        # AZD configuration
тФЬтФАтФА .gitignore                        # Git ignore patterns
тФВ
тФЬтФАтФА infra/                           # Infrastructure as Code (Bicep)
тФВ   тФЬтФАтФА main.bicep                   # Main orchestration
тФВ   тФЬтФАтФА abbreviations.json           # Naming conventions
тФВ   тФЬтФАтФА core/                        # Shared infrastructure
тФВ   тФВ   тФЬтФАтФА container-apps-environment.bicep  # Container environment + registry
тФВ   тФВ   тФФтФАтФА monitor.bicep            # Application Insights + Log Analytics
тФВ   тФФтФАтФА app/                         # Service definitions
тФВ       тФЬтФАтФА api-gateway.bicep        # API Gateway container app
тФВ       тФФтФАтФА product-service.bicep    # Product Service container app
тФВ
тФФтФАтФА src/                             # Application source code
    тФЬтФАтФА api-gateway/                 # Node.js API Gateway
    тФВ   тФЬтФАтФА app.js                   # Express server with routing
    тФВ   тФЬтФАтФА package.json             # Node dependencies
    тФВ   тФФтФАтФА Dockerfile               # Container definition
    тФФтФАтФА product-service/             # Python Product Service
        тФЬтФАтФА main.py                  # Flask API with product data
        тФЬтФАтФА requirements.txt         # Python dependencies
        тФФтФАтФА Dockerfile               # Container definition
```

**рдкреНрд░рддреНрдпреЗрдХ рдШрдЯрдХ рдХрд╛рдп рдХрд░рддреЛ:**

**рдкрд╛рдпрд╛рднреВрдд рд╕реБрд╡рд┐рдзрд╛ (infra/)**:
- `main.bicep`: рд╕рд░реНрд╡ Azure рд╕рдВрд╕рд╛рдзрдиреЗ рдЖрдгрд┐ рддреНрдпрд╛рдВрдЪреЗ рдЕрд╡рд▓рдВрдмрд┐рддреНрд╡ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ
- `core/container-apps-environment.bicep`: рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рдкрд░реНрдпрд╛рд╡рд░рдг рдЖрдгрд┐ Azure Container Registry рддрдпрд╛рд░ рдХрд░рддреЗ
- `core/monitor.bicep`: рд╡рд┐рддрд░рд┐рдд рд▓реЙрдЧрд┐рдВрдЧрд╕рд╛рдареА Application Insights рд╕реЗрдЯ рдХрд░рддреЗ
- `app/*.bicep`: рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдЖрдгрд┐ рд╣реЗрд▓реНрде рдЪреЗрдХреНрд╕рд╕рд╣ рд╡реИрдпрдХреНрддрд┐рдХ рдХрдВрдЯреЗрдирд░ рдЕреЕрдк рдкрд░рд┐рднрд╛рд╖рд╛

**API рдЧреЗрдЯрд╡реЗ (src/api-gateway/)**:
- рдорд╛рдЧрдгреНрдпрд╛ рдмреЕрдХрдПрдВрдб рд╕реЗрд╡рд╛рдВрдХрдбреЗ рд░реВрдЯ рдХрд░рдгрд╛рд░реА рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ-рд╕рдореЛрд░рдЪреА рд╕реЗрд╡рд╛
- рд▓реЙрдЧрд┐рдВрдЧ, рддреНрд░реБрдЯреА рд╣рд╛рддрд╛рд│рдгреА, рдЖрдгрд┐ рд╡рд┐рдирдВрддреА рдлреЙрд░рд╡рд░реНрдбрд┐рдВрдЧ рдЕрдВрдорд▓рд╛рдд рдЖрдгрддреЗ
- рд╕реЗрд╡рд╛-рддреЗ-рд╕реЗрд╡рд╛ HTTP рд╕рдВрд╡рд╛рджрд╛рдЪреЗ рдкреНрд░рд╛рддреНрдпрдХреНрд╖рд┐рдХ рджреЗрддреЗ

**рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕ (src/product-service/)**:
- рдкреНрд░реЙрдбрдХреНрдЯ рдХреЕрдЯрд▓реЙрдЧрд╕рд╣ рдЕрдВрддрд░реНрдЧрдд рд╕реЗрд╡рд╛ (рд╕реЛрдкреЗрдкрдгрд╛рд╕рд╛рдареА рдЗрди-рдореЗрдорд░реА)
- рд╣реЗрд▓реНрде рдЪреЗрдХреНрд╕рд╕рд╣ REST API
- рдмреЕрдХрдПрдВрдб рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕ рдкреЕрдЯрд░реНрдирдЪреЗ рдЙрджрд╛рд╣рд░рдг

## рд╕реЗрд╡рд╛рдВрдЪреЗ рд╡рд┐рд╣рдВрдЧрд╛рд╡рд▓реЛрдХрди

### API рдЧреЗрдЯрд╡реЗ (Node.js/Express)

**рдкреЛрд░реНрдЯ**: реорежреореж  
**рдкреНрд░рд╡реЗрд╢**: рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ (рдмрд╛рд╣реНрдп рдЗрдирдЧреНрд░реЗрд╕)  
**рдЙрджреНрджреЗрд╢**: рдпреЗрдгрд╛рд▒реНрдпрд╛ рд╡рд┐рдирдВрддреНрдпрд╛ рдпреЛрдЧреНрдп рдмреЕрдХрдПрдВрдб рд╕реЗрд╡рд╛рдВрдХрдбреЗ рд░реВрдЯ рдХрд░рддреЛ  

**рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕**:
- `GET /` - рд╕реЗрд╡рд╛ рдорд╛рд╣рд┐рддреА
- `GET /health` - рд╣реЗрд▓реНрде рдЪреЗрдХ рдПрдВрдбрдкреЙрдЗрдВрдЯ
- `GET /api/products` - рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕рдХрдбреЗ рдлреЙрд░рд╡рд░реНрдб рдХрд░рд╛ (рд╕рд░реНрд╡ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рд╛)
- `GET /api/products/:id` - рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕рдХрдбреЗ рдлреЙрд░рд╡рд░реНрдб рдХрд░рд╛ (ID рдиреЗ рдорд┐рд│рд╡рд╛)

**рдорд╣рддреНрддреНрд╡рд╛рдЪреА рд╡реИрд╢рд┐рд╖реНрдЯреНрдпреЗ**:
- axios рд╕рд╣ рд╡рд┐рдирдВрддреА рд░реВрдЯрд┐рдВрдЧ
- рдХреЗрдВрджреНрд░реАрдХреГрдд рд▓реЙрдЧрд┐рдВрдЧ
- рддреНрд░реБрдЯреА рд╣рд╛рддрд╛рд│рдгреА рдЖрдгрд┐ рдЯрд╛рдЗрдордЖрдЙрдЯ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди
- рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рдЪрд▓рд╛рдВрджреНрд╡рд╛рд░реЗ рд╕реЗрд╡рд╛ рд╢реЛрдз
- Application Insights рдПрдХрддреНрд░реАрдХрд░рдг

**рдХреЛрдб рд╣рд╛рдпрд▓рд╛рдЗрдЯ** (`src/api-gateway/app.js`):
```javascript
// рдЕрдВрддрд░реНрдЧрдд рд╕реЗрд╡рд╛ рд╕рдВрд╡рд╛рдж
app.get('/api/products', async (req, res) => {
  const response = await axios.get(`${PRODUCT_SERVICE_URL}/products`, {
    timeout: 5000
  });
  res.json(response.data);
});
```

### рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕ (Python/Flask)

**рдкреЛрд░реНрдЯ**: реорежрежреж  
**рдкреНрд░рд╡реЗрд╢**: рдлрдХреНрдд рдЕрдВрддрд░реНрдЧрдд (рдмрд╛рд╣реНрдп рдЗрдирдЧреНрд░реЗрд╕ рдирд╛рд╣реА)  
**рдЙрджреНрджреЗрд╢**: рдЗрди-рдореЗрдорд░реА рдбреЗрдЯрд╛рд╕рд╣ рдкреНрд░реЙрдбрдХреНрдЯ рдХреЕрдЯрд▓реЙрдЧ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ  

**рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕**:
- `GET /` - рд╕реЗрд╡рд╛ рдорд╛рд╣рд┐рддреА
- `GET /health` - рд╣реЗрд▓реНрде рдЪреЗрдХ рдПрдВрдбрдкреЙрдЗрдВрдЯ
- `GET /products` - рд╕рд░реНрд╡ рдкреНрд░реЙрдбрдХреНрдЯреНрд╕ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рд╛
- `GET /products/<id>` - ID рдиреЗ рдкреНрд░реЙрдбрдХреНрдЯ рдорд┐рд│рд╡рд╛

**рдорд╣рддреНрддреНрд╡рд╛рдЪреА рд╡реИрд╢рд┐рд╖реНрдЯреНрдпреЗ**:
- Flask рд╕рд╣ RESTful API
- рдЗрди-рдореЗрдорд░реА рдкреНрд░реЙрдбрдХреНрдЯ рд╕реНрдЯреЛрдЕрд░ (рд╕реЛрдкреЗ, рдбреЗрдЯрд╛рдмреЗрд╕рдЪреА рдЧрд░рдЬ рдирд╛рд╣реА)
- рдкреНрд░реЙрдмреНрд╕рд╕рд╣ рд╣реЗрд▓реНрде рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ
- рд╕рдВрд░рдЪрд┐рдд рд▓реЙрдЧрд┐рдВрдЧ
- Application Insights рдПрдХрддреНрд░реАрдХрд░рдг

**рдбреЗрдЯрд╛ рдореЙрдбреЗрд▓**:
```python
{
  "id": 1,
  "name": "Laptop",
  "description": "High-performance laptop",
  "price": 999.99,
  "stock": 50
}
```

**рдлрдХреНрдд рдЕрдВрддрд░реНрдЧрдд рдХрд╛?**
рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХрдкрдгреЗ рдЙрдШрдбрд▓реЗрд▓реА рдирд╛рд╣реА. рд╕рд░реНрд╡ рд╡рд┐рдирдВрддреНрдпрд╛ API рдЧреЗрдЯрд╡реЗрджреНрд╡рд╛рд░реЗрдЪ рдЬрд╛рд╡реНрдпрд╛ рд▓рд╛рдЧрддрд╛рдд, рдЬреЗ рдкреНрд░рджрд╛рди рдХрд░рддреЗ:
- рд╕реБрд░рдХреНрд╖рд╛: рдирд┐рдпрдВрддреНрд░рд┐рдд рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреВ
- рд▓рд╡рдЪрд┐рдХрддрд╛: рдХреНрд▓рд╛рдпрдВрдЯреНрд╕рд╡рд░ рдкрд░рд┐рдгрд╛рдо рди рдХрд░рддрд╛ рдмреЕрдХрдПрдВрдб рдмрджрд▓реВ рд╢рдХрддреЛ
- рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ: рдХреЗрдВрджреНрд░реАрдХреГрдд рд╡рд┐рдирдВрддреА рд▓реЙрдЧрд┐рдВрдЧ

## рд╕реЗрд╡рд╛ рд╕рдВрд╡рд╛рдж рд╕рдордЬреВрди рдШреЗрдгреЗ

### рд╕реЗрд╡рд╛рдВрдордзреНрдпреЗ рд╕рдВрд╡рд╛рдж рдХрд╕рд╛ рд╣реЛрддреЛ

```mermaid
sequenceDiagram
    participant User
    participant Gateway as API Gateway<br/>(Port 8080)
    participant Product as рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛<br/>(Port 8000)
    participant AI as рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдЕрдВрддрд░реНрджреГрд╖реНрдЯреА
    
    User->>Gateway: GET /api/products
    Gateway->>AI: рд╡рд┐рдирдВрддреА рдиреЛрдВрджрд╡рд╛
    Gateway->>Product: GET /products (рдЖрдВрддрд░рд░реНрдЧрдд HTTP)
    Product->>AI: рдХреНрд╡реЗрд░реА рдиреЛрдВрджрд╡рд╛
    Product-->>Gateway: JSON рдкреНрд░рддрд┐рд╕рд╛рдж [5 рдЙрддреНрдкрд╛рджрдиреЗ]
    Gateway->>AI: рдкреНрд░рддрд┐рд╕рд╛рдж рдиреЛрдВрджрд╡рд╛
    Gateway-->>User: JSON рдкреНрд░рддрд┐рд╕рд╛рдж [5 рдЙрддреНрдкрд╛рджрдиреЗ]
    
    Note over Gateway,Product: рдЕрдВрддрд░реНрдЧрдд DNS: http://product-service
    Note over User,AI: рд╕рд░реНрд╡ рд╕рдВрд╡рд╛рдж рдиреЛрдВрджрд╡рд▓реЗ рдЖрдгрд┐ рдЯреНрд░реЗрд╕ рдХреЗрд▓реЗ
```
рдпрд╛ рдЙрджрд╛рд╣рд░рдгрд╛рдд, API рдЧреЗрдЯрд╡реЗ рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕рд╢реА **рдЕрдВрддрд░реНрдЧрдд HTTP рдХреЙрд▓реНрд╕** рд╡рд╛рдкрд░реВрди рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрддреЛ:

```javascript
// API рдЧреЗрдЯрд╡реЗ (src/api-gateway/app.js)
const PRODUCT_SERVICE_URL = process.env.PRODUCT_SERVICE_URL;

// рдЕрдВрддрд░реНрдЧрдд HTTP рд╡рд┐рдирдВрддреА рдХрд░рд╛
const response = await axios.get(`${PRODUCT_SERVICE_URL}/products`);
```

**рдорд╣рддреНрддреНрд╡рд╛рдЪреЗ рдореБрджреНрджреЗ**:

1. **DNS-рдЖрдзрд╛рд░рд┐рдд рд╢реЛрдз**: рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рдЕрдВрддрд░реНрдЧрдд рд╕реЗрд╡рд╛рдВрд╕рд╛рдареА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд DNS рдкреНрд░рджрд╛рди рдХрд░рддреЛ
   - рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕ FQDN: `product-service.internal.<environment>.azurecontainerapps.io`
   - рд╕реЛрдкреЗ рдХреЗрд▓реЗрд▓реЗ: `http://product-service` (рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рддреЗ рд░рд┐рдЭреЙрд▓реНрд╡реНрд╣ рдХрд░рддреЛ)

2. **рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкреНрд░рджрд░реНрд╢рди рдирд╛рд╣реА**: рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕рдордзреНрдпреЗ `external: false` Bicep рдордзреНрдпреЗ рдЖрд╣реЗ
   - рдлрдХреНрдд рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рдкрд░реНрдпрд╛рд╡рд░рдгрд╛рдд рдкреНрд░рд╡реЗрд╢рдпреЛрдЧреНрдп
   - рдЗрдВрдЯрд░рдиреЗрдЯрд╡рд░реВрди рдкреЛрд╣реЛрдЪрддрд╛ рдпреЗрдд рдирд╛рд╣реА

3. **рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рдЪрд▓**: рд╕реЗрд╡рд╛ URL рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд╡реЗрд│реА рдЗрдВрдЬреЗрдХреНрдЯ рдХреЗрд▓реЗ рдЬрд╛рддрд╛рдд
   - Bicep рдЕрдВрддрд░реНрдЧрдд FQDN рдЧреЗрдЯрд╡реЗрд╡рд░ рдкрд╛рд╕ рдХрд░рддреЗ
   - рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдХреЛрдбрдордзреНрдпреЗ рд╣рд╛рд░реНрдбрдХреЛрдбреЗрдб URL рдирд╛рд╣реА

**рдЙрджрд╛рд╣рд░рдг**: рдпрд╛рд▓рд╛ рдСрдлрд┐рд╕ рд░реВрдореНрд╕рд╕рд╛рд░рдЦреЗ рд╕рдордЬрд╛. API рдЧреЗрдЯрд╡реЗ рд░рд┐рд╕реЗрдкреНрд╢рди рдбреЗрд╕реНрдХ рдЖрд╣реЗ (рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ-рд╕рдореЛрд░), рдЖрдгрд┐ рдкреНрд░реЙрдбрдХреНрдЯ рд╕рд░реНрд╡реНрд╣рд┐рд╕ рдСрдлрд┐рд╕ рд░реВрдо рдЖрд╣реЗ (рдлрдХреНрдд рдЕрдВрддрд░реНрдЧрдд). рдХреЛрдгрддреНрдпрд╛рд╣реА рдСрдлрд┐рд╕рдордзреНрдпреЗ рдкреЛрд╣реЛрдЪрдгреНрдпрд╛рд╕рд╛рдареА рдЕрднреНрдпрд╛рдЧрддрд╛рдВрдирд╛ рд░рд┐рд╕реЗрдкреНрд╢рдирдордзреВрди рдЬрд╛рд╡реЗ рд▓рд╛рдЧрддреЗ.
3. рджреЛрдиреНрд╣реА рд╕реЗрд╡рд╛ рдкреБрдиреНрд╣рд╛ рддреИрдирд╛рдд рдХрд░рд╛:

```bash
azd deploy product-service
azd deploy api-gateway
```

4. рдирд╡реАрди рдПрдиреНрдбрдкреЙрдЗрдВрдЯрдЪреА рдЪрд╛рдЪрдгреА рдХрд░рд╛:

```bash
GATEWAY_URL=$(azd env get-values | grep API_GATEWAY_URL | cut -d '=' -f2 | tr -d '"')

# рдирд╡реАрди рдЙрддреНрдкрд╛рджрди рддрдпрд╛рд░ рдХрд░рд╛
curl -X POST $GATEWAY_URL/api/products \
  -H "Content-Type: application/json" \
  -d '{"name":"USB Cable","price":9.99,"stock":500}'
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ:**
```json
{"id":6,"name":"USB Cable","description":"","price":9.99,"stock":500}
```

5. рдпрд╛рджреАрдордзреНрдпреЗ рджрд┐рд╕рдд рдЕрд╕рд▓реНрдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛:

```bash
curl $GATEWAY_URL/api/products
# рдЖрддрд╛ 6 рдЙрддреНрдкрд╛рджрдиреЗ рджрд╛рдЦрд╡рд▓реА рдкрд╛рд╣рд┐рдЬреЗрдд рдЬреНрдпрд╛рдордзреНрдпреЗ рдирд╡реАрди USB рдХреЗрдмрд▓ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдЖрд╣реЗ
```

**рдпрд╢рд╕реНрд╡реА рдирд┐рдХрд╖**:
- тЬЕ POST рд╡рд┐рдирдВрддреА HTTP 201 рдкрд░рдд рдХрд░рддреЗ
- тЬЕ рдирд╡реАрди рдЙрддреНрдкрд╛рджрди GET /api/products рдпрд╛рджреАрдордзреНрдпреЗ рджрд┐рд╕рддреЗ
- тЬЕ рдЙрддреНрдкрд╛рджрдирд╛рд▓рд╛ рдСрдЯреЛ-рдЗрдиреНрдХреНрд░рд┐рдореЗрдВрдЯреЗрдб ID рдЖрд╣реЗ

**рд╡реЗрд│**: 10-15 рдорд┐рдирд┐рдЯреЗ

---

### рд╡реНрдпрд╛рдпрд╛рдо 2: рдСрдЯреЛрд╕реНрдХреЗрд▓рд┐рдВрдЧ рдирд┐рдпрдо рдмрджрд▓рдгреЗ тнРтнР (рдордзреНрдпрдо)

**рдЙрджреНрджрд┐рд╖реНрдЯ**: рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ рдЕрдзрд┐рдХ рдЖрдХреНрд░рдордХрдкрдгреЗ рд╕реНрдХреЗрд▓ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдмрджрд▓рдгреЗ

**рд╕реБрд░реБрд╡рд╛рддреАрдЪрд╛ рдмрд┐рдВрджреВ**: `infra/app/product-service.bicep`

**рдкрд╛рдпрд▒реНрдпрд╛**:

1. `infra/app/product-service.bicep` рдЙрдШрдбрд╛ рдЖрдгрд┐ `scale` рдмреНрд▓реЙрдХ рд╢реЛрдзрд╛ (рд╕реБрдорд╛рд░реЗ рдУрд│ 95)

2. рдмрджрд▓ рдХрд░рд╛:
```bicep
scale: {
  minReplicas: 1
  maxReplicas: 10
  rules: [
    {
      name: 'http-scale-rule'
      http: {
        metadata: {
          concurrentRequests: '100'  // OLD
        }
      }
    }
  ]
}
```

рддреЗ:
```bicep
scale: {
  minReplicas: 2  // Always have 2 running
  maxReplicas: 20  // Allow more scaling
  rules: [
    {
      name: 'http-scale-rule'
      http: {
        metadata: {
          concurrentRequests: '20'  // Scale at lower threshold
        }
      }
    }
  ]
}
```

3. рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдкреБрдиреНрд╣рд╛ рддреИрдирд╛рдд рдХрд░рд╛:

```bash
azd up
```

4. рдирд╡реАрди рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛:

```bash
az containerapp show \
  --name $(azd env get-values | grep PRODUCT_SERVICE | head -1 | cut -d '/' -f5) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --query "properties.template.scale" -o json
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ:**
```json
{
  "minReplicas": 2,
  "maxReplicas": 20,
  "rules": [...]
}
```

5. рд▓реЛрдбрд╕рд╣ рдСрдЯреЛрд╕реНрдХреЗрд▓рд┐рдВрдЧрдЪреА рдЪрд╛рдЪрдгреА рдХрд░рд╛:

```bash
# рд╕рдорд╛рдВрддрд░ рд╡рд┐рдирдВрддреНрдпрд╛ рддрдпрд╛рд░ рдХрд░рд╛
for i in {1..500}; do curl $GATEWAY_URL/api/products & done

# рд╕реНрдХреЗрд▓рд┐рдВрдЧ рд╣реЛрдд рдЕрд╕рд▓реНрдпрд╛рдЪреЗ рдкрд╣рд╛
azd logs product-service --follow
# рд╢реЛрдзрд╛: рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕
```

**рдпрд╢рд╕реНрд╡реА рдирд┐рдХрд╖**:
- тЬЕ рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ рдиреЗрд╣рдореА рдХрд┐рдорд╛рди 2 рдкреНрд░рддрд┐рдХреГрддреА рдЪрд╛рд▓рд╡рддреЗ
- тЬЕ рд▓реЛрдб рдЕрдВрддрд░реНрдЧрдд, 2 рдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рдкреНрд░рддрд┐рдХреГрддреАрдВрд╡рд░ рд╕реНрдХреЗрд▓ рдХрд░рддреЗ
- тЬЕ Azure рдкреЛрд░реНрдЯрд▓ рдирд╡реАрди рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдирд┐рдпрдо рджрд░реНрд╢рд╡рддреЗ

**рд╡реЗрд│**: 15-20 рдорд┐рдирд┐рдЯреЗ

---

### рд╡реНрдпрд╛рдпрд╛рдо 3: рдХрд╕реНрдЯрдо рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдХреНрд╡реЗрд░реА рдЬреЛрдбрд╛ тнРтнР (рдордзреНрдпрдо)

**рдЙрджреНрджрд┐рд╖реНрдЯ**: рдкреНрд░реЛрдбрдХреНрдЯ API рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдЯреНрд░реЕрдХ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХрд╕реНрдЯрдо Application Insights рдХреНрд╡реЗрд░реА рддрдпрд╛рд░ рдХрд░рд╛

**рдкрд╛рдпрд▒реНрдпрд╛**:

1. Azure рдкреЛрд░реНрдЯрд▓рдордзреНрдпреЗ Application Insights рд╡рд░ рдЬрд╛:
   - Azure рдкреЛрд░реНрдЯрд▓рдордзреНрдпреЗ рдЬрд╛
   - рддреБрдордЪрд╛ рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк рд╢реЛрдзрд╛ (rg-microservices-*)
   - Application Insights рд░рд┐рд╕реЛрд░реНрд╕рд╡рд░ рдХреНрд▓рд┐рдХ рдХрд░рд╛

2. рдбрд╛рд╡реНрдпрд╛ рдореЗрдиреВрдордзреНрдпреЗ "Logs" рд╡рд░ рдХреНрд▓рд┐рдХ рдХрд░рд╛

3. рд╣реА рдХреНрд╡реЗрд░реА рддрдпрд╛рд░ рдХрд░рд╛:

```kusto
requests
| where timestamp > ago(1h)
| where name contains "products"
| summarize 
    RequestCount = count(),
    AvgDuration = avg(duration),
    P95Duration = percentile(duration, 95),
    SuccessRate = 100.0 * countif(success == true) / count()
  by bin(timestamp, 5m)
| render timechart
```

4. рдХреНрд╡реЗрд░реА рдЪрд╛рд▓рд╡рдгреНрдпрд╛рд╕рд╛рдареА "Run" рд╡рд░ рдХреНрд▓рд┐рдХ рдХрд░рд╛

5. рдХреНрд╡реЗрд░реА рд╕реЗрд╡реНрд╣ рдХрд░рд╛:
   - "Save" рд╡рд░ рдХреНрд▓рд┐рдХ рдХрд░рд╛
   - рдирд╛рд╡: "Product API Performance"
   - рд╢реНрд░реЗрдгреА: "Performance"

6. рдЯреЗрд╕реНрдЯ рдЯреНрд░реЕрдлрд┐рдХ рддрдпрд╛рд░ рдХрд░рд╛:

```bash
for i in {1..100}; do curl $GATEWAY_URL/api/products; sleep 1; done
```

7. рдбреЗрдЯрд╛ рдкрд╛рд╣рдгреНрдпрд╛рд╕рд╛рдареА рдХреНрд╡реЗрд░реА рд░реАрдлреНрд░реЗрд╢ рдХрд░рд╛

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ:**
- рд╡реЗрд│реЛрд╡реЗрд│реА рд╡рд┐рдирдВрддреА рд╕рдВрдЦреНрдпрд╛ рджрд░реНрд╢рд╡рдгрд╛рд░рд╛ рдЪрд╛рд░реНрдЯ
- рд╕рд░рд╛рд╕рд░реА рдХрд╛рд▓рд╛рд╡рдзреА < 500ms
- рдпрд╢ рджрд░ = 100%
- 5 рдорд┐рдирд┐рдЯрд╛рдВрдЪреНрдпрд╛ рдЯрд╛рдЗрдо рдмрд┐рдиреНрд╕

**рдпрд╢рд╕реНрд╡реА рдирд┐рдХрд╖**:
- тЬЕ рдХреНрд╡реЗрд░реА 100+ рд╡рд┐рдирдВрддреНрдпрд╛ рджрд░реНрд╢рд╡рддреЗ
- тЬЕ рдпрд╢ рджрд░ 100% рдЖрд╣реЗ
- тЬЕ рд╕рд░рд╛рд╕рд░реА рдХрд╛рд▓рд╛рд╡рдзреА < 500ms
- тЬЕ рдЪрд╛рд░реНрдЯ 5-рдорд┐рдирд┐рдЯ рдЯрд╛рдЗрдо рдмрд┐рдиреНрд╕ рджрд░реНрд╢рд╡рддреЛ

**рд╢рд┐рдХрдгреНрдпрд╛рдЪрд╛ рдкрд░рд┐рдгрд╛рдо**: рдХрд╕реНрдЯрдо рдХреНрд╡реЗрд░реАрд╕рд╣ рд╕реЗрд╡рд╛ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╢реА рдореЙрдирд┐рдЯрд░ рдХрд░рд╛рдпрдЪреА рддреЗ рд╕рдордЬреВрди рдШреНрдпрд╛

**рд╡реЗрд│**: 10-15 рдорд┐рдирд┐рдЯреЗ

---

### рд╡реНрдпрд╛рдпрд╛рдо 4: Retry Logic рд▓рд╛рдЧреВ рдХрд░рд╛ тнРтнРтнР (рдкреНрд░рдЧрдд)

**рдЙрджреНрджрд┐рд╖реНрдЯ**: рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ рддрд╛рддреНрдкреБрд░рддреА рдЕрдиреБрдкрд▓рдмреНрдз рдЕрд╕рддрд╛рдирд╛ API Gateway рдордзреНрдпреЗ Retry Logic рдЬреЛрдбрд╛

**рд╕реБрд░реБрд╡рд╛рддреАрдЪрд╛ рдмрд┐рдВрджреВ**: `src/api-gateway/app.js`

**рдкрд╛рдпрд▒реНрдпрд╛**:

1. Retry рд▓рд╛рдпрдмреНрд░рд░реА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рд╛:

```bash
cd src/api-gateway
npm install axios-retry --save
cd ../..
```

2. `src/api-gateway/app.js` рдЕрдкрдбреЗрдЯ рдХрд░рд╛ (axios рдЖрдпрд╛рдд рдХреЗрд▓реНрдпрд╛рдирдВрддрд░ рдЬреЛрдбрд╛):

```javascript
const axiosRetry = require('axios-retry');

// рдкреБрдирд░реНрдкреНрд░рдпрддреНрди рд▓реЙрдЬрд┐рдХ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рд╛
axiosRetry(axios, {
  retries: 3,
  retryDelay: (retryCount) => {
    return retryCount * 1000; // 1 рд╕реЗрдХрдВрдж, 2 рд╕реЗрдХрдВрдж, 3 рд╕реЗрдХрдВрдж
  },
  retryCondition: (error) => {
    // рдиреЗрдЯрд╡рд░реНрдХ рддреНрд░реБрдЯреА рдХрд┐рдВрд╡рд╛ 5xx рдкреНрд░рддрд┐рд╕рд╛рджрд╛рдВрд╡рд░ рдкреБрдирд░реНрдкреНрд░рдпрддреНрди рдХрд░рд╛
    return axiosRetry.isNetworkOrIdempotentRequestError(error) ||
           (error.response && error.response.status >= 500);
  }
});

console.log('Retry logic configured: 3 retries with exponential backoff');
```

3. API Gateway рдкреБрдиреНрд╣рд╛ рддреИрдирд╛рдд рдХрд░рд╛:

```bash
azd deploy api-gateway
```

4. рд╕реЗрд╡рд╛ рдЕрдкрдпрд╢рд╛рдЪреЗ рдЕрдиреБрдХрд░рдг рдХрд░реВрди Retry рд╡рд░реНрддрдирд╛рдЪреА рдЪрд╛рдЪрдгреА рдХрд░рд╛:

```bash
# рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ 0 рд╡рд░ рд╕реНрдХреЗрд▓ рдХрд░рд╛ (рдЕрдкрдпрд╢рд╛рдЪреА рдирдХреНрдХрд▓ рдХрд░рд╛)
az containerapp update \
  --name $(azd env get-values | grep PRODUCT_SERVICE | head -1 | cut -d '/' -f5) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --min-replicas 0 \
  --max-replicas 0

# рдЙрддреНрдкрд╛рджрдиреЗ рдкреНрд░рд╡реЗрд╢ рдХрд░рдгреНрдпрд╛рдЪрд╛ рдкреНрд░рдпрддреНрди рдХрд░рд╛ (3 рд╡реЗрд│рд╛ рдкреБрдиреНрд╣рд╛ рдкреНрд░рдпрддреНрди рдХрд░реЗрд▓)
time curl -v $GATEWAY_URL/api/products
# рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рд╛: рдкреНрд░рддрд┐рд╕рд╛рдж ~6 рд╕реЗрдХрдВрдж рд▓рд╛рдЧрддреЛ (1s + 2s + 3s рдкреБрдиреНрд╣рд╛ рдкреНрд░рдпрддреНрди)

# рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рдкреБрдирд░реНрд╕рдВрдЪрдпрд┐рдд рдХрд░рд╛
az containerapp update \
  --name $(azd env get-values | grep PRODUCT_SERVICE | head -1 | cut -d '/' -f5) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --min-replicas 1 \
  --max-replicas 10
```

5. Retry рд▓реЙрдЧ рдкрд╣рд╛:

```bash
azd logs api-gateway --tail 50
# рдкреБрдиреНрд╣рд╛ рдкреНрд░рдпрддреНрди рд╕рдВрджреЗрд╢ рд╢реЛрдзрд╛
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рд╡рд░реНрддрди:**
- рд╡рд┐рдирдВрддреНрдпрд╛ рдЕрдкрдпрд╢реА рд╣реЛрдгреНрдпрд╛рдкреВрд░реНрд╡реА 3 рд╡реЗрд│рд╛ Retry рдХрд░рддрд╛рдд
- рдкреНрд░рддреНрдпреЗрдХ Retry рдЕрдзрд┐рдХ рд╡реЗрд│ рдерд╛рдВрдмрддреЗ (1s, 2s, 3s)
- рд╕реЗрд╡рд╛ рдкреБрдиреНрд╣рд╛ рд╕реБрд░реВ рдЭрд╛рд▓реНрдпрд╛рдирдВрддрд░ рдпрд╢рд╕реНрд╡реА рд╡рд┐рдирдВрддреНрдпрд╛
- Retry рдкреНрд░рдпрддреНрди рд▓реЙрдЧрдордзреНрдпреЗ рджрд┐рд╕рддрд╛рдд

**рдпрд╢рд╕реНрд╡реА рдирд┐рдХрд╖**:
- тЬЕ рд╡рд┐рдирдВрддреНрдпрд╛ рдЕрдкрдпрд╢реА рд╣реЛрдгреНрдпрд╛рдкреВрд░реНрд╡реА 3 рд╡реЗрд│рд╛ Retry рдХрд░рддрд╛рдд
- тЬЕ рдкреНрд░рддреНрдпреЗрдХ Retry рдЕрдзрд┐рдХ рд╡реЗрд│ рдерд╛рдВрдмрддреЗ (exponential backoff)
- тЬЕ рд╕реЗрд╡рд╛ рдкреБрдиреНрд╣рд╛ рд╕реБрд░реВ рдЭрд╛рд▓реНрдпрд╛рдирдВрддрд░ рдпрд╢рд╕реНрд╡реА рд╡рд┐рдирдВрддреНрдпрд╛
- тЬЕ Retry рдкреНрд░рдпрддреНрди рд▓реЙрдЧрдордзреНрдпреЗ рджрд┐рд╕рддрд╛рдд

**рд╢рд┐рдХрдгреНрдпрд╛рдЪрд╛ рдкрд░рд┐рдгрд╛рдо**: рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕рдордзреАрд▓ рд▓рд╡рдЪрд┐рдХрддрд╛ рдкреЕрдЯрд░реНрди рд╕рдордЬреВрди рдШреНрдпрд╛ (circuit breakers, retries, timeouts)

**рд╡реЗрд│**: 20-25 рдорд┐рдирд┐рдЯреЗ

---

## рдЬреНрдЮрд╛рди рддрдкрд╛рд╕рдгреА

рд╣реЗ рдЙрджрд╛рд╣рд░рдг рдкреВрд░реНрдг рдХреЗрд▓реНрдпрд╛рдирдВрддрд░, рддреБрдордЪреЗ рдЬреНрдЮрд╛рди рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛:

### 1. рд╕реЗрд╡рд╛ рд╕рдВрд╡рд╛рдж тЬУ

рддреБрдордЪреЗ рдЬреНрдЮрд╛рди рддрдкрд╛рд╕рд╛:
- [ ] API Gateway рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ рдХрд╕реЗ рд╢реЛрдзрддреЗ рд╣реЗ рддреБрдореНрд╣реА рд╕реНрдкрд╖реНрдЯ рдХрд░реВ рд╢рдХрддрд╛ рдХрд╛? (DNS-рдЖрдзрд╛рд░рд┐рдд рд╕реЗрд╡рд╛ рд╢реЛрдз)
- [ ] рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ рдбрд╛рдЙрди рдЕрд╕рд▓реНрдпрд╛рд╕ рдХрд╛рдп рд╣реЛрддреЗ? (Gateway 503 рддреНрд░реБрдЯреА рдкрд░рдд рдХрд░рддреЗ)
- [ ] рддреБрдореНрд╣реА рддрд┐рд╕рд░реА рд╕реЗрд╡рд╛ рдХрд╢реА рдЬреЛрдбрд╛рд▓? (рдирд╡реАрди Bicep рдлрд╛рдЗрд▓ рддрдпрд╛рд░ рдХрд░рд╛, рдореБрдЦреНрдп.bicep рдордзреНрдпреЗ рдЬреЛрдбрд╛, src рдлреЛрд▓реНрдбрд░ рддрдпрд╛рд░ рдХрд░рд╛)

**рд╣рдБрдбреНрд╕-рдСрди рд╕рддреНрдпрд╛рдкрди**:
```bash
# рд╕реЗрд╡рд╛ рдЕрдкрдпрд╢ рдЕрдиреБрдХрд░рдг рдХрд░рд╛
az containerapp update --name <product-service-name> --min-replicas 0 --max-replicas 0
curl $GATEWAY_URL/api/products
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: 503 рд╕реЗрд╡рд╛ рдЕрдиреБрдкрд▓рдмреНрдз

# рд╕реЗрд╡рд╛ рдкреБрдирд░реНрд╕рдВрдЪрдпрд┐рдд рдХрд░рд╛
az containerapp update --name <product-service-name> --min-replicas 1 --max-replicas 10
```

### 2. рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдЖрдгрд┐ рдирд┐рд░реАрдХреНрд╖рдг тЬУ

рддреБрдордЪреЗ рдЬреНрдЮрд╛рди рддрдкрд╛рд╕рд╛:
- [ ] рд╡рд┐рддрд░рд┐рдд рд▓реЙрдЧреНрд╕ рдХреБрдареЗ рджрд┐рд╕рддрд╛рдд? (Azure рдкреЛрд░реНрдЯрд▓рдордзреАрд▓ Application Insights)
- [ ] рдзреАрдореНрдпрд╛ рд╡рд┐рдирдВрддреНрдпрд╛ рдХрд╢рд╛ рдЯреНрд░реЕрдХ рдХрд░рд╛рдпрдЪреНрдпрд╛? (Kusto рдХреНрд╡реЗрд░реА: `requests | where duration > 1000`)
- [ ] рдХреЛрдгрддреНрдпрд╛ рд╕реЗрд╡реЗрдореБрд│реЗ рддреНрд░реБрдЯреА рдЭрд╛рд▓реА рд╣реЗ рддреБрдореНрд╣реА рдУрд│рдЦреВ рд╢рдХрддрд╛ рдХрд╛? (рд▓реЙрдЧреНрд╕рдордзреАрд▓ `cloud_RoleName` рдлреАрд▓реНрдб рддрдкрд╛рд╕рд╛)

**рд╣рдБрдбреНрд╕-рдСрди рд╕рддреНрдпрд╛рдкрди**:
```bash
# рдзреАрдореНрдпрд╛ рд╡рд┐рдирдВрддреАрдЪреЗ рдЕрдиреБрдХрд░рдг рддрдпрд╛рд░ рдХрд░рд╛
curl "$GATEWAY_URL/api/products?delay=2000"

# рдзреАрдореНрдпрд╛ рд╡рд┐рдирдВрддреНрдпрд╛рдВрд╕рд╛рдареА Application Insights рдХреНрд╡реЗрд░реА рдХрд░рд╛
# Azure Portal тЖТ Application Insights тЖТ Logs рдпреЗрдереЗ рдЬрд╛
# рдЪрд╛рд▓рд╡рд╛: requests | where duration > 1000 | project timestamp, name, duration, cloud_RoleName
```

### 3. рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдЖрдгрд┐ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ тЬУ

рддреБрдордЪреЗ рдЬреНрдЮрд╛рди рддрдкрд╛рд╕рд╛:
- [ ] рдСрдЯреЛрд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХрд╢рд╛рдореБрд│реЗ рдЯреНрд░рд┐рдЧрд░ рд╣реЛрддреЗ? (HTTP рдПрдХрддреНрд░рд┐рдд рд╡рд┐рдирдВрддреА рдирд┐рдпрдо: Gateway рд╕рд╛рдареА 50, рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд╛рдареА 100)
- [ ] рд╕рдзреНрдпрд╛ рдХрд┐рддреА рдкреНрд░рддрд┐рдХреГрддреА рдЪрд╛рд▓реВ рдЖрд╣реЗрдд? (`az containerapp revision list` рд╕рд╣ рддрдкрд╛рд╕рд╛)
- [ ] рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ 5 рдкреНрд░рддрд┐рдХреГрддреАрдВрд╡рд░ рдХрд╕реЗ рд╕реНрдХреЗрд▓ рдХрд░рд╛рд▓? (Bicep рдордзреНрдпреЗ minReplicas рдЕрдкрдбреЗрдЯ рдХрд░рд╛)

**рд╣рдБрдбреНрд╕-рдСрди рд╕рддреНрдпрд╛рдкрди**:
```bash
# рдСрдЯреЛрд╕реНрдХреЗрд▓рд┐рдВрдЧ рдЪрд╛рдЪрдгреАрд╕рд╛рдареА рд▓реЛрдб рддрдпрд╛рд░ рдХрд░рд╛
for i in {1..1000}; do curl $GATEWAY_URL/api/products & done

# рдкреНрд░рддрд┐рдХреГрддреА рд╡рд╛рдврддрд╛рдирд╛ рдкрд╣рд╛
azd logs api-gateway --follow
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: рд▓реЙрдЧрдордзреНрдпреЗ рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕ рдкрд╣рд╛
```

**рдпрд╢рд╕реНрд╡реА рдирд┐рдХрд╖**: рддреБрдореНрд╣реА рд╕рд░реНрд╡ рдкреНрд░рд╢реНрдирд╛рдВрдЪреА рдЙрддреНрддрд░реЗ рджреЗрдК рд╢рдХрддрд╛ рдЖрдгрд┐ рд╣рдБрдбреНрд╕-рдСрди рдХрдорд╛рдВрдбрд╕рд╣ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реВ рд╢рдХрддрд╛.

---

## рдЦрд░реНрдЪ рд╡рд┐рд╢реНрд▓реЗрд╖рдг

### рдЕрдВрджрд╛рдЬрд┐рдд рдорд╛рд╕рд┐рдХ рдЦрд░реНрдЪ (рдпрд╛ 2-рд╕реЗрд╡рд╛ рдЙрджрд╛рд╣рд░рдгрд╛рд╕рд╛рдареА)

| рд╕рдВрд╕рд╛рдзрди | рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди | рдЕрдВрджрд╛рдЬрд┐рдд рдЦрд░реНрдЪ |
|----------|--------------|----------------|
| API Gateway | 2-20 рдкреНрд░рддрд┐рдХреГрддреА, 1 vCPU, 2GB RAM | $30-150 |
| рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ | 1-10 рдкреНрд░рддрд┐рдХреГрддреА, 0.5 vCPU, 1GB RAM | $15-75 |
| рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░рд┐ | рдмреЗрд╕рд┐рдХ рдЯрд┐рдпрд░ | $5 |
| Application Insights | 1-2 GB/рдорд╣рд┐рдирд╛ | $5-10 |
| рд▓реЙрдЧ рдЕреЕрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ | 1 GB/рдорд╣рд┐рдирд╛ | $3 |
| **рдПрдХреВрдг** | | **$58-243/рдорд╣рд┐рдирд╛** |

### рд╡рд╛рдкрд░рд╛рдиреБрд╕рд╛рд░ рдЦрд░реНрдЪрд╛рдЪреЗ рд╡рд┐рднрд╛рдЬрди

**рд╣рд▓рдХрд╛ рдЯреНрд░реЕрдлрд┐рдХ** (рдЪрд╛рдЪрдгреА/рд╢рд┐рдХрдгреЗ): ~$60/рдорд╣рд┐рдирд╛
- API Gateway: 2 рдкреНрд░рддрд┐рдХреГрддреА ├Ч 24/7 = $30
- рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕: 1 рдкреНрд░рддрд┐рдХреГрддреА ├Ч 24/7 = $15
- рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ + рд░рдЬрд┐рд╕реНрдЯреНрд░рд┐ = $13

**рдордзреНрдпрдо рдЯреНрд░реЕрдлрд┐рдХ** (рд▓рд╣рд╛рди рдЙрддреНрдкрд╛рджрди): ~$120/рдорд╣рд┐рдирд╛
- API Gateway: 5 рд╕рд░рд╛рд╕рд░реА рдкреНрд░рддрд┐рдХреГрддреА = $75
- рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕: 3 рд╕рд░рд╛рд╕рд░реА рдкреНрд░рддрд┐рдХреГрддреА = $45
- рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ + рд░рдЬрд┐рд╕реНрдЯреНрд░рд┐ = $13

**рдЬрд╛рд╕реНрдд рдЯреНрд░реЕрдлрд┐рдХ** (рдЧрд░реНрджреАрдЪреЗ рдХрд╛рд▓рдЦрдВрдб): ~$240/рдорд╣рд┐рдирд╛
- API Gateway: 15 рд╕рд░рд╛рд╕рд░реА рдкреНрд░рддрд┐рдХреГрддреА = $225
- рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕: 8 рд╕рд░рд╛рд╕рд░реА рдкреНрд░рддрд┐рдХреГрддреА = $120
- рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ + рд░рдЬрд┐рд╕реНрдЯреНрд░рд┐ = $13

### рдЦрд░реНрдЪ рдХрдореА рдХрд░рдгреНрдпрд╛рдЪреЗ рдЯрд┐рдкреНрд╕

1. **рд╡рд┐рдХрд╕рдирд╛рд╕рд╛рдареА рд╢реВрдиреНрдпрд╛рд╡рд░ рд╕реНрдХреЗрд▓ рдХрд░рд╛**:
   ```bicep
   scale: {
     minReplicas: 0  // Save $30-40/month when not in use
     maxReplicas: 10
   }
   ```

2. **Cosmos DB рд╕рд╛рдареА Consumption Plan рд╡рд╛рдкрд░рд╛** (рддреБрдореНрд╣реА рддреЗ рдЬреЛрдбрд▓реНрдпрд╛рд╡рд░):
   - рдлрдХреНрдд рд╡рд╛рдкрд░рд╛рд╕рд╛рдареА рдкреИрд╕реЗ рджреНрдпрд╛
   - рдХрд┐рдорд╛рди рд╢реБрд▓реНрдХ рдирд╛рд╣реА

3. **Application Insights рд╕реЕрдореНрдкрд▓рд┐рдВрдЧ рд╕реЗрдЯ рдХрд░рд╛**:
   ```javascript
   appInsights.defaultClient.config.samplingPercentage = 50; // рд╡рд┐рдирдВрддреНрдпрд╛рдВрдкреИрдХреА 50% рдирдореБрдирд╛
   ```

4. **рдЖрд╡рд╢реНрдпрдХ рдирд╕рд▓реНрдпрд╛рд╕ рд╕рд╛рдл рдХрд░рд╛**:
   ```bash
   azd down --force --purge
   ```

### рдлреНрд░реА рдЯрд┐рдпрд░ рдкрд░реНрдпрд╛рдп

рд╢рд┐рдХрдгреЗ/рдЪрд╛рдЪрдгреАрд╕рд╛рдареА рд╡рд┐рдЪрд╛рд░ рдХрд░рд╛:
- тЬЕ Azure рдлреНрд░реА рдХреНрд░реЗрдбрд┐рдЯреНрд╕ рд╡рд╛рдкрд░рд╛ ($200 рдкрд╣рд┐рд▓реНрдпрд╛ 30 рджрд┐рд╡рд╕рд╛рдВрд╕рд╛рдареА рдирд╡реАрди рдЦрд╛рддреНрдпрд╛рдВрд╕рд╣)
- тЬЕ рдХрд┐рдорд╛рди рдкреНрд░рддрд┐рдХреГрддреА рдареЗрд╡рд╛ (рд╕реБрдорд╛рд░реЗ 50% рдЦрд░реНрдЪ рд╡рд╛рдЪрддреЛ)
- тЬЕ рдЪрд╛рдЪрдгреАрдирдВрддрд░ рд╣рдЯрд╡рд╛ (рдХреЛрдгрддреЗрд╣реА рдЪрд╛рд▓реВ рд╢реБрд▓реНрдХ рдирд╛рд╣реА)
- тЬЕ рд╢рд┐рдХрдгреНрдпрд╛рдЪреНрдпрд╛ рд╕рддреНрд░рд╛рдВрдордзреНрдпреЗ рд╢реВрдиреНрдпрд╛рд╡рд░ рд╕реНрдХреЗрд▓ рдХрд░рд╛

**рдЙрджрд╛рд╣рд░рдг**: рд╣реЗ рдЙрджрд╛рд╣рд░рдг 2 рддрд╛рд╕/рджрд┐рд╡рд╕ ├Ч 30 рджрд┐рд╡рд╕ рдЪрд╛рд▓рд╡рдгреЗ = ~$5/рдорд╣рд┐рдирд╛ рдРрд╡рдЬреА $60/рдорд╣рд┐рдирд╛

---

## рд╕рдорд╕реНрдпрд╛ рдирд┐рд╡рд╛рд░рдг рдЬрд▓рдж рд╕рдВрджрд░реНрдн

### рд╕рдорд╕реНрдпрд╛: `azd up` "Subscription not found" рддреНрд░реБрдЯреАрдиреЗ рдЕрдкрдпрд╢реА рдард░рддреЗ

**рдЙрдкрд╛рдп**:
```bash
# рд╕реНрдкрд╖реНрдЯ рд╕рджрд╕реНрдпрддрд╛ рд╕рд╣ рдкреБрдиреНрд╣рд╛ рд▓реЙрдЧрд┐рди рдХрд░рд╛
az account set --subscription <your-subscription-id>
azd env set AZURE_SUBSCRIPTION_ID <your-subscription-id>
azd up
```

### рд╕рдорд╕реНрдпрд╛: API Gateway 503 "Product service unavailable" рдкрд░рдд рдХрд░рддреЗ

**рддрдкрд╛рд╕рд╛**:
```bash
# рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рд▓реЙрдЧреНрд╕ рддрдкрд╛рд╕рд╛
azd logs product-service --tail 50

# рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рдЖрд░реЛрдЧреНрдп рддрдкрд╛рд╕рд╛
az containerapp show \
  --name $(azd env get-values | grep PRODUCT_SERVICE | head -1 | cut -d '/' -f5) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --query "properties.runningStatus"
```

**рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░рдгреЗ**:
1. рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ рд╕реБрд░реВ рдЭрд╛рд▓реА рдирд╛рд╣реА (Python рддреНрд░реБрдЯреАрдВрд╕рд╛рдареА рд▓реЙрдЧреНрд╕ рддрдкрд╛рд╕рд╛)
2. рд╣реЗрд▓реНрде рдЪреЗрдХ рдЕрдкрдпрд╢реА (рддреБрдордЪрд╛ `/health` рдПрдиреНрдбрдкреЙрдЗрдВрдЯ рдХрд╛рд░реНрдпрд░рдд рдЖрд╣реЗ рдХрд╛ рддреЗ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛)
3. рдХрдВрдЯреЗрдирд░ рдЗрдореЗрдЬ рдмрд┐рд▓реНрдб рдЕрдкрдпрд╢реА (рд░рдЬрд┐рд╕реНрдЯреНрд░рд┐ рдордзреНрдпреЗ рдЗрдореЗрдЬ рддрдкрд╛рд╕рд╛)

### рд╕рдорд╕реНрдпрд╛: рдСрдЯреЛрд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХрд╛рд░реНрдп рдХрд░рдд рдирд╛рд╣реА

**рддрдкрд╛рд╕рд╛**:
```bash
# рд╡рд░реНрддрдорд╛рди рдкреНрд░рддрд┐рдХреГрддреА рд╕рдВрдЦреНрдпрд╛ рддрдкрд╛рд╕рд╛
az containerapp revision list \
  --name $(azd env get-values | grep API_GATEWAY | head -1 | cut -d '/' -f5) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --query "[].properties.replicas"

# рдЪрд╛рдЪрдгреАрд╕рд╛рдареА рд▓реЛрдб рддрдпрд╛рд░ рдХрд░рд╛
for i in {1..1000}; do curl $GATEWAY_URL/api/products & done

# рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕ рдкрд╣рд╛
azd logs api-gateway --follow | grep -i scale
```

**рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░рдгреЗ**:
1. рд╕реНрдХреЗрд▓ рдирд┐рдпрдо рдЯреНрд░рд┐рдЧрд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд▓реЛрдб рдкреБрд░реЗрд╕реЗ рдирд╛рд╣реА (50 рдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рдПрдХрддреНрд░рд┐рдд рд╡рд┐рдирдВрддреНрдпрд╛ рдЖрд╡рд╢реНрдпрдХ)
2. рдЬрд╛рд╕реНрддреАрдд рдЬрд╛рд╕реНрдд рдкреНрд░рддрд┐рдХреГрддреА рдЖрдзреАрдЪ рдкреЛрд╣реЛрдЪрд▓реНрдпрд╛ рдЖрд╣реЗрдд (Bicep рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди рддрдкрд╛рд╕рд╛)
3. Bicep рдордзреНрдпреЗ рд╕реНрдХреЗрд▓ рдирд┐рдпрдо рдЪреБрдХреАрдЪрд╛ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХреЗрд▓рд╛ рдЖрд╣реЗ (concurrentRequests рдореВрд▓реНрдп рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛)

### рд╕рдорд╕реНрдпрд╛: Application Insights рд▓реЙрдЧреНрд╕ рджрд░реНрд╢рд╡рдд рдирд╛рд╣реА

**рддрдкрд╛рд╕рд╛**:
```bash
# рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕реЗрдЯ рдЖрд╣реЗ рдХрд╛ рддреЗ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛
azd env get-values | grep APPLICATIONINSIGHTS

# рд╕реЗрд╡рд╛ рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реА рдкрд╛рдард╡рдд рдЖрд╣реЗрдд рдХрд╛ рддреЗ рддрдкрд╛рд╕рд╛
az monitor app-insights component show \
  --app $(azd env get-values | grep APPLICATIONINSIGHTS_NAME | cut -d '=' -f2 | tr -d '"') \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --query "properties.InstrumentationKey"
```

**рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░рдгреЗ**:
1. рдХрдВрдЯреЗрдирд░рд▓рд╛ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкрд╛рд╕ рдХреЗрд▓рд╛ рдирд╛рд╣реА (рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рд╡реНрд╣реЗрд░рд┐рдПрдмрд▓реНрд╕ рддрдкрд╛рд╕рд╛)
2. Application Insights SDK рдХреЙрдиреНрдлрд┐рдЧрд░ рдХреЗрд▓реЗрд▓реЗ рдирд╛рд╣реА (рдХреЛрдбрдордзреАрд▓ рдЖрдпрд╛рдд рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛)
3. рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реА рдмреНрд▓реЙрдХ рдХрд░рдгрд╛рд░рд╛ рдлрд╛рдпрд░рд╡реЙрд▓ (рджреБрд░реНрдорд┐рд│, рдиреЗрдЯрд╡рд░реНрдХ рдирд┐рдпрдо рддрдкрд╛рд╕рд╛)

### рд╕рдорд╕реНрдпрд╛: Docker рдмрд┐рд▓реНрдб рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдЕрдкрдпрд╢реА рдард░рддреЗ

**рддрдкрд╛рд╕рд╛**:
```bash
# API рдЧреЗрдЯрд╡реЗ рдмрд┐рд▓реНрдб рддрдкрд╛рд╕рд╛
cd src/api-gateway
docker build -t test-gateway .

# рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ рдмрд┐рд▓реНрдб рддрдкрд╛рд╕рд╛
cd ../product-service
docker build -t test-product .
```

**рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░рдгреЗ**:
1. package.json/requirements.txt рдордзреНрдпреЗ рд╣рд░рд╡рд▓реЗрд▓реА dependencies
2. Dockerfile рд╕рд┐рдВрдЯреЕрдХреНрд╕ рддреНрд░реБрдЯреА
3. dependencies рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рддрд╛рдирд╛ рдиреЗрдЯрд╡рд░реНрдХ рд╕рдорд╕реНрдпрд╛

**рдЕрдЬреВрди рдЕрдбрдЪрдг рдЖрд╣реЗ?** [рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛ рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ](../../docs/troubleshooting/common-issues.md) рдХрд┐рдВрд╡рд╛ [Azure Container Apps Troubleshooting](https://learn.microsoft.com/azure/container-apps/troubleshooting) рдкрд╣рд╛

---

## рд╕рд╛рдлрд╕рдлрд╛рдИ

рдЪрд╛рд▓реВ рд╢реБрд▓реНрдХ рдЯрд╛рд│рдгреНрдпрд╛рд╕рд╛рдареА, рд╕рд░реНрд╡ рд╕рдВрд╕рд╛рдзрдиреЗ рд╣рдЯрд╡рд╛:

```bash
azd down --force --purge
```

**рдкреБрд╖реНрдЯреАрдХрд░рдг рдкреНрд░реЙрдореНрдкреНрдЯ**:
```
? Total resources to delete: 6, are you sure you want to continue? (y/N)
```

`y` рдЯрд╛рдЗрдк рдХрд░рд╛ рдкреБрд╖реНрдЯреА рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА.

**рдХрд╛рдп рд╣рдЯрд╡рд▓реЗ рдЬрд╛рддреЗ**:
- рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рд╡рд╛рддрд╛рд╡рд░рдг
- рджреЛрдиреНрд╣реА рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ (Gateway рдЖрдгрд┐ рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕)
- рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░рд┐
- Application Insights
- рд▓реЙрдЧ рдЕреЕрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рд╡рд░реНрдХрд╕реНрдкреЗрд╕
- рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк

**тЬУ рд╕рд╛рдлрд╕рдлрд╛рдИ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛**:
```bash
az group list --query "[?starts_with(name,'rg-microservices')]" --output table
```

рд░рд┐рдХреНрдд рдкрд░рдд рдпреЗрдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ.

---

## рд╡рд┐рд╕реНрддрд╛рд░ рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ: 2 рддреЗ 5+ рд╕реЗрд╡рд╛

рддреБрдореНрд╣реА рд╣реЗ 2-рд╕реЗрд╡рд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдорд╛рд╕реНрдЯрд░ рдХреЗрд▓реНрдпрд╛рдирдВрддрд░, рд╡рд┐рд╕реНрддрд╛рд░ рдХрд╕рд╛ рдХрд░рд╛рдпрдЪрд╛:

### рдЯрдкреНрдкрд╛ 1: рдбреЗрдЯрд╛рдмреЗрд╕ рдЯрд┐рдХрд╡рдгреЗ рдЬреЛрдбрд╛ (рдкреБрдвреАрд▓ рдкрд╛рдКрд▓)

**рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕рд╕рд╛рдареА Cosmos DB рдЬреЛрдбрд╛**:

1. `infra/core/cosmos.bicep` рддрдпрд╛рд░ рдХрд░рд╛:
   ```bicep
   resource cosmosAccount 'Microsoft.DocumentDB/databaseAccounts@2023-04-15' = {
     name: name
     location: location
     kind: 'GlobalDocumentDB'
     properties: {
       databaseAccountOfferType: 'Standard'
       consistencyPolicy: { defaultConsistencyLevel: 'Session' }
       locations: [{ locationName: location, failoverPriority: 0 }]
     }
   }
   ```

2. рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕рд▓рд╛ рдЗрди-рдореЗрдорд░реА рдбреЗрдЯрд╛рдЪреНрдпрд╛ рдРрд╡рдЬреА Azure Cosmos DB Python SDK рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЕрдкрдбреЗрдЯ рдХрд░рд╛

3. рдЕрдВрджрд╛рдЬрд┐рдд рдЕрддрд┐рд░рд┐рдХреНрдд рдЦрд░реНрдЪ: ~$25/рдорд╣рд┐рдирд╛ (serverless)

### рдЯрдкреНрдкрд╛ 2: рддрд┐рд╕рд░реА рд╕реЗрд╡рд╛ рдЬреЛрдбрд╛ (Order Management)

**Order Service рддрдпрд╛рд░ рдХрд░рд╛**:

1. рдирд╡реАрди рдлреЛрд▓реНрдбрд░: `src/order-service/` (Python/Node.js/C#)
2. рдирд╡реАрди Bicep: `infra/app/order-service.bicep`
3. API Gateway рдЕрдкрдбреЗрдЯ рдХрд░рд╛ `/api/orders` рд░реВрдЯ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА
4. рдСрд░реНрдбрд░ рдЯрд┐рдХрд╡рдгреНрдпрд╛рд╕рд╛рдареА Azure SQL Database рдЬреЛрдбрд╛

**рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдмрдирддреЗ**:
```
API Gateway тЖТ Product Service (Cosmos DB)
           тЖТ Order Service (Azure SQL)
```

### рдЯрдкреНрдкрд╛ 3: Async Communication рдЬреЛрдбрд╛ (Service Bus)

**рдЗрд╡реНрд╣реЗрдВрдЯ-рдбреНрд░рд┐рд╡реНрд╣рди рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рд▓рд╛рдЧреВ рдХрд░рд╛**:

1. Azure Service Bus рдЬреЛрдбрд╛: `infra/core/servicebus.bicep`
2. рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ "ProductCreated" рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░рддреЗ
3. Order Service рдкреНрд░реЛрдбрдХреНрдЯ рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕рдЪреА рд╕рджрд╕реНрдпрддрд╛ рдШреЗрддреЗ
4. рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА Notification Service рдЬреЛрдбрд╛

**рдкреЕрдЯрд░реНрди**: Request/Response (HTTP) + Event-Driven (Service Bus)

### рдЯрдкреНрдкрд╛ 4: рд╡рд╛рдкрд░рдХрд░реНрддрд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдЬреЛрдбрд╛

**User Service рд▓рд╛рдЧреВ рдХрд░рд╛**:

1. `src/user-service/` рддрдпрд╛рд░ рдХрд░рд╛ (Go/Node.js)
2. Azure AD B2C рдХрд┐рдВрд╡рд╛ рдХрд╕реНрдЯрдо JWT рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдЬреЛрдбрд╛
3. API Gateway рдЯреЛрдХрдиреНрд╕ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рддреЗ рд░реВрдЯрд┐рдВрдЧрдкреВрд░реНрд╡реА
4. рд╕реЗрд╡рд╛ рд╡рд╛рдкрд░рдХрд░реНрддрд╛ рдкрд░рд╡рд╛рдирдЧреНрдпрд╛ рддрдкрд╛рд╕рддрд╛рдд

### рдЯрдкреНрдкрд╛ 5: рдЙрддреНрдкрд╛рджрди рддрдпрд╛рд░реА

**рд╣реЗ рдШрдЯрдХ рдЬреЛрдбрд╛**:
- тЬЕ Azure Front Door (рдЬрд╛рдЧрддрд┐рдХ рд▓реЛрдб рдмреЕрд▓рдиреНрд╕рд┐рдВрдЧ)
- тЬЕ Azure Key Vault (рдЧреБрдкрд┐рдд рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди)
- тЬЕ Azure Monitor Workbooks (рдХрд╕реНрдЯрдо рдбреЕрд╢рдмреЛрд░реНрдб)
- тЬЕ CI/CD Pipeline (GitHub Actions)
- тЬЕ Blue-Green Deployments
- тЬЕ рд╕рд░реНрд╡ рд╕реЗрд╡рд╛рдВрд╕рд╛рдареА Managed Identity

**рдкреВрд░реНрдг рдЙрддреНрдкрд╛рджрди рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдЦрд░реНрдЪ**: ~$300-1,400/рдорд╣рд┐рдирд╛

---

## рдЕрдзрд┐рдХ рдЬрд╛рдгреВрди рдШреНрдпрд╛

### рд╕рдВрдмрдВрдзрд┐рдд рджрд╕реНрддрдРрд╡рдЬ
- [Azure Container Apps Documentation](https://learn.microsoft.com/azure/container-apps/)
- [Microservices Architecture Guide](https://learn.microsoft.com/azure/architecture/guide/architecture-styles/microservices)
- [Application Insights for Distributed Tracing](https://learn.microsoft.com/azure/azure-monitor/app/distributed-tracing)
- [Azure Developer CLI Documentation](https://learn.microsoft.com/azure/developer/azure-developer-cli/)

### рдпрд╛ рдХреЛрд░реНрд╕рдордзреАрд▓ рдкреБрдвреАрд▓ рдкрд╛рдпрд▒реНрдпрд╛
- тЖР рдорд╛рдЧреАрд▓: [Simple Flask API](../../../../examples/container-app/simple-flask-api) - рд╕реБрд░реБрд╡рд╛рддреАрдЪреЗ рд╕рд┐рдВрдЧрд▓-рдХрдВрдЯреЗрдирд░ рдЙрджрд╛рд╣рд░рдг
- тЖТ рдкреБрдвреАрд▓: [AI Integration Guide](../../../../docs/ai-foundry) - AI рдХреНрд╖рдорддрд╛ рдЬреЛрдбрд╛
- ЁЯПа [рдХреЛрд░реНрд╕ рд╣реЛрдо](../../README.md)

### рддреБрд▓рдирд╛: рдХрд╛рдп рдХрдзреА рд╡рд╛рдкрд░рд╛рдпрдЪреЗ

| рд╡реИрд╢рд┐рд╖реНрдЯреНрдп | рд╕рд┐рдВрдЧрд▓ рдХрдВрдЯреЗрдирд░ | рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕ (рд╣реЗ) | Kubernetes (AKS) |
|---------|-----------------|---------------------|------------------|
| **рд╡рд╛рдкрд░ рдкреНрд░рдХрд░рдг** | рд╕рд╛рдзреЗ рдЕреЕрдкреНрд╕ | рдЬрдЯрд┐рд▓ рдЕреЕрдкреНрд╕ | рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЭ рдЕреЕрдкреНрд╕ |
| **рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА** | рд╕рд┐рдВрдЧрд▓ рд╕реЗрд╡рд╛ | рдкреНрд░рддрд┐-рд╕реЗрд╡рд╛ рд╕реНрдХреЗрд▓рд┐рдВрдЧ | рдЬрд╛рд╕реНрддреАрдд рдЬрд╛рд╕реНрдд рд▓рд╡рдЪрд┐рдХрддрд╛ |
| **рдЬрдЯрд┐рд▓рддрд╛** | рдХрдореА | рдордзреНрдпрдо | рдЙрдЪреНрдЪ |
| **рдЯреАрдо рдЖрдХрд╛рд░** | 1-3 рд╡рд┐рдХрд╕рдХ | 3-10 рд╡рд┐рдХрд╕рдХ | 10+ рд╡рд┐рдХрд╕рдХ |
| **рдЦрд░реНрдЪ** | ~$15-50/рдорд╣рд┐рдирд╛ | ~$60-250/рдорд╣рд┐рдирд╛ | ~$150-500/рдорд╣рд┐рдирд╛ |
| **рддреИрдирд╛рддреА рд╡реЗрд│** | 5-10 рдорд┐рдирд┐рдЯреЗ | 8-12 рдорд┐рдирд┐рдЯреЗ | 15-30 рдорд┐рдирд┐рдЯреЗ |
| **рд╕рд░реНрд╡реЛрддреНрддрдо рдЙрдкрдпреЛрдЧрд╛рд╕рд╛рдареА** | MVPs, рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдкреНрд╕ | рдЙрддреНрдкрд╛рджрди рдЕтАНреЕрдкреНрд╕ | рдорд▓реНрдЯреА-рдХреНрд▓рд╛рдЙрдб, рдкреНрд░рдЧрдд рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ |

**рд╢рд┐рдлрд╛рд░рд╕**: рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕рд╕рд╣ рд╕реБрд░реБрд╡рд╛рдд рдХрд░рд╛ (рд╣рд╛ рдЙрджрд╛рд╣рд░рдг), AKS рд╡рд░ рдЬрд╛ рдлрдХреНрдд рддреБрдореНрд╣рд╛рд▓рд╛ Kubernetes-рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╡реИрд╢рд┐рд╖реНрдЯреНрдпрд╛рдВрдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЕрд╕рд▓реНрдпрд╛рд╕.

---

## рд╡рд╛рд░рдВрд╡рд╛рд░ рд╡рд┐рдЪрд╛рд░рд▓реЗ рдЬрд╛рдгрд╛рд░реЗ рдкреНрд░рд╢реНрди

**рдкреНрд░рд╢реНрди: рдлрдХреНрдд 2 рд╕реЗрд╡рд╛ рдХрд╛, 5+ рдХрд╛ рдирд╛рд╣реА?**  
рдЙрддреНрддрд░: рд╢реИрдХреНрд╖рдгрд┐рдХ рдкреНрд░рдЧрддреА. рдЬрдЯрд┐рд▓рддрд╛ рд╡рд╛рдврд╡рдгреНрдпрд╛рдкреВрд░реНрд╡реА рд╕реЛрдкреНрдпрд╛ рдЙрджрд╛рд╣рд░рдгрд╛рд╕рд╣ рдореВрд▓рднреВрдд рдЧреЛрд╖реНрдЯреА (рд╕реЗрд╡рд╛ рд╕рдВрд╡рд╛рдж, рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ, рд╕реНрдХреЗрд▓рд┐рдВрдЧ) рд╕рдордЬреВрди рдШреНрдпрд╛. рддреБрдореНрд╣реА рдпреЗрдереЗ рд╢рд┐рдХрд▓реЗрд▓реЗ рдирдореБрдиреЗ 100-рд╕реЗрд╡рд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рд╡рд░ рд▓рд╛рдЧреВ рд╣реЛрддрд╛рдд.

**рдкреНрд░рд╢реНрди: рдореА рд╕реНрд╡рддрдГ рдЕрдзрд┐рдХ рд╕реЗрд╡рд╛ рдЬреЛрдбреВ рд╢рдХрддреЛ рдХрд╛?**  
рдЙрддреНрддрд░: рдирдХреНрдХреАрдЪ! рд╡рд░реАрд▓ рд╡рд┐рд╕реНрддрд╛рд░ рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ рдЕрдиреБрд╕рд░рдг рдХрд░рд╛. рдкреНрд░рддреНрдпреЗрдХ рдирд╡реАрди рд╕реЗрд╡рд╛ рддреНрдпрд╛рдЪ рдирдореБрдиреНрдпрд╛рдЪреЗ рдЕрдиреБрд╕рд░рдг рдХрд░рддреЗ: src рдлреЛрд▓реНрдбрд░ рддрдпрд╛рд░ рдХрд░рд╛, Bicep рдлрд╛рдЗрд▓ рддрдпрд╛рд░ рдХрд░рд╛, azure.yaml рдЕрдкрдбреЗрдЯ рдХрд░рд╛, рддреИрдирд╛рдд рдХрд░рд╛.

**рдкреНрд░рд╢реНрди: рд╣реЗ рдЙрддреНрдкрд╛рджрдирд╛рд╕рд╛рдареА рддрдпрд╛рд░ рдЖрд╣реЗ рдХрд╛?**  
рдЙрддреНрддрд░: рд╣реЗ рдПрдХ рдордЬрдмреВрдд рдкрд╛рдпрд╛ рдЖрд╣реЗ. рдЙрддреНрдкрд╛рджрдирд╛рд╕рд╛рдареА, рдЬреЛрдбрд╛: рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдУрд│рдЦ, Key Vault, рд╕реНрдерд┐рд░ рдбреЗрдЯрд╛рдмреЗрд╕, CI/CD рдкрд╛рдЗрдкрд▓рд╛рдЗрди, рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдЕрд▓рд░реНрдЯреНрд╕ рдЖрдгрд┐ рдмреЕрдХрдЕрдк рд░рдгрдиреАрддреА.

**рдкреНрд░рд╢реНрди: Dapr рдХрд┐рдВрд╡рд╛ рдЗрддрд░ рд╕реЗрд╡рд╛ рдЬрд╛рд│реЗ рдХрд╛ рд╡рд╛рдкрд░реВ рдирдпреЗ?**  
рдЙрддреНрддрд░: рд╢рд┐рдХрдгреНрдпрд╛рд╕рд╛рдареА рд╕реЛрдкреЗ рдареЗрд╡рд╛. рдПрдХрджрд╛ рддреБрдореНрд╣рд╛рд▓рд╛ рдореВрд│ рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рдордЬрд▓реЗ рдХреА, рддреБрдореНрд╣реА рдкреНрд░рдЧрдд рдкрд░рд┐рд╕реНрдерд┐рддреАрд╕рд╛рдареА (рд╕реНрдЯреЗрдЯ рдореЕрдиреЗрдЬрдореЗрдВрдЯ, pub/sub, рдмрд╛рдЗрдВрдбрд┐рдВрдЧреНрд╕) Dapr рдЬреЛрдбреВ рд╢рдХрддрд╛.

**рдкреНрд░рд╢реНрди: рдореА рд╕реНрдерд╛рдирд┐рдХрдкрдгреЗ рдбреАрдмрдЧ рдХрд╕реЗ рдХрд░реВ?**  
рдЙрддреНрддрд░: Docker рд╕рд╣ рд╕реНрдерд╛рдирд┐рдХрдкрдгреЗ рд╕реЗрд╡рд╛ рдЪрд╛рд▓рд╡рд╛:  
```bash
cd src/api-gateway
docker build -t local-gateway .
docker run -p 8080:8080 -e PRODUCT_SERVICE_URL=http://localhost:8000 local-gateway
```


**рдкреНрд░рд╢реНрди: рдореА рд╡реЗрдЧрд╡реЗрдЧрд│реНрдпрд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛рдВрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВ рд╢рдХрддреЛ рдХрд╛?**  
рдЙрддреНрддрд░: рд╣реЛрдп! рд╣реЗ рдЙрджрд╛рд╣рд░рдг Node.js (рдЧреЗрдЯрд╡реЗ) + Python (рдкреНрд░реЙрдбрдХреНрдЯ рд╕реЗрд╡рд╛) рджрд╛рдЦрд╡рддреЗ. рддреБрдореНрд╣реА рдХрдВрдЯреЗрдирд░реНрд╕рдордзреНрдпреЗ рдЪрд╛рд▓рдгрд╛рд▒реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рднрд╛рд╖рд╛рдВрдЪрд╛ рдорд┐рд╢реНрд░рдг рдХрд░реВ рд╢рдХрддрд╛: C#, Go, Java, Ruby, PHP, рдЗрддреНрдпрд╛рджреА.

**рдкреНрд░рд╢реНрди: рдорд╛рдЭреНрдпрд╛рдХрдбреЗ Azure рдХреНрд░реЗрдбрд┐рдЯреНрд╕ рдирд╕рд▓реНрдпрд╛рд╕ рдХрд╛рдп рдХрд░рд╛рд╡реЗ?**  
рдЙрддреНрддрд░: Azure рдлреНрд░реА рдЯрд┐рдпрд░ рд╡рд╛рдкрд░рд╛ (рдирд╡реАрди рдЦрд╛рддреНрдпрд╛рдВрд╕рд╛рдареА рдкрд╣рд┐рд▓реНрдпрд╛ 30 рджрд┐рд╡рд╕рд╛рдВрдд $200 рдХреНрд░реЗрдбрд┐рдЯреНрд╕ рдорд┐рд│рддрд╛рдд) рдХрд┐рдВрд╡рд╛ рдереЛрдбреНрдпрд╛ рдЪрд╛рдЪрдгреА рдХрд╛рд▓рд╛рд╡рдзреАрд╕рд╛рдареА рддреИрдирд╛рдд рдХрд░рд╛ рдЖрдгрд┐ рд▓рдЧреЗрдЪ рд╣рдЯрд╡рд╛. рд╣реЗ рдЙрджрд╛рд╣рд░рдг рд╕реБрдорд╛рд░реЗ $2/рджрд┐рд╡рд╕ рдЦрд░реНрдЪ рдХрд░рддреЗ.

**рдкреНрд░рд╢реНрди: рд╣реЗ Azure Kubernetes Service (AKS) рдкреЗрдХреНрд╖рд╛ рд╡реЗрдЧрд│реЗ рдХрд╕реЗ рдЖрд╣реЗ?**  
рдЙрддреНрддрд░: рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕ рд╕реЛрдкреЗ рдЖрд╣реЗ (Kubernetes рдЬреНрдЮрд╛рдирд╛рдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╛рд╣реА) рдкрдг рдХрдореА рд▓рд╡рдЪрд┐рдХ рдЖрд╣реЗ. AKS рддреБрдореНрд╣рд╛рд▓рд╛ рдкреВрд░реНрдг Kubernetes рдирд┐рдпрдВрддреНрд░рдг рджреЗрддреЗ рдкрдг рдЕрдзрд┐рдХ рдХреМрд╢рд▓реНрдпрд╛рдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЕрд╕рддреЗ. рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕рд╕рд╣ рд╕реБрд░реБрд╡рд╛рдд рдХрд░рд╛, рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реНрдпрд╛рд╕ AKS рд╡рд░ рдЬрд╛.

**рдкреНрд░рд╢реНрди: рдореА рд╣реЗ рд╡рд┐рджреНрдпрдорд╛рди Azure рд╕реЗрд╡рд╛рдВрд╕рд╣ рд╡рд╛рдкрд░реВ рд╢рдХрддреЛ рдХрд╛?**  
рдЙрддреНрддрд░: рд╣реЛрдп! рддреБрдореНрд╣реА рд╡рд┐рджреНрдпрдорд╛рди рдбреЗрдЯрд╛рдмреЗрд╕, рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯреНрд╕, Service Bus рдЗрддреНрдпрд╛рджреАрдВрд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░реВ рд╢рдХрддрд╛. рдирд╡реАрди рд╕рдВрд╕рд╛рдзрдиреЗ рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рдРрд╡рдЬреА рд╡рд┐рджреНрдпрдорд╛рди рд╕рдВрд╕рд╛рдзрдирд╛рдВрдЪрд╛ рд╕рдВрджрд░реНрдн рджреЗрдгреНрдпрд╛рд╕рд╛рдареА Bicep рдлрд╛рдЗрд▓реНрд╕ рдЕрдкрдбреЗрдЯ рдХрд░рд╛.

---

> **ЁЯОУ рд╢рд┐рдХреНрд╖рдг рдорд╛рд░реНрдЧ рд╕рд╛рд░рд╛рдВрд╢**: рддреБрдореНрд╣реА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рд╕реНрдХреЗрд▓рд┐рдВрдЧ, рдЕрдВрддрд░реНрдЧрдд рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ, рдХреЗрдВрджреНрд░реАрдХреГрдд рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдЖрдгрд┐ рдЙрддреНрдкрд╛рджрдирд╛рд╕рд╛рдареА рддрдпрд╛рд░ рдирдореБрдиреНрдпрд╛рдВрд╕рд╣ рдорд▓реНрдЯреА-рд╕рд░реНрд╡реНрд╣рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рддреИрдирд╛рдд рдХрд░рдгреЗ рд╢рд┐рдХрд▓реЗ рдЖрд╣реЗ. рд╣рд╛ рдкрд╛рдпрд╛ рддреБрдореНрд╣рд╛рд▓рд╛ рдЬрдЯрд┐рд▓ рд╡рд┐рддрд░рд┐рдд рдкреНрд░рдгрд╛рд▓реА рдЖрдгрд┐ рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЭ рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рд╕рд╛рдареА рддрдпрд╛рд░ рдХрд░рддреЛ.

**ЁЯУЪ рдХреЛрд░реНрд╕ рдиреЗрд╡реНрд╣рд┐рдЧреЗрд╢рди:**
- тЖР рдорд╛рдЧреАрд▓: [рд╕рд┐рдВрдкрд▓ Flask API](../../../../examples/container-app/simple-flask-api)
- тЖТ рдкреБрдвреАрд▓: [рдбреЗрдЯрд╛рдмреЗрд╕ рдЗрдВрдЯрд┐рдЧреНрд░реЗрд╢рди рдЙрджрд╛рд╣рд░рдг](../../../../database-app)
- ЁЯПа [рдХреЛрд░реНрд╕ рд╣реЛрдо](../../README.md)
- ЁЯУЦ [рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕ рд╕рд░реНрд╡реЛрддреНрддрдо рдкрджреНрдзрддреА](../../docs/deployment/deployment-guide.md)

---

**тЬи рдЕрднрд┐рдирдВрджрди!** рддреБрдореНрд╣реА рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕ рдЙрджрд╛рд╣рд░рдг рдкреВрд░реНрдг рдХреЗрд▓реЗ рдЖрд╣реЗ. рддреБрдореНрд╣рд╛рд▓рд╛ Azure рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕рд╡рд░ рд╡рд┐рддрд░рд┐рдд рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рддрдпрд╛рд░ рдХрд░рдгреЗ, рддреИрдирд╛рдд рдХрд░рдгреЗ рдЖрдгрд┐ рдореЙрдирд┐рдЯрд░ рдХрд░рдгреЗ рдХрд╕реЗ рдХрд░рд╛рдпрдЪреЗ рддреЗ рд╕рдордЬрд▓реЗ рдЖрд╣реЗ. AI рдХреНрд╖рдорддрд╛ рдЬреЛрдбрдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░ рдЖрд╣рд╛рдд? [AI рдЗрдВрдЯрд┐рдЧреНрд░реЗрд╢рди рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ](../../../../docs/ai-foundry) рдкрд╣рд╛!

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рднрд╛рд╖рд╛рдВрддрд░ рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рд╡рд╛рдкрд░реВрди рднрд╛рд╖рд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рдд рдЖрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрдирд╢реАрд▓ рдЕрд╕рд▓реЛ рддрд░реА, рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдареЗрд╡рд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рднрд╛рд╖рд╛рдВрддрд░реЗ рддреНрд░реБрдЯреА рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪреНрдпрд╛ рдЕрднрд╛рд╡рд╛рдиреЗ рдпреБрдХреНрдд рдЕрд╕реВ рд╢рдХрддрд╛рдд. рдореВрд│ рднрд╛рд╖реЗрддреАрд▓ рджрд╕реНрддрдРрд╡рдЬ рд╣рд╛ рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реА рдЬрд╛рддреЗ. рдпрд╛ рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдЙрджреНрднрд╡рд▓реЗрд▓реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬ рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрдерд╛рд╕рд╛рдареА рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рд░рд╛рд╣рдгрд╛рд░ рдирд╛рд╣реА.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->