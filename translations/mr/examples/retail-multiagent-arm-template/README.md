# рд░рд┐рдЯреЗрд▓ рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рд╕реЛрд▓реНрдпреВрд╢рди - рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ

**рдЕрдзреНрдпрд╛рдп рел: рдЙрддреНрдкрд╛рджрди рддреИрдирд╛рддреА рдкреЕрдХреЗрдЬ**
- **ЁЯУЪ рдХреЛрд░реНрд╕ рд╣реЛрдо**: [AZD рдлреЙрд░ рдмрд┐рдЧрд┐рдирд░реНрд╕](../../README.md)
- **ЁЯУЦ рд╕рдВрдмрдВрдзрд┐рдд рдЕрдзреНрдпрд╛рдп**: [рдЕрдзреНрдпрд╛рдп рел: рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ AI рд╕реЛрд▓реНрдпреВрд╢рдиреНрд╕](../../README.md#-chapter-5-multi-agent-ai-solutions-advanced)
- **ЁЯУЭ рдкрд░рд┐рд╕реНрдерд┐рддреА рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ**: [рдкреВрд░реНрдг рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░](../retail-scenario.md)
- **ЁЯОп рдЬрд▓рдж рддреИрдирд╛рддреА**: [рд╡рди-рдХреНрд▓рд┐рдХ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ](../../../../examples/retail-multiagent-arm-template)

> **тЪая╕П рдлрдХреНрдд рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ**  
> рд╣реЗ ARM рдЯреЗрдореНрдкрд▓реЗрдЯ **Azure рд╕рдВрд╕рд╛рдзрдиреЗ** рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рд╕рд┐рд╕реНрдЯреАрдорд╕рд╛рдареА рддреИрдирд╛рдд рдХрд░рддреЗ.  
>  
> **рдХрд╛рдп рддреИрдирд╛рдд рд╣реЛрддреЗ (резрел-реирел рдорд┐рдирд┐рдЯреЗ):**
> - тЬЕ Azure OpenAI (GPT-4o, GPT-4o-mini, рддреАрди рдкреНрд░рджреЗрд╢рд╛рдВрдордзреНрдпреЗ рдПрдореНрдмреЗрдбрд┐рдВрдЧреНрдЬ)
> - тЬЕ AI рд╕рд░реНрдЪ рд╕реЗрд╡рд╛ (рд░рд┐рдХреНрдд, рдЗрдВрдбреЗрдХреНрд╕ рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░)
> - тЬЕ рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ (рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рдЗрдореЗрдЬреЗрд╕, рддреБрдордЪреНрдпрд╛ рдХреЛрдбрд╕рд╛рдареА рддрдпрд╛рд░)
> - тЬЕ рд╕реНрдЯреЛрд░реЗрдЬ, Cosmos DB, Key Vault, Application Insights
>  
> **рдХрд╛рдп рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдирд╛рд╣реА (рд╡рд┐рдХрд╛рд╕ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ):**
> - тЭМ рдПрдЬрдВрдЯ рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА рдХреЛрдб (рдХрд╕реНрдЯрдорд░ рдПрдЬрдВрдЯ, рдЗрдиреНрд╡реНрд╣реЗрдВрдЯрд░реА рдПрдЬрдВрдЯ)
> - тЭМ рд░реВрдЯрд┐рдВрдЧ рд▓реЙрдЬрд┐рдХ рдЖрдгрд┐ API рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕
> - тЭМ рдлреНрд░рдВрдЯрдПрдВрдб рдЪреЕрдЯ UI
> - тЭМ рд╕рд░реНрдЪ рдЗрдВрдбреЗрдХреНрд╕ рд╕реНрдХреАрдорд╛рд╕ рдЖрдгрд┐ рдбреЗрдЯрд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрдиреНрд╕
> - тЭМ **рдЕрдВрджрд╛рдЬреЗ рд╡рд┐рдХрд╛рд╕ рдкреНрд░рдпрддреНрди: реореж-резреиреж рддрд╛рд╕**
>  
> **рд╣реЗ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╡рд╛рдкрд░рд╛ рдЬрд░:**
> - тЬЕ рддреБрдореНрд╣рд╛рд▓рд╛ рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рдкреНрд░реЛрдЬреЗрдХреНрдЯрд╕рд╛рдареА Azure рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рддрдпрд╛рд░ рдХрд░рд╛рдпрдЪреЗ рдЖрд╣реЗ
> - тЬЕ рддреБрдореНрд╣реА рдПрдЬрдВрдЯ рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА рд╕реНрд╡рддрдВрддреНрд░рдкрдгреЗ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдгреНрдпрд╛рдЪреА рдпреЛрдЬрдирд╛ рдЖрдЦрдд рдЖрд╣рд╛рдд
> - тЬЕ рддреБрдореНрд╣рд╛рд▓рд╛ рдЙрддреНрдкрд╛рджрди-рддрдпрд╛рд░ рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдмреЗрд╕рд▓рд╛рдЗрди рд╣рд╡реА рдЖрд╣реЗ
>  
> **рд╡рд╛рдкрд░реВ рдирдХрд╛ рдЬрд░:**
> - тЭМ рддреБрдореНрд╣рд╛рд▓рд╛ рд▓рдЧреЗрдЪ рдХрд╛рд░реНрдпрд░рдд рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рдбреЗрдореЛ рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрд╣реЗ
> - тЭМ рддреБрдореНрд╣реА рдкреВрд░реНрдг рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рдЙрджрд╛рд╣рд░рдгреЗ рд╢реЛрдзрдд рдЖрд╣рд╛рдд

## рдЖрдврд╛рд╡рд╛

рдпрд╛ рдбрд┐рд░реЗрдХреНрдЯрд░реАрдордзреНрдпреЗ рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рдЧреНрд░рд╛рд╣рдХ рд╕рдорд░реНрдерди рдкреНрд░рдгрд╛рд▓реАрдЪреНрдпрд╛ **рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдлрд╛рдЙрдВрдбреЗрд╢рди** рддреИрдирд╛рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдПрдХ рд╡реНрдпрд╛рдкрдХ Azure Resource Manager (ARM) рдЯреЗрдореНрдкрд▓реЗрдЯ рдЖрд╣реЗ. рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕рд░реНрд╡ рдЖрд╡рд╢реНрдпрдХ Azure рд╕реЗрд╡рд╛ рддреИрдирд╛рдд рдХрд░рддреЗ, рдпреЛрдЧреНрдп рдкреНрд░рдХрд╛рд░реЗ рдХреЙрдиреНрдлрд┐рдЧрд░ рдЖрдгрд┐ рдЗрдВрдЯрд░рдХрдиреЗрдХреНрдЯ рдХреЗрд▓реЗрд▓реЗ, рддреБрдордЪреНрдпрд╛ рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдХрд╛рд╕рд╛рд╕рд╛рдареА рддрдпрд╛рд░.

**рддреИрдирд╛рдд рдХреЗрд▓реНрдпрд╛рдирдВрддрд░ рддреБрдореНрд╣рд╛рд▓рд╛ рдорд┐рд│реЗрд▓:** рдЙрддреНрдкрд╛рджрди-рддрдпрд╛рд░ Azure рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░  
**рд╕рд┐рд╕реНрдЯрдо рдкреВрд░реНрдг рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рддреБрдореНрд╣рд╛рд▓рд╛ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ:** рдПрдЬрдВрдЯ рдХреЛрдб, рдлреНрд░рдВрдЯрдПрдВрдб UI, рдЖрдгрд┐ рдбреЗрдЯрд╛ рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди (рдкрд╣рд╛ [рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ](../retail-scenario.md))

## ЁЯОп рдХрд╛рдп рддреИрдирд╛рдд рд╣реЛрддреЗ

### рдореБрдЦреНрдп рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ (рддреИрдирд╛рддреАрдирдВрддрд░ рд╕реНрдерд┐рддреА)

тЬЕ **Azure OpenAI рд╕реЗрд╡рд╛** (API рдХреЙрд▓рд╕рд╛рдареА рддрдпрд╛рд░)
  - рдкреНрд░рд╛рдердорд┐рдХ рдкреНрд░рджреЗрд╢: GPT-4o рддреИрдирд╛рдд (реирежK TPM рдХреНрд╖рдорддрд╛)
  - рджреБрдпреНрдпрдо рдкреНрд░рджреЗрд╢: GPT-4o-mini рддреИрдирд╛рдд (резрежK TPM рдХреНрд╖рдорддрд╛)
  - рддреГрддреАрдп рдкреНрд░рджреЗрд╢: рдЯреЗрдХреНрд╕реНрдЯ рдПрдореНрдмреЗрдбрд┐рдВрдЧреНрдЬ рдореЙрдбреЗрд▓ (рейрежK TPM рдХреНрд╖рдорддрд╛)
  - рдореВрд▓реНрдпрд╛рдВрдХрди рдкреНрд░рджреЗрд╢: GPT-4o рдЧреНрд░реЗрдбрд░ рдореЙрдбреЗрд▓ (резрелK TPM рдХреНрд╖рдорддрд╛)
  - **рд╕реНрдерд┐рддреА:** рдкреВрд░реНрдгрдкрдгреЗ рдХрд╛рд░реНрдпрд░рдд - рд▓рдЧреЗрдЪ API рдХреЙрд▓реНрд╕ рдХрд░реВ рд╢рдХрддрд╛

тЬЕ **Azure AI рд╕рд░реНрдЪ** (рд░рд┐рдХреНрдд - рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рдирд╕рд╛рдареА рддрдпрд╛рд░)
  - рд╡реНрд╣реЗрдХреНрдЯрд░ рд╕рд░реНрдЪ рдХреНрд╖рдорддрд╛ рд╕рдХреНрд╖рдо
  - рд╕реНрдЯрдБрдбрд░реНрдб рдЯрд┐рдпрд░ рез рдкрд╛рд░реНрдЯрд┐рд╢рди, рез рд░реЗрдкреНрд▓рд┐рдХрд╛
  - **рд╕реНрдерд┐рддреА:** рд╕реЗрд╡рд╛ рдЪрд╛рд▓реВ, рдкрдг рдЗрдВрдбреЗрдХреНрд╕ рддрдпрд╛рд░ рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ
  - **рдЖрд╡рд╢реНрдпрдХ рдХреНрд░рд┐рдпрд╛:** рддреБрдордЪреНрдпрд╛ рд╕реНрдХреАрдорд╛рд╕рд╣ рд╕рд░реНрдЪ рдЗрдВрдбреЗрдХреНрд╕ рддрдпрд╛рд░ рдХрд░рд╛

тЬЕ **Azure рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддреЗ** (рд░рд┐рдХреНрдд - рдЕрдкрд▓реЛрдбрд╕рд╛рдареА рддрдпрд╛рд░)
  - рдмреНрд▓реЙрдм рдХрдВрдЯреЗрдирд░реНрд╕: `documents`, `uploads`
  - рд╕реБрд░рдХреНрд╖рд┐рдд рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди (рдлрдХреНрдд HTTPS, рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкреНрд░рд╡реЗрд╢ рдирд╛рд╣реА)
  - **рд╕реНрдерд┐рддреА:** рдлрд╛рдпрд▓реА рд╕реНрд╡реАрдХрд╛рд░рдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░
  - **рдЖрд╡рд╢реНрдпрдХ рдХреНрд░рд┐рдпрд╛:** рддреБрдордЪрд╛ рдЙрддреНрдкрд╛рджрди рдбреЗрдЯрд╛ рдЖрдгрд┐ рджрд╕реНрддрдРрд╡рдЬ рдЕрдкрд▓реЛрдб рдХрд░рд╛

тЪая╕П **рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рд╡рд╛рддрд╛рд╡рд░рдг** (рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рдЗрдореЗрдЬреЗрд╕ рддреИрдирд╛рдд)
  - рдПрдЬрдВрдЯ рд░рд╛рдЙрдЯрд░ рдЕреЕрдк (nginx рдбрд┐рдлреЙрд▓реНрдЯ рдЗрдореЗрдЬ)
  - рдлреНрд░рдВрдЯрдПрдВрдб рдЕреЕрдк (nginx рдбрд┐рдлреЙрд▓реНрдЯ рдЗрдореЗрдЬ)
  - рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреЙрдиреНрдлрд┐рдЧрд░ (реж-резреж рдЗрдВрд╕реНрдЯрдиреНрд╕реЗрд╕)
  - **рд╕реНрдерд┐рддреА:** рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рдХрдВрдЯреЗрдирд░реНрд╕ рдЪрд╛рд▓реВ
  - **рдЖрд╡рд╢реНрдпрдХ рдХреНрд░рд┐рдпрд╛:** рддреБрдордЪреЗ рдПрдЬрдВрдЯ рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рддрдпрд╛рд░ рдХрд░рд╛ рдЖрдгрд┐ рддреИрдирд╛рдд рдХрд░рд╛

тЬЕ **Azure Cosmos DB** (рд░рд┐рдХреНрдд - рдбреЗрдЯрд╛рд╕рд╛рдареА рддрдпрд╛рд░)
  - рдбреЗрдЯрд╛рдмреЗрд╕ рдЖрдгрд┐ рдХрдВрдЯреЗрдирд░ рдкреВрд░реНрд╡-рдХреЙрдиреНрдлрд┐рдЧрд░
  - рдХрдореА рд╡рд┐рд▓рдВрдм рдСрдкрд░реЗрд╢рдиреНрд╕рд╕рд╛рдареА рдСрдкреНрдЯрд┐рдорд╛рдЗрдЭ
  - TTL рд╕рдХреНрд╖рдо рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рд╕рд╛рдлрд╕рдлрд╛рдИрд╕рд╛рдареА
  - **рд╕реНрдерд┐рддреА:** рдЪреЕрдЯ рдЗрддрд┐рд╣рд╛рд╕ рд╕рд╛рдард╡рдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░

тЬЕ **Azure Key Vault** (рдкрд░реНрдпрд╛рдпреА - рдЧреБрдкрд┐рддрд╛рдВрд╕рд╛рдареА рддрдпрд╛рд░)
  - рд╕реЙрдлреНрдЯ рдбрд┐рд▓реАрдЯ рд╕рдХреНрд╖рдо
  - RBAC рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдУрд│рдЦрд╛рдВрд╕рд╛рдареА рдХреЙрдиреНрдлрд┐рдЧрд░
  - **рд╕реНрдерд┐рддреА:** API рдХреАрдЬ рдЖрдгрд┐ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рд╕рд╛рдард╡рдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░

тЬЕ **Application Insights** (рдкрд░реНрдпрд╛рдпреА - рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рд╕рдХреНрд░рд┐рдп)
  - рд▓реЙрдЧ рдЕреЕрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рд╡рд░реНрдХрд╕реНрдкреЗрд╕рд╢реА рдЬреЛрдбрд▓реЗрд▓реЗ
  - рдХрд╕реНрдЯрдо рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдЖрдгрд┐ рдЕрд▓рд░реНрдЯреНрд╕ рдХреЙрдиреНрдлрд┐рдЧрд░
  - **рд╕реНрдерд┐рддреА:** рддреБрдордЪреНрдпрд╛ рдЕреЕрдкреНрд╕рдХрдбреВрди рдЯреЗрд▓реАрдореЗрдЯреНрд░реА рд╕реНрд╡реАрдХрд╛рд░рдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░

тЬЕ **рдбреЙрдХреНрдпреБрдореЗрдВрдЯ рдЗрдВрдЯреЗрд▓рд┐рдЬрдиреНрд╕** (API рдХреЙрд▓рд╕рд╛рдареА рддрдпрд╛рд░)
  - S0 рдЯрд┐рдпрд░ рдЙрддреНрдкрд╛рджрди рд╡рд░реНрдХрд▓реЛрдбрд╕рд╛рдареА
  - **рд╕реНрдерд┐рддреА:** рдЕрдкрд▓реЛрдб рдХреЗрд▓реЗрд▓реНрдпрд╛ рджрд╕реНрддрдРрд╡рдЬ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░

тЬЕ **Bing рд╕рд░реНрдЪ API** (API рдХреЙрд▓рд╕рд╛рдареА рддрдпрд╛рд░)
  - S1 рдЯрд┐рдпрд░ рд░рд┐рдЕрд▓-рдЯрд╛рдЗрдо рд╕рд░реНрдЪрд╕рд╛рдареА
  - **рд╕реНрдерд┐рддреА:** рд╡реЗрдм рд╕рд░реНрдЪ рдХреНрд╡реЗрд░реАрд╕рд╛рдареА рддрдпрд╛рд░

### рддреИрдирд╛рддреА рдореЛрдбреНрд╕

| рдореЛрдб | OpenAI рдХреНрд╖рдорддрд╛ | рдХрдВрдЯреЗрдирд░ рдЗрдВрд╕реНрдЯрдиреНрд╕реЗрд╕ | рд╕рд░реНрдЪ рдЯрд┐рдпрд░ | рд╕реНрдЯреЛрд░реЗрдЬ рд░реЗрдбрдВрдбрдВрд╕реА | рд╕рд░реНрд╡реЛрддреНрддрдо рдЙрдкрдпреЛрдЧ |
|------|-----------------|---------------------|-------------|-------------------|----------|
| **рдорд┐рдирд┐рдорд▓** | резрежK-реирежK TPM | реж-реи рд░реЗрдкреНрд▓рд┐рдХрд╛ | рдмреЗрд╕рд┐рдХ | LRS (рд▓реЛрдХрд▓) | рдбреЗрд╡реНрд╣/рдЯреЗрд╕реНрдЯ, рд╢рд┐рдХрдгреЗ, рдкреНрд░реВрдл-рдСрдл-рдХреЙрдиреНрд╕реЗрдкреНрдЯ |
| **рд╕реНрдЯрдБрдбрд░реНрдб** | рейрежK-ремрежK TPM | реи-рел рд░реЗрдкреНрд▓рд┐рдХрд╛ | рд╕реНрдЯрдБрдбрд░реНрдб | ZRS (рдЭреЛрди) | рдЙрддреНрдкрд╛рджрди, рдордзреНрдпрдо рдЯреНрд░реЕрдлрд┐рдХ (<резрежK рдпреБрдЬрд░реНрд╕) |
| **рдкреНрд░реАрдорд┐рдпрдо** | реорежK-резрелрежK TPM | рел-резреж рд░реЗрдкреНрд▓рд┐рдХрд╛, рдЭреЛрди-рд░реЗрдбрдВрдбрдВрдЯ | рдкреНрд░реАрдорд┐рдпрдо | GRS (рдЬрд┐рдУ) | рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬ, рдЙрдЪреНрдЪ рдЯреНрд░реЕрдлрд┐рдХ (>резрежK рдпреБрдЬрд░реНрд╕), репреп.репреп% SLA |

**рдЦрд░реНрдЪ рдкреНрд░рднрд╛рд╡:**
- **рдорд┐рдирд┐рдорд▓ тЖТ рд╕реНрдЯрдБрдбрд░реНрдб:** ~рекx рдЦрд░реНрдЪ рд╡рд╛рдв ($резрежреж-рейренреж/рдорд╣рд┐рдирд╛ тЖТ $рекреиреж-рез,рекрелреж/рдорд╣рд┐рдирд╛)
- **рд╕реНрдЯрдБрдбрд░реНрдб тЖТ рдкреНрд░реАрдорд┐рдпрдо:** ~рейx рдЦрд░реНрдЪ рд╡рд╛рдв ($рекреиреж-рез,рекрелреж/рдорд╣рд┐рдирд╛ тЖТ $рез,резрелреж-рей,релрежреж/рдорд╣рд┐рдирд╛)
- **рдирд┐рд╡рдб рдХрд░рд╛ рдЖрдзрд╛рд░рд┐рдд:** рдЕрдкреЗрдХреНрд╖рд┐рдд рд▓реЛрдб, SLA рдЖрд╡рд╢реНрдпрдХрддрд╛, рдмрдЬреЗрдЯ рдорд░реНрдпрд╛рджрд╛

**рдХреНрд╖рдорддрд╛ рдирд┐рдпреЛрдЬрди:**
- **TPM (рдЯреЛрдХрдиреНрд╕ рдкреНрд░рддрд┐ рдорд┐рдирд┐рдЯ):** рд╕рд░реНрд╡ рдореЙрдбреЗрд▓ рддреИрдирд╛рддреАрдВрдордзреНрдпреЗ рдПрдХреВрдг
- **рдХрдВрдЯреЗрдирд░ рдЗрдВрд╕реНрдЯрдиреНрд╕реЗрд╕:** рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ рд╢реНрд░реЗрдгреА (рдХрд┐рдорд╛рди-рдЬрд╛рд╕реНрдд рд░реЗрдкреНрд▓рд┐рдХрд╛)
- **рд╕рд░реНрдЪ рдЯрд┐рдпрд░:** рдХреНрд╡реЗрд░реА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдЖрдгрд┐ рдЗрдВрдбреЗрдХреНрд╕ рдЖрдХрд╛рд░ рдорд░реНрдпрд╛рджрд╛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддреЗ

## ЁЯУЛ рдкреВрд░реНрд╡рддрдпрд╛рд░реА

### рдЖрд╡рд╢реНрдпрдХ рд╕рд╛рдзрдиреЗ
1. **Azure CLI** (рдЖрд╡реГрддреНрддреА реи.релреж.реж рдХрд┐рдВрд╡рд╛ рдЙрдЪреНрдЪ)
   ```bash
   az --version  # рдЖрд╡реГрддреНрддреА рддрдкрд╛рд╕рд╛
   az login      # рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд░рд╛
   ```

2. **рд╕рдХреНрд░рд┐рдп Azure рд╕рджрд╕реНрдпрддрд╛** рдорд╛рд▓рдХ рдХрд┐рдВрд╡рд╛ рдпреЛрдЧрджрд╛рдирдХрд░реНрддрд╛ рдкреНрд░рд╡реЗрд╢рд╛рд╕рд╣
   ```bash
   az account show  # рд╕рджрд╕реНрдпрддрд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛
   ```

### рдЖрд╡рд╢реНрдпрдХ Azure рдХреЛрдЯрд╛

рддреИрдирд╛рддреАрдкреВрд░реНрд╡реА, рддреБрдордЪреНрдпрд╛ рд▓рдХреНрд╖реНрдп рдкреНрд░рджреЗрд╢рд╛рдВрдордзреНрдпреЗ рдкреБрд░реЗрд╕реЗ рдХреЛрдЯрд╛ рддрдкрд╛рд╕рд╛:

```bash
# рдЖрдкрд▓реНрдпрд╛ рдкреНрд░рджреЗрд╢рд╛рдд Azure OpenAI рдЙрдкрд▓рдмреНрдзрддрд╛ рддрдкрд╛рд╕рд╛
az cognitiveservices account list-skus \
  --kind OpenAI \
  --location eastus2

# OpenAI рдХреЛрдЯрд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛ (рдЙрджрд╛рд╣рд░рдг gpt-4o рд╕рд╛рдареА)
az cognitiveservices usage list \
  --location eastus2 \
  --query "[?name.value=='OpenAI.Standard.gpt-4o']"

# рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рдХреЛрдЯрд╛ рддрдкрд╛рд╕рд╛
az provider show \
  --namespace Microsoft.App \
  --query "resourceTypes[?resourceType=='managedEnvironments'].locations"
```

**рдХрд┐рдорд╛рди рдЖрд╡рд╢реНрдпрдХ рдХреЛрдЯрд╛:**
- **Azure OpenAI:** рей-рек рдореЙрдбреЗрд▓ рддреИрдирд╛рддреА рдкреНрд░рджреЗрд╢рд╛рдВрдордзреНрдпреЗ
  - GPT-4o: реирежK TPM (рдЯреЛрдХрдиреНрд╕ рдкреНрд░рддрд┐ рдорд┐рдирд┐рдЯ)
  - GPT-4o-mini: резрежK TPM
  - text-embedding-ada-002: рейрежK TPM
  - **рдЯреАрдк:** GPT-4o рдХрд╛рд╣реА рдкреНрд░рджреЗрд╢рд╛рдВрдордзреНрдпреЗ рд╡реЗрдЯрд▓рд┐рд╕реНрдЯ рдЕрд╕реВ рд╢рдХрддреЗ - рддрдкрд╛рд╕рд╛ [рдореЙрдбреЗрд▓ рдЙрдкрд▓рдмреНрдзрддрд╛](https://learn.microsoft.com/azure/ai-services/openai/concepts/models)
- **рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕:** рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рд╡рд╛рддрд╛рд╡рд░рдг + реи-резреж рдХрдВрдЯреЗрдирд░ рдЗрдВрд╕реНрдЯрдиреНрд╕реЗрд╕
- **AI рд╕рд░реНрдЪ:** рд╕реНрдЯрдБрдбрд░реНрдб рдЯрд┐рдпрд░ (рд╡реНрд╣реЗрдХреНрдЯрд░ рд╕рд░реНрдЪрд╕рд╛рдареА рдмреЗрд╕рд┐рдХ рдЕрдкреБрд░реЗ)
- **Cosmos DB:** рд╕реНрдЯрдБрдбрд░реНрдб рдкреНрд░рд╛рд╡реНрд╣рд┐рдЬрди рдХреЗрд▓реЗ throughput

**рдЬрд░ рдХреЛрдЯрд╛ рдЕрдкреБрд░рд╛ рдЕрд╕реЗрд▓:**
1. Azure рдкреЛрд░реНрдЯрд▓ тЖТ рдХреЛрдЯрд╛ тЖТ рд╡рд╛рдв рд╡рд┐рдирдВрддреА рдХрд░рд╛
2. рдХрд┐рдВрд╡рд╛ Azure CLI рд╡рд╛рдкрд░рд╛:
   ```bash
   az support tickets create \
     --ticket-name "OpenAI-Quota-Increase" \
     --severity "minimal" \
     --description "Request quota increase for Azure OpenAI GPT-4o in eastus2"
   ```
3. рдЙрдкрд▓рдмреНрдзрддрд╛ рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдкрд░реНрдпрд╛рдпреА рдкреНрд░рджреЗрд╢рд╛рдВрдЪрд╛ рд╡рд┐рдЪрд╛рд░ рдХрд░рд╛

## ЁЯЪА рдЬрд▓рдж рддреИрдирд╛рддреА

### рдкрд░реНрдпрд╛рдп рез: Azure CLI рд╡рд╛рдкрд░реВрди

```bash
# рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╛рдЗрд▓реНрд╕ рдХреНрд▓реЛрди рдХрд░рд╛ рдХрд┐рдВрд╡рд╛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рд╛
git clone <repository-url>
cd examples/retail-multiagent-arm-template

# рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛рд░реНрдпрдХреНрд╖рдо рдмрдирд╡рд╛
chmod +x deploy.sh

# рдбрд┐рдлреЙрд▓реНрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕рд╕рд╣ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рд╛
./deploy.sh -g myResourceGroup

# рдкреНрд░реАрдорд┐рдпрдо рд╡реИрд╢рд┐рд╖реНрдЯреНрдпрд╛рдВрд╕рд╣ рдЙрддреНрдкрд╛рджрдирд╛рд╕рд╛рдареА рдбрд┐рдкреНрд▓реЙрдп рдХрд░рд╛
./deploy.sh -g myProdRG -e prod -m premium -l eastus2
```

### рдкрд░реНрдпрд╛рдп реи: Azure рдкреЛрд░реНрдЯрд▓ рд╡рд╛рдкрд░реВрди

[![Azure рд╡рд░ рддреИрдирд╛рдд рдХрд░рд╛](https://aka.ms/deploytoazurebutton)](https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmicrosoft%2Fazd-for-beginners%2Fmain%2Fexamples%2Fretail-multiagent-arm-template%2Fazuredeploy.json)

### рдкрд░реНрдпрд╛рдп рей: рдереЗрдЯ Azure CLI рд╡рд╛рдкрд░реВрди

```bash
# рд╕рдВрд╕рд╛рдзрди рдЧрдЯ рддрдпрд╛рд░ рдХрд░рд╛
az group create --name myResourceGroup --location eastus2

# рдЯреЗрдореНрдкрд▓реЗрдЯ рддреИрдирд╛рдд рдХрд░рд╛
az deployment group create \
  --resource-group myResourceGroup \
  --template-file azuredeploy.json \
  --parameters azuredeploy.parameters.json
```

## тП▒я╕П рддреИрдирд╛рддреА рдХрд╛рд▓рд╛рд╡рдзреА

### рдХрд╛рдп рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрд╣реЗ

| рдЯрдкреНрдкрд╛ | рдХрд╛рд▓рд╛рд╡рдзреА | рдХрд╛рдп рд╣реЛрддреЗ |
|-------|----------|--------------||
| **рдЯреЗрдореНрдкрд▓реЗрдЯ рд╡реНрд╣реЕрд▓рд┐рдбреЗрд╢рди** | рейреж-ремреж рд╕реЗрдХрдВрдж | Azure ARM рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕рд┐рдВрдЯреЕрдХреНрд╕ рдЖрдгрд┐ рдкреЕрд░рд╛рдореАрдЯрд░реНрд╕ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рддреЗ |
| **рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк рд╕реЗрдЯрдЕрдк** | резреж-реиреж рд╕реЗрдХрдВрдж | рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк рддрдпрд╛рд░ рдХрд░рддреЗ (рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реНрдпрд╛рд╕) |
| **OpenAI рддреИрдирд╛рддреА** | рел-рео рдорд┐рдирд┐рдЯреЗ | рей-рек OpenAI рдЦрд╛рддреЗ рддрдпрд╛рд░ рдХрд░рддреЗ рдЖрдгрд┐ рдореЙрдбреЗрд▓ рддреИрдирд╛рдд рдХрд░рддреЗ |
| **рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕** | рей-рел рдорд┐рдирд┐рдЯреЗ | рд╡рд╛рддрд╛рд╡рд░рдг рддрдпрд╛рд░ рдХрд░рддреЗ рдЖрдгрд┐ рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рдХрдВрдЯреЗрдирд░реНрд╕ рддреИрдирд╛рдд рдХрд░рддреЗ |
| **рд╕рд░реНрдЪ рдЖрдгрд┐ рд╕реНрдЯреЛрд░реЗрдЬ** | реи-рек рдорд┐рдирд┐рдЯреЗ | AI рд╕рд░реНрдЪ рд╕реЗрд╡рд╛ рдЖрдгрд┐ рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддреЗ рддреИрдирд╛рдд рдХрд░рддреЗ |
| **Cosmos DB** | реи-рей рдорд┐рдирд┐рдЯреЗ | рдбреЗрдЯрд╛рдмреЗрд╕ рддрдпрд╛рд░ рдХрд░рддреЗ рдЖрдгрд┐ рдХрдВрдЯреЗрдирд░реНрд╕ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рддреЗ |
| **рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рд╕реЗрдЯрдЕрдк** | реи-рей рдорд┐рдирд┐рдЯреЗ | Application Insights рдЖрдгрд┐ Log Analytics рд╕реЗрдЯ рдХрд░рддреЗ |
| **RBAC рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди** | рез-реи рдорд┐рдирд┐рдЯреЗ | рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдУрд│рдЦ рдЖрдгрд┐ рдкрд░рд╡рд╛рдирдЧреНрдпрд╛ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рддреЗ |
| **рдПрдХреВрдг рддреИрдирд╛рддреА** | **резрел-реирел рдорд┐рдирд┐рдЯреЗ** | рдкреВрд░реНрдг рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рддрдпрд╛рд░ |

**рддреИрдирд╛рддреАрдирдВрддрд░:**
- тЬЕ **рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рддрдпрд╛рд░:** рд╕рд░реНрд╡ Azure рд╕реЗрд╡рд╛ рддреИрдирд╛рдд рдЖрдгрд┐ рдЪрд╛рд▓реВ
- тП▒я╕П **рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдХрд╛рд╕:** реореж-резреиреж рддрд╛рд╕ (рддреБрдордЪреА рдЬрдмрд╛рдмрджрд╛рд░реА)
- тП▒я╕П **рдЗрдВрдбреЗрдХреНрд╕ рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди:** резрел-рейреж рдорд┐рдирд┐рдЯреЗ (рддреБрдордЪреНрдпрд╛ рд╕реНрдХреАрдорд╛ рдЖрд╡рд╢реНрдпрдХ)
- тП▒я╕П **рдбреЗрдЯрд╛ рдЕрдкрд▓реЛрдб:** рдбреЗрдЯрд╛рд╕реЗрдЯ рдЖрдХрд╛рд░рд╛рдиреБрд╕рд╛рд░ рдмрджрд▓рддреЗ
- тП▒я╕П **рдЪрд╛рдЪрдгреА рдЖрдгрд┐ рд╕рддреНрдпрд╛рдкрди:** реи-рек рддрд╛рд╕

---

## тЬЕ рддреИрдирд╛рддреА рдпрд╢рд╕реНрд╡реА рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛

### рдЪрд░рдг рез: рд░рд┐рд╕реЛрд░реНрд╕ рддреИрдирд╛рддреА рддрдкрд╛рд╕рд╛ (реи рдорд┐рдирд┐рдЯреЗ)

```bash
# рд╕рд░реНрд╡ рд╕рдВрд╕рд╛рдзрдиреЗ рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ рддреИрдирд╛рдд рдЭрд╛рд▓реА рдЖрд╣реЗрдд рдпрд╛рдЪреА рдкрдбрддрд╛рд│рдгреА рдХрд░рд╛
az resource list \
  --resource-group myResourceGroup \
  --query "[?provisioningState!='Succeeded'].{Name:name, Status:provisioningState, Type:type}" \
  --output table
```

**рдЕрдкреЗрдХреНрд╖рд┐рдд:** рд░рд┐рдХреНрдд рдЯреЗрдмрд▓ (рд╕рд░реНрд╡ рд░рд┐рд╕реЛрд░реНрд╕реЗрд╕ "Succeeded" рд╕реНрдерд┐рддреА рджрд░реНрд╢рд╡рддрд╛рдд)

### рдЪрд░рдг реи: Azure OpenAI рддреИрдирд╛рддреА рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛ (рей рдорд┐рдирд┐рдЯреЗ)

```bash
# рд╕рд░реНрд╡ OpenAI рдЦрд╛рддреА рд╕реВрдЪреАрдмрджреНрдз рдХрд░рд╛
az cognitiveservices account list \
  --resource-group myResourceGroup \
  --query "[?kind=='OpenAI'].{Name:name, Location:location, Status:properties.provisioningState}" \
  --output table

# рдкреНрд░рд╛рдердорд┐рдХ рдкреНрд░рджреЗрд╢рд╛рд╕рд╛рдареА рдореЙрдбреЗрд▓ рддреИрдирд╛рддреА рддрдкрд╛рд╕рд╛
OPENAI_NAME=$(az cognitiveservices account list \
  --resource-group myResourceGroup \
  --query "[?kind=='OpenAI'] | [0].name" -o tsv)

az cognitiveservices account deployment list \
  --name $OPENAI_NAME \
  --resource-group myResourceGroup \
  --output table
```

**рдЕрдкреЗрдХреНрд╖рд┐рдд:** 
- рей-рек OpenAI рдЦрд╛рддреЗ (рдкреНрд░рд╛рдердорд┐рдХ, рджреБрдпреНрдпрдо, рддреГрддреАрдп, рдореВрд▓реНрдпрд╛рдВрдХрди рдкреНрд░рджреЗрд╢)
- рдкреНрд░рддреНрдпреЗрдХ рдЦрд╛рддреНрдпрд╛рдд рез-реи рдореЙрдбреЗрд▓ рддреИрдирд╛рддреА (gpt-4o, gpt-4o-mini, text-embedding-ada-002)

### рдЪрд░рдг рей: рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдЪрд╛рдЪрдгреА рдХрд░рд╛ (рел рдорд┐рдирд┐рдЯреЗ)

```bash
# рдХрдВрдЯреЗрдирд░ рдЕреЕрдк URL рдорд┐рд│рд╡рд╛
az containerapp list \
  --resource-group myResourceGroup \
  --query "[].{Name:name, URL:properties.configuration.ingress.fqdn, Status:properties.runningStatus}" \
  --output table

# рд░рд╛рдЙрдЯрд░ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдЪрд╛рдЪрдгреА рдХрд░рд╛ (рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рдкреНрд░рддрд┐рдорд╛ рдкреНрд░рддрд┐рд╕рд╛рдж рджреЗрдИрд▓)
ROUTER_URL=$(az containerapp show \
  --name retail-router \
  --resource-group myResourceGroup \
  --query "properties.configuration.ingress.fqdn" -o tsv)

echo "Testing: https://$ROUTER_URL"
curl -I https://$ROUTER_URL || echo "Container running (placeholder image - expected)"
```

**рдЕрдкреЗрдХреНрд╖рд┐рдд:** 
- рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ "Running" рд╕реНрдерд┐рддреА рджрд░реНрд╢рд╡рддрд╛рдд
- рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ nginx HTTP реирежреж рдХрд┐рдВрд╡рд╛ рекрежрек рдкреНрд░рддрд┐рд╕рд╛рдж рджреЗрддреЛ (рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рдирд╛рд╣реА)

### рдЪрд░рдг рек: Azure OpenAI API рдкреНрд░рд╡реЗрд╢ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛ (рей рдорд┐рдирд┐рдЯреЗ)

```bash
# OpenAI рдПрдВрдбрдкреЙрдЗрдВрдЯ рдЖрдгрд┐ рдХреА рдорд┐рд│рд╡рд╛
OPENAI_ENDPOINT=$(az cognitiveservices account show \
  --name $OPENAI_NAME \
  --resource-group myResourceGroup \
  --query "properties.endpoint" -o tsv)

OPENAI_KEY=$(az cognitiveservices account keys list \
  --name $OPENAI_NAME \
  --resource-group myResourceGroup \
  --query "key1" -o tsv)

# GPT-4o рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рддрдкрд╛рд╕рд╛
curl "${OPENAI_ENDPOINT}openai/deployments/gpt-4o/chat/completions?api-version=2024-08-01-preview" \
  -H "Content-Type: application/json" \
  -H "api-key: $OPENAI_KEY" \
  -d '{
    "messages": [{"role": "user", "content": "Say hello"}],
    "max_tokens": 10
  }'
```

**рдЕрдкреЗрдХреНрд╖рд┐рдд:** JSON рдкреНрд░рддрд┐рд╕рд╛рдж рдЪреЕрдЯ рдкреВрд░реНрдгрддреЗрд╕рд╣ (OpenAI рдХрд╛рд░реНрдпрд░рдд рдЕрд╕рд▓реНрдпрд╛рдЪреЗ рдкреБрд╖реНрдЯреА рдХрд░рддреЗ)

### рдХрд╛рдп рдХрд╛рд░реНрдпрд░рдд рдЖрд╣реЗ рдЖрдгрд┐ рдХрд╛рдп рдирд╛рд╣реА

**тЬЕ рддреИрдирд╛рддреАрдирдВрддрд░ рдХрд╛рд░реНрдпрд░рдд:**
- Azure OpenAI рдореЙрдбреЗрд▓реНрд╕ рддреИрдирд╛рдд рдЖрдгрд┐ API рдХреЙрд▓реНрд╕ рд╕реНрд╡реАрдХрд╛рд░рдд рдЖрд╣реЗрдд
- AI рд╕рд░реНрдЪ рд╕реЗрд╡рд╛ рдЪрд╛рд▓реВ (рд░рд┐рдХреНрдд, рдЗрдВрдбреЗрдХреНрд╕ рдирд╛рд╣реА)
- рдХрдВрдЯреЗрдирд░ рдЕреЕрдкреНрд╕ рдЪрд╛рд▓реВ (рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ nginx рдЗрдореЗрдЬреЗрд╕)
- рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддреЗ рдкреНрд░рд╡реЗрд╢рдпреЛрдЧреНрдп рдЖрдгрд┐ рдЕрдкрд▓реЛрдбрд╕рд╛рдареА рддрдпрд╛рд░
- Cosmos DB рдбреЗрдЯрд╛ рдСрдкрд░реЗрд╢рдиреНрд╕рд╕рд╛рдареА рддрдпрд╛рд░
- Application Insights рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдЯреЗрд▓реАрдореЗрдЯреНрд░реА рдЧреЛрд│рд╛ рдХрд░рдд рдЖрд╣реЗ
- Key Vault рдЧреБрдкрд┐рдд рд╕рд╛рдард╡рдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░

**тЭМ рдЕрдЬреВрди рдХрд╛рд░реНрдпрд░рдд рдирд╛рд╣реА (рд╡рд┐рдХрд╛рд╕ рдЖрд╡рд╢реНрдпрдХ):**
- рдПрдЬрдВрдЯ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ (рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рддреИрдирд╛рдд рдирд╛рд╣реА)
- рдЪреЕрдЯ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ (рдлреНрд░рдВрдЯрдПрдВрдб + рдмреЕрдХрдПрдВрдб рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА рдЖрд╡рд╢реНрдпрдХ)
- рд╕рд░реНрдЪ рдХреНрд╡реЗрд░реА (рд╕рд░реНрдЪ рдЗрдВрдбреЗрдХреНрд╕ рддрдпрд╛рд░ рдирд╛рд╣реА)
- рджрд╕реНрддрдРрд╡рдЬ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрди (рдбреЗрдЯрд╛ рдЕрдкрд▓реЛрдб рдирд╛рд╣реА)
- рдХрд╕реНрдЯрдо рдЯреЗрд▓реАрдореЗрдЯреНрд░реА (рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдВрд╕реНрдЯреНрд░реБрдореЗрдВрдЯреЗрд╢рди рдЖрд╡рд╢реНрдпрдХ)

**рдкреБрдвреАрд▓ рдЪрд░рдг:** [рддреИрдирд╛рддреАрдирдВрддрд░ рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди](../../../../examples/retail-multiagent-arm-template) рдкрд╣рд╛ рддреБрдордЪреЗ рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдХрд╕рд┐рдд рдЖрдгрд┐ рддреИрдирд╛рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА

---

## тЪЩя╕П рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди рдкрд░реНрдпрд╛рдп

### рдЯреЗрдореНрдкрд▓реЗрдЯ рдкреЕрд░рд╛рдореАрдЯрд░реНрд╕

| рдкреЕрд░рд╛рдореАрдЯрд░ | рдкреНрд░рдХрд╛рд░ | рдбрд┐рдлреЙрд▓реНрдЯ | рд╡рд░реНрдгрди |
|-----------|------|---------|-------------|
| `projectName` | string | "retail" | рд╕рд░реНрд╡ рд░рд┐рд╕реЛрд░реНрд╕ рдирд╛рд╡рд╛рдВрд╕рд╛рдареА рдкреНрд░рд┐рдлрд┐рдХреНрд╕ |
| `location` | string | рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк рд╕реНрдерд╛рди | рдкреНрд░рд╛рдердорд┐рдХ рддреИрдирд╛рддреА рдкреНрд░рджреЗрд╢ |
| `secondaryLocation` | string | "westus2" | рдорд▓реНрдЯреА-рд░реЗрдЬрд┐рдпрди рддреИрдирд╛рддреАрд╕рд╛рдареА рджреБрдпреНрдпрдо рдкреНрд░рджреЗрд╢ |
| `tertiaryLocation` | string | "francecentral" | рдПрдореНрдмреЗрдбрд┐рдВрдЧреНрдЬ рдореЙрдбреЗрд▓рд╕рд╛рдареА рдкреНрд░рджреЗрд╢ |
| `environmentName` | string | "dev" | рд╡рд╛рддрд╛рд╡рд░рдг рдирд╛рдорд╛рдВрдХрди (dev/staging/prod) |
| `deploymentMode` | string | "standard" | рддреИрдирд╛рддреА рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди (minimal/standard/premium) |
| `enableMultiRegion` | bool | true | рдорд▓реНрдЯреА-рд░реЗрдЬрд┐рдпрди рддреИрдирд╛рддреА рд╕рдХреНрд╖рдо рдХрд░рд╛ |
| `enableMonitoring` | bool | true | Application Insights рдЖрдгрд┐ рд▓реЙрдЧрд┐рдВрдЧ рд╕рдХреНрд╖рдо рдХрд░рд╛ |
| `enableSecurity` | bool | true | Key Vault рдЖрдгрд┐ рд╡рд░реНрдзрд┐рдд рд╕реБрд░рдХреНрд╖рд╛ рд╕рдХреНрд╖рдо рдХрд░рд╛ |

### рдкреЕрд░рд╛рдореАрдЯрд░реНрд╕ рд╕рд╛рдиреБрдХреВрд▓рд┐рдд рдХрд░рдгреЗ

`azuredeploy.parameters.json` рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рд╛:

```json
{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "projectName": {
      "value": "mycompany"
    },
    "environmentName": {
      "value": "prod"
    },
    "deploymentMode": {
      "value": "premium"
    },
    "location": {
      "value": "eastus2"
    }
  }
}
```

## ЁЯПЧя╕П рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдЖрдврд╛рд╡рд╛

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ   Frontend      тФВ    тФВ  Agent Router   тФВ    тФВ     Agents      тФВ
тФВ (Container App) тФВтФАтФАтФАтЦ╢тФВ (Container App) тФВтФАтФАтФАтЦ╢тФВ Customer + Inv  тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                тФВ                        тФВ
                                тЦ╝                        тЦ╝
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ   AI Search     тФВ    тФВ  Azure OpenAI   тФВ    тФВ    Storage      тФВ
тФВ   (Vector DB)   тФВ    тФВ (Multi-region)  тФВ    тФВ   (Documents)   тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                тФВ                        тФВ
                                тЦ╝                        тЦ╝
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ  Cosmos DB      тФВ    тФВ App Insights    тФВ    тФВ   Key Vault     тФВ
тФВ (Chat History)  тФВ    тФВ  (Monitoring)   тФВ    тФВ   (Secrets)     тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

## ЁЯУЦ рддреИрдирд╛рддреА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╡рд╛рдкрд░

`deploy.sh` рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдПрдХ рдкрд░рд╕реНрдкрд░ рддреИрдирд╛рддреА рдЕрдиреБрднрд╡ рдкреНрд░рджрд╛рди рдХрд░рддреЗ:

```bash
# рдорджрдд рджрд╛рдЦрд╡рд╛
./deploy.sh --help

# рдореВрд▓рднреВрдд рдЙрдкрдпреЛрдЬрди
./deploy.sh -g myResourceGroup

# рд╕рд╛рдиреБрдХреВрд▓ рд╕реЗрдЯрд┐рдВрдЧреНрдЬрд╕рд╣ рдкреНрд░рдЧрдд рдЙрдкрдпреЛрдЬрди
./deploy.sh \
  -g myProductionRG \
  -p companyname \
  -e prod \
  -m premium \
  -l eastus2

# рдмрд╣реБ-рдкреНрд░рджреЗрд╢рд╛рд╢рд┐рд╡рд╛рдп рд╡рд┐рдХрд╛рд╕ рдЙрдкрдпреЛрдЬрди
./deploy.sh \
  -g myDevRG \
  -e dev \
  -m minimal \
  --no-multi-region \
  --no-security
```

### рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╡реИрд╢рд┐рд╖реНрдЯреНрдпреЗ

- тЬЕ **рдкреВрд░реНрд╡рддрдпрд╛рд░реА рд╕рддреНрдпрд╛рдкрди** (Azure CLI, рд▓реЙрдЧрд┐рди рд╕реНрдерд┐рддреА, рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╛рдЗрд▓реНрд╕)
- тЬЕ **рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди** (рдирд╕рд▓реНрдпрд╛рд╕ рддрдпрд╛рд░ рдХрд░рддреЗ)
- тЬЕ **рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕рддреНрдпрд╛рдкрди** рддреИрдирд╛рддреАрдкреВрд░реНрд╡реА
- тЬЕ **рдкреНрд░рдЧрддреА рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ** рд░рдВрдЧреАрдд рдЖрдЙрдЯрдкреБрдЯрд╕рд╣
- тЬЕ **рддреИрдирд╛рддреА рдЖрдЙрдЯрдкреБрдЯреНрд╕** рдкреНрд░рджрд░реНрд╢рди
- тЬЕ **рддреИрдирд╛рддреАрдирдВрддрд░ рдорд╛рд░реНрдЧрджрд░реНрд╢рди**

## ЁЯУК рддреИрдирд╛рддреА рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ

### рддреИрдирд╛рддреА рд╕реНрдерд┐рддреА рддрдкрд╛рд╕рд╛


> **ЁЯУЭ рдорд╣рддреНрддреНрд╡рд╛рдЪреЗ:** рдкрд╛рдпрд╛рднреВрдд рд╕реБрд╡рд┐рдзрд╛ рддреИрдирд╛рдд рдХреЗрд▓реА рдЖрд╣реЗ, рдкрд░рдВрддреБ рддреБрдореНрд╣рд╛рд▓рд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдХреЛрдб рд╡рд┐рдХрд╕рд┐рдд рдЖрдгрд┐ рддреИрдирд╛рдд рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ.

### рдЯрдкреНрдкрд╛ 1: рдПрдЬрдВрдЯ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рд╛ (рддреБрдордЪреА рдЬрдмрд╛рдмрджрд╛рд░реА)

ARM рдЯреЗрдореНрдкрд▓реЗрдЯ **рд░рд┐рдХреНрдд рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕** рддрдпрд╛рд░ рдХрд░рддреЗ рдЬреНрдпрд╛рдордзреНрдпреЗ рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ nginx рдкреНрд░рддрд┐рдорд╛ рдЕрд╕рддрд╛рдд. рддреБрдореНрд╣рд╛рд▓рд╛ рд╣реЗ рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ:

**рдЖрд╡рд╢реНрдпрдХ рд╡рд┐рдХрд╛рд╕:**
1. **рдПрдЬрдВрдЯ рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА** (30-40 рддрд╛рд╕)
   - GPT-4o рдПрдХрддреНрд░реАрдХрд░рдгрд╛рд╕рд╣ рдЧреНрд░рд╛рд╣рдХ рд╕реЗрд╡рд╛ рдПрдЬрдВрдЯ
   - GPT-4o-mini рдПрдХрддреНрд░реАрдХрд░рдгрд╛рд╕рд╣ рдЗрдиреНрд╡реНрд╣реЗрдВрдЯрд░реА рдПрдЬрдВрдЯ
   - рдПрдЬрдВрдЯ рд░реВрдЯрд┐рдВрдЧ рд▓реЙрдЬрд┐рдХ

2. **рдлреНрд░рдВрдЯрдПрдВрдб рд╡рд┐рдХрд╛рд╕** (20-30 рддрд╛рд╕)
   - рдЪреЕрдЯ рдЗрдВрдЯрд░рдлреЗрд╕ UI (React/Vue/Angular)
   - рдлрд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛
   - рдкреНрд░рддрд┐рд╕рд╛рдж рд░реЗрдВрдбрд░рд┐рдВрдЧ рдЖрдгрд┐ рд╕реНрд╡рд░реВрдкрди

3. **рдмреЕрдХрдПрдВрдб рд╕реЗрд╡рд╛** (12-16 рддрд╛рд╕)
   - FastAPI рдХрд┐рдВрд╡рд╛ Express рд░рд╛рдЙрдЯрд░
   - рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдорд┐рдбрд▓рд╡реЗрдЕрд░
   - рдЯреЗрд▓реАрдореЗрдЯреНрд░реА рдПрдХрддреНрд░реАрдХрд░рдг

**рдкрд╣рд╛:** [рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ](../retail-scenario.md) рддрдкрд╢реАрд▓рд╡рд╛рд░ рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА рдирдореБрдиреЗ рдЖрдгрд┐ рдХреЛрдб рдЙрджрд╛рд╣рд░рдгрд╛рдВрд╕рд╛рдареА

### рдЯрдкреНрдкрд╛ 2: AI рд╢реЛрдз рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рд╛ (15-30 рдорд┐рдирд┐рдЯреЗ)

рддреБрдордЪреНрдпрд╛ рдбреЗрдЯрд╛ рдореЙрдбреЗрд▓рд╢реА рдЬреБрд│рдгрд╛рд░рд╛ рд╢реЛрдз рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рддрдпрд╛рд░ рдХрд░рд╛:

```bash
# рд╢реЛрдз рд╕реЗрд╡рд╛ рддрдкрд╢реАрд▓ рдорд┐рд│рд╡рд╛
SEARCH_NAME=$(az search service list \
  --resource-group myResourceGroup \
  --query "[0].name" -o tsv)

SEARCH_KEY=$(az search admin-key show \
  --service-name $SEARCH_NAME \
  --resource-group myResourceGroup \
  --query "primaryKey" -o tsv)

# рдЖрдкрд▓реНрдпрд╛ рд╕реНрдХреАрдорд╛рд╕рд╣ рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ рддрдпрд╛рд░ рдХрд░рд╛ (рдЙрджрд╛рд╣рд░рдг)
curl -X POST "https://${SEARCH_NAME}.search.windows.net/indexes?api-version=2023-11-01" \
  -H "Content-Type: application/json" \
  -H "api-key: ${SEARCH_KEY}" \
  -d '{
    "name": "products",
    "fields": [
      {"name": "id", "type": "Edm.String", "key": true},
      {"name": "title", "type": "Edm.String", "searchable": true},
      {"name": "content", "type": "Edm.String", "searchable": true},
      {"name": "category", "type": "Edm.String", "filterable": true},
      {"name": "content_vector", "type": "Collection(Edm.Single)", 
       "searchable": true, "dimensions": 1536, "vectorSearchProfile": "default"}
    ],
    "vectorSearch": {
      "algorithms": [{"name": "default", "kind": "hnsw"}],
      "profiles": [{"name": "default", "algorithm": "default"}]
    }
  }'
```

**рд╕рдВрд╕рд╛рдзрдиреЗ:**
- [AI рд╢реЛрдз рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдпреЛрдЬрдирд╛ рдбрд┐рдЭрд╛рдЗрди](https://learn.microsoft.com/azure/search/search-what-is-an-index)
- [рд╡реНрд╣реЗрдХреНрдЯрд░ рд╢реЛрдз рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди](https://learn.microsoft.com/azure/search/vector-search-how-to-create-index)

### рдЯрдкреНрдкрд╛ 3: рддреБрдордЪрд╛ рдбреЗрдЯрд╛ рдЕрдкрд▓реЛрдб рдХрд░рд╛ (рд╡реЗрд│ рдмрджрд▓рддреЛ)

рдПрдХрджрд╛ рддреБрдордЪреНрдпрд╛рдХрдбреЗ рдЙрддреНрдкрд╛рджрди рдбреЗрдЯрд╛ рдЖрдгрд┐ рджрд╕реНрддрдРрд╡рдЬ рдЕрд╕рд▓реЗ рдХреА:

```bash
# рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддреЗ рддрдкрд╢реАрд▓ рдорд┐рд│рд╡рд╛
STORAGE_NAME=$(az storage account list \
  --resource-group myResourceGroup \
  --query "[0].name" -o tsv)

STORAGE_KEY=$(az storage account keys list \
  --account-name $STORAGE_NAME \
  --resource-group myResourceGroup \
  --query "[0].value" -o tsv)

# рддреБрдордЪреА рдХрд╛рдЧрджрдкрддреНрд░реЗ рдЕрдкрд▓реЛрдб рдХрд░рд╛
az storage blob upload-batch \
  --destination documents \
  --source /path/to/your/product/docs \
  --account-name $STORAGE_NAME \
  --account-key $STORAGE_KEY

# рдЙрджрд╛рд╣рд░рдг: рдПрдХрдЪ рдлрд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдХрд░рд╛
az storage blob upload \
  --container-name documents \
  --name "product-manual.pdf" \
  --file /path/to/product-manual.pdf \
  --account-name $STORAGE_NAME \
  --account-key $STORAGE_KEY
```

### рдЯрдкреНрдкрд╛ 4: рддреБрдордЪреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рддрдпрд╛рд░ рдХрд░рд╛ рдЖрдгрд┐ рддреИрдирд╛рдд рдХрд░рд╛ (8-12 рддрд╛рд╕)

рдПрдХрджрд╛ рддреБрдореНрд╣реА рддреБрдордЪрд╛ рдПрдЬрдВрдЯ рдХреЛрдб рд╡рд┐рдХрд╕рд┐рдд рдХреЗрд▓рд╛ рдХреА:

```bash
# 1. Azure рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░рд┐ рддрдпрд╛рд░ рдХрд░рд╛ (рдЬрд░ рдЖрд╡рд╢реНрдпрдХ рдЕрд╕реЗрд▓)
az acr create \
  --name myregistry \
  --resource-group myResourceGroup \
  --sku Basic

# 2. рдПрдЬрдВрдЯ рд░рд╛рдЙрдЯрд░ рдЗрдореЗрдЬ рддрдпрд╛рд░ рдХрд░рд╛ рдЖрдгрд┐ рдкреБрд╢ рдХрд░рд╛
docker build -t myregistry.azurecr.io/agent-router:v1 /path/to/your/router/code
az acr login --name myregistry
docker push myregistry.azurecr.io/agent-router:v1

# 3. рдлреНрд░рдВрдЯрдПрдВрдб рдЗрдореЗрдЬ рддрдпрд╛рд░ рдХрд░рд╛ рдЖрдгрд┐ рдкреБрд╢ рдХрд░рд╛
docker build -t myregistry.azurecr.io/frontend:v1 /path/to/your/frontend/code
docker push myregistry.azurecr.io/frontend:v1

# 4. рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕ рддреБрдордЪреНрдпрд╛ рдЗрдореЗрдЬреЗрд╕рд╕рд╣ рдЕрдкрдбреЗрдЯ рдХрд░рд╛
az containerapp update \
  --name retail-router \
  --resource-group myResourceGroup \
  --image myregistry.azurecr.io/agent-router:v1

az containerapp update \
  --name retail-frontend \
  --resource-group myResourceGroup \
  --image myregistry.azurecr.io/frontend:v1

# 5. рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рд╡реНрд╣реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рд╛
az containerapp update \
  --name retail-router \
  --resource-group myResourceGroup \
  --set-env-vars \
    OPENAI_ENDPOINT=secretref:openai-endpoint \
    OPENAI_KEY=secretref:openai-key \
    SEARCH_ENDPOINT=secretref:search-endpoint \
    SEARCH_KEY=secretref:search-key
```

### рдЯрдкреНрдкрд╛ 5: рддреБрдордЪрд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдЪрд╛рдЪрдгреА рдХрд░рд╛ (2-4 рддрд╛рд╕)

```bash
# рдЖрдкрд▓рд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧ URL рдорд┐рд│рд╡рд╛
ROUTER_URL=$(az containerapp show \
  --name retail-router \
  --resource-group myResourceGroup \
  --query "properties.configuration.ingress.fqdn" -o tsv)

# рдПрдЬрдВрдЯ рдПрдВрдбрдкреЙрдЗрдВрдЯрдЪреА рдЪрд╛рдЪрдгреА рдХрд░рд╛ (рдЖрдкрд▓рд╛ рдХреЛрдб рддреИрдирд╛рдд рдЭрд╛рд▓реНрдпрд╛рдирдВрддрд░)
curl -X POST "https://${ROUTER_URL}/chat" \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Hello, I need help with my order",
    "agent": "customer"
  }'

# рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд▓реЙрдЧреНрд╕ рддрдкрд╛рд╕рд╛
az containerapp logs show \
  --name retail-router \
  --resource-group myResourceGroup \
  --follow
```

### рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА рд╕рдВрд╕рд╛рдзрдиреЗ

**рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдЖрдгрд┐ рдбрд┐рдЭрд╛рдЗрди:**
- ЁЯУЦ [рдкреВрд░реНрдг рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ](../retail-scenario.md) - рддрдкрд╢реАрд▓рд╡рд╛рд░ рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА рдирдореБрдиреЗ
- ЁЯУЦ [рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рдбрд┐рдЭрд╛рдЗрди рдирдореБрдиреЗ](https://learn.microsoft.com/azure/architecture/ai-ml/guide/multi-agent-systems)

**рдХреЛрдб рдЙрджрд╛рд╣рд░рдгреЗ:**
- ЁЯФЧ [Azure OpenAI рдЪреЕрдЯ рдирдореБрдирд╛](https://github.com/Azure-Samples/azure-search-openai-demo) - RAG рдирдореБрдирд╛
- ЁЯФЧ [Semantic Kernel](https://github.com/microsoft/semantic-kernel) - рдПрдЬрдВрдЯ рдлреНрд░реЗрдорд╡рд░реНрдХ (C#)
- ЁЯФЧ [LangChain Azure](https://github.com/langchain-ai/langchain) - рдПрдЬрдВрдЯ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди (Python)
- ЁЯФЧ [AutoGen](https://github.com/microsoft/autogen) - рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рд╕рдВрд╡рд╛рдж

**рдЕрдВрджрд╛рдЬреЗ рдПрдХреВрдг рдкреНрд░рдпрддреНрди:**
- рдкрд╛рдпрд╛рднреВрдд рд╕реБрд╡рд┐рдзрд╛ рддреИрдирд╛рдд рдХрд░рдгреЗ: 15-25 рдорд┐рдирд┐рдЯреЗ (тЬЕ рдкреВрд░реНрдг)
- рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╡рд┐рдХрд╛рд╕: 80-120 рддрд╛рд╕ (ЁЯФи рддреБрдордЪреЗ рдХрд╛рдо)
- рдЪрд╛рдЪрдгреА рдЖрдгрд┐ рдСрдкреНрдЯрд┐рдорд╛рдпрдЭреЗрд╢рди: 15-25 рддрд╛рд╕ (ЁЯФи рддреБрдордЪреЗ рдХрд╛рдо)

## ЁЯЫая╕П рд╕рдорд╕реНрдпрд╛ рд╕реЛрдбрд╡рдгреЗ

### рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛

#### 1. Azure OpenAI рдХреЛрдЯрд╛ рдУрд▓рд╛рдВрдбрд▓рд╛

```bash
# рд╡рд░реНрддрдорд╛рди рдХреЛрдЯрд╛ рд╡рд╛рдкрд░ рддрдкрд╛рд╕рд╛
az cognitiveservices usage list --location eastus2

# рдХреЛрдЯрд╛ рд╡рд╛рдвреАрдЪреА рд╡рд┐рдирдВрддреА рдХрд░рд╛
az support tickets create \
  --ticket-name "OpenAI-Quota-Increase" \
  --severity "minimal" \
  --description "Request quota increase for Azure OpenAI in region X"
```

#### 2. рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕ рддреИрдирд╛рдд рдХрд░рдгреЗ рдЕрдпрд╢рд╕реНрд╡реА

```bash
# рдХрдВрдЯреЗрдирд░ рдЕреЕрдк рд▓реЙрдЧреНрд╕ рддрдкрд╛рд╕рд╛
az containerapp logs show \
  --name retail-router \
  --resource-group myResourceGroup \
  --follow

# рдХрдВрдЯреЗрдирд░ рдЕреЕрдк рд░реАрд╕реНрдЯрд╛рд░реНрдЯ рдХрд░рд╛
az containerapp revision restart \
  --name retail-router \
  --resource-group myResourceGroup
```

#### 3. рд╢реЛрдз рд╕реЗрд╡рд╛ рдкреНрд░рд╛рд░рдВрдн

```bash
# рд╢реЛрдз рд╕реЗрд╡рд╛ рд╕реНрдерд┐рддреА рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛
az search service show \
  --name <search-service-name> \
  --resource-group myResourceGroup

# рд╢реЛрдз рд╕реЗрд╡рд╛ рдХрдиреЗрдХреНрдЯрд┐рд╡реНрд╣рд┐рдЯреАрдЪреА рдЪрд╛рдЪрдгреА рдХрд░рд╛
curl -X GET "https://<search-service-name>.search.windows.net/indexes?api-version=2023-11-01" \
  -H "api-key: <search-admin-key>"
```

### рддреИрдирд╛рддреА рдкрдбрддрд╛рд│рдгреА

```bash
# рд╕рд░реНрд╡ рд╕рдВрд╕рд╛рдзрдиреЗ рддрдпрд╛рд░ рдХреЗрд▓реА рдЖрд╣реЗрдд рдпрд╛рдЪреА рдкрдбрддрд╛рд│рдгреА рдХрд░рд╛
az resource list \
  --resource-group myResourceGroup \
  --output table

# рд╕рдВрд╕рд╛рдзрдирд╛рдВрдЪреА рд╕реНрдерд┐рддреА рддрдкрд╛рд╕рд╛
az resource list \
  --resource-group myResourceGroup \
  --query "[?provisioningState!='Succeeded'].{Name:name, Status:provisioningState, Type:type}" \
  --output table
```

## ЁЯФР рд╕реБрд░рдХреНрд╖рд╛ рд╡рд┐рдЪрд╛рд░

### рдХреА рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди
- рд╕рд░реНрд╡ рдЧреБрдкрд┐рддреЗ Azure Key Vault рдордзреНрдпреЗ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХреЗрд▓реА рдЬрд╛рддрд╛рдд (рд╕рдХреНрд╖рдо рдЕрд╕рд▓реНрдпрд╛рд╕)
- рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕ рдкреНрд░рдорд╛рдгреАрдХрд░рдгрд╛рд╕рд╛рдареА рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдУрд│рдЦ рд╡рд╛рдкрд░рддрд╛рдд
- рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддреЗ рд╕реБрд░рдХреНрд╖рд┐рдд рдбреАрдлреЙрд▓реНрдЯреНрд╕рд╕рд╣ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХреЗрд▓реЗ рдЖрд╣реЗ (рдлрдХреНрдд HTTPS, рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдмреНрд▓реЙрдм рдкреНрд░рд╡реЗрд╢ рдирд╛рд╣реА)

### рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛
- рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕ рд╢рдХреНрдп рдЕрд╕рд▓реНрдпрд╛рд╕ рдЕрдВрддрд░реНрдЧрдд рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╡рд╛рдкрд░рддрд╛рдд
- рд╢реЛрдз рд╕реЗрд╡рд╛ рдЦрд╛рдЬрдЧреА рдПрдВрдбрдкреЙрдЗрдВрдЯ рдкрд░реНрдпрд╛рдпрд╛рд╕рд╣ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХреЗрд▓реА рдЖрд╣реЗ
- Cosmos DB рдЖрд╡рд╢реНрдпрдХ рдХрд┐рдорд╛рди рдкрд░рд╡рд╛рдирдЧреНрдпрд╛рдВрд╕рд╣ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХреЗрд▓реЗ рдЖрд╣реЗ

### RBAC рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди
```bash
# рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдУрд│рдЦреАрд╕рд╛рдареА рдЖрд╡рд╢реНрдпрдХ рднреВрдорд┐рдХрд╛ рдирд┐рдпреБрдХреНрдд рдХрд░рд╛
az role assignment create \
  --assignee <container-app-managed-identity> \
  --role "Cognitive Services OpenAI User" \
  --scope <openai-resource-id>
```

## ЁЯТ░ рдЦрд░реНрдЪ рдСрдкреНрдЯрд┐рдорд╛рдпрдЭреЗрд╢рди

### рдЦрд░реНрдЪ рдЕрдВрджрд╛рдЬ (рдорд╛рд╕рд┐рдХ, USD)

| рдореЛрдб | OpenAI | рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕ | рд╢реЛрдз | рд╕реНрдЯреЛрд░реЗрдЬ | рдПрдХреВрдг рдЕрдВрджрд╛рдЬ |
|------|--------|----------------|--------|---------|------------|
| рдХрд┐рдорд╛рди | $50-200 | $20-50 | $25-100 | $5-20 | $100-370 |
| рдорд╛рдирдХ | $200-800 | $100-300 | $100-300 | $20-50 | $420-1450 |
| рдкреНрд░реАрдорд┐рдпрдо | $500-2000 | $300-800 | $300-600 | $50-100 | $1150-3500 |

### рдЦрд░реНрдЪ рдирд┐рд░реАрдХреНрд╖рдг

```bash
# рдмрдЬреЗрдЯ рдЕрд▓рд░реНрдЯ рд╕реЗрдЯ рдХрд░рд╛
az consumption budget create \
  --account-name <subscription-id> \
  --budget-name "retail-budget" \
  --amount 500 \
  --time-grain Monthly \
  --start-date 2024-01-01 \
  --end-date 2024-12-31
```

## ЁЯФД рдЕрджреНрдпрддрдиреЗ рдЖрдгрд┐ рджреЗрдЦрднрд╛рд▓

### рдЯреЗрдореНрдкрд▓реЗрдЯ рдЕрджреНрдпрддрдиреЗ
- ARM рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╛рдЗрд▓реНрд╕рдЪреЗ рдЖрд╡реГрддреНрддреА рдирд┐рдпрдВрддреНрд░рдг рдХрд░рд╛
- рдкреНрд░рдердо рд╡рд┐рдХрд╛рд╕ рд╡рд╛рддрд╛рд╡рд░рдгрд╛рдд рдмрджрд▓рд╛рдВрдЪреА рдЪрд╛рдЪрдгреА рдХрд░рд╛
- рдЕрджреНрдпрддрдирд╛рдВрд╕рд╛рдареА рдЗрдирдХреНрд░рд┐рдореЗрдВрдЯрд▓ рддреИрдирд╛рддреА рдореЛрдб рд╡рд╛рдкрд░рд╛

### рд╕рдВрд╕рд╛рдзрди рдЕрджреНрдпрддрдиреЗ
```bash
# рдирд╡реАрди рдкреЕрд░рд╛рдореАрдЯрд░реНрд╕рд╕рд╣ рдЕрджреНрдпрддрдирд┐рдд рдХрд░рд╛
az deployment group create \
  --resource-group myResourceGroup \
  --template-file azuredeploy.json \
  --parameters azuredeploy.parameters.json \
  --mode Incremental
```

### рдмреЕрдХрдЕрдк рдЖрдгрд┐ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрддреА
- Cosmos DB рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рдмреЕрдХрдЕрдк рд╕рдХреНрд╖рдо
- Key Vault рд╕реЙрдлреНрдЯ рдбрд┐рд▓реАрдЯ рд╕рдХреНрд╖рдо
- рдХрдВрдЯреЗрдирд░ рдЕтАНреЕрдкреНрд╕ рдкреБрдирд░рд╛рд╡реГрддреНрддреА рд░реЛрд▓рдмреЕрдХрд╕рд╛рдареА рд░рд╛рдЦреВрди рдареЗрд╡рд▓реЗ рдЖрд╣реЗрдд

## ЁЯУЮ рд╕рдорд░реНрдерди

- **рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕рдорд╕реНрдпрд╛:** [GitHub Issues](https://github.com/microsoft/azd-for-beginners/issues)
- **Azure рд╕рдорд░реНрдерди:** [Azure Support Portal](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade)
- **рд╕рдореБрджрд╛рдп:** [Azure AI Discord](https://discord.gg/microsoft-azure)

---

**тЪб рддреБрдордЪреЗ рдорд▓реНрдЯреА-рдПрдЬрдВрдЯ рд╕реЛрд▓реНрдпреВрд╢рди рддреИрдирд╛рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░ рдЖрд╣рд╛рдд?**

рд╕реБрд░реВ рдХрд░рд╛: `./deploy.sh -g myResourceGroup`

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рднрд╛рд╖рд╛рдВрддрд░ рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рд╡рд╛рдкрд░реВрди рднрд╛рд╖рд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рдд рдЖрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрдирд╢реАрд▓ рдЕрд╕рд▓реЛ рддрд░реА, рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдареЗрд╡рд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рднрд╛рд╖рд╛рдВрддрд░рд╛рдВрдордзреНрдпреЗ рддреНрд░реБрдЯреА рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪрд╛ рдЕрднрд╛рд╡ рдЕрд╕реВ рд╢рдХрддреЛ. рдореВрд│ рднрд╛рд╖реЗрддреАрд▓ рджрд╕реНрддрдРрд╡рдЬ рд╣рд╛ рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реА рдЬрд╛рддреЗ. рдпрд╛ рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдЙрджреНрднрд╡рд▓реЗрд▓реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬ рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрдерд╛рд╕рд╛рдареА рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рд░рд╛рд╣рдгрд╛рд░ рдирд╛рд╣реА.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->