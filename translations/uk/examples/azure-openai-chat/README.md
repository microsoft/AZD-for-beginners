# Azure OpenAI Chat Application

**–®–ª—è—Ö –Ω–∞–≤—á–∞–Ω–Ω—è:** –°–µ—Ä–µ–¥–Ω—ñ–π —Ä—ñ–≤–µ–Ω—å ‚≠ê‚≠ê | **–ß–∞—Å:** 35-45 —Ö–≤–∏–ª–∏–Ω | **–í–∞—Ä—Ç—ñ—Å—Ç—å:** $50-200/–º—ñ—Å—è—Ü—å

–ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è —á–∞—Ç—É Azure OpenAI, —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Azure Developer CLI (azd). –¶–µ–π –ø—Ä–∏–∫–ª–∞–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è GPT-4, –±–µ–∑–ø–µ—á–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ API —Ç–∞ –ø—Ä–æ—Å—Ç–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç—É.

## üéØ –ß–æ–≥–æ –≤–∏ –Ω–∞–≤—á–∏—Ç–µ—Å—è

- –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ Azure OpenAI Service –∑ –º–æ–¥–µ–ª–ª—é GPT-4
- –ó–∞—Ö–∏—Å—Ç–∏—Ç–∏ –∫–ª—é—á—ñ API OpenAI –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Key Vault
- –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ—Å—Ç–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç—É –Ω–∞ Python
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤ —ñ –≤–∏—Ç—Ä–∞—Ç–∏
- –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ —Ç–∞ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫

## üì¶ –©–æ –≤–∫–ª—é—á–µ–Ω–æ

‚úÖ **Azure OpenAI Service** - –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–æ–¥–µ–ª—ñ GPT-4  
‚úÖ **Python Chat App** - –ü—Ä–æ—Å—Ç–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç—É –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–º—É —Ä—è–¥–∫—É  
‚úÖ **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Key Vault** - –ë–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫–ª—é—á—ñ–≤ API  
‚úÖ **ARM Templates** - –ü–æ–≤–Ω–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —è–∫ –∫–æ–¥  
‚úÖ **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤–∏—Ç—Ä–∞—Ç** - –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤  
‚úÖ **–û–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ** - –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—é –∫–≤–æ—Ç–∏  

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Python Chat Application (Local/Cloud)    ‚îÇ
‚îÇ   - Command-line interface                 ‚îÇ
‚îÇ   - Conversation history                   ‚îÇ
‚îÇ   - Token usage tracking                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ HTTPS (API Key)
                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Azure OpenAI Service                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   ‚îÇ   GPT-4 Model                         ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   - 20K tokens/min capacity           ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   - Multi-region failover (optional)  ‚îÇ ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ   Managed Identity ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Azure Key Vault                           ‚îÇ
‚îÇ   - OpenAI API Key (secret)                 ‚îÇ
‚îÇ   - Endpoint URL (secret)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–∏–º–æ–≥–∏

### –ù–µ–æ–±—Ö—ñ–¥–Ω–æ

- **Azure Developer CLI (azd)** - [–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd)
- **–ü—ñ–¥–ø–∏—Å–∫–∞ Azure** –∑ –¥–æ—Å—Ç—É–ø–æ–º –¥–æ OpenAI - [–ó–∞–ø–∏—Ç –¥–æ—Å—Ç—É–ø—É](https://aka.ms/oai/access)
- **Python 3.9+** - [–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ Python](https://www.python.org/downloads/)

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –≤–∏–º–æ–≥

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–µ—Ä—Å—ñ—é azd (–ø–æ—Ç—Ä—ñ–±–Ω–æ 1.5.0 –∞–±–æ –≤–∏—â–µ)
azd version

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤—Ö—ñ–¥ –¥–æ Azure
azd auth login

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–µ—Ä—Å—ñ—é Python
python --version  # –∞–±–æ python3 --version

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ OpenAI (–ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤ Azure Portal)
az cognitiveservices account list-skus \
  --kind OpenAI \
  --location eastus
```

> **‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:** Azure OpenAI –ø–æ—Ç—Ä–µ–±—É—î —Å—Ö–≤–∞–ª–µ–Ω–Ω—è –∑–∞—è–≤–∫–∏. –Ø–∫—â–æ –≤–∏ —â–µ –Ω–µ –ø–æ–¥–∞–ª–∏ –∑–∞—è–≤–∫—É, –≤—ñ–¥–≤—ñ–¥–∞–π—Ç–µ [aka.ms/oai/access](https://aka.ms/oai/access). –°—Ö–≤–∞–ª–µ–Ω–Ω—è –∑–∞–∑–≤–∏—á–∞–π –∑–∞–π–º–∞—î 1-2 —Ä–æ–±–æ—á—ñ –¥–Ω—ñ.

## ‚è±Ô∏è –ß–∞—Å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

| –ï—Ç–∞–ø | –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å | –©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è |
|------|-----------|-----------------|
| –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –≤–∏–º–æ–≥ | 2-3 —Ö–≤–∏–ª–∏–Ω–∏ | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ –∫–≤–æ—Ç–∏ OpenAI |
| –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ | 8-12 —Ö–≤–∏–ª–∏–Ω | –°—Ç–≤–æ—Ä–µ–Ω–Ω—è OpenAI, Key Vault, —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–æ–¥–µ–ª—ñ |
| –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–∞ | 2-3 —Ö–≤–∏–ª–∏–Ω–∏ | –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —Ç–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π |
| **–ó–∞–≥–∞–ª–æ–º** | **12-18 —Ö–≤–∏–ª–∏–Ω** | –ì–æ—Ç–æ–≤–æ –¥–æ —á–∞—Ç—É –∑ GPT-4 |

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ü–µ—Ä—à–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è OpenAI –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ –±—ñ–ª—å—à–µ —á–∞—Å—É —á–µ—Ä–µ–∑ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫—É –º–æ–¥–µ–ª—ñ.

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

```bash
# –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –ø—Ä–∏–∫–ª–∞–¥—É
cd examples/azure-openai-chat

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–π—Ç–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
azd env new myopenai

# –†–æ–∑–≥–æ—Ä–Ω—ñ—Ç—å –≤—Å–µ (—ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
azd up
# –í–∞–º –±—É–¥–µ –∑–∞–ø—Ä–æ–ø–æ–Ω–æ–≤–∞–Ω–æ:
# 1. –í–∏–±—Ä–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É Azure
# 2. –í–∏–±—Ä–∞—Ç–∏ –º—ñ—Å—Ü–µ –∑ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—é OpenAI (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, eastus, eastus2, westus)
# 3. –ó–∞—á–µ–∫–∞–π—Ç–µ 12-18 —Ö–≤–∏–ª–∏–Ω –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Python
pip install -r requirements.txt

# –ü–æ—á–∏–Ω–∞–π—Ç–µ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è!
python chat.py
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
ü§ñ Azure OpenAI Chat Application
Connected to: GPT-4 (eastus)
Type your message (or 'quit' to exit)

You: Hello! Tell me about Azure OpenAI.
Assistant: Azure OpenAI Service provides REST API access to OpenAI's powerful language models including GPT-4, GPT-3.5-Turbo, and Embeddings...

[Tokens used: 145 | Estimated cost: $0.0044]
```

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ Azure

```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç—ñ —Ä–µ—Å—É—Ä—Å–∏
azd show

# –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∑—É—î:
# - –°–µ—Ä–≤—ñ—Å OpenAI: (–Ω–∞–∑–≤–∞ —Ä–µ—Å—É—Ä—Å—É)
# - Key Vault: (–Ω–∞–∑–≤–∞ —Ä–µ—Å—É—Ä—Å—É)
# - –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è: gpt-4
# - –†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è: eastus (–∞–±–æ –≤–∞—à –æ–±—Ä–∞–Ω–∏–π —Ä–µ–≥—ñ–æ–Ω)
```

### –ö—Ä–æ–∫ 2: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API OpenAI

```bash
# –û—Ç—Ä–∏–º–∞—Ç–∏ –∫—ñ–Ω—Ü–µ–≤—É —Ç–æ—á–∫—É OpenAI —Ç–∞ –∫–ª—é—á
OPENAI_ENDPOINT=$(azd env get-value AZURE_OPENAI_ENDPOINT)
OPENAI_KEY=$(azd env get-value AZURE_OPENAI_API_KEY)

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∏–∫–ª–∏–∫ API
curl "$OPENAI_ENDPOINT/openai/deployments/gpt-4/chat/completions?api-version=2024-08-01-preview" \
  -H "Content-Type: application/json" \
  -H "api-key: $OPENAI_KEY" \
  -d '{
    "messages": [{"role": "user", "content": "Say hello!"}],
    "max_tokens": 50
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "choices": [
    {
      "message": {
        "role": "assistant",
        "content": "Hello! How can I assist you today?"
      }
    }
  ],
  "usage": {
    "prompt_tokens": 8,
    "completion_tokens": 9,
    "total_tokens": 17
  }
}
```

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ Key Vault

```bash
# –ü–µ—Ä–µ–ª—ñ—á–∏—Ç–∏ —Å–µ–∫—Ä–µ—Ç–∏ –≤ Key Vault
KV_NAME=$(azd env get-value AZURE_KEY_VAULT_NAME)

az keyvault secret list \
  --vault-name $KV_NAME \
  --query "[].name" \
  --output table
```

**–û—á—ñ–∫—É–≤–∞–Ω—ñ —Å–µ–∫—Ä–µ—Ç–∏:**
- `openai-api-key`
- `openai-endpoint`

**–ö—Ä–∏—Ç–µ—Ä—ñ—ó —É—Å–ø—ñ—Ö—É:**
- ‚úÖ –°–µ—Ä–≤—ñ—Å OpenAI —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ –∑ GPT-4
- ‚úÖ –í–∏–∫–ª–∏–∫ API –ø–æ–≤–µ—Ä—Ç–∞—î –≤–∞–ª—ñ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –°–µ–∫—Ä–µ—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –≤ Key Vault
- ‚úÖ –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤ –ø—Ä–∞—Ü—é—î

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
azure-openai-chat/
‚îú‚îÄ‚îÄ README.md                   ‚úÖ This guide
‚îú‚îÄ‚îÄ azure.yaml                  ‚úÖ AZD configuration
‚îú‚îÄ‚îÄ infra/                      ‚úÖ Infrastructure as Code
‚îÇ   ‚îú‚îÄ‚îÄ main.bicep             ‚úÖ Main Bicep template
‚îÇ   ‚îú‚îÄ‚îÄ main.parameters.json   ‚úÖ Parameters
‚îÇ   ‚îî‚îÄ‚îÄ openai.bicep           ‚úÖ OpenAI resource definition
‚îú‚îÄ‚îÄ src/                        ‚úÖ Application code
‚îÇ   ‚îú‚îÄ‚îÄ chat.py                ‚úÖ Chat interface
‚îÇ   ‚îú‚îÄ‚îÄ config.py              ‚úÖ Configuration loader
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt       ‚úÖ Python dependencies
‚îî‚îÄ‚îÄ .gitignore                  ‚úÖ Git ignore rules
```

## –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –¥–æ–¥–∞—Ç–∫–∞

### –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç—É (`chat.py`)

–î–æ–¥–∞—Ç–æ–∫ —á–∞—Ç—É –≤–∫–ª—é—á–∞—î:

- **–Ü—Å—Ç–æ—Ä—ñ—è —Ä–æ–∑–º–æ–≤** - –ó–±–µ—Ä—ñ–≥–∞—î –∫–æ–Ω—Ç–µ–∫—Å—Ç –º—ñ–∂ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏
- **–ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —Ç–æ–∫–µ–Ω—ñ–≤** - –í—ñ–¥—Å—Ç–µ–∂—É—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∞ –æ—Ü—ñ–Ω—é—î –≤–∏—Ç—Ä–∞—Ç–∏
- **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** - –ì—Ä–∞–º–æ—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –æ–±–º–µ–∂–µ–Ω—å —à–≤–∏–¥–∫–æ—Å—Ç—ñ —Ç–∞ –ø–æ–º–∏–ª–æ–∫ API
- **–û—Ü—ñ–Ω–∫–∞ –≤–∏—Ç—Ä–∞—Ç** - –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–∏—Ç—Ä–∞—Ç —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ –∑–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–æ—Ç–æ–∫–æ–≤–æ—ó –ø–µ—Ä–µ–¥–∞—á—ñ** - –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –ø–æ—Ç–æ–∫–æ–≤—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

### –ö–æ–º–∞–Ω–¥–∏

–ü—ñ–¥ —á–∞—Å —á–∞—Ç—É –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:
- `quit` –∞–±–æ `exit` - –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Å–µ–∞–Ω—Å
- `clear` - –û—á–∏—Å—Ç–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é —Ä–æ–∑–º–æ–≤
- `tokens` - –ü–æ–∫–∞–∑–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
- `cost` - –ü–æ–∫–∞–∑–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É –æ—Ü—ñ–Ω–µ–Ω—É –≤–∞—Ä—Ç—ñ—Å—Ç—å

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (`config.py`)

–ó–∞–≤–∞–Ω—Ç–∞–∂—É—î –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∑ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:
```python
AZURE_OPENAI_ENDPOINT  # –ó Key Vault
AZURE_OPENAI_API_KEY   # –ó Key Vault
AZURE_OPENAI_MODEL     # –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: gpt-4
AZURE_OPENAI_MAX_TOKENS # –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 800
```

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ë–∞–∑–æ–≤–∏–π —á–∞—Ç

```bash
python chat.py
```

### –ß–∞—Ç –∑ –∫–∞—Å—Ç–æ–º–Ω–æ—é –º–æ–¥–µ–ª–ª—é

```bash
export AZURE_OPENAI_MODEL=gpt-35-turbo
python chat.py
```

### –ß–∞—Ç –∑ –ø–æ—Ç–æ–∫–æ–≤–æ—é –ø–µ—Ä–µ–¥–∞—á–µ—é

```bash
python chat.py --stream
```

### –ü—Ä–∏–∫–ª–∞–¥ —Ä–æ–∑–º–æ–≤–∏

```
You: Explain Azure OpenAI Service in 3 sentences.
Assistant: Azure OpenAI Service is Microsoft Azure's cloud platform offering 
that provides access to OpenAI's powerful language models. It enables developers 
to integrate capabilities like GPT-4 into their applications with enterprise-grade 
security and compliance. The service includes features for content filtering, 
abuse monitoring, and responsible AI practices.

[Tokens used: 89 | Estimated cost: $0.0027]

You: What models are available?
Assistant: Azure OpenAI Service offers several model families including GPT-4 
(most capable), GPT-3.5-Turbo (faster and cost-effective), and Embeddings models 
for vector search. Each model has different capabilities, pricing, and token limits.

[Tokens used: 67 | Estimated cost: $0.0020]

Total session: 156 tokens | $0.0047
```

## –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤–∏—Ç—Ä–∞—Ç–∞–º–∏

### –¶—ñ–Ω–∏ –Ω–∞ —Ç–æ–∫–µ–Ω–∏ (GPT-4)

| –ú–æ–¥–µ–ª—å | –í—Ö—ñ–¥ (–∑–∞ 1K —Ç–æ–∫–µ–Ω—ñ–≤) | –í–∏—Ö—ñ–¥ (–∑–∞ 1K —Ç–æ–∫–µ–Ω—ñ–≤) |
|--------|----------------------|-----------------------|
| GPT-4 | $0.03 | $0.06 |
| GPT-3.5-Turbo | $0.0015 | $0.002 |

### –û—Ü—ñ–Ω–∫–∞ –º—ñ—Å—è—á–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç

–ù–∞ –æ—Å–Ω–æ–≤—ñ —à–∞–±–ª–æ–Ω—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

| –†—ñ–≤–µ–Ω—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è | –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å/–¥–µ–Ω—å | –¢–æ–∫–µ–Ω—ñ–≤/–¥–µ–Ω—å | –ú—ñ—Å—è—á–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å |
|---------------------|-----------------|--------------|-----------------|
| **–õ–µ–≥–∫–∏–π** | 20 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å | 3,000 —Ç–æ–∫–µ–Ω—ñ–≤ | $3-5 |
| **–ü–æ–º—ñ—Ä–Ω–∏–π** | 100 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å | 15,000 —Ç–æ–∫–µ–Ω—ñ–≤ | $15-25 |
| **–Ü–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∏–π** | 500 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å | 75,000 —Ç–æ–∫–µ–Ω—ñ–≤ | $75-125 |

**–ë–∞–∑–æ–≤–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏:** $1-2/–º—ñ—Å—è—Ü—å (Key Vault + –º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è)

### –ü–æ—Ä–∞–¥–∏ –∑ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –≤–∏—Ç—Ä–∞—Ç

```bash
# 1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ GPT-3.5-Turbo –¥–ª—è –ø—Ä–æ—Å—Ç—ñ—à–∏—Ö –∑–∞–≤–¥–∞–Ω—å (–≤ 20 —Ä–∞–∑—ñ–≤ –¥–µ—à–µ–≤—à–µ)
export AZURE_OPENAI_MODEL=gpt-35-turbo

# 2. –ó–º–µ–Ω—à—É–π—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–∫–µ–Ω—ñ–≤ –¥–ª—è –∫–æ—Ä–æ—Ç—à–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
export AZURE_OPENAI_MAX_TOKENS=400

# 3. –ö–æ–Ω—Ç—Ä–æ–ª—é–π—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
python chat.py --show-tokens

# 4. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –±—é–¥–∂–µ—Ç
az consumption budget create \
  --budget-name "openai-budget" \
  --amount 50 \
  --time-grain Monthly
```

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –ü–µ—Ä–µ–≥–ª—è–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤

```bash
# –£ –ø–æ—Ä—Ç–∞–ª—ñ Azure:
# –†–µ—Å—É—Ä—Å OpenAI ‚Üí –ú–µ—Ç—Ä–∏–∫–∏ ‚Üí –í–∏–±–µ—Ä—ñ—Ç—å "–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è —Ç–æ–∫–µ–Ω—ñ–≤"

# –ê–±–æ —á–µ—Ä–µ–∑ Azure CLI:
az monitor metrics list \
  --resource $(azd env get-value AZURE_OPENAI_RESOURCE_ID) \
  --metric "TokenTransaction" \
  --start-time $(date -u -d '1 hour ago' '+%Y-%m-%dT%H:%M:%S') \
  --interval PT1M
```

### –ü–µ—Ä–µ–≥–ª—è–¥ –∂—É—Ä–Ω–∞–ª—ñ–≤ API

```bash
# –ü–æ—Ç—ñ–∫ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–∏—Ö –∂—É—Ä–Ω–∞–ª—ñ–≤
az monitor diagnostic-settings create \
  --resource $(azd env get-value AZURE_OPENAI_RESOURCE_ID) \
  --name openai-logs \
  --logs '[{"category": "Audit", "enabled": true}]' \
  --workspace $(azd env get-value LOG_ANALYTICS_WORKSPACE_ID)

# –ñ—É—Ä–Ω–∞–ª–∏ –∑–∞–ø–∏—Ç—ñ–≤
az monitor log-analytics query \
  --workspace $(azd env get-value LOG_ANALYTICS_WORKSPACE_ID) \
  --analytics-query "AzureDiagnostics | where Category == 'Audit' | top 10 by TimeGenerated"
```

## –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–º–∏–ª–∫–∞ "–î–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ"

**–°–∏–º–ø—Ç–æ–º–∏:** 403 Forbidden –ø—Ä–∏ –≤–∏–∫–ª–∏–∫—É API

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –¥–æ—Å—Ç—É–ø –¥–æ OpenAI —Å—Ö–≤–∞–ª–µ–Ω–∏–π
az cognitiveservices account show \
  --name $(azd env get-value AZURE_OPENAI_NAME) \
  --resource-group $(azd env get-value AZURE_RESOURCE_GROUP)

# 2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π API –∫–ª—é—á
azd env get-value AZURE_OPENAI_API_KEY

# 3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç URL –∫—ñ–Ω—Ü–µ–≤–æ—ó —Ç–æ—á–∫–∏
azd env get-value AZURE_OPENAI_ENDPOINT
# –ü–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏: https://[name].openai.azure.com/
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ –ª—ñ–º—ñ—Ç —à–≤–∏–¥–∫–æ—Å—Ç—ñ

**–°–∏–º–ø—Ç–æ–º–∏:** 429 Too Many Requests

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—Ç–æ—á–Ω—É –∫–≤–æ—Ç—É
az cognitiveservices account deployment show \
  --name $(azd env get-value AZURE_OPENAI_NAME) \
  --resource-group $(azd env get-value AZURE_RESOURCE_GROUP) \
  --deployment-name gpt-4

# 2. –ó–∞–ø–∏—Ç–∞–π—Ç–µ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –∫–≤–æ—Ç–∏ (–∑–∞ –ø–æ—Ç—Ä–µ–±–∏)
# –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ Azure Portal ‚Üí OpenAI Resource ‚Üí Quotas ‚Üí Request Increase

# 3. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ –ª–æ–≥—ñ–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Å–ø—Ä–æ–± (–≤–∂–µ —É chat.py)
# –î–æ–¥–∞—Ç–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–≤—Ç–æ—Ä—é—î —Å–ø—Ä–æ–±–∏ –∑ –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–∞–ª—å–Ω–∏–º –∑–º–µ–Ω—à–µ–Ω–Ω—è–º —á–∞—Å—É –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª—å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞

**–°–∏–º–ø—Ç–æ–º–∏:** –ü–æ–º–∏–ª–∫–∞ 404 –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# 1. –ü–µ—Ä–µ–ª—ñ—á–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
az cognitiveservices account deployment list \
  --name $(azd env get-value AZURE_OPENAI_NAME) \
  --resource-group $(azd env get-value AZURE_RESOURCE_GROUP)

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–∑–≤—É –º–æ–¥–µ–ª—ñ –≤ —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ
echo $AZURE_OPENAI_MODEL

# 3. –û–Ω–æ–≤–∏—Ç–∏ –¥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —ñ–º–µ–Ω—ñ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
export AZURE_OPENAI_MODEL=gpt-4  # –∞–±–æ gpt-35-turbo
```

### –ü—Ä–æ–±–ª–µ–º–∞: –í–∏—Å–æ–∫–∞ –∑–∞—Ç—Ä–∏–º–∫–∞

**–°–∏–º–ø—Ç–æ–º–∏:** –ü–æ–≤—ñ–ª—å–Ω–∏–π —á–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (>5 —Å–µ–∫—É–Ω–¥)

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–µ–≥—ñ–æ–Ω–∞–ª—å–Ω—É –∑–∞—Ç—Ä–∏–º–∫—É
# –†–æ–∑–≥–æ—Ä–Ω—ñ—Ç—å —É —Ä–µ–≥—ñ–æ–Ω—ñ, –Ω–∞–π–±–ª–∏–∂—á–æ–º—É –¥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

# 2. –ó–º–µ–Ω—à—Ç–µ max_tokens –¥–ª—è —à–≤–∏–¥—à–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
export AZURE_OPENAI_MAX_TOKENS=400

# 3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—Ç–æ–∫–æ–≤—É –ø–µ—Ä–µ–¥–∞—á—É –¥–ª—è –∫—Ä–∞—â–æ–≥–æ UX
python chat.py --stream
```

## –ù–∞–π–∫—Ä–∞—â—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏ –±–µ–∑–ø–µ–∫–∏

### 1. –ó–∞—Ö–∏—Å—Ç –∫–ª—é—á—ñ–≤ API

```bash
# –ù—ñ–∫–æ–ª–∏ –Ω–µ –¥–æ–¥–∞–≤–∞–π—Ç–µ –∫–ª—é—á—ñ –¥–æ —Å–∏—Å—Ç–µ–º–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é –≤–µ—Ä—Å—ñ–π
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Key Vault (–≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ)

# –†–µ–≥—É–ª—è—Ä–Ω–æ –∑–º—ñ–Ω—é–π—Ç–µ –∫–ª—é—á—ñ
az cognitiveservices account keys regenerate \
  --name $(azd env get-value AZURE_OPENAI_NAME) \
  --resource-group $(azd env get-value AZURE_RESOURCE_GROUP) \
  --key-name key1
```

### 2. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –∫–æ–Ω—Ç–µ–Ω—Ç—É

```python
# Azure OpenAI –≤–∫–ª—é—á–∞—î –≤–±—É–¥–æ–≤–∞–Ω—É —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –∫–æ–Ω—Ç–µ–Ω—Ç—É
# –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –≤ Azure Portal:
# –†–µ—Å—É—Ä—Å OpenAI ‚Üí –§—ñ–ª—å—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É ‚Üí –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä

# –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó: –ù–µ–Ω–∞–≤–∏—Å—Ç—å, –°–µ–∫—Å—É–∞–ª—å–Ω–∏–π, –ù–∞—Å–∏–ª—å—Å—Ç–≤–æ, –°–∞–º–æ–ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è
# –†—ñ–≤–Ω—ñ: –ù–∏–∑—å–∫–∏–π, –°–µ—Ä–µ–¥–Ω—ñ–π, –í–∏—Å–æ–∫–∏–π —Ä—ñ–≤–µ–Ω—å —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
```

### 3. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–µ—Ä–æ–≤–∞–Ω–æ—ó —ñ–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—ñ (Production)

```bash
# –î–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–µ—Ä–æ–≤–∞–Ω—É —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—å
# –∑–∞–º—ñ—Å—Ç—å API –∫–ª—é—á—ñ–≤ (–≤–∏–º–∞–≥–∞—î —Ö–æ—Å—Ç–∏–Ω–≥ –¥–æ–¥–∞—Ç–∫–∞ –Ω–∞ Azure)

# –û–Ω–æ–≤—ñ—Ç—å infra/openai.bicep, —â–æ–± –≤–∫–ª—é—á–∏—Ç–∏:
# identity: { type: 'SystemAssigned' }
```

## –†–æ–∑—Ä–æ–±–∫–∞

### –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r src/requirements.txt

# –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
export AZURE_OPENAI_ENDPOINT="https://[name].openai.azure.com/"
export AZURE_OPENAI_API_KEY="your-api-key"
export AZURE_OPENAI_MODEL="gpt-4"

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫
python src/chat.py
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
pip install pytest pytest-cov

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–∏
pytest tests/ -v

# –ó –ø–æ–∫—Ä–∏—Ç—Ç—è–º
pytest tests/ --cov=src --cov-report=html
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–æ–¥–µ–ª—ñ

```bash
# –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ —Ä—ñ–∑–Ω—ñ –≤–µ—Ä—Å—ñ—ó –º–æ–¥–µ–ª—ñ
az cognitiveservices account deployment create \
  --name $(azd env get-value AZURE_OPENAI_NAME) \
  --resource-group $(azd env get-value AZURE_RESOURCE_GROUP) \
  --deployment-name gpt-35-turbo \
  --model-name gpt-35-turbo \
  --model-version "0613" \
  --model-format OpenAI \
  --sku-capacity 20 \
  --sku-name "Standard"
```

## –û—á–∏—Å—Ç–∫–∞

```bash
# –í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ —Ä–µ—Å—É—Ä—Å–∏ Azure
azd down --force --purge

# –¶–µ –≤–∏–¥–∞–ª—è—î:
# - –°–µ—Ä–≤—ñ—Å OpenAI
# - Key Vault (–∑ 90-–¥–µ–Ω–Ω–æ—é –º'—è–∫–æ—é –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º)
# - –ì—Ä—É–ø—É —Ä–µ—Å—É—Ä—Å—ñ–≤
# - –£—Å—ñ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
```

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

### –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ü—å–æ–≥–æ –ø—Ä–∏–∫–ª–∞–¥—É

1. **–î–æ–¥–∞—Ç–∏ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ React/Vue
   ```bash
   # –î–æ–¥–∞—Ç–∏ —Å–µ—Ä–≤—ñ—Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –¥–æ azure.yaml
   # –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –≤ Azure Static Web Apps
   ```

2. **–†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ RAG** - –î–æ–¥–∞—Ç–∏ –ø–æ—à—É–∫ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –∑ Azure AI Search
   ```python
   # –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ Azure Cognitive Search
   # –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏ —Ç–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–µ–∫—Ç–æ—Ä–Ω–∏–π —ñ–Ω–¥–µ–∫—Å
   ```

3. **–î–æ–¥–∞—Ç–∏ –≤–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ–π** - –£–≤—ñ–º–∫–Ω—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤
   ```python
   # –í–∏–∑–Ω–∞—á–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—ó –≤ chat.py
   # –î–æ–∑–≤–æ–ª–∏—Ç–∏ GPT-4 –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—ñ API
   ```

4. **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫—ñ–ª—å–∫–æ—Ö –º–æ–¥–µ–ª–µ–π** - –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –∫—ñ–ª—å–∫–∞ –º–æ–¥–µ–ª–µ–π
   ```bash
   # –î–æ–¥–∞—Ç–∏ gpt-35-turbo, –º–æ–¥–µ–ª—ñ embeddings
   # –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó –º–æ–¥–µ–ª—ñ
   ```

### –°—Ö–æ–∂—ñ –ø—Ä–∏–∫–ª–∞–¥–∏

- **[–†–æ–∑–¥—Ä—ñ–±–Ω–∏–π –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç](../retail-scenario.md)** - –†–æ–∑—à–∏—Ä–µ–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç—ñ–≤
- **[–î–æ–¥–∞—Ç–æ–∫ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö](../../../../examples/database-app)** - –î–æ–¥–∞—Ç–∏ –ø–æ—Å—Ç—ñ–π–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è
- **[–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ñ –¥–æ–¥–∞—Ç–∫–∏](../../../../examples/container-app)** - –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —è–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É

### –†–µ—Å—É—Ä—Å–∏ –¥–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è

- üìö [–ö—É—Ä—Å –¥–ª—è –ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ–≤ AZD](../../README.md) - –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∫—É—Ä—Å—É
- üìö [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Azure OpenAI](https://learn.microsoft.com/azure/ai-services/openai/) - –û—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- üìö [–î–æ–≤—ñ–¥–Ω–∏–∫ API OpenAI](https://platform.openai.com/docs/api-reference) - –î–µ—Ç–∞–ª—ñ API
- üìö [–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π AI](https://www.microsoft.com/ai/responsible-ai) - –ù–∞–π–∫—Ä–∞—â—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏

## –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- **[Azure OpenAI Service](https://learn.microsoft.com/azure/ai-services/openai/)** - –ü–æ–≤–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫
- **[–ú–æ–¥–µ–ª—ñ GPT-4](https://learn.microsoft.com/azure/ai-services/openai/concepts/models)** - –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –º–æ–¥–µ–ª–µ–π
- **[–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–Ω—Ç—É](https://learn.microsoft.com/azure/ai-services/openai/concepts/content-filter)** - –§—É–Ω–∫—Ü—ñ—ó –±–µ–∑–ø–µ–∫–∏
- **[Azure Developer CLI](https://learn.microsoft.com/azure/developer/azure-developer-cli/)** - –î–æ–≤—ñ–¥–Ω–∏–∫ azd

### –ü—ñ–¥—Ä—É—á–Ω–∏–∫–∏
- **[–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç OpenAI](https://learn.microsoft.com/azure/ai-services/openai/quickstart)** - –ü–µ—Ä—à–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
- **[–ß–∞—Ç-–∫–æ–º–ø–ª–µ—Ç—ñ–æ–Ω–∏](https://learn.microsoft.com/azure/ai-services/openai/how-to/chatgpt)** - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —á–∞—Ç-–¥–æ–¥–∞—Ç–∫—ñ–≤
- **[–í–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ–π](https://learn.microsoft.com/azure/ai-services/openai/how-to/function-calling)** - –†–æ–∑—à–∏—Ä–µ–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- **[Azure OpenAI Studio](https://oai.azure.com/)** - –í–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- **[–î–æ–≤—ñ–¥–Ω–∏–∫ –∑ —ñ–Ω–∂–µ–Ω–µ—Ä—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤](https://platform.openai.com/docs/guides/prompt-engineering)** - –Ø–∫ –ø–∏—Å–∞—Ç–∏ –∫—Ä–∞—â—ñ –∑–∞–ø–∏—Ç–∏
- **[–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ç–æ–∫–µ–Ω—ñ–≤](https://platform.openai.com/tokenizer)** - –û—Ü—ñ–Ω–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤

### –°–ø—ñ–ª—å–Ω–æ—Ç–∞
- **[Azure AI Discord](https://discord.gg/azure)** - –û—Ç—Ä–∏–º–∞–π—Ç–µ –¥–æ–ø–æ–º–æ–≥—É –≤—ñ–¥ —Å–ø—ñ–ª—å–Ω–æ—Ç–∏
- **[–û–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è –Ω–∞ GitHub](https://github.com/Azure-Samples/openai/discussions)** - –§–æ—Ä—É–º –∑–∞–ø–∏—Ç–∞–Ω—å —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- **[–ë–ª–æ–≥ Azure](https://azure.microsoft.com/blog/tag/azure-openai-service/)** - –û—Å—Ç–∞–Ω–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

---

**üéâ –£—Å–ø—ñ—Ö!** –í–∏ —Ä–æ–∑–≥–æ—Ä–Ω—É–ª–∏ Azure OpenAI —ñ —Å—Ç–≤–æ—Ä–∏–ª–∏ —Ä–æ–±–æ—á–∏–π –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è —á–∞—Ç—É. –ü–æ—á–Ω—ñ—Ç—å –¥–æ—Å–ª—ñ–¥–∂—É–≤–∞—Ç–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ GPT-4 —ñ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É–π—Ç–µ –∑ —Ä—ñ–∑–Ω–∏–º–∏ –∑–∞–ø–∏—Ç–∞–º–∏ —Ç–∞ —Å—Ü–µ–Ω–∞—Ä—ñ—è–º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

**–ó–∞–ø–∏—Ç–∞–Ω–Ω—è?** [–í—ñ–¥–∫—Ä–∏–π—Ç–µ –ø—Ä–æ–±–ª–µ–º—É](https://github.com/microsoft/AZD-for-beginners/issues) –∞–±–æ –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ [FAQ](../../resources/faq.md)

**–ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –≤–∏—Ç—Ä–∞—Ç–∏:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ `azd down` –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –ø–æ—Å—Ç—ñ–π–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç (~$50-100/–º—ñ—Å—è—Ü—å –∑–∞ –∞–∫—Ç–∏–≤–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è).

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**–í—ñ–¥–º–æ–≤–∞ –≤—ñ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ**:  
–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –±—É–≤ –ø–µ—Ä–µ–∫–ª–∞–¥–µ–Ω–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–µ—Ä–≤—ñ—Å—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É [Co-op Translator](https://github.com/Azure/co-op-translator). –•–æ—á–∞ –º–∏ –ø—Ä–∞–≥–Ω–µ–º–æ –¥–æ —Ç–æ—á–Ω–æ—Å—Ç—ñ, –±—É–¥—å –ª–∞—Å–∫–∞, –º–∞–π—Ç–µ –Ω–∞ —É–≤–∞–∑—ñ, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–µ—Ä–µ–∫–ª–∞–¥–∏ –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –∞–±–æ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—ñ. –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –π–æ–≥–æ —Ä—ñ–¥–Ω—ñ–π –º–æ–≤—ñ —Å–ª—ñ–¥ –≤–≤–∞–∂–∞—Ç–∏ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–∏–º –¥–∂–µ—Ä–µ–ª–æ–º. –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π –ª—é–¥—Å—å–∫–∏–π –ø–µ—Ä–µ–∫–ª–∞–¥. –ú–∏ –Ω–µ –Ω–µ—Å–µ–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –∑–∞ –±—É–¥—å-—è–∫—ñ –Ω–µ–ø–æ—Ä–æ–∑—É–º—ñ–Ω–Ω—è –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ç–ª—É–º–∞—á–µ–Ω–Ω—è, —â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –≤–Ω–∞—Å–ª—ñ–¥–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ü—å–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->