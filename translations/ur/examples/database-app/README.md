# AZD ฺฉ ุณุงุชฺพ Microsoft SQL ฺูนุง ุจุณ ุงูุฑ ูุจ ุงูพ ฺฉ ุชุนูุงุช

โฑ๏ธ **ูุชููุน ููุช**: 20-30 ูููน | ๐ฐ **ูุชููุน ูุงฺฏุช**: ุชูุฑุจุงู $15-25/ูุง | โญ **ูพฺุฏฺฏ**: ุฏุฑูุงู ุณุทุญ

 **ูฺฉููุ ฺฉุงู ฺฉุฑู ูุงู ูุซุงู** ุฏฺฉฺพุงุช  ฺฉ [Azure Developer CLI (azd)](https://learn.microsoft.com/azure/developer/azure-developer-cli/) ฺฉู ุงุณุชุนูุงู ฺฉุฑุช ูุฆ Microsoft SQL ฺูนุง ุจุณ ฺฉ ุณุงุชฺพ Python Flask ูุจ ุงูพูฺฉุดู ฺฉู Azure ูพุฑ ฺฉุณ ุชุนูุงุช ฺฉุง ุฌุงุชุง  ุชูุงู ฺฉูฺ ุดุงูู ุงูุฑ ูนุณูน ุดุฏ  โ ฺฉุณ ุฎุงุฑุฌ ุงูุญุตุงุฑ ฺฉ ุถุฑูุฑุช ูฺบ

## ุขูพ ฺฉุง ุณฺฉฺพฺบ ฺฏ

ุงุณ ูุซุงู ฺฉู ูฺฉูู ฺฉุฑู ฺฉ ุจุนุฏุ ุขูพ:  
- ุจูุงุฏ ฺฺพุงูฺ ฺฉูฺ ฺฉ ุทูุฑ ูพุฑ ุงุณุชุนูุงู ฺฉุฑุช ูุฆ ฺฉุซุฑ ุณุทุญ ุงูพูฺฉุดู (ูุจ ุงูพ + ฺูนุง ุจุณ) ฺฉู ุชุนูุงุช ฺฉุฑฺบ ฺฏ  
- ุฑุงุฒูฺบ ฺฉู ุงุฑฺ ฺฉูฺ ฺฉ ุจุบุฑ ูุญููุธ ฺูนุง ุจุณ ฺฉูฺฉุดู ุชุฑุชุจ ุฏฺบ ฺฏ  
- Application Insights ฺฉ ุฐุฑุน ุงูพูฺฉุดู ฺฉ ุตุญุช ฺฉ ูฺฏุฑุงู ฺฉุฑฺบ ฺฏ  
- AZD CLI ฺฉ ุณุงุชฺพ Azure ูุณุงุฆู ฺฉู ูุคุซุฑ ุทุฑู ุณ ููุธู ฺฉุฑฺบ ฺฏ  
- ุณฺฉูุฑูนุ ูุงฺฏุช ฺฉ ุจฺุชุ ุงูุฑ ูุดุงุฏ ฺฉ ู Azure ฺฉ ุจุชุฑู ุทุฑููฺบ ฺฉ ูพุฑู ฺฉุฑฺบ ฺฏ  

## ููุธุฑ ูุงู ฺฉุง ุฌุงุฆุฒ  
- **ูุจ ุงูพ**: Python Flask REST API ุฌุณ ูฺบ ฺูนุง ุจุณ ฺฉูฺฉูนููน   
- **ฺูนุง ุจุณ**: Azure SQL ฺูนุง ุจุณ ูููู ฺูนุง ฺฉ ุณุงุชฺพ  
- **ุงููุฑุงุณูนุฑฺฉฺุฑ**: Bicep ฺฉุง ุงุณุชุนูุงู ฺฉุฑุช ูุฆ ูพุฑููฺู ฺฉุง ฺฏุง (ูุงฺููุฑุ ุฏูุจุงุฑ ุงุณุชุนูุงู ฺฉ ูุงุจู ูนููพููนุณ)  
- **ุชุนูุงุช**: `azd` ฺฉูุงูฺุฒ ฺฉ ุฐุฑุน ูฺฉูู ุฎูุฏฺฉุงุฑ  
- **ูฺฏุฑุงู**: Application Insights ูุงฺฏุฒ ุงูุฑ ูนู ููนุฑ ฺฉ ู  

## ุถุฑูุฑุงุช

### ูุทููุจ ุงูุฒุงุฑ

ุดุฑูุน ฺฉุฑู ุณ ูพูุ ูู ุจูุงุฆฺบ ฺฉ  ูนููุฒ ุงูุณูนุงู ฺบ:

1. **[Azure CLI](https://learn.microsoft.com/cli/azure/install-azure-cli)** (ูุฑฺู 2.50.0 ุง ุงุณ ุณ ุงููพุฑ)  
   ```sh
   az --version
   # ูุชููุน ูุชุฌ: azure-cli 2.50.0 ุง ุงุณ ุณ ุฒุงุฏ
   ```
  
2. **[Azure Developer CLI (azd)](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd)** (ูุฑฺู 1.0.0 ุง ุงุณ ุณ ุงููพุฑ)  
   ```sh
   azd version
   # ูุชููุน ูุชุฌ: azd ูุฑฺู 1.0.0 ุง ุงุณ ุณ ุฒุงุฏ
   ```
  
3. **[Python 3.8+](https://www.python.org/downloads/)** (ููฺฉู ุชุฑู ฺฉ ู)  
   ```sh
   python --version
   # ูุชููุน ูุชุฌ: ูพุงุฆุชฺพู 3.8 ุง ุงุณ ุณ ุงุนููฐ
   ```
  
4. **[Docker](https://www.docker.com/get-started)** (ุงุฎุชุงุฑุ ููุงู containerized ุชุฑู ฺฉ ู)  
   ```sh
   docker --version
   # ูุชููุน ูุชุฌ: ฺูฺฉุฑ ูุฑฺู 20.10 ุง ุงุณ ุณ ุฒุงุฏ
   ```
  

### Azure ูุทููุจุงุช

- ุงฺฉ ูุนุงู **Azure ุณุจุณฺฉุฑูพุดู** ([ููุช ุงฺฉุงุคููน ุจูุงุฆฺบ](https://azure.microsoft.com/free/))  
- ุขูพ ฺฉ ุณุจุณฺฉุฑูพุดู ูฺบ ูุณุงุฆู ุชุฎูู ฺฉุฑู ฺฉ ุงุฌุงุฒุชฺบ  
- ุณุจุณฺฉุฑูพุดู ุง resource group ูพุฑ **ูุงูฺฉ** ุง **ฺฉููนุฑ ุจููนุฑ** ฺฉุง ฺฉุฑุฏุงุฑ  

### ุนูู ฺฉ ุถุฑูุฑุงุช

 ุงฺฉ **ุฏุฑูุงู ุณุทุญ** ฺฉ ูุซุงู  ุขูพ ฺฉู ุฏุฑุฌ ุฐู ฺฉุง ุนูู ููุง ฺุง:  
- ุจูุงุฏ ฺฉูุงูฺ ูุงุฆู ุขูพุฑุดูุฒ  
- ฺฉูุงุคฺ ฺฉ ุจูุงุฏ ุชุตูุฑุงุช (ูุณุงุฆูุ resource groups)  
- ูุจ ุงูพูฺฉุดูุฒ ุงูุฑ ฺูนุง ุจุณุฒ ฺฉ ุจูุงุฏ ุณูุฌฺพ  

**AZD ูฺบ ูุฆ ฺบุ** ูพู [Getting Started guide](../../docs/chapter-01-foundation/azd-basics.md) ุณ ุดุฑูุน ฺฉุฑฺบ  

## ูู ุชุนูุฑ

 ูุซุงู ุฏู ุณุทุญ ูู ุชุนูุฑ ุชุนูุงุช ฺฉุฑุช  ุฌุณ ูฺบ ูุจ ุงูพูฺฉุดู ุงูุฑ SQL ฺูนุง ุจุณ ุดุงูู ฺบ:  

```
โโโโโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโโโโโโโโโ
โ  User Browser   โโโโโโโโโบโ   Azure Web App      โ
โโโโโโโโโโโโโโโโโโโ        โ   (Flask API)        โ
                           โ   - /health          โ
                           โ   - /products        โ
                           โโโโโโโโโโโโฌโโโโโโโโโโโโ
                                      โ
                                      โ Secure Connection
                                      โ (Encrypted)
                                      โ
                           โโโโโโโโโโโโผโโโโโโโโโโโโ
                           โ Azure SQL Database   โ
                           โ   - Products table   โ
                           โ   - Sample data      โ
                           โโโโโโโโโโโโโโโโโโโโโโโโ
```
  
**ูุณุงุฆู ฺฉ ุชุนูุงุช:**  
- **ูุณุงุฆู ฺฏุฑููพ**: ุชูุงู ูุณุงุฆู ฺฉ ู ฺฉููนูุฑ  
- **ุงูพ ุณุฑูุณ ูพูุงู**: ููฺฉุณ ูพุฑ ูุจู ูุณูนูฺฏ (B1 ูนุฆุฑ ฺฉู ูุงฺฏุช ฺฉ ู)  
- **ูุจ ุงูพ**: Python 3.11 ุฑู ูนุงุฆู ฺฉ ุณุงุชฺพ Flask ุงูพูฺฉุดู  
- **SQL ุณุฑูุฑ**: TLS 1.2 ฺฉู ุงุฒ ฺฉู ฺฉ ุณุงุชฺพ ููุฌฺ ฺูนุง ุจุณ ุณุฑูุฑ  
- **SQL ฺูนุง ุจุณ**: ุจูุงุฏ ูนุฆุฑ (2GBุ ุชุฑู/ูนุณูนูฺฏ ฺฉ ู ููุงุณุจ)  
- **Application Insights**: ูฺฏุฑุงู ุงูุฑ ูุงฺฏูฺฏ  
- **ูุงฺฏ ุงูุงููนฺฉุณ ูุฑฺฉ ุงุณูพุณ**: ูุฑฺฉุฒ ูุงฺฏ ุณูนูุฑุฌ  

**ูุซุงู**: ุงุณ ุงฺฉ ุฑุณุชูุฑุงู ุณูุฌฺพฺบ (ูุจ ุงูพ) ุฌุณ ฺฉ ุณุงุชฺพ ุงฺฉ ูุงฺฉ-ุงู ูุฑุฒุฑ  (ฺูนุง ุจุณ) ฺฏุงฺฉ ููู ุณ ุขุฑฺุฑ ฺฉุฑุช ฺบ (API endpoints)ุ ุงูุฑ ฺฉฺู (Flask ุงูพ) ูุฑุฒุฑ ุณ ุงุฌุฒุงุก (ฺูนุง) ุญุงุตู ฺฉุฑุชุง  ุฑุณุชูุฑุงู ฺฉุง ููุฌุฑ (Application Insights) ุฑ ฺุฒ ฺฉู ูนุฑฺฉ ฺฉุฑุชุง   

## ูููฺุฑ ฺฉุง ฺฺพุงูฺ

ุชูุงู ูุงุฆูุฒ ุงุณ ูุซุงู ูฺบ ุดุงูู ฺบ โ ฺฉุณ ุฎุงุฑุฌ ุงูุญุตุงุฑ ฺฉ ุถุฑูุฑุช ูฺบ:  

```
examples/database-app/
โ
โโโ README.md                    # This file
โโโ azure.yaml                   # AZD configuration file
โโโ .env.sample                  # Sample environment variables
โโโ .gitignore                   # Git ignore patterns
โ
โโโ infra/                       # Infrastructure as Code (Bicep)
โ   โโโ main.bicep              # Main orchestration template
โ   โโโ abbreviations.json      # Azure naming conventions
โ   โโโ resources/              # Modular resource templates
โ       โโโ sql-server.bicep    # SQL Server configuration
โ       โโโ sql-database.bicep  # Database configuration
โ       โโโ app-service-plan.bicep  # Hosting plan
โ       โโโ app-insights.bicep  # Monitoring setup
โ       โโโ web-app.bicep       # Web application
โ
โโโ src/
    โโโ web/                    # Application source code
        โโโ app.py              # Flask REST API
        โโโ requirements.txt    # Python dependencies
        โโโ Dockerfile          # Container definition
```
  
**ุฑ ูุงุฆู ฺฉุง ฺฉุฑุช :**  
- **azure.yaml**: AZD ฺฉู ุจุชุงุชุง  ฺฉ ฺฉุง ุงูุฑ ฺฉุงฺบ ุชุนูุงุช ฺฉุฑูุง   
- **infra/main.bicep**: ุชูุงู Azure ูุณุงุฆู ฺฉู ููุธู ฺฉุฑุชุง   
- **infra/resources/*.bicep**: ุงููุฑุงุฏ ูุณุงุฆู ฺฉ ุชุนุฑู (ุฏูุจุงุฑ ุงุณุชุนูุงู ฺฉ ู ูุงฺููุฑ)  
- **src/web/app.py**: Flask ุงูพูฺฉุดู ุฌุณ ูฺบ ฺูนุง ุจุณ ูุงุฌฺฉ ุดุงูู   
- **requirements.txt**: Python ูพฺฉุฌ ุงูุญุตุงุฑ  
- **Dockerfile**: ุชุนูุงุช ฺฉ ู containerization ฺฉ ุฏุงุงุช  

## ุฌูุฏ ุขุบุงุฒ (ูุฏู ุจ ูุฏู)

### ูุฏู 1: ฺฉููู ฺฉุฑฺบ ุงูุฑ ููฺฏูน ฺฉุฑฺบ

```sh
git clone https://github.com/microsoft/AZD-for-beginners.git
cd AZD-for-beginners/examples/database-app
```
  
**โ ฺฉุงูุงุจ ฺฉ ุฌุงูฺ**: ุชุตุฏู ฺฉุฑฺบ ฺฉ `azure.yaml` ุงูุฑ `infra/` ูููฺุฑ ูุธุฑ ุข ุฑ ฺบ:  
```sh
ls
# ูุชููุน: README.md, azure.yaml, infra/, src/
```
  
### ูุฏู 2: Azure ุณ ุชุตุฏู ฺฉุฑฺบ

```sh
azd auth login
```
  
 ุขูพ ฺฉุง ุจุฑุงุคุฒุฑ Azure ฺฉ ุชูุซู ฺฉ ู ฺฉฺพูู ฺฏุง Azure ฺฉ ุงฺฉุงุคููน ฺฉ ูุนูููุงุช ุณ ุณุงุฆู ุงู ฺฉุฑฺบ  

**โ ฺฉุงูุงุจ ฺฉ ุฌุงูฺ**: ุขูพ ฺฉู  ูุธุฑ ุขูุง ฺุง:  
```
Logged in to Azure.
```
  
### ูุฏู 3: ูุงุญูู ฺฉู ุงูุดุฆูุงุฆุฒ ฺฉุฑฺบ

```sh
azd init
```
  
**ฺฉุง ูฺฏุง**: AZD ุขูพ ฺฉ ุชุนูุงุช ฺฉ ู ููฺฉู ฺฉููฺฏุฑุดู ุจูุงุฆ ฺฏุง  

**ุฌู ูพุฑุงููพูนุณ ุขูพ ุฏฺฉฺพฺบ ฺฏ:**  
- **ูุงุญูู ฺฉุง ูุงู**: ูุฎุชุตุฑ ูุงู ุฏุฑุฌ ฺฉุฑฺบ (ูุซูุงู `dev`, `myapp`)  
- **Azure ุณุจุณฺฉุฑูพุดู**: ูุฑุณุช ุณ ุงูพู ุณุจุณฺฉุฑูพุดู ููุชุฎุจ ฺฉุฑฺบ  
- **Azure ููฺฉุดู**: ุนูุงู ููุชุฎุจ ฺฉุฑฺบ (ูุซูุงู `eastus`, `westeurope`)  

**โ ฺฉุงูุงุจ ฺฉ ุฌุงูฺ**: ุขูพ ฺฉู  ุฏฺฉฺพูุง ฺุง:  
```
SUCCESS: New project initialized!
```
  
### ูุฏู 4: Azure ูุณุงุฆู ฺฉ ูุฑุงู

```sh
azd provision
```
  
**ฺฉุง ูฺฏุง**: AZD ุชูุงู ุจูุงุฏ ฺฺพุงูฺ ฺฉู ุชุนูุงุช ฺฉุฑ ฺฏุง (5-8 ูููน ูฺฏฺบ ฺฏ):  
1. ูุณุงุฆู ฺฏุฑููพ ุจูุงุฆ ฺฏุง  
2. SQL ุณุฑูุฑ ุงูุฑ ฺูนุง ุจุณ ุจูุงุฆ ฺฏุง  
3. ุงูพ ุณุฑูุณ ูพูุงู ุชุฎูู ฺฉุฑ ฺฏุง  
4. ูุจ ุงูพ ุชุนูุงุช ฺฉุฑ ฺฏุง  
5. Application Insights ุชุฑุชุจ ุฏ ฺฏุง  
6. ููน ูุฑฺฉูฺฏ ุงูุฑ ุณฺฉูุฑูน ฺฉููฺฏุฑ ฺฉุฑ ฺฏุง  

**ุขูพ ุณ ูพูฺฺพุง ุฌุงุฆ ฺฏุง:**  
- **SQL ุงฺูู ูุฒุฑูู**: ูุฒุฑูู ุฏุฑุฌ ฺฉุฑฺบ (ูุซูุงู `sqladmin`)  
- **SQL ุงฺูู ูพุงุณ ูุฑฺ**: ูุถุจูุท ูพุงุณ ูุฑฺ ุฏุฑุฌ ฺฉุฑฺบ (ุงุณ ูุญููุธ ฺฉุฑฺบ!)  

**โ ฺฉุงูุงุจ ฺฉ ุฌุงูฺ**: ุขูพ ฺฉู  ูุธุฑ ุขูุง ฺุง:  
```
SUCCESS: Your application was provisioned in Azure in X minutes Y seconds.
You can view the resources created under the resource group rg-<env-name> in Azure Portal:
https://portal.azure.com/#@/resource/subscriptions/.../resourceGroups/rg-<env-name>
```
  
**โฑ๏ธ ููุช**: 5-8 ูููน  

### ูุฏู 5: ุงูพูฺฉุดู ฺฉู ุชุนูุงุช ฺฉุฑฺบ

```sh
azd deploy
```
  
**ฺฉุง ูฺฏุง**: AZD ุขูพ ฺฉ Flask ุงูพูฺฉุดู ฺฉู ุจูุงุฆ ฺฏุง ุงูุฑ ุชุนูุงุช ฺฉุฑ ฺฏุง:  
1. Python ุงูพูฺฉุดู ฺฉู ูพฺฉุฌ ฺฉุฑ ฺฏุง  
2. Docker ฺฉููนูุฑ ุชุงุฑ ฺฉุฑ ฺฏุง  
3. Azure ูุจ ุงูพ ูฺบ ูพุด ฺฉุฑ ฺฏุง  
4. ฺูนุง ุจุณ ฺฉู ูููู ฺูนุง ุณ ุงูุดุฆูุงุฆุฒ ฺฉุฑ ฺฏุง  
5. ุงูพูฺฉุดู ฺฉุง ุขุบุงุฒ ฺฉุฑ ฺฏุง  

**โ ฺฉุงูุงุจ ฺฉ ุฌุงูฺ**: ุขูพ ฺฉู  ุฏฺฉฺพูุง ฺุง:  
```
SUCCESS: Your application was deployed to Azure in X minutes Y seconds.
You can view the resources created under the resource group rg-<env-name> in Azure Portal:
https://portal.azure.com/#@/resource/subscriptions/.../resourceGroups/rg-<env-name>
```
  
**โฑ๏ธ ููุช**: 3-5 ูููน  

### ูุฏู 6: ุงูพูฺฉุดู ฺฉู ุจุฑุงุคุฒ ฺฉุฑฺบ

```sh
azd browse
```
  
 ุขูพ ฺฉ ุชุนูุงุช ฺฉุฑุฏ ูุจ ุงูพ ฺฉู ุจุฑุงุคุฒุฑ ูฺบ ฺฉฺพูู ฺฏุง ุงุณ ูพุช ูพุฑ `https://app-<unique-id>.azurewebsites.net`  

**โ ฺฉุงูุงุจ ฺฉ ุฌุงูฺ**: ุขูพ JSON ุขุคูน ูพูน ุฏฺฉฺพฺบ ฺฏ:  
```json
{
  "message": "Welcome to the Database App API",
  "endpoints": {
    "/": "This help message",
    "/health": "Health check endpoint",
    "/products": "List all products",
    "/products/<id>": "Get product by ID"
  }
}
```
  
### ูุฏู 7: API ุงูฺูพูุงุฆููนุณ ฺฉ ุฌุงูฺ ฺฉุฑฺบ

**ูุชฺพ ฺฺฉ** (ฺูนุง ุจุณ ฺฉูฺฉุดู ฺฉ ุชุตุฏู):  
```sh
curl https://app-<your-id>.azurewebsites.net/health
```
  
**ูุชููุน ุฌูุงุจ**:  
```json
{
  "status": "healthy",
  "database": "connected"
}
```
  
**ูพุฑูฺฺฉูนุณ ฺฉ ูุฑุณุช** (ูููู ฺูนุง):  
```sh
curl https://app-<your-id>.azurewebsites.net/products
```
  
**ูุชููุน ุฌูุงุจ**:  
```json
[
  {
    "id": 1,
    "name": "Laptop",
    "description": "High-performance laptop",
    "price": 1299.99,
    "created_at": "2025-11-19T10:30:00"
  },
  ...
]
```
  
**ุงฺฉ ูพุฑูฺฺฉูน ุญุงุตู ฺฉุฑฺบ**:  
```sh
curl https://app-<your-id>.azurewebsites.net/products/1
```
  
**โ ฺฉุงูุงุจ ฺฉ ุฌุงูฺ**: ุชูุงู ุงูฺูพูุงุฆููนุณ ุจุบุฑ ฺฉุณ ุบูุท ฺฉ JSON ฺูนุง ูุงูพุณ ฺฉุฑุช ฺบ  

---

**๐ ูุจุงุฑฺฉ ู!** ุขูพ ู AZD ุงุณุชุนูุงู ฺฉุฑุช ูุฆ ฺฉุงูุงุจ ุณ Azure ูพุฑ ุงฺฉ ูุจ ุงูพูฺฉุดู ุงูุฑ ฺูนุง ุจุณ ุชุนูุงุช ฺฉุฑ ู   

## ุชุฑุชุจ ฺฉ ุชูุตู ูุถุงุญุช

### ูุงุญูู ฺฉ ูุชุบุฑุงุช

ุฑุงุฒ Azure App Service ฺฉููฺฏุฑุดู ฺฉ ุฐุฑุน ูุญููุธ ุทุฑู ุณ ููุธู ฺฉ ุฌุงุช ฺบ โ **ฺฉุจฺพ ุจฺพ ุณูุฑุณ ฺฉูฺ ูฺบ ุงุฑฺ ฺฉูฺ ู ฺฉุฑฺบ**  

**AZD ฺฉ ุฐุฑุน ุฎูุฏฺฉุงุฑ ุชุฑุชุจ:**  
- `SQL_CONNECTION_STRING`: ฺูนุง ุจุณ ฺฉูฺฉุดูุ ุฎู ฺฉุฑุฏ ุงุณูุงุฏ ฺฉ ุณุงุชฺพ  
- `APPLICATIONINSIGHTS_CONNECTION_STRING`: ูฺฏุฑุงู ฺฉ ูนู ููนุฑ ุงูฺ ูพูุงุฆููน  
- `SCM_DO_BUILD_DURING_DEPLOYMENT`: ุฎูุฏฺฉุงุฑ ุงูุญุตุงุฑ ฺฉ ุชูุตุจ ฺฉู ูุนุงู ฺฉุฑุชุง   

**ุฑุงุฒ ฺฉุงฺบ ูุญููุธ ูุช ฺบ:**  
1. `azd provision` ฺฉ ุฏูุฑุงูุ ุขูพ SQL ุงุณูุงุฏ ูุญููุธ ุทุฑู ุณ ูุฑุงู ฺฉุฑุช ฺบ  
2. AZD ุงูฺบ ุขูพ ฺฉ ููฺฉู `.azure/<env-name>/.env` ูุงุฆู ูฺบ ูุญููุธ ฺฉุฑุชุง  (git ุณ ูุณุชุซููฐ)  
3. AZD ุงูฺบ Azure App Service ฺฉููฺฏุฑุดู ูฺบ ุฏุงุฎู ฺฉุฑุชุง  (ูุญููุธ ุงูุฑ ุงูฺฉุฑูพูนฺ)  
4. ุงูพูฺฉุดู ุงูฺบ `os.getenv()` ฺฉ ุฐุฑุน ุฑู ูนุงุฆู ูฺบ ูพฺฺพุช   

### ููุงู ุชุฑู

ููุงู ุฌุงูฺ ฺฉ ูุ ูููู ุณ `.env` ูุงุฆู ุจูุงุฆฺบ:  

```sh
cp .env.sample .env
# ุงูพู ููุงู ฺูนุง ุจุณ ฺฉูฺฉุดู ฺฉ ุณุงุชฺพ .env ูฺบ ุชุฑูู ฺฉุฑฺบ
```
  
**ููุงู ุชุฑู ฺฉุง ูุฑฺฉ ููู:**  
```sh
# ุงูุญุตุงุฑ ุงูุณูนุงู ฺฉุฑฺบ
cd src/web
pip install -r requirements.txt

# ูุงุญููุงุช ูุชุบุฑุงุช ุณูน ฺฉุฑฺบ
export SQL_CONNECTION_STRING="your-local-connection-string"

# ุงูพูฺฉุดู ฺูุงุฆฺบ
python app.py
```
  
**ููุงู ุทูุฑ ูพุฑ ูนุณูน ฺฉุฑฺบ:**  
```sh
curl http://localhost:8000/health
# ูุชููุน: {"status": "healthy", "database": "connected"}
```
  
### ุจูุงุฏ ฺฺพุงูฺ ุจุทูุฑ ฺฉูฺ

ุชูุงู Azure ูุณุงุฆู **Bicep ูนููพููนุณ** (`infra/` ูููฺุฑ) ูฺบ ุชุนุฑู ฺฉ ฺฏุฆ ฺบ:  

- **ูุงฺููุฑ ฺุฒุงุฆู**: ุฑ ูุณู ฺฉ ูุณุงุฆู ฺฉ ู ุงูพู ูุงุฆู ุชุงฺฉ ุฏูุจุงุฑ ุงุณุชุนูุงู ุขุณฺฉ  
- **ูพุฑุงููนุฑุงุฆุฒฺ**: SKUุ ุนูุงููฺบุ ูุงููฺบ ฺฉ ุชุฎุตุต  
- **ุจุชุฑู ุทุฑู**: Azure ูุงูุงุช ุงุตูููฺบ ุงูุฑ ุณฺฉูุฑูน ฺูุงููนุณ ฺฉ ูพุฑู ฺฉุฑุชุง   
- **ูุฑฺู ฺฉููนุฑูู**: ุจูุงุฏ ฺฺพุงูฺ ูฺบ ุชุจุฏูุงฺบ Git ูฺบ ูนุฑฺฉ ฺฉ ุฌุงุช ฺบ  

**ุชุฎุตุต ฺฉ ูุซุงู:**  
ฺูนุง ุจุณ ฺฉ ูนุฆุฑ ฺฉู ุชุจุฏู ฺฉุฑู ฺฉ ู `infra/resources/sql-database.bicep` ูฺบ ุชุฑูู ฺฉุฑฺบ:  
```bicep
sku: {
  name: 'Standard'  // Changed from 'Basic'
  tier: 'Standard'
  capacity: 10
}
```
  
## ุณฺฉูุฑูน ฺฉ ุจุชุฑู ูพุฑฺฉูนุณุฒ

 ูุซุงู Azure ฺฉ ุณฺฉูุฑูน ฺฉ ุจุชุฑู ูุดููฺบ ฺฉ ูพุฑู ฺฉุฑุช :  

### 1. **ุฑุงุฒ ุณูุฑุณ ฺฉูฺ ูฺบ ูฺบ**  
- โ ุงุณูุงุฏ Azure App Service ฺฉููฺฏุฑุดู ูฺบ ูุญููุธ ฺฉ ุฌุงุช ฺบ (ุงูฺฉุฑูพูนฺ)  
- โ `.env` ูุงุฆูฺบ Git ุณ ูุณุชุซููฐ ฺบ (`.gitignore`)  
- โ ุฑุงุฒ provisioning ฺฉ ุฏูุฑุงู ูุญููุธ ูพุฑุงููนุฑุฒ ฺฉ ุฐุฑุน ูพุงุณ ฺฉ ุฌุงุช ฺบ  

### 2. **ุงูฺฉุฑูพูนฺ ฺฉูฺฉุดูุฒ**  
- โ SQL ุณุฑูุฑ ฺฉ ู ฺฉู ุงุฒ ฺฉู TLS 1.2  
- โ ูุจ ุงูพ ฺฉ ู ุตุฑู HTTPS ูุนุงู  
- โ ฺูนุง ุจุณ ฺฉูฺฉุดู ุฎู ฺููุฒ ุงุณุชุนูุงู ฺฉุฑุช ฺบ  

### 3. **ููน ูุฑฺฉ ุณฺฉูุฑูน**  
- โ SQL ุณุฑูุฑ ูุงุฆุฑ ูุงู ุตุฑู Azure ุฎุฏูุงุช ฺฉู ุงุฌุงุฒุช ุฏุชุง   
- โ ุนูุงู ููน ูุฑฺฉ ุชฺฉ ุฑุณุงุฆ ูุญุฏูุฏ (ูุฒุฏ ููู ูพุฑุงุฆููน ุงูฺูพูุงุฆููนุณ ฺฉ ุณุงุชฺพ ููฺฉู)  
- โ ูุจ ุงูพ ูพุฑ FTPS ุบุฑ ูุนุงู  

### 4. **ุชุตุฏู ุงูุฑ ุงุฌุงุฒุช**  
- โ๏ธ **ููุฌูุฏ**: SQL ุชุตุฏู (ูุฒุฑูู/ูพุงุณ ูุฑฺ)  
- โ **ูพุฏุงูุงุฑ ฺฉ ุณูุงุฑุด**: Azure Managed Identity ุงุณุชุนูุงู ฺฉุฑฺบ ุจุบุฑ ูพุงุณ ูุฑฺ ฺฉ ุชุตุฏู ฺฉ ู  

**Managed Identity ูฺบ ุชุจุฏู ฺฉ ู** (ูพุฏุงูุงุฑ ฺฉ ู):  
1. ูุจ ุงูพ ูพุฑ ููุฌฺ ุดูุงุฎุช ูุนุงู ฺฉุฑฺบ  
2. ุดูุงุฎุช ฺฉู SQL ฺฉ ุงุฌุงุฒุชฺบ ุฏฺบ  
3. ฺฉูฺฉุดู ุณูนุฑูฺฏ ฺฉู ููุฌฺ ุดูุงุฎุช ุงุณุชุนูุงู ฺฉุฑู ฺฉ ู ุงูพ ฺูน ฺฉุฑฺบ  
4. ูพุงุณ ูุฑฺ ูพุฑ ูุจู ุชุตุฏู ูนุงุฆฺบ  

### 5. **ุขฺูนูฺฏ ุงูุฑ ฺฉููพูุงุฆูุณ**  
- โ Application Insights ุชูุงู ุฏุฑุฎูุงุณุชฺบ ุงูุฑ ุบูุทุงฺบ ูุงฺฏ ฺฉุฑุชุง   
- โ SQL ฺูนุง ุจุณ ุขฺูนูฺฏ ูุนุงู  (ฺฉููพูุงุฆูุณ ฺฉ ู ุชุฑุชุจ ุฏ ุฌุง ุณฺฉุช )  
- โ ุชูุงู ูุณุงุฆู ุญฺฉูุฑุงู ฺฉ ู ูนฺฏ ฺฉ ฺฏุฆ  

**ูพุฏุงูุงุฑ ุณ ูพู ุณฺฉูุฑูน ฺฺฉ ูุณูน:**  
- [ ] SQL ฺฉ ู Azure Defender ูุนุงู ฺฉุฑฺบ  
- [ ] SQL ฺูนุง ุจุณ ฺฉ ู ูพุฑุงุฆููน ุงูฺูพูุงุฆููนุณ ุชุฑุชุจ ุฏฺบ  
- [ ] ูุจ ุงูพูฺฉุดู ูุงุฆุฑูุงู (WAF) ูุนุงู ฺฉุฑฺบ  
- [ ] ุฑุงุฒ ฺฉ ฺฏุฑุฏุด ฺฉ ู Azure Key Vault ุงุณุชุนูุงู ฺฉุฑฺบ  
- [ ] Azure AD ุชุตุฏู ุชุฑุชุจ ุฏฺบ  
- [ ] ุชูุงู ูุณุงุฆู ฺฉ ู ุชุดุฎุต ูุงฺฏูฺฏ ูุนุงู ฺฉุฑฺบ  

## ูุงฺฏุช ฺฉ ุจฺุช

**ูุงุงู ูุชููุน ุงุฎุฑุงุฌุงุช** (ูููุจุฑ 2025 ฺฉ ุญุซุช ุณ):  

| ูุณู | SKU/ูนุฆุฑ | ูุชููุน ูุงฺฏุช |  
|----------|----------|----------------|  
| App Service Plan | B1 (ุจูุงุฏ) | ุชูุฑุจุงู $13/ูุง |  
| SQL ฺูนุง ุจุณ | ุจูุงุฏ (2GB) | ุชูุฑุจุงู $5/ูุง |  
| Application Insights | ุงุฏุงุฆฺฏ ุฌุชู ุงุณุชุนูุงู ฺฉุฑฺบ | ุชูุฑุจุงู $2/ูุง (ฺฉู ูนุฑูฺฉ) |  
| **ฺฉู** | | **~$20/ูุง** |  

**๐ก ูุงฺฏุช ุจฺุงู ฺฉ ูฺฉุงุช:**  

1. **ุณฺฉฺพู ฺฉ ู ููุช ูนุฆุฑ ุงุณุชุนูุงู ฺฉุฑฺบ:**  
   - ุงูพ ุณุฑูุณ: F1 ูนุฆุฑ (ููุชุ ูุญุฏูุฏ ฺฏฺพููน)  
   - SQL ฺูนุง ุจุณ: Azure SQL Database ุณุฑูุฑูุณ ุงุณุชุนูุงู ฺฉุฑฺบ  
   - Application Insights: ูุงุงู 5GB ููุช ุงูุฌฺฉุดู  

2. **ุฌุจ ุงุณุชุนูุงู ูฺบ ู ูฺบ ูุณุงุฆู ฺฉู ุฑูฺฉ ุฏฺบ:**  
   ```sh
   # ูุจ ุงูพ ฺฉู ุฑูฺฉฺบ (ฺูนุง ุจุณ ุงุจ ุจฺพ ฺุงุฑุฌ ฺฉุฑุชุง )
   az webapp stop --name <app-name> --resource-group <rg-name>
   
   # ุฌุจ ุถุฑูุฑุช ู ุชู ุฏูุจุงุฑ ุดุฑูุน ฺฉุฑฺบ
   az webapp start --name <app-name> --resource-group <rg-name>
   ```
  
3. **ูนุณูนูฺฏ ฺฉ ุจุนุฏ ุณุจ ฺฉฺฺพ ุญุฐู ฺฉุฑฺบ:**  
   ```sh
   azd down
   ```
    ุชูุงู ูุณุงุฆู ูนุง ุฏุชุง  ุงูุฑ ฺุงุฑุฌุฒ ุจูุฏ ฺฉุฑ ุฏุชุง   

4. **ุชุฑู ุงูุฑ ูพุฏุงูุงุฑ ฺฉ SKU:**  
   - **ุชุฑู**: ุจูุงุฏ ูนุฆุฑ (ุงุณ ูุซุงู ูฺบ ุงุณุชุนูุงู ูุง)  
   - **ูพุฏุงูุงุฑ**: ูุนุงุฑ/ูพุฑูู ูนุฆุฑ ฺฉ ุณุงุชฺพ redundancy  

**ูุงฺฏุช ฺฉ ูฺฏุฑุงู:**  
- ูุงฺฏุช ุฏฺฉฺพู ฺฉ ู [Azure Cost Management](https://portal.azure.com/#view/Microsoft_Azure_CostManagement) ุงุณุชุนูุงู ฺฉุฑฺบ  
- ุงฺุงูฺฉ ูุงฺฏุช ุณ ุจฺู ฺฉ ู ุงูุฑูนุณ ุณูน ฺฉุฑฺบ  
- ุชูุงู ูุณุงุฆู ฺฉู `azd-env-name` ฺฉ ูนฺฏ ฺฉ ุณุงุชฺพ ูนุฑฺฉ ฺฉุฑฺบ  

**ููุช ูนุฆุฑ ูุชุจุงุฏู:**  
ุณฺฉฺพู ฺฉ ูุ `infra/resources/app-service-plan.bicep` ฺฉู ุชุจุฏู ฺฉุฑฺบ:  
```bicep
sku: {
  name: 'F1'  // Free tier
  tier: 'Free'
}
```
  
**ูููน**: ููุช ูนุฆุฑ ูฺบ ุญุฏูุฏ ฺบ (ุฑูุฒุงู 60 ูููน CPUุ ูุด ุขู ูฺบ)  

## ูฺฏุฑุงู ุงูุฑ ูุดุงุฏ

### Application Insights ฺฉุง ุงูุถูุงู

 ูุซุงู Application Insights ฺฉู ุดุงูู ฺฉุฑุช  ุชุงฺฉ ูฺฉูู ูฺฏุฑุงู ูุฑุงู ฺฉ ุฌุง ุณฺฉ:  

**ฺฉุง ูุงููนุฑ ฺฉุง ุฌุงุชุง :**  
- โ HTTP ุฏุฑุฎูุงุณุชฺบ (ุชุงุฎุฑุ ุงุณูนูนุณ ฺฉูฺุฒุ ุงูฺูพูุงุฆููนุณ)  
- โ ุงูพูฺฉุดู ฺฉ ุบูุทุงฺบ ุงูุฑ ุงุณุชุซูุง  
- โ Flask ุงูพ ุณ ุญุณุจ ุถุฑูุฑุช ูุงฺฏุฒ  
- โ ฺูนุง ุจุณ ฺฉูฺฉุดู ฺฉ ุตุญุช  
- โ ฺฉุงุฑฺฉุฑุฏฺฏ ฺฉ ููนุฑฺฉุณ (CPUุ ูููุฑ)  

**Application Insights ุชฺฉ ุฑุณุงุฆ:**  
1. ฺฉฺพููฺบ [Azure ูพูุฑูนู](https://portal.azure.com)  
2. ุงูพู ูุณุงุฆู ฺฏุฑููพ (`rg-<env-name>`) ูพุฑ ุฌุงุฆฺบ  
3. Application Insights ูุณุงุฆู (`appi-<unique-id>`) ูพุฑ ฺฉูฺฉ ฺฉุฑฺบ  

**ููุฏ ุณูุงูุงุช** (Application Insights โ Logs):  

**ุชูุงู ุฏุฑุฎูุงุณุชฺบ ุฏฺฉฺพฺบ:**  
```kusto
requests
| where timestamp > ago(1h)
| order by timestamp desc
| project timestamp, name, url, resultCode, duration
```
  
**ุบูุทุงฺบ ุชูุงุด ฺฉุฑฺบ:**  
```kusto
exceptions
| where timestamp > ago(24h)
| order by timestamp desc
| project timestamp, type, outerMessage, operation_Name
```
  
**ูุชฺพ ุงูฺูพูุงุฆููน ฺฺฉ ฺฉุฑฺบ:**  
```kusto
requests
| where name contains "health"
| summarize count() by resultCode, bin(timestamp, 1h)
```
  
### SQL ฺูนุง ุจุณ ุขฺูนูฺฏ

**SQL ฺูนุง ุจุณ ูฺบ ุขฺูนูฺฏ ูุนุงู  ุชุงฺฉ ูนุฑฺฉ ฺฉุง ุฌุง ุณฺฉ:**  
- ฺูนุง ุจุณ ุชฺฉ ุฑุณุงุฆ ฺฉ ูพูนุฑูุฒ  
- ูุงฺฉุงู ูุงฺฏ ุงู ฺฉ ฺฉูุดุดฺบ  
- ุงุณฺฉูุง ูฺบ ุชุจุฏูุงฺบ  
- ฺูนุง ุชฺฉ ุฑุณุงุฆ (ฺฉููพูุงุฆูุณ ฺฉ ู)  

**ุขฺูน ูุงฺฏุฒ ุชฺฉ ุฑุณุงุฆ:**  
1. Azure ูพูุฑูนู โ SQL ฺูนุง ุจุณ โ ุขฺูนูฺฏ  
2. ูุงฺฏ ุงูุงููนฺฉุณ ูุฑฺฉ ุงุณูพุณ ูฺบ ูุงฺฏุฒ ุฏฺฉฺพฺบ  

### ุญูู ููุช ฺฉ ูฺฏุฑุงู

**ูุงุฆู ููนุฑฺฉุณ ุฏฺฉฺพฺบ:**  
1. Application Insights โ Live Metrics  
2. ุฏุฑุฎูุงุณุชฺบุ ูุงฺฉุงูุงฺบุ ุงูุฑ ฺฉุงุฑฺฉุฑุฏฺฏ ุญูู ููุช ูฺบ ุฏฺฉฺพฺบ  

**ุงูุฑูนุณ ุณูน ฺฉุฑฺบ:**  
ุงู ูุงูุนุงุช ฺฉ ู ุงูุฑูนุณ ุจูุงุฆฺบ:  
- HTTP 500 ฺฉ ุบูุทุงฺบ > 5 ุจุงุฑ 5 ูููน ูฺบ  
- ฺูนุง ุจุณ ฺฉูฺฉุดู ฺฉ ูุงฺฉุงูุงฺบ
- ุจููุฏ ุฑุฏุนูู ฺฉ ุงููุงุช (>2 ุณฺฉูฺ)

**ูุซุงู ฺฉ ุทูุฑ ูพุฑ ุงูุฑูน ุจูุงูุง**:  
```sh
az monitor metrics alert create \
  --name "High-Response-Time" \
  --resource-group <rg-name> \
  --scopes <app-insights-resource-id> \
  --condition "avg requests/duration > 2000" \
  --description "Alert when response time exceeds 2 seconds"
```
  
## ูุณุงุฆู ฺฉุง ุณุฏุจุงุจ

### ุนุงู ูุณุงุฆู ุงูุฑ ุญู

#### 1. `azd provision` "Location not available" ฺฉ ุณุงุชฺพ ูุงฺฉุงู ู ุฌุงุชุง 

**ุนูุงูุช**:  
```
Error: The subscription is not registered for the resource type 'components' in the location 'centralus'.
```
  
**ุญู**:  
ฺฉูุฆ ูุฎุชูู Azure ุฎุท ููุชุฎุจ ฺฉุฑฺบ ุง ุฑุณูุฑุณ ูพุฑููุงุฆฺุฑ ฺฉู ุฑุฌุณูนุฑ ฺฉุฑฺบ:  
```sh
az provider register --namespace Microsoft.Insights
```
  
#### 2. ุชุนูุงุช ฺฉ ุฏูุฑุงู SQL ฺฉูฺฉุดู ูุงฺฉุงู ู ุฌุงุชุง 

**ุนูุงูุช**:  
```
pyodbc.OperationalError: ('08001', '[08001] [Microsoft][ODBC Driver 18 for SQL Server]TCP Provider...')
```
  
**ุญู**:  
- ุชุตุฏู ฺฉุฑฺบ ฺฉ SQL ุณุฑูุฑ ูุงุฆุฑ ูุงู Azure ุณุฑูุณุฒ ฺฉู ุงุฌุงุฒุช ุฏุชุง  (ุฎูุฏฺฉุงุฑ ุทูุฑ ูพุฑ ุชุฑุชุจ ุฏุง ุฌุงุชุง )  
- ฺฺฉ ฺฉุฑฺบ ฺฉ `azd provision` ฺฉ ุฏูุฑุงู SQL ุงฺูู ูพุงุณ ูุฑฺ ุฏุฑุณุช ุทุฑู ุณ ุฏุฑุฌ ฺฉุง ฺฏุง   
- ูู ุจูุงุฆฺบ ฺฉ SQL ุณุฑูุฑ ูฺฉูู ุทูุฑ ูพุฑ ูพุฑููฺูุฏ  (2-3 ูููน ูฺฏ ุณฺฉุช ฺบ)  

**ฺฉูฺฉุดู ฺฉ ุชุตุฏู ฺฉุฑฺบ**:  
```sh
# ุงุฒ ูุฑ ูพูุฑูนูุ SQL ฺูนุง ุจุณ โ ฺฉูุฆุฑ ุงฺูนุฑ ูพุฑ ุฌุงุฆฺบ
# ุงูพู ุงุณูุงุฏ ฺฉ ุณุงุชฺพ ฺฉูฺฉูน ฺฉุฑู ฺฉ ฺฉูุดุด ฺฉุฑฺบ
```
  
#### 3. ูุจ ุงูพ "Application Error" ุฏฺฉฺพุงุชุง 

**ุนูุงูุช**:  
ุจุฑุงุคุฒุฑ ุนููู ุงุฑุฑ ูพุฌ ุฏฺฉฺพุงุชุง 

**ุญู**:  
ุงูพูฺฉุดู ูุงฺฏุฒ ฺฺฉ ฺฉุฑฺบ:  
```sh
# ุญุงู ูุงฺฏุฒ ููุงุญุธ ฺฉุฑฺบ
az webapp log tail --name <app-name> --resource-group <rg-name>
```
  
**ุนุงู ูุฌูุงุช**:  
- ุบุงุฆุจ ูุงุญูู ูุชุบุฑุงุช (App Service โ Configuration ฺฺฉ ฺฉุฑฺบ)  
- Python ูพฺฉุฌ ฺฉ ุชูุตุจ ูุงฺฉุงู (deployment logs ฺฺฉ ฺฉุฑฺบ)  
- ฺูนุง ุจุณ ฺฉ ุงุจุชุฏุงุก ูฺบ ุฎุฑุงุจ (SQL ฺฉูฺฉูนููน ฺฺฉ ฺฉุฑฺบ)  

#### 4. `azd deploy` "Build Error" ฺฉ ุณุงุชฺพ ูุงฺฉุงู

**ุนูุงูุช**:  
```
Error: Failed to build project
```
  
**ุญู**:  
- ูู ุจูุงุฆฺบ ฺฉ `requirements.txt` ูฺบ ฺฉูุฆ syntax errors ูฺบ ฺบ  
- `infra/resources/web-app.bicep` ูฺบ Python 3.11 ูุงุถุญ   
- Dockerfile ูฺบ ุฏุฑุณุช base image   

**ููุงู ุทูุฑ ูพุฑ ฺ ุจฺฏ ฺฉุฑฺบ**:  
```sh
cd src/web
docker build -t test-app .
docker run -p 8000:8000 test-app
```
  
#### 5. AZD ฺฉูุงูฺุฒ ฺูุงู ูพุฑ "Unauthorized"

**ุนูุงูุช**:  
```
ERROR: (Unauthorized) The client '<id>' with object id '<id>' does not have authorization
```
  
**ุญู**:  
Azure ฺฉ ุณุงุชฺพ ุฏูุจุงุฑ ูุงฺฏ ุงู ฺฉุฑฺบ:  
```sh
azd auth login
az login
```
  
ุชุตุฏู ฺฉุฑฺบ ฺฉ ุขูพ ฺฉ ูพุงุณ ุณุจุณฺฉุฑูพุดู ูพุฑ ุฏุฑุณุช ุงุฌุงุฒุชฺบ (Contributor ุฑูู) ููุฌูุฏ ฺบ

#### 6. ฺูนุง ุจุณ ฺฉ ุงุฎุฑุงุฌุงุช ุฒุงุฏ ุขูุง

**ุนูุงูุช**:  
ูุชููุน ุณ ุฒุงุฏ Azure ุจู ุขุง 

**ุญู**:  
- ฺฺฉ ฺฉุฑฺบ ฺฉ ุขูพ ู `azd down` ูนุณูนูฺฏ ฺฉ ุจุนุฏ ฺูุงุง  ุง ูฺบ  
- ุชุตุฏู ฺฉุฑฺบ ฺฉ SQL ฺูนุง ุจุณ Basic ูนุฆุฑ ุงุณุชุนูุงู ฺฉุฑ ุฑุง  (Premium ูฺบ)  
- Azure Cost Management ูฺบ ุงุฎุฑุงุฌุงุช ฺฉุง ุฌุงุฆุฒ ูฺบ  
- ูุงฺฏุช ฺฉ ุงูุฑูนุณ ุณูน ฺฉุฑฺบ  

### ูุฏุฏ ุญุงุตู ฺฉุฑูุง

**ุชูุงู AZD ูุงุญููุงุช ูุชุบุฑุงุช ุฏฺฉฺพฺบ**:  
```sh
azd env get-values
```
  
**ุชุนูุงุช ฺฉ ุญุซุช ฺฺฉ ฺฉุฑฺบ**:  
```sh
az webapp show --name <app-name> --resource-group <rg-name> --query state
```
  
**ุงูพูฺฉุดู ูุงฺฏุฒ ุชฺฉ ุฑุณุงุฆ**:  
```sh
az webapp log download --name <app-name> --resource-group <rg-name> --log-file app-logs.zip
```
  
**ูุฒุฏ ูุฏุฏ ฺุงุ**  
- [AZD Troubleshooting Guide](../../docs/chapter-07-troubleshooting/common-issues.md)  
- [Azure App Service Troubleshooting](https://learn.microsoft.com/azure/app-service/troubleshoot-diagnostic-logs)  
- [Azure SQL Troubleshooting](https://learn.microsoft.com/azure/azure-sql/database/troubleshoot-common-errors-issues)  

## ุนูู ูุดูฺบ

### ูุดู 1: ุงูพู ุชุนูุงุช ฺฉ ุชุตุฏู ฺฉุฑฺบ (ุงุจุชุฏุงุฆ)

**ููุตุฏ**: ุชุตุฏู ฺฉุฑฺบ ฺฉ ุชูุงู ุฑุณูุฑุณุฒ ุชุนูุงุช ู ฺฺฉ ฺบ ุงูุฑ ุงูพูฺฉุดู ฺฉุงู ฺฉุฑ ุฑ 

**ูุฏู**:  
1. ุงูพู ุฑุณูุฑุณ ฺฏุฑููพ ูฺบ ุชูุงู ุฑุณูุฑุณุฒ ฺฉ ูุฑุณุช ุจูุงุฆฺบ:  
   ```sh
   az resource list --resource-group rg-<env-name> --output table
   ```
  
  **ูุชููุน**: 6-7 ุฑุณูุฑุณุฒ (Web App, SQL Server, SQL Database, App Service Plan, Application Insights, Log Analytics)  

2. ุชูุงู API ุงูฺูพูุงุฆููนุณ ฺฉุง ูนุณูน ฺฉุฑฺบ:  
   ```sh
   curl https://app-<your-id>.azurewebsites.net/
   curl https://app-<your-id>.azurewebsites.net/health
   curl https://app-<your-id>.azurewebsites.net/products
   curl https://app-<your-id>.azurewebsites.net/products/1
   ```
  
  **ูุชููุน**: ุชูุงู valid JSON ุฑูนุฑู ฺฉุฑฺบ ุจุบุฑ ฺฉุณ ุงุฑุฑ ฺฉ  

3. Application Insights ฺฺฉ ฺฉุฑฺบ:  
   - Azure ูพูุฑูนู ูฺบ Application Insights ุชฺฉ ุฌุงุฆฺบ  
   - "Live Metrics" ูพุฑ ุฌุงุฆฺบ  
   - ูุจ ุงูพ ูพุฑ ุจุฑุงุคุฒุฑ ฺฉู ุฑูุฑุด ฺฉุฑฺบ  
   **ูุชููุน**: ุฏุฑุฎูุงุณุชฺบ ุงุตู ููุช ูฺบ ุธุงุฑ ูฺบ  

**ฺฉุงูุงุจ ฺฉ ูุนุงุฑ**: ุชูุงู 6-7 ุฑุณูุฑุณุฒ ููุฌูุฏ ูฺบุ ุชูุงู ุงูฺูพูุงุฆููนุณ ฺูนุง ุฑูนุฑู ฺฉุฑฺบุ Live Metrics ุณุฑฺฏุฑู ุฏฺฉฺพุงุฆ

---

### ูุดู 2: ูุง API ุงูฺูพูุงุฆููน ุดุงูู ฺฉุฑฺบ (ุฏุฑูุงู ุณุทุญ)

**ููุตุฏ**: Flask ุงูพูฺฉุดู ูฺบ ูุง ุงูฺูพูุงุฆููน ุดุงูู ฺฉุฑฺบ

**ุดุฑูุน ฺฉุฑู ฺฉุง ฺฉูฺ**: ููุฌูุฏ ุงูฺูพูุงุฆููนุณ `src/web/app.py` ูฺบ

**ูุฏู**:  
1. `src/web/app.py` ุงฺูน ฺฉุฑฺบ ุงูุฑ `get_product()` ููฺฉุดู ฺฉ ุจุนุฏ ูุง ุงูฺูพูุงุฆููน ุดุงูู ฺฉุฑฺบ:  
   ```python
   @app.route('/products/search/<keyword>')
   def search_products(keyword):
       """Search products by name or description."""
       try:
           conn = get_db_connection()
           cursor = conn.cursor()
           cursor.execute(
               "SELECT id, name, description, price, created_at FROM products WHERE name LIKE ? OR description LIKE ?",
               (f'%{keyword}%', f'%{keyword}%')
           )
           
           products = []
           for row in cursor.fetchall():
               products.append({
                   'id': row[0],
                   'name': row[1],
                   'description': row[2],
                   'price': float(row[3]) if row[3] else None,
                   'created_at': row[4].isoformat() if row[4] else None
               })
           
           cursor.close()
           conn.close()
           
           logger.info(f"Search for '{keyword}' returned {len(products)} results")
           return jsonify(products), 200
           
       except Exception as e:
           logger.error(f"Error searching products: {str(e)}")
           return jsonify({'error': str(e)}), 500
   ```
  
2. ุงูพ ฺูน ุดุฏ ุงูพูฺฉุดู ฺฉู ุชุนูุงุช ฺฉุฑฺบ:  
   ```sh
   azd deploy
   ```
  
3. ูุฆ ุงูฺูพูุงุฆููน ฺฉุง ูนุณูน ฺฉุฑฺบ:  
   ```sh
   curl https://app-<your-id>.azurewebsites.net/products/search/laptop
   ```
  
  **ูุชููุน**: ู ูพุฑูฺฺฉูนุณ ูุงูพุณ ฺฉุฑ ุฌู "laptop" ุณ ูู ฺฉฺพุงุช ูฺบ  

**ฺฉุงูุงุจ ฺฉ ูุนุงุฑ**: ูุง ุงูฺูพูุงุฆููน ฺฉุงู ฺฉุฑุ ูููนุฑ ุดุฏ ูุชุงุฆุฌ ูุงูพุณ ฺฉุฑุ Application Insights ูุงฺฏุฒ ูฺบ ุฏฺฉฺพุงุฆ ุฏ

---

### ูุดู 3: ูุงููนุฑูฺฏ ุงูุฑ ุงูุงุฑูนุณ ุดุงูู ฺฉุฑฺบ (ูุงุฑุงู ุณุทุญ)

**ููุตุฏ**: ุงูุฑูนุณ ฺฉ ุณุงุชฺพ ูพุดฺฏ ูุงููนุฑูฺฏ ูุงุฆู ฺฉุฑฺบ

**ูุฏู**:  
1. HTTP 500 ุงุฑุฑุฒ ฺฉ ู ุงูุฑูน ุจูุงุฆฺบ:  
   ```sh
   # ุงูพูฺฉุดู ุงูุณุงุฆูนุณ ุฑุณูุฑุณ ุขุฆ ฺ ุญุงุตู ฺฉุฑฺบ
   AI_ID=$(az monitor app-insights component show \
     --app appi-<your-id> \
     --resource-group rg-<env-name> \
     --query id -o tsv)
   
   # ุงูุฑูน ุจูุงุฆฺบ
   az monitor metrics alert create \
     --name "High-Error-Rate" \
     --resource-group rg-<env-name> \
     --scopes $AI_ID \
     --condition "count requests/failed > 5" \
     --window-size 5m \
     --evaluation-frequency 1m \
     --description "Alert when >5 failed requests in 5 minutes"
   ```
  
2. ุงูุฑูน ฺฉู ูุนุงู ฺฉุฑู ฺฉ ู ุงุฑุฑุฒ ูพุฏุง ฺฉุฑฺบ:  
   ```sh
   # ุงฺฉ ุบุฑ ููุฌูุฏ ูพุฑูฺฺฉูน ฺฉ ุฏุฑุฎูุงุณุช ฺฉุฑฺบ
   for i in {1..10}; do curl https://app-<your-id>.azurewebsites.net/products/999; done
   ```
  
3. ฺฺฉ ฺฉุฑฺบ ฺฉ ุงูุฑูน ฺุงูู ูุง ุง ูฺบ:  
   - Azure ูพูุฑูนู โ Alerts โ Alert Rules  
   - ุงูพูุง ูู ฺฺฉ ฺฉุฑฺบ (ุงฺฏุฑ ุชุฑุชุจ ุฏุง ฺฏุง ู)  

**ฺฉุงูุงุจ ฺฉ ูุนุงุฑ**: ุงูุฑูน ุฑูู ููุชุฎุจ ูุ ุงุฑุฑุฒ ูพุฑ ูนุฑฺฏุฑ ูุ ูููนูฺฉุดู ููฺบ

---

### ูุดู 4: ฺูนุง ุจุณ ฺฉ ุงุณฺฉู ูฺบ ุชุจุฏูุงฺบ (ูุงุฑุงู ุณุทุญ)

**ููุตุฏ**: ูุง ูนุจู ุดุงูู ฺฉุฑฺบ ุงูุฑ ุงูพูฺฉุดู ฺฉู ุงุณ ุงุณุชุนูุงู ฺฉุฑู ฺฉ ู ุงูพ ฺูน ฺฉุฑฺบ

**ูุฏู**:  
1. Azure ูพูุฑูนู ฺฉ Query Editor ุณ SQL ฺูนุง ุจุณ ุณ ุฌฺฺบ

2. ูุง `categories` ูนุจู ุจูุงุฆฺบ:  
   ```sql
   CREATE TABLE categories (
       id INT PRIMARY KEY IDENTITY(1,1),
       name NVARCHAR(50) NOT NULL,
       description NVARCHAR(200)
   );
   
   INSERT INTO categories (name, description) VALUES
   ('Electronics', 'Electronic devices and accessories'),
   ('Office Supplies', 'Office equipment and supplies');
   
   -- Add category to products table
   ALTER TABLE products ADD category_id INT;
   UPDATE products SET category_id = 1; -- Set all to Electronics
   ```
  
3. `src/web/app.py` ฺฉู ุงูพ ฺูน ฺฉุฑฺบ ุชุงฺฉ ุฌูุงุจุงุช ูฺบ category ฺฉ ูุนูููุงุช ุดุงูู ู

4. ุชุนูุงุช ฺฉุฑฺบ ุงูุฑ ูนุณูน ฺฉุฑฺบ

**ฺฉุงูุงุจ ฺฉ ูุนุงุฑ**: ูุง ูนุจู ููุฌูุฏ ูุ ูพุฑูฺฺฉูนุณ ูฺบ category ูุนูููุงุช ุฏฺฉฺพุงุฆ ุฏุ ุงูพ ุงุจ ุจฺพ ฺฉุงู ฺฉุฑ ุฑ ู

---

### ูุดู 5: ฺฉุดูฺฏ ูุงูุฐ ฺฉุฑฺบ (ูุงุฑุงู)

**ููุตุฏ**: ฺฉุงุฑฺฉุฑุฏฺฏ ุจุชุฑ ุจูุงู ฺฉ ู Azure Redis Cache ุดุงูู ฺฉุฑฺบ

**ูุฏู**:  
1. `infra/main.bicep` ูฺบ Redis Cache ุดุงูู ฺฉุฑฺบ  
2. `src/web/app.py` ูฺบ ูพุฑูฺฺฉูน ฺฉุฆุฑุฒ ฺฉู ฺฉุด ฺฉุฑู ฺฉ ู ุงูพ ฺูน ฺฉุฑฺบ  
3. Application Insights ุณ ฺฉุงุฑฺฉุฑุฏฺฏ ฺฉ ุจุชุฑ ฺฉ ูพูุงุฆุด ฺฉุฑฺบ  
4. ฺฉุดูฺฏ ุณ ูพู ุงูุฑ ุจุนุฏ ฺฉ ุฑุฏุนูู ฺฉ ุงููุงุช ฺฉุง ููุงุฒู ฺฉุฑฺบ  

**ฺฉุงูุงุจ ฺฉ ูุนุงุฑ**: Redis ุชุนูุงุช ูุง ูุ ฺฉุดูฺฏ ฺฉุงู ฺฉุฑ ุฑ ูุ ุฑุฏุนูู ฺฉ ุงููุงุช >50% ุจุชุฑ ูุฆ ูฺบ

**ุงุดุงุฑ**: ุดุฑูุน ฺฉุฑฺบ [Azure Cache for Redis documentation](https://learn.microsoft.com/azure/azure-cache-for-redis/) ุณ

---

## ุตูุงุฆ

ูุณูุณู ฺุงุฑุฌุฒ ุณ ุจฺู ฺฉ ู ุชูุงู ุฑุณูุฑุณุฒ ฺฉู ุฎุชู ฺฉุฑฺบ:

```sh
azd down
```
  
**ุชุตุฏู ูพุฑุงููพูน**:  
```
? Total resources to delete: 7, are you sure you want to continue? (y/N)
```
  
`y` ูฺฉฺพ ฺฉุฑ ุชุตุฏู ฺฉุฑฺบ

**โ ฺฉุงูุงุจ ฺฉ ุฌุงูฺ**:  
- ุชูุงู ุฑุณูุฑุณุฒ Azure ูพูุฑูนู ุณ ุญุฐู ู ฺฺฉ ฺบ  
- ฺฉูุฆ ุงุถุงู ฺุงุฑุฌุฒ ูฺบ  
- ููุงู `.azure/<env-name>` ูููฺุฑ ุญุฐู ฺฉุง ุฌุง ุณฺฉุชุง   

**ูุชุจุงุฏู** (ุงููุฑุงุณูนุฑฺฉฺุฑ ุฑฺฉฺพฺบุ ฺูนุง ุญุฐู ฺฉุฑฺบ):  
```sh
# ุตุฑู ุฑุณูุฑุณ ฺฏุฑููพ ฺฉู ุญุฐู ฺฉุฑฺบ (AZD ฺฉููฺฏุฑุดู ฺฉู ุจุฑูุฑุงุฑ ุฑฺฉฺพฺบ)
az group delete --name rg-<env-name> --yes
```
  
## ูุฒุฏ ุฌุงูฺบ

### ูุชุนูู ุฏุณุชุงูุฒุงุช  
- [Azure Developer CLI Documentation](https://learn.microsoft.com/azure/developer/azure-developer-cli/)  
- [Azure SQL Database Documentation](https://learn.microsoft.com/azure/azure-sql/database/)  
- [Azure App Service Documentation](https://learn.microsoft.com/azure/app-service/)  
- [Application Insights Documentation](https://learn.microsoft.com/azure/azure-monitor/app/app-insights-overview)  
- [Bicep Language Reference](https://learn.microsoft.com/azure/azure-resource-manager/bicep/)  

### ุงุณ ฺฉูุฑุณ ฺฉ ุงฺฏู ูุฑุงุญู  
- **[Container Apps Example](../../../../examples/container-app)**: Azure Container Apps ฺฉ ุณุงุชฺพ ูุงุฆฺฉุฑู ุณุฑูุณุฒ ุชุนูุงุช ฺฉุฑฺบ  
- **[AI Integration Guide](../../../../docs/ai-foundry)**: ุงูพู ุงูพ ูฺบ AI ุตูุงุญุชฺบ ุดุงูู ฺฉุฑฺบ  
- **[Deployment Best Practices](../../docs/chapter-04-infrastructure/deployment-guide.md)**: ูพุฑูฺฺฉุดู ุชุนูุงุช ฺฉ ูููู  

### ูพุดุฑูุช ููุถูุนุงุช  
- **Managed Identity**: ูพุงุณ ูุฑฺ ูนุงุฆฺบ ุงูุฑ Azure AD authentication ุงุณุชุนูุงู ฺฉุฑฺบ  
- **Private Endpoints**: ฺูนุง ุจุณ ฺฉูฺฉุดูุฒ ฺฉู ูุฑฺูุฆู ููน ูุฑฺฉ ูฺบ ูุญููุธ ฺฉุฑฺบ  
- **CI/CD Integration**: GitHub Actions ุง Azure DevOps ฺฉ ุณุงุชฺพ ุชุนูุงุชุงฺบ ุฎูุฏฺฉุงุฑ ุจูุงุฆฺบ  
- **Multi-Environment**: ฺูููพูููนุ ุงุณูนุฌูฺฏุ ุงูุฑ ูพุฑูฺฺฉุดู ูุงุญูู ูุงุฆู ฺฉุฑฺบ  
- **Database Migrations**: Alembic ุง Entity Framework ฺฉุง ุงุณุชุนูุงู ฺฉุฑ ฺฉ ุงุณฺฉู ูุฑฺููฺฏ ฺฉุฑฺบ  

### ุฏฺฏุฑ ุทุฑููฺบ ุณ ููุงุฒู

**AZD ุจููุงุจู ARM Templates**:  
- โ AZD: ุจููุฏ ุณุทุญ abstractionุ ุณุงุฏ ฺฉูุงูฺุฒ  
- โ๏ธ ARM: ุฒุงุฏ ุชูุตู ูุงูุงุ granular ฺฉููนุฑูู  

**AZD ุจููุงุจู Terraform**:  
- โ AZD: Azure ููนูุ Azure ุณุฑูุณุฒ ฺฉ ุณุงุชฺพ ุถู ุดุฏ  
- โ๏ธ Terraform: ฺฉุซุฑ ฺฉูุงุคฺ ุณูพูุฑูนุ ูุณุน ูุงุญููุงุช ูุธุงู  

**AZD ุจููุงุจู Azure Portal**:  
- โ AZD: ูุงุจู ุชฺฉุฑุงุฑุ ูุฑฺู ฺฉููนุฑููุ ุฎูุฏฺฉุงุฑ  
- โ๏ธ ูพูุฑูนู: ุฏุณุช ฺฉูฺฉุณุ ุฏูุจุงุฑ ูพุฏุง ฺฉุฑูุง ูุดฺฉู  

**AZD ฺฉู ุงุณ ุทุฑุญ ุณูุฌฺพฺบ**: Docker Compose ุจุฑุงุฆ Azureโูพฺุฏ ุชุนูุงุชูฺบ ฺฉ ู ุขุณุงู ฺฉููฺฏุฑุดู

---

## ุงฺฉุซุฑ ูพูฺฺพ ุฌุงู ูุงู ุณูุงูุงุช

**ุณ: ฺฉุง ูฺบ ฺฉูุฆ ุงูุฑ ูพุฑูฺฏุฑุงููฺฏ ุฒุจุงู ุงุณุชุนูุงู ฺฉุฑ ุณฺฉุชุง ูฺบุ**  
ุฌ: ุงฺบ! `src/web/` ฺฉู Node.jsุ C#ุ Goุ ุง ฺฉุณ ุจฺพ ุฒุจุงู ุณ ุจุฏู ุฏฺบ `azure.yaml` ุงูุฑ Bicep ฺฉู accordingly ุงูพ ฺูน ฺฉุฑฺบ

**ุณ: ูุฒุฏ ฺูนุง ุจุณ ฺฉุณ ุดุงูู ฺฉุฑูฺบุ**  
ุฌ: `infra/main.bicep` ูฺบ ุฏูุณุฑุง SQL Database ูุงฺูู ุดุงูู ฺฉุฑฺบ ุง Azure ฺูนุง ุจุณ ุณุฑูุณุฒ ุณ PostgreSQL/MySQL ุงุณุชุนูุงู ฺฉุฑฺบ

**ุณ: ฺฉุง ูฺบ ุงุณ ูพุฑูฺฺฉุดู ฺฉ ู ุงุณุชุนูุงู ฺฉุฑ ุณฺฉุชุง ูฺบุ**  
ุฌ:  ุงฺฉ ุขุบุงุฒ  ูพุฑูฺฺฉุดู ฺฉ ู ุดุงูู ฺฉุฑฺบ: managed identityุ private endpointsุ redundancyุ ุจฺฉ ุงูพ ุญฺฉูุช ุนููุ WAFุ ุงูุฑ ุจุชุฑ ูุงููนุฑูฺฏ

**ุณ: ฺฉุง ูฺบ ฺฉูฺ ุชุนูุงุช ฺฉ ุฌฺฏ ฺฉููนูุฑุฒ ุงุณุชุนูุงู ฺฉุฑ ุณฺฉุชุง ูฺบุ**  
ุฌ: ุฏฺฉฺพฺบ [Container Apps Example](../../../../examples/container-app) ุฌู ูพูุฑ ุทุฑู ุณ Docker ฺฉููนูุฑุฒ ุงุณุชุนูุงู ฺฉุฑุชุง 

**ุณ: ูฺบ ุงูพู ููฺฉู ูุดู ุณ ฺูนุง ุจุณ ุณ ฺฉุณ ุฌฺูฺบุ**  
ุฌ: ุงูพูุง IP SQL ุณุฑูุฑ ูุงุฆุฑ ูุงู ูฺบ ุดุงูู ฺฉุฑฺบ:  
```sh
az sql server firewall-rule create \
  --resource-group rg-<env-name> \
  --server sql-<unique-id> \
  --name AllowMyIP \
  --start-ip-address <your-ip> \
  --end-ip-address <your-ip>
```
  
**ุณ: ฺฉุง ูฺบ ูุฆ ุจูุงู ฺฉ ุจุฌุงุฆ ููุฌูุฏ ฺูนุง ุจุณ ุงุณุชุนูุงู ฺฉุฑ ุณฺฉุชุง ูฺบุ**  
ุฌ: ุงฺบุ `infra/main.bicep` ูฺบ ููุฌูุฏ SQL ุณุฑูุฑ ฺฉุง ุญูุงู ุฏฺบ ุงูุฑ ฺฉูฺฉุดู ุณูนุฑูฺฏ ฺฉ ูพุฑุงููนุฑุฒ ุงูพ ฺูน ฺฉุฑฺบ

---

> **ูููน:**  ูุซุงู AZD ฺฉ ุฐุฑุน ูุจ ุงูพ ฺฉ ุณุงุชฺพ ฺูนุง ุจุณ ุชุนูุงุช ฺฉ ุจุชุฑู ุทุฑู ุฏฺฉฺพุงุช  ุงุณ ูฺบ ฺฉุงู ฺฉุฑู ูุงูุง ฺฉูฺุ ูฺฉูู ฺุงฺฉููููนุดูุ ุงูุฑ ุนูู ูุดูฺบ ุดุงูู ฺบ ุชุงฺฉ ุณฺฉฺพู ฺฉู ูุถุจูุท ฺฉุง ุฌุง ุณฺฉ ูพุฑูฺฺฉุดู ุชุนูุงุช ฺฉ ู ุงูพู ุชูุธู ฺฉ ุณฺฉูุฑูนุ ุงุณฺฉููฺฏุ ุชุนููุ ุงูุฑ ูุงฺฏุช ฺฉ ุชูุงุถ ุฏฺฉฺพฺบ

**๐ ฺฉูุฑุณ ููฺฏุดู:**  
- โ ูพฺฺพูุง: [Container Apps Example](../../../../examples/container-app)  
- โ ุงฺฏูุง: [AI Integration Guide](../../../../docs/ai-foundry)  
- ๐ [ฺฉูุฑุณ ูู](../../README.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**ุงุนูุงูู ุฏุณุชุจุฑุฏุงุฑ**:  
ุงุณ ุฏุณุชุงูุฒ ฺฉุง ุชุฑุฌู AI ุชุฑุฌู ุณุฑูุณ [Co-op Translator](https://github.com/Azure/co-op-translator) ฺฉ ุฐุฑุน ฺฉุง ฺฏุง  ู ุฏุฑุณุชฺฏ ฺฉ ู ฺฉูุดุงฺบ ฺบุ ูฺฏุฑ ุจุฑุง ฺฉุฑู ุงุณ ุจุงุช ฺฉุง ุฎุงู ุฑฺฉฺพฺบ ฺฉ ุฎูุฏฺฉุงุฑ ุชุฑุฌู ูฺบ ุบูุทุงฺบ ุง ุนุฏู ุฏุฑุณุชุงฺบ ู ุณฺฉุช ฺบ ุงุตู ุฏุณุชุงูุฒ ุฌู ุงูพู ูุงุฏุฑ ุฒุจุงู ูฺบ ุ ุงุณ ูุนุชุจุฑ ุฐุฑุน ุณูุฌฺพุง ุฌุงูุง ฺุง ุงู ูุนูููุงุช ฺฉ ู ูพุด ูุฑ ุงูุณุงู ุชุฑุฌู ฺฉ ุณูุงุฑุด ฺฉ ุฌุงุช  ู ุงุณ ุชุฑุฌู ฺฉ ุงุณุชุนูุงู ุณ ูพุฏุง ูู ูุงู ฺฉุณ ุจฺพ ุบูุท ูู ุง ุบูุท ุชุดุฑุญ ฺฉ ุฐู ุฏุงุฑ ูฺบ ฺบ
<!-- CO-OP TRANSLATOR DISCLAIMER END -->