# Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ú©Ø§ AZD Ú©Û’ Ø³Ø§ØªÚ¾ Ø§Ù†Ø¶Ù…Ø§Ù…

â±ï¸ **ØªØ®Ù…ÛŒÙ†ÛŒ ÙˆÙ‚Øª**: 40-50 Ù…Ù†Ù¹ | ğŸ’° **Ù„Ø§Ú¯Øª Ú©Ø§ Ø§Ø«Ø±**: ~$5-15/Ù…Ø§Û | â­ **Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ**: Ø¯Ø±Ù…ÛŒØ§Ù†ÛŒ

**ğŸ“š Ø³ÛŒÚ©Ú¾Ù†Û’ Ú©Ø§ Ø±Ø§Ø³ØªÛ:**
- â† Ù¾Ú†Ú¾Ù„Ø§: [Ù¾Ø±ÛŒ ÙÙ„Ø§Ø¦Ù¹ Ú†ÛŒÚ©Ø³](preflight-checks.md) - ØªØ¹ÛŒÙ†Ø§ØªÛŒ Ø³Û’ Ù¾ÛÙ„Û’ Ú©ÛŒ ØªÙˆØ«ÛŒÙ‚
- ğŸ¯ **Ø¢Ù¾ ÛŒÛØ§Úº ÛÛŒÚº**: Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ø§Ù†Ø¶Ù…Ø§Ù… (Ù…Ø§Ù†ÛŒÙ¹Ø±Ù†Ú¯ØŒ Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒØŒ ÚˆÛŒØ¨Ú¯Ù†Ú¯)
- â†’ Ø§Ú¯Ù„Ø§: [ØªØ¹ÛŒÙ†Ø§ØªÛŒ Ú¯Ø§Ø¦ÛŒÚˆ](../deployment/deployment-guide.md) - Azure Ù¾Ø± ØªØ¹ÛŒÙ†Ø§ØªÛŒ
- ğŸ  [Ú©ÙˆØ±Ø³ ÛÙˆÙ…](../../README.md)

---

## Ø¢Ù¾ Ú©ÛŒØ§ Ø³ÛŒÚ©Ú¾ÛŒÚº Ú¯Û’

Ø§Ø³ Ø³Ø¨Ù‚ Ú©Ùˆ Ù…Ú©Ù…Ù„ Ú©Ø±Ù†Û’ Ú©Û’ Ø¨Ø¹Ø¯ØŒ Ø¢Ù¾:
- **Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³** Ú©Ùˆ AZD Ù¾Ø±ÙˆØ¬ÛŒÚ©Ù¹Ø³ Ù…ÛŒÚº Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº Ú¯Û’
- **Ù…Ø§Ø¦ÛŒÚ©Ø±Ùˆ Ø³Ø±ÙˆØ³Ø²** Ú©Û’ Ù„ÛŒÛ’ ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ù¹Ø±ÛŒØ³Ù†Ú¯ Ú©Ùˆ ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº Ú¯Û’
- **Ú©Ø³Ù¹Ù… Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ** (Ù…ÛŒÙ¹Ø±Ú©Ø³ØŒ Ø§ÛŒÙˆÙ†Ù¹Ø³ØŒ ÚˆÛŒÙ¾ÛŒÙ†ÚˆÙ†Ø³ÛŒØ²) Ù†Ø§ÙØ° Ú©Ø±ÛŒÚº Ú¯Û’
- **Ù„Ø§Ø¦ÛŒÙˆ Ù…ÛŒÙ¹Ø±Ú©Ø³** Ú©Ùˆ Ø­Ù‚ÛŒÙ‚ÛŒ ÙˆÙ‚Øª Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ú©Û’ Ù„ÛŒÛ’ ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº Ú¯Û’
- AZD ØªØ¹ÛŒÙ†Ø§ØªÛŒÙˆÚº Ø³Û’ **Ø§Ù„Ø±Ù¹Ø³ Ø§ÙˆØ± ÚˆÛŒØ´ Ø¨ÙˆØ±ÚˆØ²** Ø¨Ù†Ø§Ø¦ÛŒÚº Ú¯Û’
- **Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ú©ÙˆØ¦Ø±ÛŒØ²** Ú©Û’ Ø°Ø±ÛŒØ¹Û’ Ù¾Ø±ÙˆÚˆÚ©Ø´Ù† Ù…Ø³Ø§Ø¦Ù„ Ú©Ùˆ ÚˆÛŒØ¨Ú¯ Ú©Ø±ÛŒÚº Ú¯Û’
- **Ù„Ø§Ú¯Øª Ø§ÙˆØ± Ø³ÛŒÙ…Ù¾Ù„Ù†Ú¯** Ø­Ú©Ù…Øª Ø¹Ù…Ù„ÛŒÙˆÚº Ú©Ùˆ Ø¨ÛØªØ± Ø¨Ù†Ø§Ø¦ÛŒÚº Ú¯Û’
- **AI/LLM Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù†Ø²** (Ù¹ÙˆÚ©Ù†Ø²ØŒ Ù„ÛŒÙ¹Ù†Ø³ÛŒØŒ Ù„Ø§Ú¯Øª) Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ú©Ø±ÛŒÚº Ú¯Û’

## AZD Ú©Û’ Ø³Ø§ØªÚ¾ Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ú©ÛŒÙˆÚº Ø§ÛÙ… ÛÛ’

### Ú†ÛŒÙ„Ù†Ø¬: Ù¾Ø±ÙˆÚˆÚ©Ø´Ù† Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ

**Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ú©Û’ Ø¨ØºÛŒØ±:**
```
âŒ No visibility into production behavior
âŒ Manual log aggregation across services
âŒ Reactive debugging (wait for customer complaints)
âŒ No performance metrics
âŒ Cannot trace requests across services
âŒ Unknown failure rates and bottlenecks
```

**Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ + AZD Ú©Û’ Ø³Ø§ØªÚ¾:**
```
âœ… Automatic telemetry collection
âœ… Centralized logs from all services
âœ… Proactive issue detection
âœ… End-to-end request tracing
âœ… Performance metrics and insights
âœ… Real-time dashboards
âœ… AZD provisions everything automatically
```

**ØªØ´Ø¨ÛŒÛ**: Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ø¢Ù¾ Ú©ÛŒ Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ú©Û’ Ù„ÛŒÛ’ "Ø¨Ù„ÛŒÚ© Ø¨Ø§Ú©Ø³" ÙÙ„Ø§Ø¦Ù¹ Ø±ÛŒÚ©Ø§Ø±ÚˆØ± + Ú©Ø§Ú© Ù¾Ù¹ ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ Ú©ÛŒ Ø·Ø±Ø­ ÛÛ’Û” Ø¢Ù¾ Ø­Ù‚ÛŒÙ‚ÛŒ ÙˆÙ‚Øª Ù…ÛŒÚº Ø³Ø¨ Ú©Ú†Ú¾ Ø¯ÛŒÚ©Ú¾ Ø³Ú©ØªÛ’ ÛÛŒÚº Ø§ÙˆØ± Ú©Ø³ÛŒ Ø¨Ú¾ÛŒ ÙˆØ§Ù‚Ø¹Û’ Ú©Ùˆ Ø¯ÙˆØ¨Ø§Ø±Û Ú†Ù„Ø§ Ø³Ú©ØªÛ’ ÛÛŒÚºÛ”

---

## Ø¢Ø±Ú©ÛŒÙ¹ÛŒÚ©Ú†Ø± Ú©Ø§ Ø¬Ø§Ø¦Ø²Û

### AZD Ø¢Ø±Ú©ÛŒÙ¹ÛŒÚ©Ú†Ø± Ù…ÛŒÚº Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³

```mermaid
graph TB
    User[ØµØ§Ø±Ù/Ú©Ù„Ø§Ø¦Ù†Ù¹]
    App1[Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾ 1<br/>API Ú¯ÛŒÙ¹ ÙˆÛ’]
    App2[Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾ 2<br/>Ù¾Ø±ÙˆÚˆÚ©Ù¹ Ø³Ø±ÙˆØ³]
    App3[Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾ 3<br/>Ø¢Ø±ÚˆØ± Ø³Ø±ÙˆØ³]
    
    AppInsights[Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³<br/>Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ø­Ø¨]
    LogAnalytics[(Ù„Ø§Ú¯ Ø§ÛŒÙ†Ø§Ù„ÛŒÙ¹Ú©Ø³<br/>ÙˆØ±Ú© Ø§Ø³Ù¾ÛŒØ³)]
    
    Portal[Ø§ÛŒÚ˜ÙˆØ± Ù¾ÙˆØ±Ù¹Ù„<br/>ÚˆÛŒØ´ Ø¨ÙˆØ±ÚˆØ² Ø§ÙˆØ± Ø§Ù„Ø±Ù¹Ø³]
    Query[Ú©ÙˆØ³Ù¹Ùˆ Ú©ÙˆØ¦Ø±ÛŒØ²<br/>Ú©Ø³Ù¹Ù… ØªØ¬Ø²ÛŒÛ]
    
    User --> App1
    App1 --> App2
    App2 --> App3
    
    App1 -.->|Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ù†Ø³Ù¹Ø±ÙˆÙ…Ù†Ù¹ÛŒØ´Ù†| AppInsights
    App2 -.->|Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ù†Ø³Ù¹Ø±ÙˆÙ…Ù†Ù¹ÛŒØ´Ù†| AppInsights
    App3 -.->|Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ù†Ø³Ù¹Ø±ÙˆÙ…Ù†Ù¹ÛŒØ´Ù†| AppInsights
    
    AppInsights --> LogAnalytics
    LogAnalytics --> Portal
    LogAnalytics --> Query
    
    style AppInsights fill:#9C27B0,stroke:#7B1FA2,stroke-width:3px,color:#fff
    style LogAnalytics fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
```
### Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± Ú©ÛŒØ§ Ù…Ø§Ù†ÛŒÙ¹Ø± ÛÙˆØªØ§ ÛÛ’

| Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ú©ÛŒ Ù‚Ø³Ù… | ÛŒÛ Ú©ÛŒØ§ Ù¾Ú©Ú‘ØªØ§ ÛÛ’ | Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø§ Ú©ÛŒØ³ |
|------------------|------------------|----------------|
| **Ø±ÛŒÚ©ÙˆÛŒØ³Ù¹Ø²** | HTTP Ø±ÛŒÚ©ÙˆÛŒØ³Ù¹Ø²ØŒ Ø§Ø³Ù¹ÛŒÙ¹Ø³ Ú©ÙˆÚˆØ²ØŒ Ø¯ÙˆØ±Ø§Ù†ÛŒÛ | API Ú©ÛŒ Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ |
| **ÚˆÛŒÙ¾ÛŒÙ†ÚˆÙ†Ø³ÛŒØ²** | Ø¨ÛŒØ±ÙˆÙ†ÛŒ Ú©Ø§Ù„Ø² (DBØŒ APIsØŒ Ø§Ø³Ù¹ÙˆØ±ÛŒØ¬) | Ø±Ú©Ø§ÙˆÙ¹ÙˆÚº Ú©ÛŒ Ø´Ù†Ø§Ø®Øª |
| **Ø§ÛŒÚ©Ø³Ù¾Ø´Ù†Ø²** | ØºÛŒØ± ÛÛŒÙ†ÚˆÙ„ Ø´Ø¯Û ØºÙ„Ø·ÛŒØ§Úº Ø§Ø³Ù¹ÛŒÚ© Ù¹Ø±ÛŒØ³Ø² Ú©Û’ Ø³Ø§ØªÚ¾ | Ù†Ø§Ú©Ø§Ù…ÛŒÙˆÚº Ú©Ùˆ ÚˆÛŒØ¨Ú¯ Ú©Ø±Ù†Ø§ |
| **Ú©Ø³Ù¹Ù… Ø§ÛŒÙˆÙ†Ù¹Ø³** | Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ Ø§ÛŒÙˆÙ†Ù¹Ø³ (Ø³Ø§Ø¦Ù† Ø§Ù¾ØŒ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ) | ØªØ¬Ø²ÛŒØ§Øª Ø§ÙˆØ± ÙÙ†Ù„Ø² |
| **Ù…ÛŒÙ¹Ø±Ú©Ø³** | Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ Ú©Û’ Ú©Ø§Ø¤Ù†Ù¹Ø±Ø²ØŒ Ú©Ø³Ù¹Ù… Ù…ÛŒÙ¹Ø±Ú©Ø³ | ØµÙ„Ø§Ø­ÛŒØª Ú©ÛŒ Ù…Ù†ØµÙˆØ¨Û Ø¨Ù†Ø¯ÛŒ |
| **Ù¹Ø±ÛŒØ³Ø²** | Ù„Ø§Ú¯ Ù¾ÛŒØºØ§Ù…Ø§Øª Ø´Ø¯Øª Ú©Û’ Ø³Ø§ØªÚ¾ | ÚˆÛŒØ¨Ú¯Ù†Ú¯ Ø§ÙˆØ± Ø¢ÚˆÙ¹Ù†Ú¯ |
| **Ø¯Ø³ØªÛŒØ§Ø¨ÛŒ** | Ø§Ù¾ Ù¹Ø§Ø¦Ù… Ø§ÙˆØ± Ø±Ø³Ù¾Ø§Ù†Ø³ Ù¹Ø§Ø¦Ù… Ù¹ÛŒØ³Ù¹Ø³ | SLA Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ |

---

## Ø¶Ø±ÙˆØ±ÛŒØ§Øª

### Ù…Ø·Ù„ÙˆØ¨Û Ù¹ÙˆÙ„Ø²

```bash
# Azure Developer CLI Ú©ÛŒ ØªØµØ¯ÛŒÙ‚ Ú©Ø±ÛŒÚº
azd version
# âœ… Ù…ØªÙˆÙ‚Ø¹: azd ÙˆØ±Ú˜Ù† 1.0.0 ÛŒØ§ Ø§Ø³ Ø³Û’ Ø²ÛŒØ§Ø¯Û

# Azure CLI Ú©ÛŒ ØªØµØ¯ÛŒÙ‚ Ú©Ø±ÛŒÚº
az --version
# âœ… Ù…ØªÙˆÙ‚Ø¹: azure-cli 2.50.0 ÛŒØ§ Ø§Ø³ Ø³Û’ Ø²ÛŒØ§Ø¯Û
```

### Azure Ú©ÛŒ Ø¶Ø±ÙˆØ±ÛŒØ§Øª

- ÙØ¹Ø§Ù„ Azure Ø³Ø¨Ø³Ú©Ø±Ù¾Ø´Ù†
- ØªØ®Ù„ÛŒÙ‚ Ú©Ø±Ù†Û’ Ú©ÛŒ Ø§Ø¬Ø§Ø²Øª:
  - Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ ÙˆØ³Ø§Ø¦Ù„
  - Ù„Ø§Ú¯ Ø§ÛŒÙ†Ø§Ù„ÛŒÙ¹Ú©Ø³ ÙˆØ±Ú© Ø§Ø³Ù¾ÛŒØ³Ø²
  - Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾Ø³
  - Ø±ÛŒØ³ÙˆØ±Ø³ Ú¯Ø±ÙˆÙ¾Ø³

### Ø¹Ù„Ù… Ú©ÛŒ Ø¶Ø±ÙˆØ±ÛŒØ§Øª

Ø¢Ù¾ Ú©Ùˆ Ù…Ú©Ù…Ù„ Ú©Ø±Ù†Ø§ Ú†Ø§ÛÛŒÛ’:
- [AZD Ø¨Ù†ÛŒØ§Ø¯ÛŒ Ø¨Ø§ØªÛŒÚº](../getting-started/azd-basics.md) - AZD Ú©Û’ Ø¨Ù†ÛŒØ§Ø¯ÛŒ ØªØµÙˆØ±Ø§Øª
- [Ú©Ù†ÙÛŒÚ¯Ø±ÛŒØ´Ù†](../getting-started/configuration.md) - Ù…Ø§Ø­ÙˆÙ„ Ú©ÛŒ ØªØ±ØªÛŒØ¨
- [Ù¾ÛÙ„Ø§ Ù¾Ø±ÙˆØ¬ÛŒÚ©Ù¹](../getting-started/first-project.md) - Ø¨Ù†ÛŒØ§Ø¯ÛŒ ØªØ¹ÛŒÙ†Ø§ØªÛŒ

---

## Ø³Ø¨Ù‚ 1: AZD Ú©Û’ Ø³Ø§ØªÚ¾ Ø®ÙˆØ¯Ú©Ø§Ø± Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³

### AZD Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ú©Ùˆ Ú©ÛŒØ³Û’ ÙØ±Ø§ÛÙ… Ú©Ø±ØªØ§ ÛÛ’

AZD Ø¢Ù¾ Ú©ÛŒ ØªØ¹ÛŒÙ†Ø§ØªÛŒ Ú©Û’ ÙˆÙ‚Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ ØªØ®Ù„ÛŒÙ‚ Ø§ÙˆØ± ØªØ±ØªÛŒØ¨ Ø¯ÛŒØªØ§ ÛÛ’Û” Ø¢Ø¦ÛŒÛ’ Ø¯ÛŒÚ©Ú¾ØªÛ’ ÛÛŒÚº ÛŒÛ Ú©ÛŒØ³Û’ Ú©Ø§Ù… Ú©Ø±ØªØ§ ÛÛ’Û”

### Ù¾Ø±ÙˆØ¬ÛŒÚ©Ù¹ Ú©Ø§ ÚˆÚ¾Ø§Ù†Ú†Û

```
monitored-app/
â”œâ”€â”€ azure.yaml                     # AZD configuration
â”œâ”€â”€ infra/
â”‚   â”œâ”€â”€ main.bicep                # Main infrastructure
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ monitoring.bicep      # Application Insights + Log Analytics
â”‚   â””â”€â”€ app/
â”‚       â””â”€â”€ api.bicep             # Container App with monitoring
â””â”€â”€ src/
    â”œâ”€â”€ app.py                    # Application with telemetry
    â”œâ”€â”€ requirements.txt
    â””â”€â”€ Dockerfile
```

---

### Ù…Ø±Ø­Ù„Û 1: AZD Ú©Ùˆ ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº (azure.yaml)

**ÙØ§Ø¦Ù„: `azure.yaml`**

```yaml
name: monitored-app
metadata:
  template: monitored-app@1.0.0

services:
  api:
    project: ./src
    language: python
    host: containerapp

# AZD automatically provisions monitoring!
```

**Ø¨Ø³ Ø§ØªÙ†Ø§ ÛÛŒ!** AZD Ø¨Ù†ÛŒØ§Ø¯ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ú©Û’ Ù„ÛŒÛ’ ÚˆÛŒÙØ§Ù„Ù¹ Ø·ÙˆØ± Ù¾Ø± Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ ØªØ®Ù„ÛŒÙ‚ Ú©Ø±Û’ Ú¯Ø§Û” Ø§Ø¶Ø§ÙÛŒ ØªØ±ØªÛŒØ¨ Ú©ÛŒ Ø¶Ø±ÙˆØ±Øª Ù†ÛÛŒÚºÛ”

---

### Ù…Ø±Ø­Ù„Û 2: Ù…Ø§Ù†ÛŒÙ¹Ø±Ù†Ú¯ Ø§Ù†ÙØ±Ø§Ø³Ù¹Ø±Ú©Ú†Ø± (Bicep)

**ÙØ§Ø¦Ù„: `infra/core/monitoring.bicep`**

```bicep
param logAnalyticsName string
param applicationInsightsName string
param location string = resourceGroup().location
param tags object = {}

// Log Analytics Workspace (required for Application Insights)
resource logAnalytics 'Microsoft.OperationalInsights/workspaces@2022-10-01' = {
  name: logAnalyticsName
  location: location
  tags: tags
  properties: {
    sku: {
      name: 'PerGB2018'  // Pay-as-you-go pricing
    }
    retentionInDays: 30  // Keep logs for 30 days
    features: {
      enableLogAccessUsingOnlyResourcePermissions: true
    }
  }
}

// Application Insights
resource applicationInsights 'Microsoft.Insights/components@2020-02-02' = {
  name: applicationInsightsName
  location: location
  tags: tags
  kind: 'web'
  properties: {
    Application_Type: 'web'
    WorkspaceResourceId: logAnalytics.id
    IngestionMode: 'LogAnalytics'
    publicNetworkAccessForIngestion: 'Enabled'
    publicNetworkAccessForQuery: 'Enabled'
  }
}

// Outputs for Container Apps
output logAnalyticsWorkspaceId string = logAnalytics.id
output logAnalyticsWorkspaceName string = logAnalytics.name
output applicationInsightsConnectionString string = applicationInsights.properties.ConnectionString
output applicationInsightsInstrumentationKey string = applicationInsights.properties.InstrumentationKey
output applicationInsightsName string = applicationInsights.name
```

---

### Ù…Ø±Ø­Ù„Û 3: Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾ Ú©Ùˆ Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ø³Û’ Ø¬ÙˆÚ‘ÛŒÚº

**ÙØ§Ø¦Ù„: `infra/app/api.bicep`**

```bicep
param name string
param location string
param tags object = {}
param containerAppsEnvironmentName string
param applicationInsightsConnectionString string

resource containerApp 'Microsoft.App/containerApps@2023-05-01' = {
  name: name
  location: location
  tags: tags
  properties: {
    configuration: {
      ingress: {
        external: true
        targetPort: 8000
      }
      secrets: [
        {
          name: 'appinsights-connection-string'
          value: applicationInsightsConnectionString
        }
      ]
    }
    template: {
      containers: [
        {
          name: 'api'
          image: 'myregistry.azurecr.io/api:latest'
          resources: {
            cpu: json('0.5')
            memory: '1Gi'
          }
          env: [
            {
              name: 'APPLICATIONINSIGHTS_CONNECTION_STRING'
              secretRef: 'appinsights-connection-string'
            }
            {
              name: 'APPLICATIONINSIGHTS_ENABLED'
              value: 'true'
            }
          ]
        }
      ]
    }
  }
}

output uri string = 'https://${containerApp.properties.configuration.ingress.fqdn}'
```

---

### Ù…Ø±Ø­Ù„Û 4: Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ú©Û’ Ø³Ø§ØªÚ¾ Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ú©ÙˆÚˆ

**ÙØ§Ø¦Ù„: `src/app.py`**

```python
from flask import Flask, request, jsonify
from opencensus.ext.azure.log_exporter import AzureLogHandler
from opencensus.ext.azure.trace_exporter import AzureExporter
from opencensus.ext.flask.flask_middleware import FlaskMiddleware
from opencensus.trace.samplers import ProbabilitySampler
import logging
import os

app = Flask(__name__)

# Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ú©Ù†Ú©Ø´Ù† Ø³Ù¹Ø±Ù†Ú¯ Ø­Ø§ØµÙ„ Ú©Ø±ÛŒÚº
connection_string = os.environ.get('APPLICATIONINSIGHTS_CONNECTION_STRING')

if connection_string:
    # ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ù¹Ø±ÛŒØ³Ù†Ú¯ ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº
    middleware = FlaskMiddleware(
        app,
        exporter=AzureExporter(connection_string=connection_string),
        sampler=ProbabilitySampler(rate=1.0)  # ÚˆÙˆÛŒÙ„Ù¾Ù…Ù†Ù¹ Ú©Û’ Ù„Ø¦Û’ 100% Ø³ÛŒÙ…Ù¾Ù„Ù†Ú¯
    )
    
    # Ù„Ø§Ú¯Ù†Ú¯ ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº
    logger = logging.getLogger(__name__)
    logger.addHandler(AzureLogHandler(connection_string=connection_string))
    logger.setLevel(logging.INFO)
    
    print("âœ… Application Insights enabled")
else:
    logger = logging.getLogger(__name__)
    logger.setLevel(logging.INFO)
    print("âš ï¸ Application Insights not configured")

@app.route('/health')
def health():
    logger.info('Health check endpoint called')
    return jsonify({'status': 'healthy', 'monitoring': 'enabled'})

@app.route('/api/products')
def get_products():
    logger.info('Fetching products')
    
    # ÚˆÛŒÙ¹Ø§ Ø¨ÛŒØ³ Ú©Ø§Ù„ Ú©ÛŒ Ù†Ù‚Ù„ Ú©Ø±ÛŒÚº (Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± Ø§Ù†Ø­ØµØ§Ø± Ú©Û’ Ø·ÙˆØ± Ù¾Ø± Ù¹Ø±ÛŒÚ© Ú©ÛŒØ§ Ú¯ÛŒØ§)
    products = [
        {'id': 1, 'name': 'Laptop', 'price': 999.99},
        {'id': 2, 'name': 'Mouse', 'price': 29.99},
        {'id': 3, 'name': 'Keyboard', 'price': 79.99}
    ]
    
    logger.info(f'Returned {len(products)} products')
    return jsonify(products)

@app.route('/api/error-test')
def error_test():
    """Test error tracking"""
    logger.error('Testing error tracking')
    try:
        raise ValueError('This is a test exception')
    except Exception as e:
        logger.exception('Exception occurred in error-test endpoint')
        return jsonify({'error': str(e)}), 500

@app.route('/api/slow')
def slow_endpoint():
    """Test performance tracking"""
    import time
    logger.info('Slow endpoint called')
    time.sleep(3)  # Ø³Ø³Øª Ø¢Ù¾Ø±ÛŒØ´Ù† Ú©ÛŒ Ù†Ù‚Ù„ Ú©Ø±ÛŒÚº
    logger.warning('Endpoint took 3 seconds to respond')
    return jsonify({'message': 'Slow operation completed'})

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8000)
```

**ÙØ§Ø¦Ù„: `src/requirements.txt`**

```txt
Flask==3.0.0
opencensus-ext-azure==1.1.13
opencensus-ext-flask==0.8.1
gunicorn==21.2.0
```

---

### Ù…Ø±Ø­Ù„Û 5: ØªØ¹ÛŒÙ†Ø§ØªÛŒ Ø§ÙˆØ± ØªØµØ¯ÛŒÙ‚ Ú©Ø±ÛŒÚº

```bash
# AZD Ú©Ùˆ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº
azd init

# ØªØ¹ÛŒÙ† Ú©Ø±ÛŒÚº (Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ ÙØ±Ø§ÛÙ… Ú©Ø±ØªØ§ ÛÛ’)
azd up

# Ø§ÛŒÙ¾ Ú©Ø§ URL Ø­Ø§ØµÙ„ Ú©Ø±ÛŒÚº
APP_URL=$(azd env get-values | grep API_URL | cut -d '=' -f2 | tr -d '"')

# Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ ØªÛŒØ§Ø± Ú©Ø±ÛŒÚº
curl $APP_URL/health
curl $APP_URL/api/products
curl $APP_URL/api/error-test
curl $APP_URL/api/slow
```

**âœ… Ù…ØªÙˆÙ‚Ø¹ Ù†ØªÛŒØ¬Û:**
```json
{
  "status": "healthy",
  "monitoring": "enabled"
}
```

---

### Ù…Ø±Ø­Ù„Û 6: Azure Ù¾ÙˆØ±Ù¹Ù„ Ù…ÛŒÚº Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ø¯ÛŒÚ©Ú¾ÛŒÚº

```bash
# Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ú©ÛŒ ØªÙØµÛŒÙ„Ø§Øª Ø­Ø§ØµÙ„ Ú©Ø±ÛŒÚº
azd env get-values | grep APPLICATIONINSIGHTS

# Ø§ÛŒØ²ÙˆØ± Ù¾ÙˆØ±Ù¹Ù„ Ù…ÛŒÚº Ú©Ú¾ÙˆÙ„ÛŒÚº
az monitor app-insights component show \
  --app $(azd env get-values | grep APPLICATIONINSIGHTS_NAME | cut -d '=' -f2 | tr -d '"') \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --query "appId" -o tsv
```

**Azure Ù¾ÙˆØ±Ù¹Ù„ â†’ Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ â†’ Ù¹Ø±Ø§Ù†Ø²ÛŒÚ©Ø´Ù† Ø³Ø±Ú† Ù¾Ø± Ø¬Ø§Ø¦ÛŒÚº**

Ø¢Ù¾ Ú©Ùˆ Ø¯ÛŒÚ©Ú¾Ù†Ø§ Ú†Ø§ÛÛŒÛ’:
- âœ… HTTP Ø±ÛŒÚ©ÙˆÛŒØ³Ù¹Ø² Ø§Ø³Ù¹ÛŒÙ¹Ø³ Ú©ÙˆÚˆØ² Ú©Û’ Ø³Ø§ØªÚ¾
- âœ… Ø±ÛŒÚ©ÙˆÛŒØ³Ù¹ Ú©Ø§ Ø¯ÙˆØ±Ø§Ù†ÛŒÛ (`/api/slow` Ú©Û’ Ù„ÛŒÛ’ 3+ Ø³ÛŒÚ©Ù†Úˆ)
- âœ… `/api/error-test` Ø³Û’ Ø§ÛŒÚ©Ø³Ù¾Ø´Ù† Ú©ÛŒ ØªÙØµÛŒÙ„Ø§Øª
- âœ… Ú©Ø³Ù¹Ù… Ù„Ø§Ú¯ Ù¾ÛŒØºØ§Ù…Ø§Øª

---

## Ø³Ø¨Ù‚ 2: Ú©Ø³Ù¹Ù… Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ø§ÙˆØ± Ø§ÛŒÙˆÙ†Ù¹Ø³

### Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ Ø§ÛŒÙˆÙ†Ù¹Ø³ Ú©Ùˆ Ù¹Ø±ÛŒÚ© Ú©Ø±ÛŒÚº

Ø¢Ø¦ÛŒÛ’ Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ Ø§ÛÙ…ÛŒØª Ú©Û’ Ø­Ø§Ù…Ù„ Ø§ÛŒÙˆÙ†Ù¹Ø³ Ú©Û’ Ù„ÛŒÛ’ Ú©Ø³Ù¹Ù… Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚºÛ”

**ÙØ§Ø¦Ù„: `src/telemetry.py`**

```python
from opencensus.ext.azure import metrics_exporter
from opencensus.stats import aggregation as aggregation_module
from opencensus.stats import measure as measure_module
from opencensus.stats import stats as stats_module
from opencensus.stats import view as view_module
from opencensus.tags import tag_map as tag_map_module
from opencensus.ext.azure.log_exporter import AzureLogHandler
from opencensus.ext.azure.trace_exporter import AzureExporter
from opencensus.trace import tracer as tracer_module
import logging
import os

class TelemetryClient:
    """Custom telemetry client for Application Insights"""
    
    def __init__(self, connection_string=None):
        self.connection_string = connection_string or os.environ.get('APPLICATIONINSIGHTS_CONNECTION_STRING')
        
        if not self.connection_string:
            print("âš ï¸ Application Insights connection string not found")
            return
        
        # Ù„Ø§Ú¯Ø± ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº
        self.logger = logging.getLogger(__name__)
        self.logger.addHandler(AzureLogHandler(connection_string=self.connection_string))
        self.logger.setLevel(logging.INFO)
        
        # Ù…ÛŒÙ¹Ø±Ú©Ø³ Ø§ÛŒÚ©Ø³Ù¾ÙˆØ±Ù¹Ø± ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº
        self.stats = stats_module.stats
        self.view_manager = self.stats.view_manager
        self.stats_recorder = self.stats.stats_recorder
        
        exporter = metrics_exporter.new_metrics_exporter(
            connection_string=self.connection_string
        )
        self.view_manager.register_exporter(exporter)
        
        # Ù¹Ø±ÛŒØ³Ø± ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº
        self.tracer = tracer_module.Tracer(
            exporter=AzureExporter(connection_string=self.connection_string)
        )
        
        print("âœ… Custom telemetry client initialized")
    
    def track_event(self, event_name: str, properties: dict = None):
        """Track custom business event"""
        properties = properties or {}
        self.logger.info(
            f"CustomEvent: {event_name}",
            extra={
                'custom_dimensions': {
                    'event_name': event_name,
                    **properties
                }
            }
        )
    
    def track_metric(self, metric_name: str, value: float, properties: dict = None):
        """Track custom metric"""
        properties = properties or {}
        self.logger.info(
            f"CustomMetric: {metric_name} = {value}",
            extra={
                'custom_dimensions': {
                    'metric_name': metric_name,
                    'value': value,
                    **properties
                }
            }
        )
    
    def track_dependency(self, name: str, dependency_type: str, duration: float, success: bool):
        """Track external dependency call"""
        with self.tracer.span(name=name) as span:
            span.add_attribute('dependency.type', dependency_type)
            span.add_attribute('duration', duration)
            span.add_attribute('success', success)

# Ø¹Ø§Ù„Ù…ÛŒ Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ú©Ù„Ø§Ø¦Ù†Ù¹
telemetry = TelemetryClient()
```

### Ú©Ø³Ù¹Ù… Ø§ÛŒÙˆÙ†Ù¹Ø³ Ú©Û’ Ø³Ø§ØªÚ¾ Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ú©Ùˆ Ø§Ù¾ ÚˆÛŒÙ¹ Ú©Ø±ÛŒÚº

**ÙØ§Ø¦Ù„: `src/app.py` (Ø¨ÛØªØ± Ø´Ø¯Û)**

```python
from flask import Flask, request, jsonify
from telemetry import telemetry
import time
import random

app = Flask(__name__)

@app.route('/api/purchase', methods=['POST'])
def purchase():
    """Track purchase event with custom telemetry"""
    data = request.json
    product_id = data.get('product_id')
    quantity = data.get('quantity', 1)
    price = data.get('price', 0)
    
    # Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ ÙˆØ§Ù‚Ø¹Û Ú©Ø§ Ù¾ØªÛ Ù„Ú¯Ø§Ø¦ÛŒÚº
    telemetry.track_event('Purchase', {
        'product_id': product_id,
        'quantity': quantity,
        'total_amount': price * quantity,
        'user_id': request.headers.get('X-User-Id', 'anonymous')
    })
    
    # Ø¢Ù…Ø¯Ù†ÛŒ Ù…ÛŒÙ¹Ø±Ú© Ú©Ø§ Ù¾ØªÛ Ù„Ú¯Ø§Ø¦ÛŒÚº
    telemetry.track_metric('Revenue', price * quantity, {
        'product_id': product_id,
        'currency': 'USD'
    })
    
    return jsonify({
        'order_id': f'ORD-{random.randint(1000, 9999)}',
        'status': 'confirmed',
        'total': price * quantity
    })

@app.route('/api/search')
def search():
    """Track search queries"""
    query = request.args.get('q', '')
    
    start_time = time.time()
    
    # ØªÙ„Ø§Ø´ Ú©ÛŒ Ù†Ù‚Ù„ Ú©Ø±ÛŒÚº (ÛŒÛ Ø­Ù‚ÛŒÙ‚ÛŒ ÚˆÛŒÙ¹Ø§ Ø¨ÛŒØ³ Ú©ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÛÙˆÚ¯ÛŒ)
    results = [{'id': 1, 'name': f'Result for {query}'}]
    
    duration = (time.time() - start_time) * 1000  # Ù…Ù„ÛŒ Ø³ÛŒÚ©Ù†Úˆ Ù…ÛŒÚº ØªØ¨Ø¯ÛŒÙ„ Ú©Ø±ÛŒÚº
    
    # ØªÙ„Ø§Ø´ Ú©Û’ ÙˆØ§Ù‚Ø¹Û Ú©Ø§ Ù¾ØªÛ Ù„Ú¯Ø§Ø¦ÛŒÚº
    telemetry.track_event('Search', {
        'query': query,
        'results_count': len(results),
        'duration_ms': duration
    })
    
    # ØªÙ„Ø§Ø´ Ú©ÛŒ Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ Ù…ÛŒÙ¹Ø±Ú© Ú©Ø§ Ù¾ØªÛ Ù„Ú¯Ø§Ø¦ÛŒÚº
    telemetry.track_metric('SearchDuration', duration, {
        'query_length': len(query)
    })
    
    return jsonify({'results': results, 'count': len(results)})

@app.route('/api/external-call')
def external_call():
    """Track external API dependency"""
    import requests
    
    start_time = time.time()
    success = True
    
    try:
        # Ø¨ÛŒØ±ÙˆÙ†ÛŒ API Ú©Ø§Ù„ Ú©ÛŒ Ù†Ù‚Ù„ Ú©Ø±ÛŒÚº
        response = requests.get('https://api.example.com/data', timeout=5)
        result = response.json()
    except Exception as e:
        success = False
        result = {'error': str(e)}
    
    duration = (time.time() - start_time) * 1000
    
    # Ø§Ù†Ø­ØµØ§Ø± Ú©Ø§ Ù¾ØªÛ Ù„Ú¯Ø§Ø¦ÛŒÚº
    telemetry.track_dependency(
        name='ExternalAPI',
        dependency_type='HTTP',
        duration=duration,
        success=success
    )
    
    return jsonify(result)

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8000)
```

### Ú©Ø³Ù¹Ù… Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ú©ÛŒ Ø¬Ø§Ù†Ú† Ú©Ø±ÛŒÚº

```bash
# Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ú©Û’ ÙˆØ§Ù‚Ø¹Û Ú©Ùˆ Ù¹Ø±ÛŒÚ© Ú©Ø±ÛŒÚº
curl -X POST $APP_URL/api/purchase \
  -H "Content-Type: application/json" \
  -H "X-User-Id: user123" \
  -d '{"product_id": 1, "quantity": 2, "price": 29.99}'

# ØªÙ„Ø§Ø´ Ú©Û’ ÙˆØ§Ù‚Ø¹Û Ú©Ùˆ Ù¹Ø±ÛŒÚ© Ú©Ø±ÛŒÚº
curl "$APP_URL/api/search?q=laptop"

# Ø¨ÛŒØ±ÙˆÙ†ÛŒ Ø§Ù†Ø­ØµØ§Ø± Ú©Ùˆ Ù¹Ø±ÛŒÚ© Ú©Ø±ÛŒÚº
curl $APP_URL/api/external-call
```

**Azure Ù¾ÙˆØ±Ù¹Ù„ Ù…ÛŒÚº Ø¯ÛŒÚ©Ú¾ÛŒÚº:**

Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ â†’ Ù„Ø§Ú¯Ø² Ù¾Ø± Ø¬Ø§Ø¦ÛŒÚºØŒ Ù¾Ú¾Ø± Ú†Ù„Ø§Ø¦ÛŒÚº:

```kusto
// View purchase events
traces
| where customDimensions.event_name == "Purchase"
| project 
    timestamp,
    product_id = tostring(customDimensions.product_id),
    total_amount = todouble(customDimensions.total_amount),
    user_id = tostring(customDimensions.user_id)
| order by timestamp desc

// View revenue metrics
traces
| where customDimensions.metric_name == "Revenue"
| summarize TotalRevenue = sum(todouble(customDimensions.value)) by bin(timestamp, 1h)
| render timechart

// View search performance
traces
| where customDimensions.event_name == "Search"
| summarize 
    AvgDuration = avg(todouble(customDimensions.duration_ms)),
    SearchCount = count()
  by bin(timestamp, 5m)
| render timechart
```

---

## Ø³Ø¨Ù‚ 3: Ù…Ø§Ø¦ÛŒÚ©Ø±Ùˆ Ø³Ø±ÙˆØ³Ø² Ú©Û’ Ù„ÛŒÛ’ ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ù¹Ø±ÛŒØ³Ù†Ú¯

### Ú©Ø±Ø§Ø³ Ø³Ø±ÙˆØ³ Ù¹Ø±ÛŒØ³Ù†Ú¯ Ú©Ùˆ ÙØ¹Ø§Ù„ Ú©Ø±ÛŒÚº

Ù…Ø§Ø¦ÛŒÚ©Ø±Ùˆ Ø³Ø±ÙˆØ³Ø² Ú©Û’ Ù„ÛŒÛ’ØŒ Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± Ø³Ø±ÙˆØ³Ø² Ú©Û’ Ø¯Ø±Ù…ÛŒØ§Ù† Ø±ÛŒÚ©ÙˆÛŒØ³Ù¹Ø² Ú©Ùˆ Ù…Ø±Ø¨ÙˆØ· Ú©Ø±ØªØ§ ÛÛ’Û”

**ÙØ§Ø¦Ù„: `infra/main.bicep`**

```bicep
targetScope = 'subscription'

param environmentName string
param location string = 'eastus'

var tags = { 'azd-env-name': environmentName }

resource rg 'Microsoft.Resources/resourceGroups@2021-04-01' = {
  name: 'rg-${environmentName}'
  location: location
  tags: tags
}

// Monitoring (shared by all services)
module monitoring './core/monitoring.bicep' = {
  name: 'monitoring'
  scope: rg
  params: {
    logAnalyticsName: 'log-${environmentName}'
    applicationInsightsName: 'appi-${environmentName}'
    location: location
    tags: tags
  }
}

// API Gateway
module apiGateway './app/api-gateway.bicep' = {
  name: 'api-gateway'
  scope: rg
  params: {
    name: 'ca-gateway-${environmentName}'
    location: location
    tags: union(tags, { 'azd-service-name': 'gateway' })
    applicationInsightsConnectionString: monitoring.outputs.applicationInsightsConnectionString
  }
}

// Product Service
module productService './app/product-service.bicep' = {
  name: 'product-service'
  scope: rg
  params: {
    name: 'ca-products-${environmentName}'
    location: location
    tags: union(tags, { 'azd-service-name': 'products' })
    applicationInsightsConnectionString: monitoring.outputs.applicationInsightsConnectionString
  }
}

// Order Service
module orderService './app/order-service.bicep' = {
  name: 'order-service'
  scope: rg
  params: {
    name: 'ca-orders-${environmentName}'
    location: location
    tags: union(tags, { 'azd-service-name': 'orders' })
    applicationInsightsConnectionString: monitoring.outputs.applicationInsightsConnectionString
  }
}

output APPLICATIONINSIGHTS_CONNECTION_STRING string = monitoring.outputs.applicationInsightsConnectionString
output GATEWAY_URL string = apiGateway.outputs.uri
```

### Ø§ÛŒÙ†Úˆ Ù¹Ùˆ Ø§ÛŒÙ†Úˆ Ù¹Ø±Ø§Ù†Ø²ÛŒÚ©Ø´Ù† Ø¯ÛŒÚ©Ú¾ÛŒÚº

```mermaid
sequenceDiagram
    participant User
    participant Gateway as API Gateway<br/>(Ù¹Ø±ÛŒÚ© Ø¢Ø¦ÛŒ ÚˆÛŒ: abc123)
    participant Product as Ù¾Ø±ÙˆÚˆÚ©Ù¹ Ø³Ø±ÙˆØ³<br/>(Ù¾ÛŒØ±Ù†Ù¹ Ø¢Ø¦ÛŒ ÚˆÛŒ: abc123)
    participant Order as Ø¢Ø±ÚˆØ± Ø³Ø±ÙˆØ³<br/>(Ù¾ÛŒØ±Ù†Ù¹ Ø¢Ø¦ÛŒ ÚˆÛŒ: abc123)
    participant AppInsights as Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³
    
    User->>Gateway: Ù¾ÙˆØ³Ù¹ /api/checkout
    Note over Gateway: Ù¹Ø±ÛŒÚ© Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº: abc123
    Gateway->>AppInsights: Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù„Ø§Ú¯ Ú©Ø±ÛŒÚº (Ù¹Ø±ÛŒÚ© Ø¢Ø¦ÛŒ ÚˆÛŒ: abc123)
    
    Gateway->>Product: Ø­Ø§ØµÙ„ Ú©Ø±ÛŒÚº /products/123
    Note over Product: Ù¾ÛŒØ±Ù†Ù¹ Ø¢Ø¦ÛŒ ÚˆÛŒ: abc123
    Product->>AppInsights: Ø§Ù†Ø­ØµØ§Ø± Ú©Ø§Ù„ Ù„Ø§Ú¯ Ú©Ø±ÛŒÚº
    Product-->>Gateway: Ù¾Ø±ÙˆÚˆÚ©Ù¹ Ú©ÛŒ ØªÙØµÛŒÙ„Ø§Øª
    
    Gateway->>Order: Ù¾ÙˆØ³Ù¹ /orders
    Note over Order: Ù¾ÛŒØ±Ù†Ù¹ Ø¢Ø¦ÛŒ ÚˆÛŒ: abc123
    Order->>AppInsights: Ø§Ù†Ø­ØµØ§Ø± Ú©Ø§Ù„ Ù„Ø§Ú¯ Ú©Ø±ÛŒÚº
    Order-->>Gateway: Ø¢Ø±ÚˆØ± Ø¨Ù†Ø§ÛŒØ§ Ú¯ÛŒØ§
    
    Gateway-->>User: Ú†ÛŒÚ© Ø¢Ø¤Ù¹ Ù…Ú©Ù…Ù„
    Gateway->>AppInsights: Ø¬ÙˆØ§Ø¨ Ù„Ø§Ú¯ Ú©Ø±ÛŒÚº (Ø¯ÙˆØ±Ø§Ù†ÛŒÛ: 450ms)
    
    Note over AppInsights: Ù¹Ø±ÛŒÚ© Ø¢Ø¦ÛŒ ÚˆÛŒ Ú©Û’ Ø°Ø±ÛŒØ¹Û’ ØªØ¹Ù„Ù‚
```
**Ø§ÛŒÙ†Úˆ Ù¹Ùˆ Ø§ÛŒÙ†Úˆ Ù¹Ø±ÛŒØ³ Ú©ÙˆØ¦Ø±ÛŒ Ú©Ø±ÛŒÚº:**

```kusto
// Find complete request flow
let traceId = "abc123...";  // Get from response header
dependencies
| union requests
| where operation_Id == traceId
| project 
    timestamp,
    type = itemType,
    name,
    duration,
    success,
    cloud_RoleName
| order by timestamp asc
```

---

## Ø³Ø¨Ù‚ 4: Ù„Ø§Ø¦ÛŒÙˆ Ù…ÛŒÙ¹Ø±Ú©Ø³ Ø§ÙˆØ± Ø­Ù‚ÛŒÙ‚ÛŒ ÙˆÙ‚Øª Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ

### Ù„Ø§Ø¦ÛŒÙˆ Ù…ÛŒÙ¹Ø±Ú©Ø³ Ø§Ø³Ù¹Ø±ÛŒÙ… Ú©Ùˆ ÙØ¹Ø§Ù„ Ú©Ø±ÛŒÚº

Ù„Ø§Ø¦ÛŒÙˆ Ù…ÛŒÙ¹Ø±Ú©Ø³ <1 Ø³ÛŒÚ©Ù†Úˆ Ú©ÛŒ Ù„ÛŒÙ¹Ù†Ø³ÛŒ Ú©Û’ Ø³Ø§ØªÚ¾ Ø­Ù‚ÛŒÙ‚ÛŒ ÙˆÙ‚Øª Ú©ÛŒ Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ ÙØ±Ø§ÛÙ… Ú©Ø±ØªØ§ ÛÛ’Û”

**Ù„Ø§Ø¦ÛŒÙˆ Ù…ÛŒÙ¹Ø±Ú©Ø³ ØªÚ© Ø±Ø³Ø§Ø¦ÛŒ:**

```bash
# Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ ÙˆØ³Ø§Ø¦Ù„ Ø­Ø§ØµÙ„ Ú©Ø±ÛŒÚº
APPI_NAME=$(azd env get-values | grep APPLICATIONINSIGHTS_NAME | cut -d '=' -f2 | tr -d '"')

# ÙˆØ³Ø§Ø¦Ù„ Ú¯Ø±ÙˆÙ¾ Ø­Ø§ØµÙ„ Ú©Ø±ÛŒÚº
RG_NAME=$(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"')

echo "Navigate to: Azure Portal â†’ Resource Groups â†’ $RG_NAME â†’ $APPI_NAME â†’ Live Metrics"
```

**Ø¢Ù¾ Ø­Ù‚ÛŒÙ‚ÛŒ ÙˆÙ‚Øª Ù…ÛŒÚº Ú©ÛŒØ§ Ø¯ÛŒÚ©Ú¾ØªÛ’ ÛÛŒÚº:**
- âœ… Ø¢Ù†Û’ ÙˆØ§Ù„ÛŒ Ø±ÛŒÚ©ÙˆÛŒØ³Ù¹ Ú©ÛŒ Ø´Ø±Ø­ (Ø±ÛŒÚ©ÙˆÛŒØ³Ù¹Ø²/Ø³ÛŒÚ©Ù†Úˆ)
- âœ… Ø¬Ø§Ù†Û’ ÙˆØ§Ù„ÛŒ ÚˆÛŒÙ¾ÛŒÙ†ÚˆÙ†Ø³ÛŒ Ú©Ø§Ù„Ø²
- âœ… Ø§ÛŒÚ©Ø³Ù¾Ø´Ù† Ú©ÛŒ ØªØ¹Ø¯Ø§Ø¯
- âœ… CPU Ø§ÙˆØ± Ù…ÛŒÙ…ÙˆØ±ÛŒ Ú©Ø§ Ø§Ø³ØªØ¹Ù…Ø§Ù„
- âœ… ÙØ¹Ø§Ù„ Ø³Ø±ÙˆØ± Ú©ÛŒ ØªØ¹Ø¯Ø§Ø¯
- âœ… Ø³ÛŒÙ…Ù¾Ù„ Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ

### Ø¬Ø§Ù†Ú† Ú©Û’ Ù„ÛŒÛ’ Ù„ÙˆÚˆ Ù¾ÛŒØ¯Ø§ Ú©Ø±ÛŒÚº

```bash
# Ù„Ø§Ø¦ÛŒÙˆ Ù…ÛŒÙ¹Ø±Ú©Ø³ Ø¯ÛŒÚ©Ú¾Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ù„ÙˆÚˆ Ù¾ÛŒØ¯Ø§ Ú©Ø±ÛŒÚº
for i in {1..100}; do
  curl $APP_URL/api/products &
  curl $APP_URL/api/search?q=test$i &
done

# Azure Ù¾ÙˆØ±Ù¹Ù„ Ù…ÛŒÚº Ù„Ø§Ø¦ÛŒÙˆ Ù…ÛŒÙ¹Ø±Ú©Ø³ Ø¯ÛŒÚ©Ú¾ÛŒÚº
# Ø¢Ù¾ Ú©Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ú©ÛŒ Ø´Ø±Ø­ Ù…ÛŒÚº Ø§Ø¶Ø§ÙÛ Ù†Ø¸Ø± Ø¢Ù†Ø§ Ú†Ø§ÛÛŒÛ’
```

---

## Ø¹Ù…Ù„ÛŒ Ù…Ø´Ù‚ÛŒÚº

### Ù…Ø´Ù‚ 1: Ø§Ù„Ø±Ù¹Ø³ ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº â­â­ (Ø¯Ø±Ù…ÛŒØ§Ù†ÛŒ)

**Ù…Ù‚ØµØ¯**: Ø²ÛŒØ§Ø¯Û ØºÙ„Ø·ÛŒ Ú©ÛŒ Ø´Ø±Ø­ Ø§ÙˆØ± Ø³Ø³Øª Ø±Ø¯Ø¹Ù…Ù„ Ú©Û’ Ù„ÛŒÛ’ Ø§Ù„Ø±Ù¹Ø³ Ø¨Ù†Ø§Ø¦ÛŒÚºÛ”

**Ø§Ù‚Ø¯Ø§Ù…Ø§Øª:**

1. **ØºÙ„Ø·ÛŒ Ú©ÛŒ Ø´Ø±Ø­ Ú©Û’ Ù„ÛŒÛ’ Ø§Ù„Ø±Ù¹ Ø¨Ù†Ø§Ø¦ÛŒÚº:**

```bash
# Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ø±ÛŒØ³ÙˆØ±Ø³ Ø¢Ø¦ÛŒ ÚˆÛŒ Ø­Ø§ØµÙ„ Ú©Ø±ÛŒÚº
APPI_ID=$(az monitor app-insights component show \
  --app $APPI_NAME \
  --resource-group $RG_NAME \
  --query "id" -o tsv)

# Ù†Ø§Ú©Ø§Ù… Ø¯Ø±Ø®ÙˆØ§Ø³ØªÙˆÚº Ú©Û’ Ù„Ø¦Û’ Ù…ÛŒÙ¹Ø±Ú© Ø§Ù„Ø±Ù¹ Ø¨Ù†Ø§Ø¦ÛŒÚº
az monitor metrics alert create \
  --name "High-Error-Rate" \
  --resource-group $RG_NAME \
  --scopes $APPI_ID \
  --condition "count requests/failed > 10" \
  --window-size 5m \
  --evaluation-frequency 1m \
  --description "Alert when error rate exceeds 10 per 5 minutes"
```

2. **Ø³Ø³Øª Ø±Ø¯Ø¹Ù…Ù„ Ú©Û’ Ù„ÛŒÛ’ Ø§Ù„Ø±Ù¹ Ø¨Ù†Ø§Ø¦ÛŒÚº:**

```bash
az monitor metrics alert create \
  --name "Slow-Responses" \
  --resource-group $RG_NAME \
  --scopes $APPI_ID \
  --condition "avg requests/duration > 3000" \
  --window-size 5m \
  --evaluation-frequency 1m \
  --description "Alert when average response time exceeds 3 seconds"
```

3. **Bicep Ú©Û’ Ø°Ø±ÛŒØ¹Û’ Ø§Ù„Ø±Ù¹ Ø¨Ù†Ø§Ø¦ÛŒÚº (AZD Ú©Û’ Ù„ÛŒÛ’ ØªØ±Ø¬ÛŒØ­ÛŒ):**

**ÙØ§Ø¦Ù„: `infra/core/alerts.bicep`**

```bicep
param applicationInsightsId string
param actionGroupId string = ''
param location string = resourceGroup().location

// High error rate alert
resource errorRateAlert 'Microsoft.Insights/metricAlerts@2018-03-01' = {
  name: 'high-error-rate'
  location: 'global'
  properties: {
    description: 'Alert when error rate exceeds threshold'
    severity: 2
    enabled: true
    scopes: [
      applicationInsightsId
    ]
    evaluationFrequency: 'PT1M'
    windowSize: 'PT5M'
    criteria: {
      'odata.type': 'Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria'
      allOf: [
        {
          name: 'Error rate'
          metricName: 'requests/failed'
          operator: 'GreaterThan'
          threshold: 10
          timeAggregation: 'Count'
        }
      ]
    }
    actions: actionGroupId != '' ? [
      {
        actionGroupId: actionGroupId
      }
    ] : []
  }
}

// Slow response alert
resource slowResponseAlert 'Microsoft.Insights/metricAlerts@2018-03-01' = {
  name: 'slow-responses'
  location: 'global'
  properties: {
    description: 'Alert when response time is too high'
    severity: 3
    enabled: true
    scopes: [
      applicationInsightsId
    ]
    evaluationFrequency: 'PT1M'
    windowSize: 'PT5M'
    criteria: {
      'odata.type': 'Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria'
      allOf: [
        {
          name: 'Response duration'
          metricName: 'requests/duration'
          operator: 'GreaterThan'
          threshold: 3000
          timeAggregation: 'Average'
        }
      ]
    }
  }
}

output errorAlertId string = errorRateAlert.id
output slowResponseAlertId string = slowResponseAlert.id
```

4. **Ø§Ù„Ø±Ù¹Ø³ Ú©ÛŒ Ø¬Ø§Ù†Ú† Ú©Ø±ÛŒÚº:**

```bash
# ØºÙ„Ø·ÛŒØ§Úº Ù¾ÛŒØ¯Ø§ Ú©Ø±ÛŒÚº
for i in {1..20}; do
  curl $APP_URL/api/error-test
done

# Ø³Ø³Øª Ø±Ø¯Ø¹Ù…Ù„ Ù¾ÛŒØ¯Ø§ Ú©Ø±ÛŒÚº
for i in {1..10}; do
  curl $APP_URL/api/slow
done

# Ø§Ù„Ø±Ù¹ Ú©ÛŒ Ø­Ø§Ù„Øª Ú†ÛŒÚ© Ú©Ø±ÛŒÚº (5-10 Ù…Ù†Ù¹ Ø§Ù†ØªØ¸Ø§Ø± Ú©Ø±ÛŒÚº)
az monitor metrics alert list \
  --resource-group $RG_NAME \
  --query "[].{Name:name, Enabled:enabled, State:properties.enabled}" \
  --output table
```

**âœ… Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ú©Û’ Ù…Ø¹ÛŒØ§Ø±:**
- âœ… Ø§Ù„Ø±Ù¹Ø³ Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø³Û’ Ø¨Ù†Ø§Ø¦Û’ Ú¯Ø¦Û’
- âœ… Ø¬Ø¨ Ø­Ø¯ Ø³Û’ ØªØ¬Ø§ÙˆØ² ÛÙˆ ØªÙˆ Ø§Ù„Ø±Ù¹Ø³ ÙØ§Ø¦Ø± Ú©Ø±ÛŒÚº
- âœ… Azure Ù¾ÙˆØ±Ù¹Ù„ Ù…ÛŒÚº Ø§Ù„Ø±Ù¹ Ú©ÛŒ ØªØ§Ø±ÛŒØ® Ø¯ÛŒÚ©Ú¾ Ø³Ú©ØªÛ’ ÛÛŒÚº
- âœ… AZD ØªØ¹ÛŒÙ†Ø§ØªÛŒ Ú©Û’ Ø³Ø§ØªÚ¾ Ù…Ø±Ø¨ÙˆØ·

**ÙˆÙ‚Øª**: 20-25 Ù…Ù†Ù¹

---

### Ù…Ø´Ù‚ 2: Ú©Ø³Ù¹Ù… ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ Ø¨Ù†Ø§Ø¦ÛŒÚº â­â­ (Ø¯Ø±Ù…ÛŒØ§Ù†ÛŒ)

**Ù…Ù‚ØµØ¯**: Ú©Ù„ÛŒØ¯ÛŒ Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù…ÛŒÙ¹Ø±Ú©Ø³ Ø¯Ú©Ú¾Ø§Ù†Û’ ÙˆØ§Ù„Ø§ ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ Ø¨Ù†Ø§Ø¦ÛŒÚºÛ”

**Ø§Ù‚Ø¯Ø§Ù…Ø§Øª:**

1. **Azure Ù¾ÙˆØ±Ù¹Ù„ Ú©Û’ Ø°Ø±ÛŒØ¹Û’ ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ Ø¨Ù†Ø§Ø¦ÛŒÚº:**

Azure Ù¾ÙˆØ±Ù¹Ù„ â†’ ÚˆÛŒØ´ Ø¨ÙˆØ±ÚˆØ² â†’ Ù†ÛŒØ§ ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ Ù¾Ø± Ø¬Ø§Ø¦ÛŒÚº

2. **Ú©Ù„ÛŒØ¯ÛŒ Ù…ÛŒÙ¹Ø±Ú©Ø³ Ú©Û’ Ù„ÛŒÛ’ Ù¹Ø§Ø¦Ù„Ø² Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº:**

- Ø±ÛŒÚ©ÙˆÛŒØ³Ù¹ Ú©ÛŒ ØªØ¹Ø¯Ø§Ø¯ (Ù¾Ú†Ú¾Ù„Û’ 24 Ú¯Ú¾Ù†Ù¹Û’)
- Ø§ÙˆØ³Ø· Ø±Ø¯Ø¹Ù…Ù„ Ú©Ø§ ÙˆÙ‚Øª
- ØºÙ„Ø·ÛŒ Ú©ÛŒ Ø´Ø±Ø­
- Ø³Ø¨ Ø³Û’ Ø³Ø³Øª 5 Ø¢Ù¾Ø±ÛŒØ´Ù†Ø²
- ØµØ§Ø±ÙÛŒÙ† Ú©ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§Ø¦ÛŒ ØªÙ‚Ø³ÛŒÙ…

3. **Bicep Ú©Û’ Ø°Ø±ÛŒØ¹Û’ ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ Ø¨Ù†Ø§Ø¦ÛŒÚº:**

**ÙØ§Ø¦Ù„: `infra/core/dashboard.bicep`**

```bicep
param dashboardName string
param applicationInsightsId string
param location string = resourceGroup().location

resource dashboard 'Microsoft.Portal/dashboards@2020-09-01-preview' = {
  name: dashboardName
  location: location
  properties: {
    lenses: [
      {
        order: 0
        parts: [
          // Request count
          {
            position: { x: 0, y: 0, rowSpan: 4, colSpan: 6 }
            metadata: {
              type: 'Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart'
              inputs: [
                {
                  name: 'resourceId'
                  value: applicationInsightsId
                }
                {
                  name: 'query'
                  value: '''
                    requests
                    | summarize RequestCount = count() by bin(timestamp, 1h)
                    | render timechart
                  '''
                }
              ]
            }
          }
          // Error rate
          {
            position: { x: 6, y: 0, rowSpan: 4, colSpan: 6 }
            metadata: {
              type: 'Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart'
              inputs: [
                {
                  name: 'resourceId'
                  value: applicationInsightsId
                }
                {
                  name: 'query'
                  value: '''
                    requests
                    | summarize 
                        Total = count(),
                        Failed = countif(success == false)
                    | extend ErrorRate = (Failed * 100.0) / Total
                    | project ErrorRate
                  '''
                }
              ]
            }
          }
        ]
      }
    ]
  }
}

output dashboardId string = dashboard.id
```

4. **ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ ØªØ¹ÛŒÙ†Ø§Øª Ú©Ø±ÛŒÚº:**

```bash
# Ù…Ø±Ú©Ø²ÛŒ.bicep Ù…ÛŒÚº Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº
module dashboard './core/dashboard.bicep' = {
  name: 'dashboard'
  scope: rg
  params: {
    dashboardName: 'dashboard-${environmentName}'
    applicationInsightsId: monitoring.outputs.applicationInsightsId
    location: location
  }
}

# ØªØ¹ÛŒÙ† Ú©Ø±ÛŒÚº
azd up
```

**âœ… Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ú©Û’ Ù…Ø¹ÛŒØ§Ø±:**
- âœ… ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ Ú©Ù„ÛŒØ¯ÛŒ Ù…ÛŒÙ¹Ø±Ú©Ø³ Ø¯Ú©Ú¾Ø§ØªØ§ ÛÛ’
- âœ… Azure Ù¾ÙˆØ±Ù¹Ù„ ÛÙˆÙ… Ù¾Ø± Ù¾Ù† Ú©Ø± Ø³Ú©ØªÛ’ ÛÛŒÚº
- âœ… Ø­Ù‚ÛŒÙ‚ÛŒ ÙˆÙ‚Øª Ù…ÛŒÚº Ø§Ù¾ ÚˆÛŒÙ¹ ÛÙˆØªØ§ ÛÛ’
- âœ… AZD Ú©Û’ Ø°Ø±ÛŒØ¹Û’ ØªØ¹ÛŒÙ†Ø§ØªÛŒ Ú©Û’ Ù‚Ø§Ø¨Ù„

**ÙˆÙ‚Øª**: 25-30 Ù…Ù†Ù¹

---

### Ù…Ø´Ù‚ 3: AI/LLM Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ú©Ø±ÛŒÚº â­â­â­ (Ø§Ø¹Ù„ÛŒ Ø¯Ø±Ø¬Û’ Ú©ÛŒ)

**Ù…Ù‚ØµØ¯**: Azure OpenAI Ú©Û’ Ø§Ø³ØªØ¹Ù…Ø§Ù„ (Ù¹ÙˆÚ©Ù†Ø²ØŒ Ù„Ø§Ú¯ØªØŒ Ù„ÛŒÙ¹Ù†Ø³ÛŒ) Ú©Ùˆ Ù¹Ø±ÛŒÚ© Ú©Ø±ÛŒÚºÛ”

**Ø§Ù‚Ø¯Ø§Ù…Ø§Øª:**

1. **AI Ù…Ø§Ù†ÛŒÙ¹Ø±Ù†Ú¯ Ø±ÛŒÙ¾Ø± Ø¨Ù†Ø§Ø¦ÛŒÚº:**

**ÙØ§Ø¦Ù„: `src/ai_telemetry.py`**

```python
from telemetry import telemetry
from openai import AzureOpenAI
import time

class MonitoredAzureOpenAI:
    """Azure OpenAI client with automatic telemetry"""
    
    def __init__(self, api_key, endpoint, api_version="2024-02-01"):
        self.client = AzureOpenAI(
            api_key=api_key,
            api_version=api_version,
            azure_endpoint=endpoint
        )
    
    def chat_completion(self, model: str, messages: list, **kwargs):
        """Track chat completion with telemetry"""
        start_time = time.time()
        
        try:
            # Ø§ÛŒØ²ÙˆØ± Ø§ÙˆÙ¾Ù† Ø§Û’ Ø¢Ø¦ÛŒ Ú©Ùˆ Ú©Ø§Ù„ Ú©Ø±ÛŒÚº
            response = self.client.chat.completions.create(
                model=model,
                messages=messages,
                **kwargs
            )
            
            duration = (time.time() - start_time) * 1000  # Ø§ÛŒÙ… Ø§ÛŒØ³
            
            # Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ù†Ú©Ø§Ù„ÛŒÚº
            usage = response.usage
            prompt_tokens = usage.prompt_tokens
            completion_tokens = usage.completion_tokens
            total_tokens = usage.total_tokens
            
            # Ù‚ÛŒÙ…Øª Ú©Ø§ Ø­Ø³Ø§Ø¨ Ù„Ú¯Ø§Ø¦ÛŒÚº (Ø¬ÛŒ Ù¾ÛŒ Ù¹ÛŒ-4 Ù‚ÛŒÙ…Øª)
            prompt_cost = (prompt_tokens / 1000) * 0.03  # $0.03 ÙÛŒ 1K Ù¹ÙˆÚ©Ù†Ø²
            completion_cost = (completion_tokens / 1000) * 0.06  # $0.06 ÙÛŒ 1K Ù¹ÙˆÚ©Ù†Ø²
            total_cost = prompt_cost + completion_cost
            
            # Ú©Ø³Ù¹Ù… Ø§ÛŒÙˆÙ†Ù¹ Ú©Ùˆ Ù¹Ø±ÛŒÚ© Ú©Ø±ÛŒÚº
            telemetry.track_event('OpenAI_Request', {
                'model': model,
                'prompt_tokens': prompt_tokens,
                'completion_tokens': completion_tokens,
                'total_tokens': total_tokens,
                'duration_ms': duration,
                'cost_usd': total_cost,
                'success': True
            })
            
            # Ù…ÛŒÙ¹Ø±Ú©Ø³ Ú©Ùˆ Ù¹Ø±ÛŒÚ© Ú©Ø±ÛŒÚº
            telemetry.track_metric('OpenAI_Tokens', total_tokens, {
                'model': model,
                'type': 'total'
            })
            
            telemetry.track_metric('OpenAI_Cost', total_cost, {
                'model': model,
                'currency': 'USD'
            })
            
            telemetry.track_metric('OpenAI_Duration', duration, {
                'model': model
            })
            
            return response
            
        except Exception as e:
            duration = (time.time() - start_time) * 1000
            
            telemetry.track_event('OpenAI_Request', {
                'model': model,
                'duration_ms': duration,
                'success': False,
                'error': str(e)
            })
            
            raise
```

2. **Ù…Ø§Ù†ÛŒÙ¹Ø±Úˆ Ú©Ù„Ø§Ø¦Ù†Ù¹ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº:**

```python
from flask import Flask, request, jsonify
from ai_telemetry import MonitoredAzureOpenAI
import os

app = Flask(__name__)

# Ù…Ø§Ù†ÛŒÙ¹Ø± Ø´Ø¯Û Ø§ÙˆÙ¾Ù† Ø§Û’ Ø¢Ø¦ÛŒ Ú©Ù„Ø§Ø¦Ù†Ù¹ Ú©Ùˆ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº
openai_client = MonitoredAzureOpenAI(
    api_key=os.environ['AZURE_OPENAI_API_KEY'],
    endpoint=os.environ['AZURE_OPENAI_ENDPOINT']
)

@app.route('/api/chat', methods=['POST'])
def chat():
    data = request.json
    user_message = data.get('message')
    
    # Ø®ÙˆØ¯Ú©Ø§Ø± Ù†Ú¯Ø±Ø§Ù†ÛŒ Ú©Û’ Ø³Ø§ØªÚ¾ Ú©Ø§Ù„ Ú©Ø±ÛŒÚº
    response = openai_client.chat_completion(
        model='gpt-4',
        messages=[
            {'role': 'user', 'content': user_message}
        ]
    )
    
    return jsonify({
        'response': response.choices[0].message.content,
        'tokens': response.usage.total_tokens
    })
```

3. **AI Ù…ÛŒÙ¹Ø±Ú©Ø³ Ú©ÙˆØ¦Ø±ÛŒ Ú©Ø±ÛŒÚº:**

```kusto
// Total AI spend over time
traces
| where customDimensions.event_name == "OpenAI_Request"
| where customDimensions.success == "True"
| summarize TotalCost = sum(todouble(customDimensions.cost_usd)) by bin(timestamp, 1h)
| render timechart

// Token usage by model
traces
| where customDimensions.event_name == "OpenAI_Request"
| summarize 
    TotalTokens = sum(toint(customDimensions.total_tokens)),
    RequestCount = count()
  by Model = tostring(customDimensions.model)

// Average latency
traces
| where customDimensions.event_name == "OpenAI_Request"
| summarize AvgDuration = avg(todouble(customDimensions.duration_ms))
| project AvgDurationSeconds = AvgDuration / 1000

// Cost per request
traces
| where customDimensions.event_name == "OpenAI_Request"
| extend Cost = todouble(customDimensions.cost_usd)
| summarize 
    TotalCost = sum(Cost),
    RequestCount = count(),
    AvgCostPerRequest = avg(Cost)
```

**âœ… Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ú©Û’ Ù…Ø¹ÛŒØ§Ø±:**
- âœ… ÛØ± OpenAI Ú©Ø§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± Ù¹Ø±ÛŒÚ© Ú©ÛŒ Ú¯Ø¦ÛŒ
- âœ… Ù¹ÙˆÚ©Ù† Ú©Ø§ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ø§ÙˆØ± Ù„Ø§Ú¯Øª Ù†Ø¸Ø± Ø¢ØªÛŒ ÛÛ’
- âœ… Ù„ÛŒÙ¹Ù†Ø³ÛŒ Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ú©ÛŒ Ú¯Ø¦ÛŒ
- âœ… Ø¨Ø¬Ù¹ Ø§Ù„Ø±Ù¹Ø³ ØªØ±ØªÛŒØ¨ Ø¯Û’ Ø³Ú©ØªÛ’ ÛÛŒÚº

**ÙˆÙ‚Øª**: 35-45 Ù…Ù†Ù¹

---

## Ù„Ø§Ú¯Øª Ú©ÛŒ Ø§ØµÙ„Ø§Ø­

### Ø³ÛŒÙ…Ù¾Ù„Ù†Ú¯ Ø­Ú©Ù…Øª Ø¹Ù…Ù„ÛŒ

Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ú©Ùˆ Ø³ÛŒÙ…Ù¾Ù„Ù†Ú¯ Ú©Û’ Ø°Ø±ÛŒØ¹Û’ Ù„Ø§Ú¯Øª Ú©Ùˆ Ú©Ù†Ù¹Ø±ÙˆÙ„ Ú©Ø±ÛŒÚº:

```python
from opencensus.trace.samplers import ProbabilitySampler

# ØªØ±Ù‚ÛŒ: 100% Ù†Ù…ÙˆÙ†Û Ú©Ø§Ø±ÛŒ
sampler = ProbabilitySampler(rate=1.0)

# Ù¾ÛŒØ¯Ø§ÙˆØ§Ø±: 10% Ù†Ù…ÙˆÙ†Û Ú©Ø§Ø±ÛŒ (Ø§Ø®Ø±Ø§Ø¬Ø§Øª Ú©Ùˆ 90% Ú©Ù… Ú©Ø±ÛŒÚº)
sampler = ProbabilitySampler(rate=0.1)

# Ù…ÙˆØ§ÙÙ‚Øª Ù¾Ø°ÛŒØ± Ù†Ù…ÙˆÙ†Û Ú©Ø§Ø±ÛŒ (Ø®ÙˆØ¯ Ø¨Ø®ÙˆØ¯ Ø§ÛŒÚˆØ¬Ø³Ù¹ ÛÙˆØªÛŒ ÛÛ’)
from opencensus.trace.samplers import AdaptiveSampler
sampler = AdaptiveSampler()
```

**Bicep Ù…ÛŒÚº:**

```bicep
resource applicationInsights 'Microsoft.Insights/components@2020-02-02' = {
  name: applicationInsightsName
  properties: {
    SamplingPercentage: 10  // 10% sampling
  }
}
```

### ÚˆÛŒÙ¹Ø§ Ø¨Ø±Ù‚Ø±Ø§Ø± Ø±Ú©Ú¾Ù†Û’

```bicep
resource logAnalytics 'Microsoft.OperationalInsights/workspaces@2022-10-01' = {
  name: logAnalyticsName
  properties: {
    retentionInDays: 30  // Minimum (cheapest)
    // Options: 30, 31, 60, 90, 120, 180, 270, 365, 550, 730
  }
}
```

### Ù…Ø§ÛØ§Ù†Û Ù„Ø§Ú¯Øª Ú©Û’ ØªØ®Ù…ÛŒÙ†Û’

| ÚˆÛŒÙ¹Ø§ Ú©Ø§ Ø­Ø¬Ù… | Ø¨Ø±Ù‚Ø±Ø§Ø± Ø±Ú©Ú¾Ù†Û’ Ú©ÛŒ Ù…Ø¯Øª | Ù…Ø§ÛØ§Ù†Û Ù„Ø§Ú¯Øª |
|------------|---------------------|-------------|
| 1 GB/Ù…Ø§Û | 30 Ø¯Ù† | ~$2-5 |
| 5 GB/Ù…Ø§Û | 30 Ø¯Ù† | ~$10-15 |
| 10 GB/Ù…Ø§Û | 90 Ø¯Ù† | ~$25-40 |
| 50 GB/Ù…Ø§Û | 90 Ø¯Ù† | ~$100-150 |

**Ù…ÙØª Ù¹Ø§Ø¦Ø±**: 5 GB/Ù…Ø§Û Ø´Ø§Ù…Ù„

---

## Ø¹Ù„Ù… Ú©Ø§ Ú†ÛŒÚ© Ù¾ÙˆØ§Ø¦Ù†Ù¹

### 1. Ø¨Ù†ÛŒØ§Ø¯ÛŒ Ø§Ù†Ø¶Ù…Ø§Ù… âœ“

Ø§Ù¾Ù†ÛŒ Ø³Ù…Ø¬Ú¾ Ú©ÛŒ Ø¬Ø§Ù†Ú† Ú©Ø±ÛŒÚº:

- [ ] **Q1**: AZD Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ú©Ùˆ Ú©ÛŒØ³Û’ ÙØ±Ø§ÛÙ… Ú©Ø±ØªØ§ ÛÛ’ØŸ
  - **A**: Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± `infra/core/monitoring.bicep` Ù…ÛŒÚº Bicep Ù¹ÛŒÙ…Ù¾Ù„ÛŒÙ¹Ø³ Ú©Û’ Ø°Ø±ÛŒØ¹Û’

- [ ] **Q2**: Ú©ÙˆÙ† Ø³Ø§ Ù…Ø§Ø­ÙˆÙ„ Ù…ØªØºÛŒØ± Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ú©Ùˆ ÙØ¹Ø§Ù„ Ú©Ø±ØªØ§ ÛÛ’ØŸ
  - **A**: `APPLICATIONINSIGHTS_CONNECTION_STRING`

- [ ] **Q3**: ØªÛŒÙ† Ø§ÛÙ… Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ú©ÛŒ Ø§Ù‚Ø³Ø§Ù… Ú©ÛŒØ§ ÛÛŒÚºØŸ
  - **A**: Ø±ÛŒÚ©ÙˆÛŒØ³Ù¹Ø² (HTTP Ú©Ø§Ù„Ø²)ØŒ ÚˆÛŒÙ¾ÛŒÙ†ÚˆÙ†Ø³ÛŒØ² (Ø¨ÛŒØ±ÙˆÙ†ÛŒ Ú©Ø§Ù„Ø²)ØŒ Ø§ÛŒÚ©Ø³Ù¾Ø´Ù†Ø² (ØºÙ„Ø·ÛŒØ§Úº)

**ÛÛŒÙ†ÚˆØ² Ø¢Ù† ØªØµØ¯ÛŒÙ‚:**
```bash
# Ú†ÛŒÚ© Ú©Ø±ÛŒÚº Ú©Û Ø¢ÛŒØ§ Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ ØªØ´Ú©ÛŒÙ„ Ø¯ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’
azd env get-values | grep APPLICATIONINSIGHTS

# ØªØµØ¯ÛŒÙ‚ Ú©Ø±ÛŒÚº Ú©Û Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ø¨ÛÛ Ø±ÛÛŒ ÛÛ’
az monitor app-insights metrics show \
  --app $APPI_NAME \
  --resource-group $RG_NAME \
  --metric "requests/count"
```

---

### 2. Ú©Ø³Ù¹Ù… Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ âœ“

Ø§Ù¾Ù†ÛŒ Ø³Ù…Ø¬Ú¾ Ú©ÛŒ Ø¬Ø§Ù†Ú† Ú©Ø±ÛŒÚº:

- [ ] **Q1**: Ø¢Ù¾ Ú©Ø³Ù¹Ù… Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ Ø§ÛŒÙˆÙ†Ù¹Ø³ Ú©Ùˆ Ú©ÛŒØ³Û’ Ù¹Ø±ÛŒÚ© Ú©Ø±ØªÛ’ ÛÛŒÚºØŸ
  - **A**: `custom_dimensions` Ú©Û’ Ø³Ø§ØªÚ¾ Ù„Ø§Ú¯Ø± ÛŒØ§ `TelemetryClient.track_event()` Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº

- [ ] **Q2**: Ø§ÛŒÙˆÙ†Ù¹Ø³ Ø§ÙˆØ± Ù…ÛŒÙ¹Ø±Ú©Ø³ Ù…ÛŒÚº Ú©ÛŒØ§ ÙØ±Ù‚ ÛÛ’ØŸ
  - **A**: Ø§ÛŒÙˆÙ†Ù¹Ø³ Ø§Ù„Ú¯ Ø§Ù„Ú¯ ÙˆØ§Ù‚Ø¹Ø§Øª ÛÛŒÚºØŒ Ù…ÛŒÙ¹Ø±Ú©Ø³ Ø¹Ø¯Ø¯ÛŒ Ù¾ÛŒÙ…Ø§Ø¦Ø´ÛŒÚº ÛÛŒÚº

- [ ] **Q3**: Ø¢Ù¾ Ø³Ø±ÙˆØ³Ø² Ú©Û’ Ø¯Ø±Ù…ÛŒØ§Ù† Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ú©Ùˆ Ú©ÛŒØ³Û’ Ù…Ø±Ø¨ÙˆØ· Ú©Ø±ØªÛ’ ÛÛŒÚºØŸ
  - **A**: Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± `operation_Id` Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ØªØ§ ÛÛ’

**ÛÛŒÙ†ÚˆØ² Ø¢Ù† ØªØµØ¯ÛŒÙ‚:**
```kusto
// Verify custom events
traces
| where customDimensions.event_name != ""
| summarize count() by tostring(customDimensions.event_name)
```

---

### 3. Ù¾Ø±ÙˆÚˆÚ©Ø´Ù† Ù…Ø§Ù†ÛŒÙ¹Ø±Ù†Ú¯ âœ“

Ø§Ù¾Ù†ÛŒ Ø³Ù…Ø¬Ú¾ Ú©ÛŒ Ø¬Ø§Ù†Ú† Ú©Ø±ÛŒÚº:

- [ ] **Q1**: Ø³ÛŒÙ…Ù¾Ù„Ù†Ú¯ Ú©ÛŒØ§ ÛÛ’ Ø§ÙˆØ± Ø§Ø³Û’ Ú©ÛŒÙˆÚº Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚºØŸ
  - **A**: Ø³ÛŒÙ…Ù¾Ù„Ù†Ú¯ Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ú©Ø§ ØµØ±Ù Ø§ÛŒÚ© ÙÛŒØµØ¯ Ù¾Ú©Ú‘ Ú©Ø± ÚˆÛŒÙ¹Ø§ Ú©Û’ Ø­Ø¬Ù… (Ø§ÙˆØ± Ù„Ø§Ú¯Øª) Ú©Ùˆ Ú©Ù… Ú©Ø±ØªÛŒ ÛÛ’

- [ ] **Q2**: Ø¢Ù¾ Ø§Ù„Ø±Ù¹Ø³ Ú©ÛŒØ³Û’ ØªØ±ØªÛŒØ¨ Ø¯ÛŒØªÛ’ ÛÛŒÚºØŸ
  - **A**: Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ù…ÛŒÙ¹Ø±Ú©Ø³ Ú©ÛŒ Ø¨Ù†ÛŒØ§Ø¯ Ù¾Ø± Bicep ÛŒØ§ Azure Ù¾ÙˆØ±Ù¹Ù„ Ù…ÛŒÚº Ù…ÛŒÙ¹Ø±Ú© Ø§Ù„Ø±Ù¹Ø³ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº

- [ ] **Q3**: Ù„Ø§Ú¯ Ø§ÛŒÙ†Ø§Ù„ÛŒÙ¹Ú©Ø³ Ø§ÙˆØ± Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ù…ÛŒÚº Ú©ÛŒØ§ ÙØ±Ù‚ ÛÛ’ØŸ
  - **A**: Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ ÚˆÛŒÙ¹Ø§ Ú©Ùˆ Ù„Ø§Ú¯ Ø§ÛŒÙ†Ø§Ù„ÛŒÙ¹Ú©Ø³ ÙˆØ±Ú© Ø§Ø³Ù¾ÛŒØ³ Ù…ÛŒÚº Ø§Ø³Ù¹ÙˆØ± Ú©Ø±ØªØ§ ÛÛ’Ø› Ø§ÛŒÙ¾ Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù…Ø®ØµÙˆØµ Ù†Ø¸Ø§Ø±Û’ ÙØ±Ø§ÛÙ… Ú©Ø±ØªØ§ ÛÛ’

**ÛÛŒÙ†ÚˆØ² Ø¢Ù† ØªØµØ¯ÛŒÙ‚:**
```bash
# Ù†Ù…ÙˆÙ†Û Ø¨Ù†Ø¯ÛŒ Ú©ÛŒ ØªØ´Ú©ÛŒÙ„ Ú†ÛŒÚ© Ú©Ø±ÛŒÚº
az monitor app-insights component show \
  --app $APPI_NAME \
  --resource-group $RG_NAME \
  --query "properties.SamplingPercentage"
```

---

## Ø¨ÛØªØ±ÛŒÙ† Ø·Ø±ÛŒÙ‚Û’

### âœ… Ú©Ø±ÛŒÚº:

1. **Ú©ÙˆØ±Ù„ÛŒØ´Ù† IDs Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº**
   ```python
   logger.info('Processing order', extra={
       'custom_dimensions': {
           'order_id': order_id,
           'user_id': user_id
       }
   })
   ```

2. **Ø§ÛÙ… Ù…ÛŒÙ¹Ø±Ú©Ø³ Ú©Û’ Ù„ÛŒÛ’ Ø§Ù„Ø±Ù¹Ø³ ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº**
   ```bicep
   // Error rate, slow responses, availability
   ```

3. **Ø³Ø§Ø®ØªÛŒ Ù„Ø§Ú¯Ù†Ú¯ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº**
   ```python
   # âœ… Ø§Ú†Ú¾Ø§: Ù…Ù†Ø¸Ù…
   logger.info('User signup', extra={'custom_dimensions': {'user_id': 123}})
   
   # âŒ Ø¨Ø±Ø§: ØºÛŒØ± Ù…Ù†Ø¸Ù…
   logger.info(f'User 123 signed up')
   ```

4. **ÚˆÛŒÙ¾ÛŒÙ†ÚˆÙ†Ø³ÛŒØ² Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ú©Ø±ÛŒÚº**
   ```python
   # Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± ÚˆÛŒÙ¹Ø§ Ø¨ÛŒØ³ Ú©Ø§Ù„Ø²ØŒ HTTP Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒÚº ÙˆØºÛŒØ±Û Ú©Ùˆ Ù¹Ø±ÛŒÚ© Ú©Ø±ÛŒÚºÛ”
   ```

5. **ØªØ¹ÛŒÙ†Ø§ØªÛŒÙˆÚº Ú©Û’ Ø¯ÙˆØ±Ø§Ù† Ù„Ø§Ø¦ÛŒÙˆ Ù…ÛŒÙ¹Ø±Ú©Ø³ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº**

### âŒ Ù†Û Ú©Ø±ÛŒÚº:

1. **Ø­Ø³Ø§Ø³ ÚˆÛŒÙ¹Ø§ Ù„Ø§Ú¯ Ù†Û Ú©Ø±ÛŒÚº**
   ```python
   # âŒ Ø®Ø±Ø§Ø¨
   logger.info(f'Login: {username}:{password}')
   
   # âœ… Ø§Ú†Ú¾Ø§
   logger.info('Login attempt', extra={'custom_dimensions': {'username': username}})
   ```

2. **Ù¾Ø±ÙˆÚˆÚ©Ø´Ù† Ù…ÛŒÚº 100% Ø³ÛŒÙ…Ù¾Ù„Ù†Ú¯ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ù†Û Ú©Ø±ÛŒÚº**
   ```python
   # âŒ Ù…ÛÙ†Ú¯Ø§
   sampler = ProbabilitySampler(rate=1.0)
   
   # âœ… Ù„Ø§Ú¯Øª Ù…Ø¤Ø«Ø±
   sampler = ProbabilitySampler(rate=0.1)
   ```

3. **ÚˆÛŒÚˆ Ù„ÛŒÙ¹Ø± Ú©ÛŒÙˆ Ú©Ùˆ Ù†Ø¸Ø± Ø§Ù†Ø¯Ø§Ø² Ù†Û Ú©Ø±ÛŒÚº**

4. **ÚˆÛŒÙ¹Ø§ Ø¨Ø±Ù‚Ø±Ø§Ø± Ø±Ú©Ú¾Ù†Û’ Ú©ÛŒ Ø­Ø¯ÙˆØ¯ Ù…Ù‚Ø±Ø± Ú©Ø±Ù†Ø§ Ù†Û Ø¨Ú¾ÙˆÙ„ÛŒÚº**

---

## Ø®Ø±Ø§Ø¨ÛŒÙˆÚº Ú©Ø§ Ù¾ØªÛ Ù„Ú¯Ø§Ù†Ø§

### Ù…Ø³Ø¦Ù„Û: Ú©ÙˆØ¦ÛŒ Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ Ø¸Ø§ÛØ± Ù†ÛÛŒÚº ÛÙˆ Ø±ÛÛŒ

**ØªØ´Ø®ÛŒØµ:**
```bash
# Ú†ÛŒÚ© Ú©Ø±ÛŒÚº Ú©Û Ú©Ù†Ú©Ø´Ù† Ø³Ù¹Ø±Ù†Ú¯ Ø³ÛŒÙ¹ ÛÛ’
azd env get-values | grep APPLICATIONINSIGHTS

# Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù„Ø§Ú¯Ø² Ú†ÛŒÚ© Ú©Ø±ÛŒÚº
azd logs api --tail 50
```

**Ø­Ù„:**
```bash
# Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾ Ù…ÛŒÚº Ú©Ù†Ú©Ø´Ù† Ø³Ù¹Ø±Ù†Ú¯ Ú©ÛŒ ØªØµØ¯ÛŒÙ‚ Ú©Ø±ÛŒÚº
az containerapp show \
  --name $APP_NAME \
  --resource-group $RG_NAME \
  --query "properties.template.containers[0].env" \
  | grep -i applicationinsights
```

---

### Ù…Ø³Ø¦Ù„Û: Ø²ÛŒØ§Ø¯Û Ù„Ø§Ú¯Øª

**ØªØ´Ø®ÛŒØµ:**
```bash
# ÚˆÛŒÙ¹Ø§ Ø§Ù†Ø¶Ù…Ø§Ù… Ú†ÛŒÚ© Ú©Ø±ÛŒÚº
az monitor app-insights metrics show \
  --app $APPI_NAME \
  --resource-group $RG_NAME \
  --metric "availabilityResults/count"
```

**Ø­Ù„:**
- Ø³ÛŒÙ…Ù¾Ù„Ù†Ú¯ Ú©ÛŒ Ø´Ø±Ø­ Ú©Ù… Ú©Ø±ÛŒÚº
- Ø¨Ø±Ù‚Ø±Ø§Ø± Ø±Ú©Ú¾Ù†Û’ Ú©ÛŒ Ù…Ø¯Øª Ú©Ù… Ú©Ø±ÛŒÚº
- ØªÙØµÛŒÙ„ÛŒ Ù„Ø§Ú¯Ù†Ú¯ Ú©Ùˆ ÛÙ¹Ø§ Ø¯ÛŒÚº

---

## Ù…Ø²ÛŒØ¯ Ø³ÛŒÚ©Ú¾ÛŒÚº

### Ø³Ø±Ú©Ø§Ø±ÛŒ Ø¯Ø³ØªØ§ÙˆÛŒØ²Ø§Øª
- [Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ú©Ø§ Ø¬Ø§Ø¦Ø²Û](https://learn.microsoft.com/azure/azure-monitor/app/app-insights-overview)
- [Python Ú©Û’ Ù„ÛŒÛ’ Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³](https://learn.microsoft.com/azure/azure-monitor/app/opencensus-python)
- [Kusto Ú©ÙˆØ¦Ø±ÛŒ Ø²Ø¨Ø§Ù†](https://learn.microsoft.com/azure/data-explorer/kusto/query/)
- [AZD Ù…Ø§Ù†ÛŒÙ¹Ø±Ù†Ú¯](https://learn.microsoft.com/azure/developer/azure-developer-cli/monitor-your-app)

### Ø§Ø³ Ú©ÙˆØ±Ø³ Ù…ÛŒÚº Ø§Ú¯Ù„Û’ Ù…Ø±Ø§Ø­Ù„
- â† Ù¾Ú†Ú¾Ù„Ø§: [Ù¾Ø±ÛŒ ÙÙ„Ø§Ø¦Ù¹ Ú†ÛŒÚ©Ø³](preflight-checks.md)
- â†’ Ø§Ú¯Ù„Ø§: [ØªØ¹ÛŒÙ†Ø§ØªÛŒ Ú¯Ø§Ø¦ÛŒÚˆ](../deployment/deployment-guide.md)
- ğŸ  [Ú©ÙˆØ±Ø³ ÛÙˆÙ…](../../README.md)

### Ù…ØªØ¹Ù„Ù‚Û Ù…Ø«Ø§Ù„ÛŒÚº
- [Azure OpenAI Ù…Ø«Ø§Ù„](../../../../examples/azure-openai-chat) - AI Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ
- [Ù…Ø§Ø¦ÛŒÚ©Ø±Ùˆ Ø³Ø±ÙˆØ³Ø² Ù…Ø«Ø§Ù„](../../../../examples/microservices) - ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ù¹Ø±ÛŒØ³Ù†Ú¯

---

## Ø®Ù„Ø§ØµÛ

**Ø¢Ù¾ Ù†Û’ Ø³ÛŒÚ©Ú¾Ø§:**
- âœ… AZD Ú©Û’ Ø³Ø§ØªÚ¾ Ø®ÙˆØ¯Ú©Ø§Ø± Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ú©ÛŒ ÙØ±Ø§ÛÙ…ÛŒ
- âœ… Ú©Ø³Ù¹Ù… Ù¹ÛŒÙ„ÛŒÙ…ÛŒÙ¹Ø±ÛŒ (Ø§ÛŒÙˆÙ†Ù¹Ø³ØŒ Ù…ÛŒÙ¹Ø±Ú©Ø³ØŒ ÚˆÛŒÙ¾ÛŒÙ†ÚˆÙ†Ø³ÛŒØ²)
- âœ… Ù…Ø§Ø¦ÛŒÚ©Ø±Ùˆ Ø³Ø±ÙˆØ³Ø² Ú©Û’ Ø¯Ø±Ù…ÛŒØ§Ù† ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ù¹Ø±ÛŒØ³Ù†Ú¯
- âœ… Ù„Ø§Ø¦ÛŒÙˆ Ù…ÛŒÙ¹Ø±Ú©Ø³ Ø§ÙˆØ± Ø­Ù‚ÛŒÙ‚ÛŒ ÙˆÙ‚Øª Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ
- âœ… Ø§Ù„Ø±Ù¹Ø³ Ø§ÙˆØ± ÚˆÛŒØ´ Ø¨ÙˆØ±ÚˆØ²
- âœ… Ø§Û’ Ø¢Ø¦ÛŒ/Ø§ÛŒÙ„ Ø§ÛŒÙ„ Ø§ÛŒÙ… Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù…Ø§Ù†ÛŒÙ¹Ø±Ù†Ú¯  
- âœ… Ù„Ø§Ú¯Øª Ú©Ùˆ Ø¨ÛØªØ± Ø¨Ù†Ø§Ù†Û’ Ú©ÛŒ Ø­Ú©Ù…Øª Ø¹Ù…Ù„ÛŒ  

**Ø§ÛÙ… Ù†Ú©Ø§Øª:**  
1. **AZD Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± Ù…Ø§Ù†ÛŒÙ¹Ø±Ù†Ú¯ ÙØ±Ø§ÛÙ… Ú©Ø±ØªØ§ ÛÛ’** - Ú©ÙˆØ¦ÛŒ Ø¯Ø³ØªÛŒ Ø³ÛŒÙ¹ Ø§Ù¾ Ú©ÛŒ Ø¶Ø±ÙˆØ±Øª Ù†ÛÛŒÚº  
2. **Ù…Ù†Ø¸Ù… Ù„Ø§Ú¯Ù†Ú¯ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº** - Ø³ÙˆØ§Ù„Ø§Øª Ú©Ø±Ù†Ø§ Ø¢Ø³Ø§Ù† Ø¨Ù†Ø§ØªØ§ ÛÛ’  
3. **Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ Ø§ÛŒÙˆÙ†Ù¹Ø³ Ú©Ùˆ Ù¹Ø±ÛŒÚ© Ú©Ø±ÛŒÚº** - ØµØ±Ù ØªÚ©Ù†ÛŒÚ©ÛŒ Ù…ÛŒÙ¹Ø±Ú©Ø³ Ù†ÛÛŒÚº  
4. **Ø§Û’ Ø¢Ø¦ÛŒ Ú©ÛŒ Ù„Ø§Ú¯Øª Ú©Ùˆ Ù…Ø§Ù†ÛŒÙ¹Ø± Ú©Ø±ÛŒÚº** - Ù¹ÙˆÚ©Ù†Ø² Ø§ÙˆØ± Ø®Ø±Ú† Ú©Ùˆ Ù¹Ø±ÛŒÚ© Ú©Ø±ÛŒÚº  
5. **Ø§Ù„Ø±Ù¹Ø³ Ø³ÛŒÙ¹ Ú©Ø±ÛŒÚº** - Ø±Ø¯Ø¹Ù…Ù„ Ú©Û’ Ø¨Ø¬Ø§Ø¦Û’ Ù¾ÛŒØ´Ú¯ÛŒ Ø§Ù‚Ø¯Ø§Ù…Ø§Øª Ú©Ø±ÛŒÚº  
6. **Ù„Ø§Ú¯Øª Ú©Ùˆ Ø¨ÛØªØ± Ø¨Ù†Ø§Ø¦ÛŒÚº** - Ø³ÛŒÙ…Ù¾Ù„Ù†Ú¯ Ø§ÙˆØ± Ø±ÛŒÙ¹ÛŒÙ†Ø´Ù† Ø­Ø¯ÙˆØ¯ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº  

**Ø§Ú¯Ù„Û’ Ø§Ù‚Ø¯Ø§Ù…Ø§Øª:**  
1. Ø¹Ù…Ù„ÛŒ Ù…Ø´Ù‚ÛŒÚº Ù…Ú©Ù…Ù„ Ú©Ø±ÛŒÚº  
2. Ø§Ù¾Ù†Û’ AZD Ù¾Ø±ÙˆØ¬ÛŒÚ©Ù¹Ø³ Ù…ÛŒÚº Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº  
3. Ø§Ù¾Ù†ÛŒ Ù¹ÛŒÙ… Ú©Û’ Ù„ÛŒÛ’ Ú©Ø³Ù¹Ù… ÚˆÛŒØ´ Ø¨ÙˆØ±ÚˆØ² Ø¨Ù†Ø§Ø¦ÛŒÚº  
4. [ÚˆÛŒÙ¾Ù„Ø§Ø¦Ù…Ù†Ù¹ Ú¯Ø§Ø¦ÛŒÚˆ](../deployment/deployment-guide.md) Ø³ÛŒÚ©Ú¾ÛŒÚº  

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Ø§Ø¹Ù„Ø§Ù†Ù Ù„Ø§ØªØ¹Ù„Ù‚ÛŒ**:  
ÛŒÛ Ø¯Ø³ØªØ§ÙˆÛŒØ² AI ØªØ±Ø¬Ù…Û Ø³Ø±ÙˆØ³ [Co-op Translator](https://github.com/Azure/co-op-translator) Ú©Ø§ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ØªÛ’ ÛÙˆØ¦Û’ ØªØ±Ø¬Ù…Û Ú©ÛŒ Ú¯Ø¦ÛŒ ÛÛ’Û” ÛÙ… Ø¯Ø±Ø³ØªÚ¯ÛŒ Ú©Û’ Ù„ÛŒÛ’ Ú©ÙˆØ´Ø´ Ú©Ø±ØªÛ’ ÛÛŒÚºØŒ Ù„ÛŒÚ©Ù† Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø¢Ú¯Ø§Û Ø±ÛÛŒÚº Ú©Û Ø®ÙˆØ¯Ú©Ø§Ø± ØªØ±Ø¬Ù…Û’ Ù…ÛŒÚº ØºÙ„Ø·ÛŒØ§Úº ÛŒØ§ ØºÛŒØ± Ø¯Ø±Ø³ØªÛŒØ§Úº ÛÙˆ Ø³Ú©ØªÛŒ ÛÛŒÚºÛ” Ø§ØµÙ„ Ø¯Ø³ØªØ§ÙˆÛŒØ² Ú©Ùˆ Ø§Ø³ Ú©ÛŒ Ø§ØµÙ„ Ø²Ø¨Ø§Ù† Ù…ÛŒÚº Ù…Ø³ØªÙ†Ø¯ Ø°Ø±ÛŒØ¹Û Ø³Ù…Ø¬Ú¾Ø§ Ø¬Ø§Ù†Ø§ Ú†Ø§ÛÛŒÛ’Û” Ø§ÛÙ… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ú©Û’ Ù„ÛŒÛ’ØŒ Ù¾ÛŒØ´Û ÙˆØ± Ø§Ù†Ø³Ø§Ù†ÛŒ ØªØ±Ø¬Ù…Û Ú©ÛŒ Ø³ÙØ§Ø±Ø´ Ú©ÛŒ Ø¬Ø§ØªÛŒ ÛÛ’Û” ÛÙ… Ø§Ø³ ØªØ±Ø¬Ù…Û’ Ú©Û’ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ø³Û’ Ù¾ÛŒØ¯Ø§ ÛÙˆÙ†Û’ ÙˆØ§Ù„ÛŒ Ú©Ø³ÛŒ Ø¨Ú¾ÛŒ ØºÙ„Ø· ÙÛÙ…ÛŒ ÛŒØ§ ØºÙ„Ø· ØªØ´Ø±ÛŒØ­ Ú©Û’ Ø°Ù…Û Ø¯Ø§Ø± Ù†ÛÛŒÚº ÛÛŒÚºÛ”
<!-- CO-OP TRANSLATOR DISCLAIMER END -->