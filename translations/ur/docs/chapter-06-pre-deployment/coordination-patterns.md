# Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ Ú©ÙˆØ¢Ø±ÚˆÛŒÙ†ÛŒØ´Ù† Ù¾ÛŒÙ¹Ø±Ù†Ø²

â±ï¸ **Ù…ØªÙˆÙ‚Ø¹ ÙˆÙ‚Øª**: 60-75 Ù…Ù†Ù¹ | ğŸ’° **Ù…ØªÙˆÙ‚Ø¹ Ù„Ø§Ú¯Øª**: ~ $100-300/Ù…ÛÛŒÙ†Û | â­ **Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ**: Ø§Ø¹Ù„ÛŒÙ°

**ğŸ“š Ø³ÛŒÚ©Ú¾Ù†Û’ Ú©Ø§ Ø±Ø§Ø³ØªÛ:**
- â† Ù¾Ú†Ú¾Ù„Ø§: [ØµÙ„Ø§Ø­ÛŒØª Ú©ÛŒ Ù…Ù†ØµÙˆØ¨Û Ø¨Ù†Ø¯ÛŒ](capacity-planning.md) - ÙˆØ³Ø§Ø¦Ù„ Ú©Ø§ Ø³Ø§Ø¦Ø² Ø§ÙˆØ± Ø§Ø³Ú©ÛŒÙ„Ù†Ú¯ Ø­Ú©Ù…Øª Ø¹Ù…Ù„ÛŒØ§Úº
- ğŸ¯ **Ø¢Ù¾ ÛŒÛØ§Úº ÛÛŒÚº**: Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ Ú©ÙˆØ¢Ø±ÚˆÛŒÙ†ÛŒØ´Ù† Ù¾ÛŒÙ¹Ø±Ù†Ø² (Ø¢Ø±Ú©Ø³Ù¹Ø±ÛŒØ´Ù†ØŒ Ù…ÙˆØ§ØµÙ„Ø§ØªØŒ Ø±ÛŒØ§Ø³Øª Ú©Ø§ Ø§Ù†ØªØ¸Ø§Ù…)
- â†’ Ø§Ú¯Ù„Ø§: [SKU Selection](sku-selection.md) - ØµØ­ÛŒØ­ Azure Ø³Ø±ÙˆØ³Ø² Ú©Ø§ Ø§Ù†ØªØ®Ø§Ø¨
- ğŸ  [Ú©ÙˆØ±Ø³ ÛÙˆÙ…](../../README.md)

---

## Ø¢Ù¾ Ú©ÛŒØ§ Ø³ÛŒÚ©Ú¾ÛŒÚº Ú¯Û’

Ø§Ø³ Ø³Ø¨Ù‚ Ú©Ùˆ Ù…Ú©Ù…Ù„ Ú©Ø±Ù†Û’ Ú©Û’ Ø¨Ø¹Ø¯ Ø¢Ù¾:
- Ø³Ù…Ø¬Ú¾ÛŒÚº **Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ Ø¢Ø±Ú©ÛŒÙ¹ÛŒÚ©Ú†Ø±** Ù¾ÛŒÙ¹Ø±Ù†Ø² Ø§ÙˆØ± Ú©Ø¨ Ø§Ù†ÛÛŒÚº Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±Ù†Ø§ Ú†Ø§ÛÛŒÛ’
- Ø¹Ù…Ù„ÛŒ Ø¬Ø§Ù…Û Ù¾ÛÙ†Ø§Ø¦ÛŒÚº **Ø¢Ø±Ú©Ø³Ù¹Ø±ÛŒØ´Ù† Ù¾ÛŒÙ¹Ø±Ù†Ø²** (Ù…Ø±Ú©Ø²ÛŒØŒ ØºÛŒØ± Ù…Ø±Ú©Ø²ÛŒØŒ Ø¯Ø±Ø¬Û ÙˆØ§Ø±)
- ÚˆÛŒØ²Ø§Ø¦Ù† Ú©Ø±ÛŒÚº **Ø§ÛŒØ¬Ù†Ù¹ Ú©Ù…ÛŒÙˆÙ†ÛŒÚ©ÛŒØ´Ù†** Ø­Ú©Ù…Øª Ø¹Ù…Ù„ÛŒØ§Úº (ÛÙ… ÙˆÙ‚ØªØŒ ØºÛŒØ± ÛÙ… ÙˆÙ‚ØªØŒ ÙˆØ§Ù‚Ø¹Û Ù¾Ø± Ù…Ø¨Ù†ÛŒ)
- Ù…Ù†ØªØ¸Ù… Ú©Ø±ÛŒÚº **Ù…Ø´ØªØ±Ú©Û Ø±ÛŒØ§Ø³Øª** Ú©Ùˆ ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ø§ÛŒØ¬Ù†Ù¹Ø³ Ú©Û’ Ø¯Ø±Ù…ÛŒØ§Ù†
- Azure Ù¾Ø± AZD Ú©Û’ Ø³Ø§ØªÚ¾ **Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ Ø³Ø³Ù¹Ù…Ø²** Ú©Ùˆ ØªØ¹ÛŒÙ†Ø§Øª Ú©Ø±ÛŒÚº
- Ø­Ù‚ÛŒÙ‚ÛŒ Ø¯Ù†ÛŒØ§ Ú©Û’ AI Ù…Ù†Ø¸Ø±Ù†Ø§Ù…ÙˆÚº Ú©Û’ Ù„ÛŒÛ’ **ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ Ù¾ÛŒÙ¹Ø±Ù†Ø²** Ù„Ø§Ú¯Ùˆ Ú©Ø±ÛŒÚº
- ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ø§ÛŒØ¬Ù†Ù¹ Ø³Ø³Ù¹Ù…Ø² Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ø§ÙˆØ± ÚˆÛŒØ¨Ú¯ Ú©Ø±ÛŒÚº

## Ú©ÛŒÙˆÚº Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ Ø§ÛÙ… ÛÛ’

### Ø§Ø±ØªÙ‚Ø§Ø¡: Ø³Ù†Ú¯Ù„ Ø§ÛŒØ¬Ù†Ù¹ Ø³Û’ Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ ØªÚ©

**Ø³Ù†Ú¯Ù„ Ø§ÛŒØ¬Ù†Ù¹ (Ø³Ø§Ø¯Û):**
```
User â†’ Agent â†’ Response
```

- âœ… Ø³Ù…Ø¬Ú¾Ù†Û’ Ø§ÙˆØ± Ù†Ø§ÙØ° Ú©Ø±Ù†Û’ Ù…ÛŒÚº Ø¢Ø³Ø§Ù†
- âœ… Ø³Ø§Ø¯Û Ú©Ø§Ù…ÙˆÚº Ú©Û’ Ù„ÛŒÛ’ ØªÛŒØ²
- âŒ Ø§ÛŒÚ© ÛÛŒ Ù…Ø§ÚˆÙ„ Ú©ÛŒ ØµÙ„Ø§Ø­ÛŒØªÙˆÚº ØªÚ© Ù…Ø­Ø¯ÙˆØ¯
- âŒ Ù¾ÛŒÚ†ÛŒØ¯Û Ú©Ø§Ù…ÙˆÚº Ú©Ùˆ Ù…ØªÙˆØ§Ø²ÛŒ Ù†ÛÛŒÚº Ú©Ø± Ø³Ú©ØªØ§
- âŒ Ú©ÙˆØ¦ÛŒ ØªØ®ØµØµ Ù†ÛÛŒÚº

**Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ Ø³Ø³Ù¹Ù… (Ø§Ø¹Ù„ÛŒÙ°):**
```
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Orchestratorâ”‚
           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         â”‚         â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
    â”‚Agent1â”‚  â”‚Agent2â”‚  â”‚Agent3 â”‚
    â”‚(Plan)â”‚  â”‚(Code)â”‚  â”‚(Review)â”‚
    â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

- âœ… Ù…Ø®ØµÙˆØµ Ú©Ø§Ù…ÙˆÚº Ú©Û’ Ù„ÛŒÛ’ ØªØ®ØµØµÛŒ Ø§ÛŒØ¬Ù†Ù¹Ø³
- âœ… Ø±ÙØªØ§Ø± Ú©Û’ Ù„ÛŒÛ’ Ù…ØªÙˆØ§Ø²ÛŒ Ø§Ø¬Ø±Ø§
- âœ… Ù…Ø§ÚˆÛŒÙˆÙ„Ø± Ø§ÙˆØ± Ù‚Ø§Ø¨Ù„Ù Ø¯ÛŒÚ©Ú¾ Ø¨Ú¾Ø§Ù„
- âœ… Ù¾ÛŒÚ†ÛŒØ¯Û ÙˆØ±Ú© ÙÙ„Ùˆ Ù…ÛŒÚº Ø¨ÛØªØ±
- âš ï¸ ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ Ù„Ø§Ø¬Ú© Ú©ÛŒ Ø¶Ø±ÙˆØ±Øª ÛÙˆØªÛŒ ÛÛ’

**ØªØ´Ø¨ÛŒÛ**: Ø§ÛŒÚ© Ø³Ù†Ú¯Ù„ Ø§ÛŒØ¬Ù†Ù¹ Ø§ÛŒØ³Û’ ÛÛ’ Ø¬ÛŒØ³Û’ Ø§ÛŒÚ© Ø´Ø®Øµ ØªÙ…Ø§Ù… Ú©Ø§Ù… Ú©Ø± Ø±ÛØ§ ÛÙˆÛ” Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ Ø§ÛŒØ³Û’ ÛÛ’ Ø¬ÛŒØ³Û’ Ø§ÛŒÚ© Ù¹ÛŒÙ… Ø¬ÛØ§Úº ÛØ± Ø±Ú©Ù† Ú©Û’ Ù…Ø®ØµÙˆØµ ÛÙ†Ø± ÛÙˆÚº (Ù…Ø­Ù‚Ù‚ØŒ Ú©ÙˆÚˆØ±ØŒ Ø¬Ø§Ø¦Ø²Û Ù†Ú¯Ø§Ø±ØŒ Ù„Ú©Ú¾Ù†Û’ ÙˆØ§Ù„Ø§) Ø§ÙˆØ± ÙˆÛ Ù…Ù„ Ú©Ø± Ú©Ø§Ù… Ú©Ø±ØªÛ’ ÛÛŒÚºÛ”

---

## Ø¨Ù†ÛŒØ§Ø¯ÛŒ ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ Ù¾ÛŒÙ¹Ø±Ù†Ø²

### Ù¾ÛŒÙ¹Ø±Ù† 1: ØªØ±ØªÛŒØ¨ ÙˆØ§Ø± ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ (Ø°Ù…Û Ø¯Ø§Ø±ÛŒ Ú©ÛŒ Ø²Ù†Ø¬ÛŒØ±)

**Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø¨ Ú©Ø±ÛŒÚº**: Ú©Ø§Ù… Ù…Ø®ØµÙˆØµ ØªØ±ØªÛŒØ¨ Ù…ÛŒÚº Ù…Ú©Ù…Ù„ ÛÙˆÙ†Û’ Ú†Ø§ÛØ¦ÛŒÚºØŒ ÛØ± Ø§ÛŒØ¬Ù†Ù¹ Ù¾Ú†Ú¾Ù„Û’ Ø¢Ø¤Ù¹ Ù¾Ù¹ Ù¾Ø± ØªØ¹Ù…ÛŒØ± Ú©Ø±ØªØ§ ÛÛ’Û”

```mermaid
sequenceDiagram
    participant User
    participant Orchestrator
    participant Agent1 as ØªØ­Ù‚ÛŒÙ‚ÛŒ Ø§ÛŒØ¬Ù†Ù¹
    participant Agent2 as Ù…ØµÙ†Ù Ø§ÛŒØ¬Ù†Ù¹
    participant Agent3 as Ù…Ø¯ÛŒØ± Ø§ÛŒØ¬Ù†Ù¹
    
    User->>Orchestrator: "Ù…ØµÙ†ÙˆØ¹ÛŒ Ø°ÛØ§Ù†Øª Ú©Û’ Ø¨Ø§Ø±Û’ Ù…ÛŒÚº Ù…Ø¶Ù…ÙˆÙ† Ù„Ú©Ú¾ÛŒÚº"
    Orchestrator->>Agent1: Ù…ÙˆØ¶ÙˆØ¹ Ú©ÛŒ ØªØ­Ù‚ÛŒÙ‚ Ú©Ø±ÛŒÚº
    Agent1-->>Orchestrator: ØªØ­Ù‚ÛŒÙ‚ Ú©Û’ Ù†ØªØ§Ø¦Ø¬
    Orchestrator->>Agent2: Ù…Ø³ÙˆØ¯Û Ù„Ú©Ú¾ÛŒÚº (ØªØ­Ù‚ÛŒÙ‚ Ú©ÛŒ Ø¨Ù†ÛŒØ§Ø¯ Ù¾Ø±)
    Agent2-->>Orchestrator: Ù…Ø³ÙˆØ¯Û Ù…Ø¶Ù…ÙˆÙ†
    Orchestrator->>Agent3: ØªØ±Ù…ÛŒÙ… Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ø¨ÛØªØ± Ø¨Ù†Ø§Ø¦ÛŒÚº
    Agent3-->>Orchestrator: Ø­ØªÙ…ÛŒ Ù…Ø¶Ù…ÙˆÙ†
    Orchestrator-->>User: Ø³Ù†ÙˆØ§Ø±Ø§ ÛÙˆØ§ Ù…Ø¶Ù…ÙˆÙ†
    
    Note over User,Agent3: ØªØ±ØªÛŒØ¨ÛŒ: ÛØ± Ù‚Ø¯Ù… Ù¾Ú†Ú¾Ù„Û’ Ú©Û’ Ù…Ú©Ù…Ù„ ÛÙˆÙ†Û’ Ú©Ø§ Ø§Ù†ØªØ¸Ø§Ø± Ú©Ø±ØªØ§ ÛÛ’
```
**ÙØ§Ø¦Ø¯Û’:**
- âœ… ÙˆØ§Ø¶Ø­ ÚˆÛŒÙ¹Ø§ ÙÙ„Ùˆ
- âœ… ÚˆÛŒØ¨Ú¯ Ú©Ø±Ù†Ø§ Ø¢Ø³Ø§Ù†
- âœ… Ù‚Ø§Ø¨Ù„Ù Ù¾ÛŒØ´ Ú¯ÙˆØ¦ÛŒ Ø§Ø¬Ø±Ø§ Ú©ÛŒ ØªØ±ØªÛŒØ¨

**Ø­Ø¯ÙˆØ¯:**
- âŒ Ø³Ø³Øª (Ù…ØªÙˆØ§Ø²ÛŒ Ù†ÛÛŒÚº)
- âŒ Ø§ÛŒÚ© Ù†Ø§Ú©Ø§Ù…ÛŒ Ù¾ÙˆØ±ÛŒ Ø²Ù†Ø¬ÛŒØ± Ú©Ùˆ Ø±ÙˆÚ©ØªÛŒ ÛÛ’
- âŒ Ø¨Ø§ÛÙ…ÛŒ Ø§Ù†Ø­ØµØ§Ø± ÙˆØ§Ù„Û’ Ú©Ø§Ù…ÙˆÚº Ú©Ùˆ Ø³Ù†Ø¨Ú¾Ø§Ù„ Ù†ÛÛŒÚº Ø³Ú©ØªØ§

**Ù…Ø«Ø§Ù„ÛŒ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Û’ Ù…Ø¹Ø§Ù…Ù„Ø§Øª:**
- Ù…ÙˆØ§Ø¯ ØªØ®Ù„ÛŒÙ‚ Ù¾Ø§Ø¦Ù¾ Ù„Ø§Ø¦Ù† (ØªØ­Ù‚ÛŒÙ‚ â†’ Ù„Ú©Ú¾Ù†Ø§ â†’ ØªØ±Ù…ÛŒÙ… â†’ Ø´Ø§Ø¦Ø¹ Ú©Ø±Ù†Ø§)
- Ú©ÙˆÚˆ Ø¬Ù†Ø±ÛŒØ´Ù† (Ù…Ù†ØµÙˆØ¨Û Ø¨Ù†Ø¯ÛŒ â†’ Ù†ÙØ§Ø° â†’ Ù¹ÛŒØ³Ù¹ â†’ ØªØ¹ÛŒÙ†Ø§ØªÛŒ)
- Ø±Ù¾ÙˆØ±Ù¹ Ø¬Ù†Ø±ÛŒØ´Ù† (ÚˆÛŒÙ¹Ø§ Ø¬Ù…Ø¹ Ú©Ø±Ù†Ø§ â†’ ØªØ¬Ø²ÛŒÛ â†’ Ø¨ØµØ±ÛŒ Ù†Ù…Ø§Ø¦Ù†Ø¯Ú¯ÛŒ â†’ Ø®Ù„Ø§ØµÛ)

---

### Ù¾ÛŒÙ¹Ø±Ù† 2: Ù…ØªÙˆØ§Ø²ÛŒ ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ (ÙÛŒÙ†-Ø¢Ø¤Ù¹/ÙÛŒÙ†-Ø§Ù†)

**Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø¨ Ú©Ø±ÛŒÚº**: Ø¢Ø²Ø§Ø¯Ø§Ù†Û Ú©Ø§Ù… Ø¨ÛŒÚ© ÙˆÙ‚Øª Ú†Ù„ Ø³Ú©ØªÛ’ ÛÛŒÚºØŒ Ù†ØªØ§Ø¦Ø¬ Ø¢Ø®Ø± Ù…ÛŒÚº ÛŒÚ©Ø¬Ø§ Ú©ÛŒÛ’ Ø¬Ø§ØªÛ’ ÛÛŒÚºÛ”

```mermaid
graph TB
    User[ØµØ§Ø±Ù Ú©ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª]
    Orchestrator[ÛÙ… Ø¢ÛÙ†Ú¯ Ú©Ù†Ù†Ø¯Û]
    Agent1[ØªØ¬Ø²ÛŒØ§ØªÛŒ Ø§ÛŒØ¬Ù†Ù¹]
    Agent2[ØªØ­Ù‚ÛŒÙ‚ÛŒ Ø§ÛŒØ¬Ù†Ù¹]
    Agent3[ÚˆÛŒÙ¹Ø§ Ø§ÛŒØ¬Ù†Ù¹]
    Aggregator[Ù†ØªØ§Ø¦Ø¬ Ø¬Ù…Ø¹ Ú©Ø±Ù†Û’ ÙˆØ§Ù„Ø§]
    Response[Ù…Ø¬Ù…ÙˆØ¹ÛŒ Ø¬ÙˆØ§Ø¨]
    
    User --> Orchestrator
    Orchestrator --> Agent1
    Orchestrator --> Agent2
    Orchestrator --> Agent3
    Agent1 --> Aggregator
    Agent2 --> Aggregator
    Agent3 --> Aggregator
    Aggregator --> Response
    
    style Orchestrator fill:#2196F3,stroke:#1976D2,stroke-width:3px,color:#fff
    style Aggregator fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
```
**ÙØ§Ø¦Ø¯Û’:**
- âœ… ØªÛŒØ² (Ù…ØªÙˆØ§Ø²ÛŒ Ø§Ø¬Ø±Ø§)
- âœ… Ù†Ù‚Øµ Ø¨Ø±Ø¯Ø§Ø´Øª Ú©Ø±Ù†Û’ Ú©Û’ Ù‚Ø§Ø¨Ù„ (Ø¬Ø²ÙˆÛŒ Ù†ØªØ§Ø¦Ø¬ Ù‚Ø§Ø¨Ù„Ù Ù‚Ø¨ÙˆÙ„)
- âœ… Ø§ÙÙ‚ÛŒ Ø·ÙˆØ± Ù¾Ø± Ù‚Ø§Ø¨Ù„Ù Ø§Ø³Ú©ÛŒÙ„

**Ø­Ø¯ÙˆØ¯:**
- âš ï¸ Ù†ØªØ§Ø¦Ø¬ ØºÛŒØ± ØªØ±ØªÛŒØ¨ Ù…ÛŒÚº Ù¾ÛÙ†Ú† Ø³Ú©ØªÛ’ ÛÛŒÚº
- âš ï¸ ØªØ¬Ù…ÛŒØ¹ÛŒ Ù„Ø§Ø¬Ú© Ú©ÛŒ Ø¶Ø±ÙˆØ±Øª
- âš ï¸ Ù¾ÛŒÚ†ÛŒØ¯Û Ø§Ø³Ù¹ÛŒÙ¹ Ù…ÛŒÙ†Ø¬Ù…Ù†Ù¹

**Ù…Ø«Ø§Ù„ÛŒ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Û’ Ù…Ø¹Ø§Ù…Ù„Ø§Øª:**
- Ù…ØªØ¹Ø¯Ø¯ Ù…Ø§Ø®Ø°ÙˆÚº Ø³Û’ ÚˆÛŒÙ¹Ø§ Ø¬Ù…Ø¹ Ú©Ø±Ù†Ø§ (APIs + ÚˆÛŒÙ¹Ø§ Ø¨ÛŒØ³ + ÙˆÛŒØ¨ Ø§Ø³Ú©Ø±ÛŒÙ¾Ù†Ú¯)
- Ù…Ø³Ø§Ø¨Ù‚ØªÛŒ ØªØ¬Ø²ÛŒÛ (Ù…ØªØ¹Ø¯Ø¯ Ù…Ø§ÚˆÙ„Ø² Ø­Ù„ ØªÛŒØ§Ø± Ú©Ø±ØªÛ’ ÛÛŒÚºØŒ Ø¨ÛØªØ±ÛŒÙ† Ù…Ù†ØªØ®Ø¨ Ú©ÛŒØ§ Ø¬Ø§ØªØ§ ÛÛ’)
- ØªØ±Ø¬Ù…Û Ø®Ø¯Ù…Ø§Øª (Ù…ØªØ¹Ø¯Ø¯ Ø²Ø¨Ø§Ù†ÙˆÚº Ù…ÛŒÚº Ø§ÛŒÚ© ÛÛŒ ÙˆÙ‚Øª Ù…ÛŒÚº ØªØ±Ø¬Ù…Û)

---

### Ù¾ÛŒÙ¹Ø±Ù† 3: Ø¯Ø±Ø¬Û ÙˆØ§Ø± ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ (Ù…ÛŒÙ†Ø¬Ø±-ÙˆØ±Ú©Ø±)

**Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø¨ Ú©Ø±ÛŒÚº**: Ù¾ÛŒÚ†ÛŒØ¯Û ÙˆØ±Ú© ÙÙ„Ùˆ Ø¬Ù† Ù…ÛŒÚº Ø°ÛŒÙ„ÛŒ Ú©Ø§Ù… ÛÙˆÚº Ø§ÙˆØ± ØªÙÙˆÛŒØ¶ Ø¶Ø±ÙˆØ±ÛŒ ÛÙˆÛ”

```mermaid
graph TB
    Master[Ù…Ø§Ø³Ù¹Ø± Ø¢Ø±Ú©Ø³Ù¹Ø±ÛŒÙ¹Ø±]
    Manager1[ØªØ­Ù‚ÛŒÙ‚ÛŒ Ù…Ù†ØªØ¸Ù…]
    Manager2[Ù…ÙˆØ§Ø¯ Ú©Ø§ Ù…Ù†ØªØ¸Ù…]
    W1[ÙˆÛŒØ¨ Ø§Ø³Ú©Ø±ÛŒÙ¾Ø±]
    W2[Ù…Ù‚Ø§Ù„Û ØªØ¬Ø²ÛŒÛ Ú©Ø§Ø±]
    W3[Ù…ØµÙ†Ù]
    W4[Ù…Ø¯ÛŒØ±]
    
    Master --> Manager1
    Master --> Manager2
    Manager1 --> W1
    Manager1 --> W2
    Manager2 --> W3
    Manager2 --> W4
    
    style Master fill:#FF9800,stroke:#F57C00,stroke-width:3px,color:#fff
    style Manager1 fill:#2196F3,stroke:#1976D2,stroke-width:2px,color:#fff
    style Manager2 fill:#2196F3,stroke:#1976D2,stroke-width:2px,color:#fff
```
**ÙØ§Ø¦Ø¯Û’:**
- âœ… Ù¾ÛŒÚ†ÛŒØ¯Û ÙˆØ±Ú© ÙÙ„Ùˆ Ø³Ù†Ø¨Ú¾Ø§Ù„ØªØ§ ÛÛ’
- âœ… Ù…Ø§ÚˆÛŒÙˆÙ„Ø± Ø§ÙˆØ± Ù‚Ø§Ø¨Ù„Ù Ø¯ÛŒÚ©Ú¾ Ø¨Ú¾Ø§Ù„
- âœ… Ø°Ù…Û Ø¯Ø§Ø±ÛŒÙˆÚº Ú©ÛŒ ÙˆØ§Ø¶Ø­ Ø­Ø¯ Ø¨Ù†Ø¯ÛŒ

**Ø­Ø¯ÙˆØ¯:**
- âš ï¸ Ù…Ø²ÛŒØ¯ Ù¾ÛŒÚ†ÛŒØ¯Û Ø¢Ø±Ú©ÛŒÙ¹ÛŒÚ©Ú†Ø±
- âš ï¸ Ø²ÛŒØ§Ø¯Û Ù„ÛŒÙ¹Ù†Ø³ÛŒ (Ù…ØªØ¹Ø¯Ø¯ ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ Ù¾Ø±ØªÛŒÚº)
- âš ï¸ Ù†ÙÛŒØ³ Ø¢Ø±Ú©Ø³Ù¹Ø±ÛŒØ´Ù† Ø¯Ø±Ú©Ø§Ø± ÛÛ’

**Ù…Ø«Ø§Ù„ÛŒ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Û’ Ù…Ø¹Ø§Ù…Ù„Ø§Øª:**
- Ø§Ù†Ù¹Ø±Ù¾Ø±Ø§Ø¦Ø² Ø¯Ø³ØªØ§ÙˆÛŒØ² Ù¾Ø±ÙˆØ³ÛŒØ³Ù†Ú¯ (Ø¯Ø±Ø¬Û Ø¨Ù†Ø¯ÛŒ â†’ Ø¨Ú¾ÛŒØ¬Ù†Ø§ â†’ Ù¾Ø±ÙˆØ³ÛŒØ³ Ú©Ø±Ù†Ø§ â†’ Ø¢Ø±Ú©Ø§Ø¦ÛŒÙˆ)
- Ú©Ø¦ÛŒ Ù…Ø±Ø­Ù„ÙˆÚº ÙˆØ§Ù„ÛŒ ÚˆÛŒÙ¹Ø§ Ù¾Ø§Ø¦Ù¾ Ù„Ø§Ø¦Ù†Ø² (Ø§Ù†Ø¬Ø³Ù¹ â†’ ØµØ§Ù Ú©Ø±Ù†Ø§ â†’ ØªØ¨Ø¯ÛŒÙ„ Ú©Ø±Ù†Ø§ â†’ ØªØ¬Ø²ÛŒÛ â†’ Ø±Ù¾ÙˆØ±Ù¹)
- Ù¾ÛŒÚ†ÛŒØ¯Û Ø¢Ù¹ÙˆÙ…ÛŒØ´Ù† ÙˆØ±Ú© ÙÙ„Ùˆ (Ù…Ù†ØµÙˆØ¨Û Ø¨Ù†Ø¯ÛŒ â†’ ÙˆØ³Ø§Ø¦Ù„ Ú©ÛŒ ØªÙ‚Ø³ÛŒÙ… â†’ Ø¹Ù…Ù„Ø¯Ø±Ø¢Ù…Ø¯ â†’ Ù†Ú¯Ø±Ø§Ù†ÛŒ)

---

### Ù¾ÛŒÙ¹Ø±Ù† 4: ÙˆØ§Ù‚Ø¹Û Ù¾Ø± Ù…Ø¨Ù†ÛŒ ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ (Ù¾Ø¨Ù„Ø´-Ø³Ø¨Ø³Ú©Ø±Ø§Ø¦Ø¨)

**Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø¨ Ú©Ø±ÛŒÚº**: Ø¬Ø¨ Ø§ÛŒØ¬Ù†Ù¹Ø³ Ú©Ùˆ ÙˆØ§Ù‚Ø¹Ø§Øª Ù¾Ø± Ø±Ø¯Ù Ø¹Ù…Ù„ Ø¯Ú©Ú¾Ø§Ù†Ø§ ÛÙˆ Ø§ÙˆØ± Ú©Ù… Ø¬ÙˆÚ‘Ù†Û’ ÙˆØ§Ù„ÛŒ Ø³Ø§Ø®Øª Ù…Ø·Ù„ÙˆØ¨ ÛÙˆÛ”

```mermaid
sequenceDiagram
    participant Agent1 as ÚˆÛŒÙ¹Ø§ Ø¬Ù…Ø¹ Ú©Ø±Ù†Û’ ÙˆØ§Ù„Ø§
    participant EventBus as Ø§ÛŒØ²ÙˆØ± Ø³Ø±ÙˆØ³ Ø¨Ø³
    participant Agent2 as ØªØ¬Ø²ÛŒÛ Ú©Ø§Ø±
    participant Agent3 as Ø§Ø·Ù„Ø§Ø¹ Ø¯ÛŒÙ†Û’ ÙˆØ§Ù„Ø§
    participant Agent4 as Ø¢Ø±Ú©Ø§Ø¦ÛŒÙˆØ±
    
    Agent1->>EventBus: ÙˆØ§Ù‚Ø¹Û "ÚˆÛŒÙ¹Ø§ Ù…ÙˆØµÙˆÙ„ ÛÙˆØ§" Ø´Ø§Ø¦Ø¹ Ú©Ø±ÛŒÚº
    EventBus->>Agent2: Ø³Ø¨Ø³Ú©Ø±Ø§Ø¦Ø¨: ÚˆÛŒÙ¹Ø§ Ú©Ø§ ØªØ¬Ø²ÛŒÛ Ú©Ø±ÛŒÚº
    EventBus->>Agent3: Ø³Ø¨Ø³Ú©Ø±Ø§Ø¦Ø¨: Ø§Ø·Ù„Ø§Ø¹ Ø¨Ú¾ÛŒØ¬ÛŒÚº
    EventBus->>Agent4: Ø³Ø¨Ø³Ú©Ø±Ø§Ø¦Ø¨: ÚˆÛŒÙ¹Ø§ Ù…Ø­ÙÙˆØ¸ Ú©Ø±ÛŒÚº
    
    Note over Agent1,Agent4: ØªÙ…Ø§Ù… Ø³Ø¨Ø³Ú©Ø±Ø§Ø¦Ø¨Ø±Ø² Ø¢Ø²Ø§Ø¯Ø§Ù†Û Ø·ÙˆØ± Ù¾Ø± Ø¹Ù…Ù„ Ú©Ø±ØªÛ’ ÛÛŒÚº
    
    Agent2->>EventBus: ÙˆØ§Ù‚Ø¹Û "ØªØ¬Ø²ÛŒÛ Ù…Ú©Ù…Ù„" Ø´Ø§Ø¦Ø¹ Ú©Ø±ÛŒÚº
    EventBus->>Agent3: Ø³Ø¨Ø³Ú©Ø±Ø§Ø¦Ø¨: ØªØ¬Ø²ÛŒØ§ØªÛŒ Ø±Ù¾ÙˆØ±Ù¹ Ø¨Ú¾ÛŒØ¬ÛŒÚº
```
**ÙØ§Ø¦Ø¯Û’:**
- âœ… Ø§ÛŒØ¬Ù†Ù¹Ø³ Ú©Û’ Ø¯Ø±Ù…ÛŒØ§Ù† Ú©Ù… Ù…Ø±Ø¨ÙˆØ·ÛŒ
- âœ… Ù†Ø¦Û’ Ø§ÛŒØ¬Ù†Ù¹Ø³ Ø´Ø§Ù…Ù„ Ú©Ø±Ù†Ø§ Ø¢Ø³Ø§Ù† (Ø¨Ø³ Ø³Ø¨Ø³Ú©Ø±Ø§Ø¦Ø¨ Ú©Ø±ÛŒÚº)
- âœ… ØºÛŒØ± ÛÙ… ÙˆÙ‚ØªÛŒ Ù¾Ø±ÙˆØ³ÛŒØ³Ù†Ú¯
- âœ… Ù…Ø¶Ø¨ÙˆØ· (Ù¾ÛŒØºØ§Ù… Ú©Ø§ Ù…Ø³ØªÙ‚Ù„ Ø±ÛÙ†Ø§)

**Ø­Ø¯ÙˆØ¯:**
- âš ï¸ Ø¨Ø§Ù„Ø¢Ø®Ø± Ù…Ø·Ø§Ø¨Ù‚Øª
- âš ï¸ Ù¾ÛŒÚ†ÛŒØ¯Û ÚˆÛŒØ¨Ú¯Ù†Ú¯
- âš ï¸ Ù¾ÛŒØºØ§Ù…Ø§Øª Ú©Û’ ØªØ±ØªÛŒØ¨ Ú©Û’ Ù…Ø³Ø§Ø¦Ù„

**Ù…Ø«Ø§Ù„ÛŒ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Û’ Ù…Ø¹Ø§Ù…Ù„Ø§Øª:**
- Ø­Ù‚ÛŒÙ‚ÛŒ ÙˆÙ‚Øª Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ú©Û’ Ù†Ø¸Ø§Ù… (Ø§Ù„Ø±Ù¹Ø³ØŒ ÚˆÛŒØ´ Ø¨ÙˆØ±ÚˆØ²ØŒ Ù„Ø§Ú¯Ø²)
- Ú©Ø¦ÛŒ Ú†ÛŒÙ†Ù„Ø² Ù¾Ø± Ø§Ø·Ù„Ø§Ø¹Ø§Øª (Ø§ÛŒ Ù…ÛŒÙ„ØŒ SMSØŒ Ù¾Ø´ØŒ Slack)
- ÚˆÛŒÙ¹Ø§ Ù¾Ø±ÙˆØ³ÛŒØ³Ù†Ú¯ Ù¾Ø§Ø¦Ù¾ Ù„Ø§Ø¦Ù†Ø² (Ø§ÛŒÚ© ÛÛŒ ÚˆÛŒÙ¹Ø§ Ú©Û’ Ù…ØªØ¹Ø¯Ø¯ Ú©Ù†Ø²ÛŒÙˆÙ…Ø±Ø²)

---

### Ù¾ÛŒÙ¹Ø±Ù† 5: Ø§ØªÙØ§Ù‚Ù Ø±Ø§Ø¦Û’ Ù¾Ø± Ù…Ø¨Ù†ÛŒ ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ (ÙˆÙˆÙ¹Ù†Ú¯/Ú©ÙˆØ§Ø±Ù…)

**Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø¨ Ú©Ø±ÛŒÚº**: Ù‚Ø¯Ù… Ø¨Ú‘Ú¾Ø§Ù†Û’ Ø³Û’ Ù¾ÛÙ„Û’ Ù…ØªØ¹Ø¯Ø¯ Ø§ÛŒØ¬Ù†Ù¹Ø³ Ø³Û’ Ø§ØªÙØ§Ù‚Ù Ø±Ø§Ø¦Û’ Ø¯Ø±Ú©Ø§Ø± ÛÙˆÛ”

```mermaid
graph TB
    Input[Ø¯Ø±Ø¬ Ø´Ø¯Û Ú©Ø§Ù…]
    Agent1[Ø§ÛŒØ¬Ù†Ù¹ 1: GPT-4]
    Agent2[Ø§ÛŒØ¬Ù†Ù¹ 2: Claude]
    Agent3[Ø§ÛŒØ¬Ù†Ù¹ 3: Gemini]
    Voter[Ø§Ø¬Ù…Ø§Ø¹ÛŒ Ø±Ø§Ø¦Û’ Ø¯ÛÙ†Ø¯Û]
    Output[Ù…ØªÙÙ‚Û Ù†ØªÛŒØ¬Û]
    
    Input --> Agent1
    Input --> Agent2
    Input --> Agent3
    Agent1 --> Voter
    Agent2 --> Voter
    Agent3 --> Voter
    Voter --> Output
    
    style Voter fill:#9C27B0,stroke:#7B1FA2,stroke-width:3px,color:#fff
```
**ÙØ§Ø¦Ø¯Û’:**
- âœ… Ø¨ÛØªØ± Ø¯Ø±Ø³ØªÚ¯ÛŒ (Ù…ØªØ¹Ø¯Ø¯ Ø¢Ø±Ø§Ø¡)
- âœ… Ù†Ù‚Øµ Ø¨Ø±Ø¯Ø§Ø´Øª Ú©Ø±Ù†Û’ Ú©Û’ Ù‚Ø§Ø¨Ù„ (Ø§Ù‚Ù„ÛŒØª Ú©ÛŒ Ù†Ø§Ú©Ø§Ù…ÛŒØ§Úº Ù‚Ø§Ø¨Ù„Ù Ù‚Ø¨ÙˆÙ„)
- âœ… Ù…Ø¹ÛŒØ§Ø± Ú©ÛŒ ÛŒÙ‚ÛŒÙ† Ø¯ÛØ§Ù†ÛŒ Ø´Ø§Ù…Ù„

**Ø­Ø¯ÙˆØ¯:**
- âŒ Ù…ÛÙ†Ú¯Ø§ (Ù…ØªØ¹Ø¯Ø¯ Ù…Ø§ÚˆÙ„ Ú©Ø§Ù„Ø²)
- âŒ Ø³Ø³Øª (ØªÙ…Ø§Ù… Ø§ÛŒØ¬Ù†Ù¹Ø³ Ú©Û’ Ø§Ù†ØªØ¸Ø§Ø± Ù…ÛŒÚº)
- âš ï¸ ØªÙ†Ø§Ø²Ø¹Ø§Øª Ú©Û’ Ø­Ù„ Ú©ÛŒ Ø¶Ø±ÙˆØ±Øª

**Ù…Ø«Ø§Ù„ÛŒ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Û’ Ù…Ø¹Ø§Ù…Ù„Ø§Øª:**
- Ù…ÙˆØ§Ø¯ Ú©ÛŒ Ù…Ø§Ù†ÛŒÙ¹Ø±Ù†Ú¯ (Ù…ØªØ¹Ø¯Ø¯ Ù…Ø§ÚˆÙ„Ø² Ù…ÙˆØ§Ø¯ Ú©Ø§ Ø¬Ø§Ø¦Ø²Û Ù„ÛŒØªÛ’ ÛÛŒÚº)
- Ú©ÙˆÚˆ Ø±ÛŒÙˆÛŒÙˆ (Ù…ØªØ¹Ø¯Ø¯ Ù„ÛŒÙ†Ù¹Ø±Ø²/ØªØ¬Ø²ÛŒÛ Ú©Ø§Ø±)
- Ø·Ø¨ÛŒ ØªØ´Ø®ÛŒØµ (Ù…ØªØ¹Ø¯Ø¯ AI Ù…Ø§ÚˆÙ„Ø²ØŒ Ù…Ø§ÛØ± Ú©ÛŒ ØªØµØ¯ÛŒÙ‚)

---

## Ø¢Ø±Ú©ÛŒÙ¹ÛŒÚ©Ú†Ø± Ú©Ø§ Ø¬Ø§Ø¦Ø²Û

### Azure Ù¾Ø± Ù…Ú©Ù…Ù„ Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ Ø³Ø³Ù¹Ù…

```mermaid
graph TB
    User[ØµØ§Ø±Ù/Ø§Û’ Ù¾ÛŒ Ø¢Ø¦ÛŒ Ú©Ù„Ø§Ø¦Ù†Ù¹]
    APIM[Azure API Ù…ÛŒÙ†Ø¬Ù…Ù†Ù¹]
    Orchestrator[Ø¢Ø±Ú©ÛŒØ³Ù¹Ø±ÛŒÙ¹Ø± Ø³Ø±ÙˆØ³<br/>Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾]
    ServiceBus[Azure Ø³Ø±ÙˆØ³ Ø¨Ø³<br/>Ø§ÛŒÙˆÙ†Ù¹ ÛØ¨]
    
    Agent1[ØªØ­Ù‚ÛŒÙ‚ÛŒ Ø§ÛŒØ¬Ù†Ù¹<br/>Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾]
    Agent2[Ù…ØµÙ†Ù Ø§ÛŒØ¬Ù†Ù¹<br/>Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾]
    Agent3[ØªØ¬Ø²ÛŒÛ Ú©Ø§Ø± Ø§ÛŒØ¬Ù†Ù¹<br/>Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾]
    Agent4[Ø¬Ø§Ø¦Ø²Û Ú©Ø§Ø± Ø§ÛŒØ¬Ù†Ù¹<br/>Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾]
    
    CosmosDB[(Cosmos DB<br/>Ù…Ø´ØªØ±Ú©Û Ø­Ø§Ù„Øª)]
    Storage[Azure Ø§Ø³Ù¹ÙˆØ±ÛŒØ¬<br/>Ø¢Ø±Ù¹ÛŒÙÛŒÚ©Ù¹Ø³]
    AppInsights[Application Insights<br/>Ù†Ú¯Ø±Ø§Ù†ÛŒ]
    
    User --> APIM
    APIM --> Orchestrator
    
    Orchestrator --> ServiceBus
    ServiceBus --> Agent1
    ServiceBus --> Agent2
    ServiceBus --> Agent3
    ServiceBus --> Agent4
    
    Agent1 --> CosmosDB
    Agent2 --> CosmosDB
    Agent3 --> CosmosDB
    Agent4 --> CosmosDB
    
    Agent1 --> Storage
    Agent2 --> Storage
    Agent3 --> Storage
    Agent4 --> Storage
    
    Orchestrator -.-> AppInsights
    Agent1 -.-> AppInsights
    Agent2 -.-> AppInsights
    Agent3 -.-> AppInsights
    Agent4 -.-> AppInsights
    
    style Orchestrator fill:#FF9800,stroke:#F57C00,stroke-width:3px,color:#fff
    style ServiceBus fill:#9C27B0,stroke:#7B1FA2,stroke-width:3px,color:#fff
    style CosmosDB fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
```
**Ú©Ù„ÛŒØ¯ÛŒ Ø§Ø¬Ø²Ø§Ø¡:**

| Ø¬Ø²Ùˆ | Ù…Ù‚ØµØ¯ | Azure Ø³Ø±ÙˆØ³ |
|-----------|---------|---------------|
| **API Gateway** | Ø¯Ø§Ø®Ù„Û’ Ú©Ø§ Ù…Ù‚Ø§Ù…ØŒ Ø±ÛŒÙ¹ Ù„Ù…Ù¹Ù†Ú¯ØŒ ØªÙˆØ«ÛŒÙ‚ | API Management |
| **Ø¢Ø±Ú©Ø³Ù¹Ø±ÛŒÙ¹Ø±** | Ø§ÛŒØ¬Ù†Ù¹ ÙˆØ±Ú© ÙÙ„Ùˆ Ú©ÛŒ ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ Ú©Ø±ØªØ§ ÛÛ’ | Container Apps |
| **Message Queue** | ØºÛŒØ± ÛÙ… ÙˆÙ‚ØªÛŒ Ù…ÙˆØ§ØµÙ„Ø§Øª | Service Bus / Event Hubs |
| **Agents** | Ù…Ø®ØµÙˆØµ AI ÙˆØ±Ú©Ø±Ø² | Container Apps / Functions |
| **State Store** | Ù…Ø´ØªØ±Ú©Û Ø±ÛŒØ§Ø³ØªØŒ Ù¹Ø§Ø³Ú© Ù¹Ø±ÛŒÚ©Ù†Ú¯ | Cosmos DB |
| **Artifact Storage** | Ø¯Ø³ØªØ§ÙˆÛŒØ²Ø§ØªØŒ Ù†ØªØ§Ø¦Ø¬ØŒ Ù„Ø§Ú¯Ø² | Blob Storage |
| **Monitoring** | ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ù¹Ø±ÛŒØ³Ù†Ú¯ØŒ Ù„Ø§Ú¯Ø² | Application Insights |

---

## Ù¾ÛŒØ´Ú¯ÛŒ Ø´Ø±Ø§Ø¦Ø·

### Ø¯Ø±Ú©Ø§Ø± Ù¹ÙˆÙ„Ø²

```bash
# Azure Developer CLI Ú©ÛŒ ØªÙˆØ«ÛŒÙ‚ Ú©Ø±ÛŒÚº
azd version
# âœ… Ù…ØªÙˆÙ‚Ø¹: azd ÙˆØ±Ú˜Ù† 1.0.0 ÛŒØ§ Ø§Ø³ Ø³Û’ Ø§ÙˆÙ¾Ø±

# Azure CLI Ú©ÛŒ ØªÙˆØ«ÛŒÙ‚ Ú©Ø±ÛŒÚº
az --version
# âœ… Ù…ØªÙˆÙ‚Ø¹: azure-cli ÙˆØ±Ú˜Ù† 2.50.0 ÛŒØ§ Ø§Ø³ Ø³Û’ Ø§ÙˆÙ¾Ø±

# Ù…Ù‚Ø§Ù…ÛŒ Ø¬Ø§Ù†Ú† Ú©Û’ Ù„ÛŒÛ’ Docker Ú©ÛŒ ØªÙˆØ«ÛŒÙ‚ Ú©Ø±ÛŒÚº
docker --version
# âœ… Ù…ØªÙˆÙ‚Ø¹: Docker ÙˆØ±Ú˜Ù† 20.10 ÛŒØ§ Ø§Ø³ Ø³Û’ Ø§ÙˆÙ¾Ø±
```

### Azure Ø¶Ø±ÙˆØ±ÛŒØ§Øª

- ÙØ¹Ø§Ù„ Azure Ø³Ø¨Ø³Ú©Ø±Ù¾Ø´Ù†
- Ø¨Ù†Ø§Ù†Û’ Ú©ÛŒ Ø§Ø¬Ø§Ø²ØªÛŒÚº:
  - Container Apps
  - Service Bus namespaces
  - Cosmos DB Ø§Ú©Ø§Ø¤Ù†Ù¹Ø³
  - Storage accounts
  - Application Insights

### Ù…Ø·Ù„ÙˆØ¨Û Ø¹Ù„Ù…ÛŒ Ù¾Ø³ Ù…Ù†Ø¸Ø±

Ø¢Ù¾ Ú©Ùˆ Ù…Ú©Ù…Ù„ Ú©Ø±Ù†Ø§ Ú†Ø§ÛÛŒÛ’:
- [Ú©Ù†ÙÛŒÚ¯Ø±ÛŒØ´Ù† Ù…ÛŒÙ†Ø¬Ù…Ù†Ù¹](../chapter-03-configuration/configuration.md)
- [ØªÙˆØ«ÛŒÙ‚ Ø§ÙˆØ± Ø³Ú©ÛŒÙˆØ±Ù¹ÛŒ](../chapter-03-configuration/authsecurity.md)
- [Ù…Ø§Ø¦ÛŒÚ©Ø±Ùˆ Ø³Ø±ÙˆØ³Ø² Ú©ÛŒ Ù…Ø«Ø§Ù„](../../../../examples/microservices)

---

## Ù†ÙØ§Ø° Ú©Ø§ Ø±ÛÙ†Ù…Ø§

### Ù¾Ø±Ø§Ø¬ÛŒÚ©Ù¹ Ú©Ø§ ÚˆÚ¾Ø§Ù†Ú†Û

```
multi-agent-system/
â”œâ”€â”€ azure.yaml                    # AZD configuration
â”œâ”€â”€ infra/
â”‚   â”œâ”€â”€ main.bicep               # Main infrastructure
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ servicebus.bicep     # Message queue
â”‚   â”‚   â”œâ”€â”€ cosmos.bicep         # State store
â”‚   â”‚   â”œâ”€â”€ storage.bicep        # Artifact storage
â”‚   â”‚   â””â”€â”€ monitoring.bicep     # Application Insights
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ orchestrator.bicep   # Orchestrator service
â”‚       â””â”€â”€ agent.bicep          # Agent template
â””â”€â”€ src/
    â”œâ”€â”€ orchestrator/            # Orchestration logic
    â”‚   â”œâ”€â”€ app.py
    â”‚   â”œâ”€â”€ workflows.py
    â”‚   â””â”€â”€ Dockerfile
    â”œâ”€â”€ agents/
    â”‚   â”œâ”€â”€ research/            # Research agent
    â”‚   â”œâ”€â”€ writer/              # Writer agent
    â”‚   â”œâ”€â”€ analyst/             # Analyst agent
    â”‚   â””â”€â”€ reviewer/            # Reviewer agent
    â””â”€â”€ shared/
        â”œâ”€â”€ state_manager.py     # Shared state logic
        â””â”€â”€ message_handler.py   # Message handling
```

---

## Ø³Ø¨Ù‚ 1: ØªØ±ØªÛŒØ¨ ÙˆØ§Ø± ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ Ù¾ÛŒÙ¹Ø±Ù†

### Ù†ÙØ§Ø°: Ù…ÙˆØ§Ø¯ ØªØ®Ù„ÛŒÙ‚ Ù¾Ø§Ø¦Ù¾ Ù„Ø§Ø¦Ù†

Ø¢Ø¦ÛŒÚº Ø§ÛŒÚ© ØªØ±ØªÛŒØ¨ ÙˆØ§Ø± Ù¾Ø§Ø¦Ù¾ Ù„Ø§Ø¦Ù† Ø¨Ù†Ø§Ø¦ÛŒÚº: ØªØ­Ù‚ÛŒÙ‚ â†’ Ù„Ú©Ú¾Ù†Ø§ â†’ ØªØ±Ù…ÛŒÙ… â†’ Ø´Ø§Ø¦Ø¹ Ú©Ø±Ù†Ø§

### 1. AZD Ú©Ù†ÙÛŒÚ¯Ø±ÛŒØ´Ù†

**ÙØ§Ø¦Ù„: `azure.yaml`**

```yaml
name: content-pipeline
metadata:
  template: multi-agent-sequential@1.0.0

services:
  orchestrator:
    project: ./src/orchestrator
    language: python
    host: containerapp
  
  research-agent:
    project: ./src/agents/research
    language: python
    host: containerapp
  
  writer-agent:
    project: ./src/agents/writer
    language: python
    host: containerapp
  
  editor-agent:
    project: ./src/agents/editor
    language: python
    host: containerapp
```

### 2. Ø§Ù†ÙØ±Ø§Ø³Ù¹Ø±Ú©Ú†Ø±: ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ Ú©Û’ Ù„ÛŒÛ’ Service Bus

**ÙØ§Ø¦Ù„: `infra/core/servicebus.bicep`**

```bicep
param name string
param location string
param tags object = {}

resource serviceBusNamespace 'Microsoft.ServiceBus/namespaces@2022-10-01-preview' = {
  name: name
  location: location
  tags: tags
  sku: {
    name: 'Standard'
    tier: 'Standard'
  }
  properties: {
    minimumTlsVersion: '1.2'
  }
}

// Queue for orchestrator â†’ research agent
resource researchQueue 'Microsoft.ServiceBus/namespaces/queues@2022-10-01-preview' = {
  parent: serviceBusNamespace
  name: 'research-tasks'
  properties: {
    maxDeliveryCount: 3
    lockDuration: 'PT5M'
    deadLetteringOnMessageExpiration: true
  }
}

// Queue for research agent â†’ writer agent
resource writerQueue 'Microsoft.ServiceBus/namespaces/queues@2022-10-01-preview' = {
  parent: serviceBusNamespace
  name: 'writer-tasks'
  properties: {
    maxDeliveryCount: 3
    lockDuration: 'PT5M'
  }
}

// Queue for writer agent â†’ editor agent
resource editorQueue 'Microsoft.ServiceBus/namespaces/queues@2022-10-01-preview' = {
  parent: serviceBusNamespace
  name: 'editor-tasks'
  properties: {
    maxDeliveryCount: 3
    lockDuration: 'PT5M'
  }
}

output namespace string = serviceBusNamespace.name
output connectionString string = listKeys('${serviceBusNamespace.id}/AuthorizationRules/RootManageSharedAccessKey', serviceBusNamespace.apiVersion).primaryConnectionString
```

### 3. Ù…Ø´ØªØ±Ú©Û Ø±ÛŒØ§Ø³Øª Ù…Ù†ÛŒØ¬Ø±

**ÙØ§Ø¦Ù„: `src/shared/state_manager.py`**

```python
from azure.cosmos import CosmosClient, PartitionKey
from datetime import datetime
import os

class StateManager:
    """Manages shared state across agents using Cosmos DB"""
    
    def __init__(self):
        endpoint = os.environ['COSMOS_ENDPOINT']
        key = os.environ['COSMOS_KEY']
        
        self.client = CosmosClient(endpoint, key)
        self.database = self.client.get_database_client('agent-state')
        self.container = self.database.get_container_client('tasks')
    
    def create_task(self, task_id: str, task_type: str, input_data: dict):
        """Create a new task"""
        task = {
            'id': task_id,
            'type': task_type,
            'status': 'pending',
            'input': input_data,
            'created_at': datetime.utcnow().isoformat(),
            'steps': []
        }
        self.container.create_item(task)
        return task
    
    def update_task_step(self, task_id: str, step_name: str, result: dict):
        """Update task with completed step"""
        task = self.container.read_item(task_id, partition_key=task_id)
        
        task['steps'].append({
            'name': step_name,
            'completed_at': datetime.utcnow().isoformat(),
            'result': result
        })
        
        self.container.replace_item(task_id, task)
        return task
    
    def complete_task(self, task_id: str, final_result: dict):
        """Mark task as complete"""
        task = self.container.read_item(task_id, partition_key=task_id)
        task['status'] = 'completed'
        task['result'] = final_result
        task['completed_at'] = datetime.utcnow().isoformat()
        self.container.replace_item(task_id, task)
        return task
    
    def get_task(self, task_id: str):
        """Retrieve task state"""
        return self.container.read_item(task_id, partition_key=task_id)
```

### 4. Ø¢Ø±Ú©Ø³Ù¹Ø±ÛŒÙ¹Ø± Ø³Ø±ÙˆØ³

**ÙØ§Ø¦Ù„: `src/orchestrator/app.py`**

```python
from flask import Flask, request, jsonify
from azure.servicebus import ServiceBusClient, ServiceBusMessage
import json
import uuid
import os
from shared.state_manager import StateManager

app = Flask(__name__)
state_manager = StateManager()

# Ø³Ø±ÙˆØ³ Ø¨Ø³ Ú©Ù†Ú©Ø´Ù†
servicebus_connection_str = os.environ['SERVICEBUS_CONNECTION_STRING']
servicebus_client = ServiceBusClient.from_connection_string(servicebus_connection_str)

@app.route('/health', methods=['GET'])
def health():
    return jsonify({'status': 'healthy', 'service': 'orchestrator'})

@app.route('/create-content', methods=['POST'])
def create_content():
    """
    Sequential workflow: Research â†’ Write â†’ Edit â†’ Publish
    """
    data = request.json
    topic = data.get('topic')
    
    if not topic:
        return jsonify({'error': 'Topic required'}), 400
    
    # Ø§Ø³Ù¹ÛŒÙ¹ Ø§Ø³Ù¹ÙˆØ± Ù…ÛŒÚº Ù¹Ø§Ø³Ú© Ø¨Ù†Ø§Ø¦ÛŒÚº
    task_id = str(uuid.uuid4())
    task = state_manager.create_task(
        task_id=task_id,
        task_type='content_creation',
        input_data={'topic': topic}
    )
    
    # Ø±ÛŒØ³Ø±Ú† Ø§ÛŒØ¬Ù†Ù¹ Ú©Ùˆ Ù¾ÛŒØºØ§Ù… Ø¨Ú¾ÛŒØ¬ÛŒÚº (Ù¾ÛÙ„Ø§ Ù…Ø±Ø­Ù„Û)
    sender = servicebus_client.get_queue_sender('research-tasks')
    message = ServiceBusMessage(
        body=json.dumps({
            'task_id': task_id,
            'topic': topic,
            'next_queue': 'writer-tasks'  # Ù†ØªØ§Ø¦Ø¬ Ú©ÛØ§Úº Ø¨Ú¾ÛŒØ¬Ù†Û’ ÛÛŒÚº
        }),
        content_type='application/json'
    )
    
    with sender:
        sender.send_messages(message)
    
    return jsonify({
        'task_id': task_id,
        'status': 'started',
        'workflow': 'sequential',
        'steps': ['research', 'write', 'edit', 'publish'],
        'message': 'Content creation pipeline initiated'
    }), 202

@app.route('/task/<task_id>', methods=['GET'])
def get_task_status(task_id):
    """Check task status"""
    try:
        task = state_manager.get_task(task_id)
        return jsonify(task)
    except Exception as e:
        return jsonify({'error': str(e)}), 404

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)
```

### 5. ØªØ­Ù‚ÛŒÙ‚Ø§ØªÛŒ Ø§ÛŒØ¬Ù†Ù¹

**ÙØ§Ø¦Ù„: `src/agents/research/app.py`**

```python
from azure.servicebus import ServiceBusClient, ServiceBusMessage
from openai import AzureOpenAI
import json
import os
import time
from shared.state_manager import StateManager

# Ú©Ù„Ø§Ø¦Ù†Ù¹Ø³ Ú©Ùˆ Ø§Ø¨ØªØ¯Ø§Ø¦ÛŒ ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº
state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

openai_client = AzureOpenAI(
    api_key=os.environ['AZURE_OPENAI_API_KEY'],
    api_version="2024-02-01",
    azure_endpoint=os.environ['AZURE_OPENAI_ENDPOINT']
)

def process_research_task(message_data):
    """Process research request and pass to writer"""
    task_id = message_data['task_id']
    topic = message_data['topic']
    next_queue = message_data['next_queue']
    
    print(f"ğŸ”¬ Researching: {topic}")
    
    # ØªØ­Ù‚ÛŒÙ‚ Ú©Û’ Ù„ÛŒÛ’ Azure OpenAI Ú©Ùˆ Ú©Ø§Ù„ Ú©Ø±ÛŒÚº
    response = openai_client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "You are a research assistant. Provide comprehensive research on the given topic."},
            {"role": "user", "content": f"Research this topic thoroughly: {topic}"}
        ],
        max_tokens=1500
    )
    
    research_results = response.choices[0].message.content
    
    # Ø­Ø§Ù„Øª Ú©Ùˆ Ø§Ù¾ ÚˆÛŒÙ¹ Ú©Ø±ÛŒÚº
    state_manager.update_task_step(
        task_id=task_id,
        step_name='research',
        result={'research': research_results}
    )
    
    # Ø§Ú¯Ù„Û’ Ø§ÛŒØ¬Ù†Ù¹ (Ù…ØµÙ†Ù) Ú©Ùˆ Ø¨Ú¾ÛŒØ¬ÛŒÚº
    sender = servicebus_client.get_queue_sender(next_queue)
    message = ServiceBusMessage(
        body=json.dumps({
            'task_id': task_id,
            'topic': topic,
            'research': research_results,
            'next_queue': 'editor-tasks'
        }),
        content_type='application/json'
    )
    
    with sender:
        sender.send_messages(message)
    
    print(f"âœ… Research complete for task {task_id}")

def main():
    """Listen to research queue"""
    receiver = servicebus_client.get_queue_receiver('research-tasks')
    
    print("ğŸ”¬ Research Agent started, listening for tasks...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_research_task(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"âŒ Error processing message: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

### 6. Ø±Ø§Ø¦Ù¹Ø± Ø§ÛŒØ¬Ù†Ù¹

**ÙØ§Ø¦Ù„: `src/agents/writer/app.py`**

```python
from azure.servicebus import ServiceBusClient, ServiceBusMessage
from openai import AzureOpenAI
import json
import os
from shared.state_manager import StateManager

state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

openai_client = AzureOpenAI(
    api_key=os.environ['AZURE_OPENAI_API_KEY'],
    api_version="2024-02-01",
    azure_endpoint=os.environ['AZURE_OPENAI_ENDPOINT']
)

def process_writing_task(message_data):
    """Write article based on research"""
    task_id = message_data['task_id']
    topic = message_data['topic']
    research = message_data['research']
    next_queue = message_data['next_queue']
    
    print(f"âœï¸ Writing article: {topic}")
    
    # Ù…Ø¶Ù…ÙˆÙ† Ù„Ú©Ú¾Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Azure OpenAI Ú©Ùˆ Ú©Ø§Ù„ Ú©Ø±ÛŒÚº
    response = openai_client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "You are a professional writer. Write engaging, well-structured articles."},
            {"role": "user", "content": f"Based on this research:\n\n{research}\n\nWrite a comprehensive article about: {topic}"}
        ],
        max_tokens=2000
    )
    
    article_draft = response.choices[0].message.content
    
    # Ø­Ø§Ù„Øª Ú©Ùˆ Ø§Ù¾ ÚˆÛŒÙ¹ Ú©Ø±ÛŒÚº
    state_manager.update_task_step(
        task_id=task_id,
        step_name='writing',
        result={'draft': article_draft}
    )
    
    # Ø§ÛŒÚˆÛŒÙ¹Ø± Ú©Ùˆ Ø¨Ú¾ÛŒØ¬ÛŒÚº
    sender = servicebus_client.get_queue_sender(next_queue)
    message = ServiceBusMessage(
        body=json.dumps({
            'task_id': task_id,
            'topic': topic,
            'draft': article_draft
        }),
        content_type='application/json'
    )
    
    with sender:
        sender.send_messages(message)
    
    print(f"âœ… Article draft complete for task {task_id}")

def main():
    """Listen to writer queue"""
    receiver = servicebus_client.get_queue_receiver('writer-tasks')
    
    print("âœï¸ Writer Agent started, listening for tasks...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_writing_task(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"âŒ Error: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

### 7. Ø§ÛŒÚˆÛŒÙ¹Ø± Ø§ÛŒØ¬Ù†Ù¹

**ÙØ§Ø¦Ù„: `src/agents/editor/app.py`**

```python
from azure.servicebus import ServiceBusClient
from openai import AzureOpenAI
import json
import os
from shared.state_manager import StateManager

state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

openai_client = AzureOpenAI(
    api_key=os.environ['AZURE_OPENAI_API_KEY'],
    api_version="2024-02-01",
    azure_endpoint=os.environ['AZURE_OPENAI_ENDPOINT']
)

def process_editing_task(message_data):
    """Edit and finalize article"""
    task_id = message_data['task_id']
    topic = message_data['topic']
    draft = message_data['draft']
    
    print(f"ğŸ“ Editing article: {topic}")
    
    # Azure OpenAI Ú©Ùˆ ØªØ±Ù…ÛŒÙ… Ú©Û’ Ù„ÛŒÛ’ Ú©Ø§Ù„ Ú©Ø±ÛŒÚº
    response = openai_client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "You are an expert editor. Improve grammar, clarity, and structure."},
            {"role": "user", "content": f"Edit and improve this article:\n\n{draft}"}
        ],
        max_tokens=2000
    )
    
    final_article = response.choices[0].message.content
    
    # Ù¹Ø§Ø³Ú© Ú©Ùˆ Ù…Ú©Ù…Ù„ Ù†Ø´Ø§Ù† Ø²Ø¯ Ú©Ø±ÛŒÚº
    state_manager.complete_task(
        task_id=task_id,
        final_result={
            'topic': topic,
            'final_article': final_article,
            'word_count': len(final_article.split())
        }
    )
    
    print(f"âœ… Article finalized for task {task_id}")

def main():
    """Listen to editor queue"""
    receiver = servicebus_client.get_queue_receiver('editor-tasks')
    
    print("ğŸ“ Editor Agent started, listening for tasks...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_editing_task(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"âŒ Error: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

### 8. ØªØ¹ÛŒÙ†Ø§Øª Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ù¹ÛŒØ³Ù¹ Ú©Ø±ÛŒÚº

```bash
# Ø§Ø¨ØªØ¯Ø§Ø¦ÛŒ ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº Ø§ÙˆØ± ØªØ¹ÛŒÙ†Ø§Øª Ú©Ø±ÛŒÚº
azd init
azd up

# Ø¢Ø±Ú©ÛŒØ³Ù¹Ø±ÛŒÙ¹Ø± Ú©Ø§ ÛŒÙˆ Ø¢Ø± Ø§ÛŒÙ„ Ø­Ø§ØµÙ„ Ú©Ø±ÛŒÚº
ORCHESTRATOR_URL=$(azd env get-values | grep ORCHESTRATOR_URL | cut -d '=' -f2 | tr -d '"')

# Ù…ÙˆØ§Ø¯ Ø¨Ù†Ø§Ø¦ÛŒÚº
curl -X POST $ORCHESTRATOR_URL/create-content \
  -H "Content-Type: application/json" \
  -d '{"topic": "The Future of AI in Healthcare"}'
```

**âœ… Ù…ØªÙˆÙ‚Ø¹ Ù†ØªÛŒØ¬Û:**
```json
{
  "task_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "status": "started",
  "workflow": "sequential",
  "steps": ["research", "write", "edit", "publish"],
  "message": "Content creation pipeline initiated"
}
```

**Ù¹Ø§Ø³Ú© Ú©ÛŒ Ù¾ÛŒØ´ Ø±ÙØª Ú†ÛŒÚ© Ú©Ø±ÛŒÚº:**
```bash
TASK_ID="a1b2c3d4-e5f6-7890-abcd-ef1234567890"
curl $ORCHESTRATOR_URL/task/$TASK_ID
```

**âœ… Ù…ØªÙˆÙ‚Ø¹ Ù†ØªÛŒØ¬Û (Ù…Ú©Ù…Ù„):**
```json
{
  "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "type": "content_creation",
  "status": "completed",
  "steps": [
    {
      "name": "research",
      "completed_at": "2025-11-19T10:30:00Z",
      "result": {"research": "..."}
    },
    {
      "name": "writing",
      "completed_at": "2025-11-19T10:32:00Z",
      "result": {"draft": "..."}
    }
  ],
  "result": {
    "topic": "The Future of AI in Healthcare",
    "final_article": "...",
    "word_count": 1500
  }
}
```

---

## Ø³Ø¨Ù‚ 2: Ù…ØªÙˆØ§Ø²ÛŒ ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ Ù¾ÛŒÙ¹Ø±Ù†

### Ù†ÙØ§Ø°: Ú©Ø«ÛŒØ± Ù…Ø§Ø®Ø° ØªØ­Ù‚ÛŒÙ‚ Ø§ÛŒÚ¯Ø±ÛŒÚ¯ÛŒÙ¹Ø±

Ø¢Ø¦ÛŒÚº Ø§ÛŒÚ© Ù…ØªÙˆØ§Ø²ÛŒ Ù†Ø¸Ø§Ù… Ø¨Ù†Ø§Ø¦ÛŒÚº Ø¬Ùˆ Ø§ÛŒÚ© ÛÛŒ ÙˆÙ‚Øª Ù…ÛŒÚº Ù…ØªØ¹Ø¯Ø¯ Ù…Ø§Ø®Ø°ÙˆÚº Ø³Û’ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ú©Ù¹Ú¾ÛŒ Ú©Ø±Û’Û”

### Ù…ØªÙˆØ§Ø²ÛŒ Ø¢Ø±Ú©Ø³Ù¹Ø±ÛŒÙ¹Ø±

**ÙØ§Ø¦Ù„: `src/orchestrator/parallel_workflow.py`**

```python
from flask import Flask, request, jsonify
from azure.servicebus import ServiceBusClient, ServiceBusMessage
import json
import uuid
import os
from shared.state_manager import StateManager

app = Flask(__name__)
state_manager = StateManager()

servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

@app.route('/research-parallel', methods=['POST'])
def research_parallel():
    """
    Parallel workflow: Multiple agents work simultaneously
    """
    data = request.json
    query = data.get('query')
    
    task_id = str(uuid.uuid4())
    task = state_manager.create_task(
        task_id=task_id,
        task_type='parallel_research',
        input_data={
            'query': query,
            'agents': ['web', 'academic', 'news', 'social']
        }
    )
    
    # ÙÛŒÙ† Ø¢Ø¤Ù¹: ØªÙ…Ø§Ù… Ø§ÛŒØ¬Ù†Ù¹Ø³ Ú©Ùˆ Ø¨ÛŒÚ© ÙˆÙ‚Øª Ø¨Ú¾ÛŒØ¬ÛŒÚº
    agents = [
        ('web-research-queue', 'web'),
        ('academic-research-queue', 'academic'),
        ('news-research-queue', 'news'),
        ('social-research-queue', 'social')
    ]
    
    for queue_name, agent_type in agents:
        sender = servicebus_client.get_queue_sender(queue_name)
        message = ServiceBusMessage(
            body=json.dumps({
                'task_id': task_id,
                'query': query,
                'agent_type': agent_type,
                'result_queue': 'aggregation-queue'
            }),
            content_type='application/json'
        )
        
        with sender:
            sender.send_messages(message)
    
    return jsonify({
        'task_id': task_id,
        'status': 'started',
        'workflow': 'parallel',
        'agents_dispatched': 4,
        'message': 'Parallel research initiated'
    }), 202

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)
```

### ØªØ¬Ù…ÛŒØ¹ÛŒ Ù„Ø§Ø¬Ú©

**ÙØ§Ø¦Ù„: `src/agents/aggregator/app.py`**

```python
from azure.servicebus import ServiceBusClient
import json
import os
from collections import defaultdict
from shared.state_manager import StateManager

state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

# ÛØ± Ú©Ø§Ù… Ú©Û’ Ù„ÛŒÛ’ Ù†ØªØ§Ø¦Ø¬ Ú©Ø§ Ø±ÛŒÚ©Ø§Ø±Úˆ Ø±Ú©Ú¾ÛŒÚº
task_results = defaultdict(list)
expected_agents = 4  # ÙˆÛŒØ¨ØŒ ØªØ¹Ù„ÛŒÙ…ÛŒØŒ Ø®Ø¨Ø±ÛŒÚºØŒ Ø³Ù…Ø§Ø¬ÛŒ

def process_result(message_data):
    """Aggregate results from parallel agents"""
    task_id = message_data['task_id']
    agent_type = message_data['agent_type']
    result = message_data['result']
    
    # Ù†ØªÛŒØ¬Û Ù…Ø­ÙÙˆØ¸ Ú©Ø±ÛŒÚº
    task_results[task_id].append({
        'agent': agent_type,
        'data': result
    })
    
    print(f"ğŸ“Š Received result from {agent_type} agent ({len(task_results[task_id])}/{expected_agents})")
    
    # Ú†ÛŒÚ© Ú©Ø±ÛŒÚº Ú©Û Ø¢ÛŒØ§ ØªÙ…Ø§Ù… Ø§ÛŒØ¬Ù†Ù¹Ø³ Ù…Ú©Ù…Ù„ ÛÙˆ Ú†Ú©Û’ ÛÛŒÚº (ÙÛŒÙ†-Ø§Ù†)
    if len(task_results[task_id]) == expected_agents:
        print(f"âœ… All agents completed for task {task_id}. Aggregating...")
        
        # Ù†ØªØ§Ø¦Ø¬ Ú©Ùˆ ÛŒÚ©Ø¬Ø§ Ú©Ø±ÛŒÚº
        aggregated = {
            'query': message_data['query'],
            'sources': task_results[task_id],
            'summary': generate_summary(task_results[task_id])
        }
        
        # Ù…Ú©Ù…Ù„ Ù†Ø´Ø§Ù† Ø²Ø¯ Ú©Ø±ÛŒÚº
        state_manager.complete_task(task_id, aggregated)
        
        # ØµÙØ§Ø¦ÛŒ Ú©Ø±ÛŒÚº
        del task_results[task_id]
        
        print(f"âœ… Aggregation complete for task {task_id}")

def generate_summary(results):
    """Generate summary from all sources"""
    summaries = [r['data'].get('summary', '') for r in results]
    return '\n\n'.join(summaries)

def main():
    """Listen to aggregation queue"""
    receiver = servicebus_client.get_queue_receiver('aggregation-queue')
    
    print("ğŸ“Š Aggregator started, listening for results...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_result(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"âŒ Error: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

**Ù…ØªÙˆØ§Ø²ÛŒ Ù¾ÛŒÙ¹Ø±Ù† Ú©Û’ ÙÙˆØ§Ø¦Ø¯:**
- âš¡ **4 Ú¯Ù†Ø§ ØªÛŒØ²** (Ø§ÛŒØ¬Ù†Ù¹Ø³ Ø¨ÛŒÚ© ÙˆÙ‚Øª Ú†Ù„ØªÛ’ ÛÛŒÚº)
- ğŸ”„ **Ù†Ù‚Øµ Ø¨Ø±Ø¯Ø§Ø´Øª Ú©Ø±Ù†Û’ Ú©Û’ Ù‚Ø§Ø¨Ù„** (Ø¬Ø²ÙˆÛŒ Ù†ØªØ§Ø¦Ø¬ Ù‚Ø¨ÙˆÙ„ ÛÛŒÚº)
- ğŸ“ˆ **Ù‚Ø§Ø¨Ù„Ù ØªÙˆØ³ÛŒØ¹** (Ù…Ø²ÛŒØ¯ Ø§ÛŒØ¬Ù†Ù¹Ø³ Ø¢Ø³Ø§Ù†ÛŒ Ø³Û’ Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº)

---

## Ø¹Ù…Ù„ÛŒ Ù…Ø´Ù‚ÛŒÚº

### Ù…Ø´Ù‚ 1: Ù¹Ø§Ø¦Ù… Ø¢Ø¤Ù¹ ÛÛŒÙ†ÚˆÙ„Ù†Ú¯ Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº â­â­ (Ø¯Ø±Ù…ÛŒØ§Ù†Û)

**Ù…Ù‚ØµØ¯**: Ù¹Ø§Ø¦Ù… Ø¢Ø¤Ù¹ Ù„Ø§Ø¬Ú© Ù†Ø§ÙØ° Ú©Ø±ÛŒÚº ØªØ§Ú©Û Ø§ÛŒÚ¯Ø±ÛŒÚ¯ÛŒÙ¹Ø± Ø³Ø³Øª Ø§ÛŒØ¬Ù†Ù¹Ø³ Ú©Û’ Ù„ÛŒÛ’ ÛÙ…ÛŒØ´Û Ø§Ù†ØªØ¸Ø§Ø± Ù†Û Ú©Ø±Û’Û”

**Ø§Ù‚Ø¯Ø§Ù…Ø§Øª**:

1. **Ø§ÛŒÚ¯Ø±ÛŒÚ¯ÛŒÙ¹Ø± Ù…ÛŒÚº Ù¹Ø§Ø¦Ù… Ø¢Ø¤Ù¹ Ù¹Ø±ÛŒÚ©Ù†Ú¯ Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº:**

```python
from datetime import datetime, timedelta

task_timeouts = {}  # task_id -> Ø®ØªÙ… ÛÙˆÙ†Û’ Ú©Ø§ ÙˆÙ‚Øª

def process_result(message_data):
    task_id = message_data['task_id']
    
    # Ù¾ÛÙ„Û’ Ù†ØªÛŒØ¬Û’ Ú©Û’ Ù„ÛŒÛ’ Ù¹Ø§Ø¦Ù… Ø¢Ø¤Ù¹ Ø³ÛŒÙ¹ Ú©Ø±ÛŒÚº
    if task_id not in task_timeouts:
        task_timeouts[task_id] = datetime.utcnow() + timedelta(seconds=30)
    
    task_results[task_id].append({
        'agent': message_data['agent_type'],
        'data': message_data['result']
    })
    
    # Ú†ÛŒÚ© Ú©Ø±ÛŒÚº Ú©Û Ø¢ÛŒØ§ Ù…Ú©Ù…Ù„ ÛÙˆØ§ ÛÛ’ ÛŒØ§ Ù¹Ø§Ø¦Ù… Ø¢Ø¤Ù¹ ÛÙˆ Ú¯ÛŒØ§ ÛÛ’
    if len(task_results[task_id]) == expected_agents or \
       datetime.utcnow() > task_timeouts[task_id]:
        
        print(f"ğŸ“Š Aggregating with {len(task_results[task_id])}/{expected_agents} results")
        
        aggregated = {
            'query': message_data['query'],
            'sources': task_results[task_id],
            'completed_agents': len(task_results[task_id]),
            'timed_out': len(task_results[task_id]) < expected_agents
        }
        
        state_manager.complete_task(task_id, aggregated)
        
        # ØµÙØ§Ø¦ÛŒ
        del task_results[task_id]
        del task_timeouts[task_id]
```

2. **Ù…ØµÙ†ÙˆØ¹ÛŒ ØªØ§Ø®ÛŒØ± Ú©Û’ Ø³Ø§ØªÚ¾ Ù¹ÛŒØ³Ù¹ Ú©Ø±ÛŒÚº:**

```python
# Ø§ÛŒÚ© Ø§ÛŒØ¬Ù†Ù¹ Ù…ÛŒÚº Ø³Ø³Øª Ù¾Ø±ÙˆØ³ÛŒØ³Ù†Ú¯ Ú©ÛŒ Ù†Ù‚Ù„ Ú©Û’ Ù„ÛŒÛ’ ØªØ§Ø®ÛŒØ± Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº
import time
time.sleep(35)  # 30 Ø³ÛŒÚ©Ù†Úˆ Ú©ÛŒ Ù¹Ø§Ø¦Ù… Ø¢Ø¤Ù¹ Ø³Û’ ØªØ¬Ø§ÙˆØ² Ú©Ø±ØªØ§ ÛÛ’
```

3. **ØªØ¹ÛŒÙ†Ø§Øª Ú©Ø±ÛŒÚº Ø§ÙˆØ± ØªØµØ¯ÛŒÙ‚ Ú©Ø±ÛŒÚº:**

```bash
azd deploy aggregator

# Ù¹Ø§Ø³Ú© Ø¬Ù…Ø¹ Ú©Ø±ÙˆØ§Ø¦ÛŒÚº
curl -X POST $ORCHESTRATOR_URL/research-parallel \
  -H "Content-Type: application/json" \
  -d '{"query": "AI safety research"}'

# 30 Ø³ÛŒÚ©Ù†Úˆ Ú©Û’ Ø¨Ø¹Ø¯ Ù†ØªØ§Ø¦Ø¬ Ú†ÛŒÚ© Ú©Ø±ÛŒÚº
curl $ORCHESTRATOR_URL/task/$TASK_ID
```

**âœ… Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ú©Û’ Ù…Ø¹ÛŒØ§Ø±:**
- âœ… Ù¹Ø§Ø³Ú© 30 Ø³ÛŒÚ©Ù†Úˆ Ú©Û’ Ø¨Ø¹Ø¯ Ù…Ú©Ù…Ù„ ÛÙˆ Ø¬Ø§ØªØ§ ÛÛ’ Ø­ØªÛŒÙ° Ú©Û Ø§ÛŒØ¬Ù†Ù¹Ø³ Ù†Ø§Ù…Ú©Ù…Ù„ ÛÙˆÚº
- âœ… Ø¬ÙˆØ§Ø¨ Ø¬Ø²ÙˆÛŒ Ù†ØªØ§Ø¦Ø¬ Ú©ÛŒ Ù†Ø´Ø§Ù†Ø¯ÛÛŒ Ú©Ø±ØªØ§ ÛÛ’ (`"timed_out": true`)
- âœ… Ø¯Ø³ØªÛŒØ§Ø¨ Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù¾Ø³ Ú©ÛŒÛ’ Ø¬Ø§ØªÛ’ ÛÛŒÚº (4 Ù…ÛŒÚº Ø³Û’ 3 Ø§ÛŒØ¬Ù†Ù¹Ø³)

**ÙˆÙ‚Øª**: 20-25 Ù…Ù†Ù¹

---

### Ù…Ø´Ù‚ 2: Ø±ÛŒÙ¹Ø±ÛŒ Ù„Ø§Ø¬Ú© Ù†Ø§ÙØ° Ú©Ø±ÛŒÚº â­â­â­ (Ø§Ø¹Ù„ÛŒÙ°)

**Ù…Ù‚ØµØ¯**: Ù†Ø§Ú©Ø§Ù… Ø§ÛŒØ¬Ù†Ù¹ Ù¹Ø§Ø³Ú©Ø³ Ú©Ùˆ Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± Ø¯ÙˆØ¨Ø§Ø±Û Ú©ÙˆØ´Ø´ Ú©Ø±ÛŒÚº Ù‚Ø¨Ù„ Ø§Ø³ Ú©Û’ Ú©Û ØªØ±Ú© Ú©Ø± Ø¯ÛŒØ§ Ø¬Ø§Ø¦Û’Û”

**Ø§Ù‚Ø¯Ø§Ù…Ø§Øª**:

1. **Ø¢Ø±Ú©Ø³Ù¹Ø±ÛŒÙ¹Ø± Ù…ÛŒÚº Ø±ÛŒÙ¹Ø±ÛŒ Ù¹Ø±ÛŒÚ©Ù†Ú¯ Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº:**

```python
from dataclasses import dataclass
from typing import Dict

@dataclass
class RetryConfig:
    max_retries: int = 3
    backoff_seconds: int = 5

retry_counts: Dict[str, int] = {}  # Ù¾ÛŒØºØ§Ù…_Ø´Ù†Ø§Ø®Øª -> Ø¯ÙˆØ¨Ø§Ø±Û_Ú©ÙˆØ´Ø´_Ú¯Ù†ØªÛŒ

def send_with_retry(queue_name: str, message_data: dict, retry_config: RetryConfig):
    """Send message with retry metadata"""
    message_id = message_data.get('message_id', str(uuid.uuid4()))
    message_data['message_id'] = message_id
    message_data['retry_count'] = retry_counts.get(message_id, 0)
    message_data['max_retries'] = retry_config.max_retries
    
    sender = servicebus_client.get_queue_sender(queue_name)
    message = ServiceBusMessage(
        body=json.dumps(message_data),
        content_type='application/json',
        message_id=message_id
    )
    
    with sender:
        sender.send_messages(message)
```

2. **Ø§ÛŒØ¬Ù†Ù¹Ø³ Ù…ÛŒÚº Ø±ÛŒÙ¹Ø±ÛŒ ÛÛŒÙ†ÚˆÙ„Ø± Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº:**

```python
def process_with_retry(message, receiver, process_func):
    """Process message with automatic retry on failure"""
    try:
        message_data = json.loads(str(message))
        
        # Ù¾ÛŒØºØ§Ù… Ú©Ùˆ Ù¾Ø±Ø§Ø³ÛŒØ³ Ú©Ø±ÛŒÚº
        process_func(message_data)
        
        # Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ - Ù…Ú©Ù…Ù„
        receiver.complete_message(message)
        
    except Exception as e:
        message_id = message.message_id
        retry_count = message_data.get('retry_count', 0)
        max_retries = message_data.get('max_retries', 3)
        
        if retry_count < max_retries:
            # Ø¯ÙˆØ¨Ø§Ø±Û Ú©ÙˆØ´Ø´: ØªØ±Ú© Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ø¨Ú‘Ú¾Ø§Ø¦ÛŒ Ú¯Ø¦ÛŒ Ú¯Ù†ØªÛŒ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¯ÙˆØ¨Ø§Ø±Û Ù‚Ø·Ø§Ø± Ù…ÛŒÚº ÚˆØ§Ù„ÛŒÚº
            print(f"âš ï¸ Retry {retry_count + 1}/{max_retries} for message {message_id}")
            
            message_data['retry_count'] = retry_count + 1
            
            # Ø§Ø³ÛŒ Ù‚Ø·Ø§Ø± Ù…ÛŒÚº ØªØ§Ø®ÛŒØ± Ú©Û’ Ø³Ø§ØªÚ¾ ÙˆØ§Ù¾Ø³ Ø¨Ú¾ÛŒØ¬ÛŒÚº
            time.sleep(5 * (retry_count + 1))  # Ù†Ù…Ø§ÛŒÛŒ ØªØ§Ø®ÛŒØ±
            send_with_retry(queue_name, message_data, RetryConfig())
            
            receiver.complete_message(message)  # Ø§ØµÙ„ Ú©Ùˆ Ø­Ø°Ù Ú©Ø±ÛŒÚº
        else:
            # Ø²ÛŒØ§Ø¯Û Ø³Û’ Ø²ÛŒØ§Ø¯Û Ø¯ÙˆØ¨Ø§Ø±Û Ú©ÙˆØ´Ø´ÛŒÚº Ù¾ÙˆØ±ÛŒ ÛÙˆ Ú¯Ø¦ÛŒÚº - ÚˆÛŒÚˆ Ù„ÛŒÙ¹Ø± Ù‚Ø·Ø§Ø± Ù…ÛŒÚº Ù…Ù†ØªÙ‚Ù„ Ú©Ø±ÛŒÚº
            print(f"âŒ Max retries exceeded for message {message_id}")
            receiver.dead_letter_message(
                message,
                reason="MaxRetriesExceeded",
                error_description=str(e)
            )
```

3. **ÚˆÛŒÚˆ Ù„ÛŒÙ¹Ø± Ù‚Ø·Ø§Ø± Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ú©Ø±ÛŒÚº:**

```python
def monitor_dead_letters():
    """Check dead letter queue for failed messages"""
    receiver = servicebus_client.get_queue_receiver(
        'research-queue',
        sub_queue='deadletter'
    )
    
    with receiver:
        messages = receiver.receive_messages(max_wait_time=5)
        for message in messages:
            print(f"â˜ ï¸ Dead letter: {message.message_id}")
            print(f"Reason: {message.dead_letter_reason}")
            print(f"Description: {message.dead_letter_error_description}")
```

**âœ… Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ú©Û’ Ù…Ø¹ÛŒØ§Ø±:**
- âœ… Ù†Ø§Ú©Ø§Ù… Ù¹Ø§Ø³Ú© Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± Ø¯ÙˆØ¨Ø§Ø±Û Ú©ÙˆØ´Ø´ Ú©Ø±ØªÛ’ ÛÛŒÚº (Ø²ÛŒØ§Ø¯Û Ø³Û’ Ø²ÛŒØ§Ø¯Û 3 Ø¨Ø§Ø±)
- âœ… Ø±ÛŒÙ¹Ø±ÛŒØ² Ú©Û’ Ø¯Ø±Ù…ÛŒØ§Ù† Ù†Ù…Ø§ÛŒØ§Úº Ø¨ÛŒÚ© Ø¢Ù (5sØŒ 10sØŒ 15s)
- âœ… Ø²ÛŒØ§Ø¯Û Ø³Û’ Ø²ÛŒØ§Ø¯Û Ø±ÛŒÙ¹Ø±ÛŒØ² Ú©Û’ Ø¨Ø¹Ø¯ØŒ Ù¾ÛŒØºØ§Ù…Ø§Øª dead letter queue Ù…ÛŒÚº Ú†Ù„Û’ Ø¬Ø§ØªÛ’ ÛÛŒÚº
- âœ… dead letter queue Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ø§ÙˆØ± Ø±ÛŒ Ù¾Ù„Û’ Ú©ÛŒ Ø¬Ø§ Ø³Ú©ØªÛŒ ÛÛ’

**ÙˆÙ‚Øª**: 30-40 Ù…Ù†Ù¹

---

### Ù…Ø´Ù‚ 3: Ø³Ø±Ú©Ù¹ Ø¨Ø±ÛŒÚ©Ø± Ù†Ø§ÙØ° Ú©Ø±ÛŒÚº â­â­â­ (Ø§Ø¹Ù„ÛŒÙ°)

**Ù…Ù‚ØµØ¯**: Ù†Ø§Ú©Ø§Ù… ÛÙˆÙ†Û’ ÙˆØ§Ù„Û’ Ø§ÛŒØ¬Ù†Ù¹Ø³ Ú©Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒÚº Ø±ÙˆÚ© Ú©Ø± Ø²Ù†Ø¬ÛŒØ±ÛŒ Ù†Ø§Ú©Ø§Ù…ÛŒÙˆÚº Ú©Ùˆ Ø±ÙˆÚ©Ù†Ø§Û”

**Ø§Ù‚Ø¯Ø§Ù…Ø§Øª**:

1. **Ø³Ø±Ú©Ù¹ Ø¨Ø±ÛŒÚ©Ø± Ú©Ù„Ø§Ø³ Ø¨Ù†Ø§Ø¦ÛŒÚº:**

```python
from enum import Enum
from datetime import datetime, timedelta

class CircuitState(Enum):
    CLOSED = "closed"      # Ù…Ø¹Ù…ÙˆÙ„ Ú©Û’ Ù…Ø·Ø§Ø¨Ù‚ Ø¹Ù…Ù„
    OPEN = "open"          # Ù†Ø§Ú©Ø§Ù…ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒÚº Ù…Ø³ØªØ±Ø¯ Ú©Ø±ÛŒÚº
    HALF_OPEN = "half_open"  # Ú†ÛŒÚ© Ú©ÛŒØ§ Ø¬Ø§ Ø±ÛØ§ ÛÛ’ Ú©Û Ø¢ÛŒØ§ Ø¨Ø­Ø§Ù„ ÛÙˆØ§ ÛÛ’

class CircuitBreaker:
    def __init__(self, failure_threshold=5, timeout_seconds=60):
        self.failure_threshold = failure_threshold
        self.timeout_seconds = timeout_seconds
        self.failure_count = 0
        self.last_failure_time = None
        self.state = CircuitState.CLOSED
    
    def call(self, func):
        """Execute function with circuit breaker protection"""
        if self.state == CircuitState.OPEN:
            # Ú†ÛŒÚ© Ú©Ø±ÛŒÚº Ú©Û Ù¹Ø§Ø¦Ù… Ø¢Ø¤Ù¹ Ø®ØªÙ… ÛÙˆ Ú†Ú©Ø§ ÛÛ’
            if datetime.utcnow() - self.last_failure_time > timedelta(seconds=self.timeout_seconds):
                self.state = CircuitState.HALF_OPEN
                print("ğŸ”„ Circuit breaker: HALF_OPEN (testing)")
            else:
                raise Exception(f"Circuit breaker OPEN for agent. Try again in {self.timeout_seconds}s")
        
        try:
            result = func()
            
            # Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ
            if self.state == CircuitState.HALF_OPEN:
                self.state = CircuitState.CLOSED
                self.failure_count = 0
                print("âœ… Circuit breaker: CLOSED (recovered)")
            
            return result
            
        except Exception as e:
            self.failure_count += 1
            self.last_failure_time = datetime.utcnow()
            
            if self.failure_count >= self.failure_threshold:
                self.state = CircuitState.OPEN
                print(f"ğŸ”´ Circuit breaker: OPEN (too many failures)")
            
            raise e
```

2. **Ø§ÛŒØ¬Ù†Ù¹ Ú©Ø§Ù„Ø² Ù¾Ø± Ù„Ø§Ú¯Ùˆ Ú©Ø±ÛŒÚº:**

```python
# Ø¢Ø±Ú©ÛŒØ³Ù¹Ø±ÛŒÙ¹Ø± Ù…ÛŒÚº
agent_circuits = {
    'web': CircuitBreaker(failure_threshold=5, timeout_seconds=60),
    'academic': CircuitBreaker(failure_threshold=5, timeout_seconds=60),
    'news': CircuitBreaker(failure_threshold=5, timeout_seconds=60),
    'social': CircuitBreaker(failure_threshold=5, timeout_seconds=60)
}

def send_to_agent(agent_type, message_data):
    """Send with circuit breaker protection"""
    circuit = agent_circuits[agent_type]
    
    try:
        circuit.call(lambda: send_message(agent_type, message_data))
    except Exception as e:
        print(f"âš ï¸ Skipping {agent_type} agent: {e}")
        # Ø¯ÙˆØ³Ø±Û’ Ø§ÛŒØ¬Ù†Ù¹Ø³ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¬Ø§Ø±ÛŒ Ø±Ú©Ú¾ÛŒÚº
```

3. **Ø³Ø±Ú©Ù¹ Ø¨Ø±ÛŒÚ©Ø± Ú©Ø§ Ù¹ÛŒØ³Ù¹ Ú©Ø±ÛŒÚº:**

```bash
# Ø¨Ø§Ø± Ø¨Ø§Ø± Ù†Ø§Ú©Ø§Ù…ÛŒÙˆÚº Ú©ÛŒ ØªÙ‚Ù„ÛŒØ¯ Ú©Ø±ÛŒÚº (Ø§ÛŒÚ© Ø§ÛŒØ¬Ù†Ù¹ Ú©Ùˆ Ø±ÙˆÚ©ÛŒÚº)
az containerapp stop --name web-research-agent --resource-group rg-agents

# Ù…ØªØ¹Ø¯Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒÚº Ø¨Ú¾ÛŒØ¬ÛŒÚº
for i in {1..10}; do
  curl -X POST $ORCHESTRATOR_URL/research-parallel \
    -H "Content-Type: application/json" \
    -d '{"query": "test query '$i'"}'
  sleep 2
done

# Ù„Ø§Ú¯Ø² Ú†ÛŒÚ© Ú©Ø±ÛŒÚº - 5 Ù†Ø§Ú©Ø§Ù…ÛŒÙˆÚº Ú©Û’ Ø¨Ø¹Ø¯ Ø³Ø±Ú©Ù¹ Ú©Ú¾Ù„Ø§ Ù†Ø¸Ø± Ø¢Ù†Ø§ Ú†Ø§ÛÛŒÛ’
# Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾ Ú©Û’ Ù„Ø§Ú¯Ø² Ú©Û’ Ù„ÛŒÛ’ Azure CLI Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº:
az containerapp logs show --name orchestrator --resource-group $RG_NAME --tail 50
```

**âœ… Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ú©Û’ Ù…Ø¹ÛŒØ§Ø±:**
- âœ… 5 Ù†Ø§Ú©Ø§Ù…ÛŒÙˆÚº Ú©Û’ Ø¨Ø¹Ø¯ØŒ Ø³Ø±Ú©Ù¹ Ú©Ú¾Ù„ Ø¬Ø§ØªØ§ ÛÛ’ (Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒÚº Ù…Ø³ØªØ±Ø¯ Ú©Ø±ØªØ§ ÛÛ’)
- âœ… 60 Ø³ÛŒÚ©Ù†Úˆ Ú©Û’ Ø¨Ø¹Ø¯ØŒ Ø³Ø±Ú©Ù¹ Ù†ØµÙ Ú©Ú¾Ù„ Ø¬Ø§ØªØ§ ÛÛ’ (Ø±ÛŒÚ©ÙˆØ±ÛŒ Ú©ÛŒ Ø¬Ø§Ù†Ú† Ú©Ø±ØªØ§ ÛÛ’)
- âœ… Ø¯ÙˆØ³Ø±Û’ Ø§ÛŒØ¬Ù†Ù¹Ø³ Ù…Ø¹Ù…ÙˆÙ„ Ú©Û’ Ù…Ø·Ø§Ø¨Ù‚ Ú©Ø§Ù… Ø¬Ø§Ø±ÛŒ Ø±Ú©Ú¾ØªÛ’ ÛÛŒÚº
- âœ… Ø¬Ø¨ Ø§ÛŒØ¬Ù†Ù¹ Ø¨Ø­Ø§Ù„ ÛÙˆØªØ§ ÛÛ’ ØªÙˆ Ø³Ø±Ú©Ù¹ Ø®ÙˆØ¯ Ø¨Ø®ÙˆØ¯ Ø¨Ù†Ø¯ ÛÙˆ Ø¬Ø§ØªØ§ ÛÛ’

**ÙˆÙ‚Øª**: 40-50 Ù…Ù†Ù¹

---

## Ù…Ø§Ù†ÛŒÙ¹Ø±Ù†Ú¯ Ø§ÙˆØ± ÚˆÛŒØ¨Ú¯Ù†Ú¯

### Application Insights Ú©Û’ Ø³Ø§ØªÚ¾ ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ù¹Ø±ÛŒØ³Ù†Ú¯

**ÙØ§Ø¦Ù„: `src/shared/tracing.py`**

```python
from opencensus.ext.azure.log_exporter import AzureLogHandler
from opencensus.ext.azure.trace_exporter import AzureExporter
from opencensus.trace import config_integration
from opencensus.trace.tracer import Tracer
from opencensus.trace.samplers import AlwaysOnSampler
import logging
import os

# Ù¹Ø±ÛŒØ³Ù†Ú¯ Ú©Ùˆ ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº
config_integration.trace_integrations(['requests', 'logging'])

connection_string = os.environ.get('APPLICATIONINSIGHTS_CONNECTION_STRING')

# Ù¹Ø±ÛŒØ³Ø± Ø¨Ù†Ø§Ø¦ÛŒÚº
tracer = Tracer(
    exporter=AzureExporter(connection_string=connection_string),
    sampler=AlwaysOnSampler()
)

# Ù„Ø§Ú¯Ù†Ú¯ Ú©Ùˆ ØªØ±ØªÛŒØ¨ Ø¯ÛŒÚº
logger = logging.getLogger(__name__)
logger.addHandler(AzureLogHandler(connection_string=connection_string))
logger.setLevel(logging.INFO)

def trace_agent_call(agent_name, task_id, operation):
    """Trace agent operations"""
    with tracer.span(name=f'{agent_name}.{operation}') as span:
        span.add_attribute('agent', agent_name)
        span.add_attribute('task_id', task_id)
        span.add_attribute('operation', operation)
        
        try:
            result = operation()
            span.add_attribute('status', 'success')
            return result
        except Exception as e:
            span.add_attribute('status', 'error')
            span.add_attribute('error', str(e))
            raise
```

### Application Insights Ú©ÛŒ Ú©ÙˆØ¦Ø±ÛŒØ²

**Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ ÙˆØ±Ú© ÙÙ„Ùˆ Ú©ÛŒ Ù¹Ø±ÛŒÚ©Ù†Ú¯:**

```kusto
// Trace complete workflow for a task
traces
| where customDimensions.task_id == "a1b2c3d4-..."
| project timestamp, message, customDimensions.agent, customDimensions.operation
| order by timestamp asc
```

**Ø§ÛŒØ¬Ù†Ù¹ Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ Ú©Ø§ Ù…ÙˆØ§Ø²Ù†Û:**

```kusto
// Compare agent execution times
dependencies
| where name contains "agent"
| summarize 
    avg_duration = avg(duration),
    p95_duration = percentile(duration, 95),
    count = count()
  by agent = tostring(customDimensions.agent)
| order by avg_duration desc
```

**Ù†Ø§Ú©Ø§Ù…ÛŒ Ú©Ø§ ØªØ¬Ø²ÛŒÛ:**

```kusto
// Find which agents fail most
exceptions
| where customDimensions.agent != ""
| summarize 
    failure_count = count(),
    unique_errors = dcount(outerMessage)
  by agent = tostring(customDimensions.agent)
| order by failure_count desc
```

---

## Ù„Ø§Ú¯Øª Ú©Ø§ ØªØ¬Ø²ÛŒÛ

### Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ Ø³Ø³Ù¹Ù… Ú©ÛŒ Ù„Ø§Ú¯Øª (Ù…Ø§ÛØ§Ù†Û ØªØ®Ù…ÛŒÙ†Û’)

| Ø¬Ø²Ùˆ | Ú©Ù†ÙÛŒÚ¯Ø±ÛŒØ´Ù† | Ù„Ø§Ú¯Øª |
|-----------|--------------|------|
| **Ø¢Ø±Ú©Ø³Ù¹Ø±ÛŒÙ¹Ø±** | 1 Container App (1 vCPU, 2GB) | $30-50 |
| **4 Ø§ÛŒØ¬Ù†Ù¹Ø³** | 4 Container Apps (0.5 vCPU, 1GB ÛØ± Ø§ÛŒÚ©) | $60-120 |
| **Service Bus** | Ù…Ø¹ÛŒØ§Ø±ÛŒ Ø³Ø·Ø­ØŒ 10M Ù¾ÛŒØºØ§Ù…Ø§Øª | $10-20 |
| **Cosmos DB** | Serverless, 5GB storage, 1M RUs | $25-50 |
| **Blob Storage** | 10GB storage, 100K operations | $5-10 |
| **Application Insights** | 5GB ingestion | $10-15 |
| **Azure OpenAI** | GPT-4, 10M tokens | $100-300 |
| **Ú©Ù„** | | **$240-565/Ù…Ø§Û** |

### Ù„Ø§Ú¯Øª Ú©Ù… Ú©Ø±Ù†Û’ Ú©ÛŒ Ø­Ú©Ù…Øª Ø¹Ù…Ù„ÛŒØ§Úº

1. **Ø¬ÛØ§Úº Ù…Ù…Ú©Ù† ÛÙˆ Ø³Ø±ÙˆØ± Ù„ÛŒØ³ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº:**
   ```bicep
   // Cosmos DB serverless (no minimum cost)
   properties: {
     databaseAccountOfferType: 'Standard'
     capabilities: [{ name: 'EnableServerless' }]
   }
   ```

2. **Ø§ÛŒØ¬Ù†Ù¹Ø³ Ú©Ùˆ Ø¬Ø¨ ØºÛŒØ± ÙØ¹Ø§Ù„ ÛÙˆÚº ØµÙØ± ØªÚ© Ø§Ø³Ú©ÛŒÙ„ Ú©Ø±ÛŒÚº:**
   ```bicep
   scale: {
     minReplicas: 0  // Scale to zero when no messages
     maxReplicas: 10
   }
   ```

3. **Service Bus Ú©Û’ Ù„ÛŒÛ’ Ø¨ÛŒÚ†Ù†Ú¯ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº:**
   ```python
   # Ù¾ÛŒØºØ§Ù…Ø§Øª Ú©Ùˆ Ø¨ÛŒÚ†ÙˆÚº Ù…ÛŒÚº Ø¨Ú¾ÛŒØ¬ÛŒÚº (Ø³Ø³ØªØ§)
   sender.send_messages([message1, message2, message3])
   ```

4. **Ø¨Ø§Ø± Ø¨Ø§Ø± Ø§Ø³ØªØ¹Ù…Ø§Ù„ ÛÙˆÙ†Û’ ÙˆØ§Ù„Û’ Ù†ØªØ§Ø¦Ø¬ Ú©Ùˆ Ú©ÛŒØ´ Ú©Ø±ÛŒÚº:**
   ```python
   # Redis Ú©Û’ Ù„ÛŒÛ’ Azure Cache Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº
   if cache.exists(query_hash):
       return cache.get(query_hash)
   ```

---

## Ø¨ÛØªØ±ÛŒÙ† Ø·Ø±ÛŒÙ‚Û’

### âœ… Ú©Ø±ÛŒÚº:

1. **Ø§ÛŒØ¯Ù…Ù¾ÙˆÙ¹Ù†Ù¹ Ø¢Ù¾Ø±ÛŒØ´Ù†Ø² Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº**
   ```python
   # Ø§ÛŒØ¬Ù†Ù¹ Ø§ÛŒÚ© ÛÛŒ Ù¾ÛŒØºØ§Ù… Ú©Ùˆ Ú©Ø¦ÛŒ Ø¨Ø§Ø± Ù…Ø­ÙÙˆØ¸ Ø·Ø±ÛŒÙ‚Û’ Ø³Û’ Ù¾Ø±ÙˆØ³ÛŒØ³ Ú©Ø± Ø³Ú©ØªØ§ ÛÛ’
   def process_task(task_id):
       if state_manager.task_exists(task_id):
           print(f"Task {task_id} already processed, skipping")
           return
       # Ú©Ø§Ù… Ù¾Ø± Ø¹Ù…Ù„Ø¯Ø±Ø¢Ù…Ø¯...
   ```

2. **Ø¬Ø§Ù…Ø¹ Ù„Ø§Ú¯Ù†Ú¯ Ù†Ø§ÙØ° Ú©Ø±ÛŒÚº**
   ```python
   logger.info(f"Agent: {agent_name}, Task: {task_id}, Action: {action}")
   ```

3. **Correlation IDs Ú©Ø§ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº**
   ```python
   # task_id Ú©Ùˆ Ù¾ÙˆØ±Û’ ÙˆØ±Ú© ÙÙ„Ùˆ Ù…ÛŒÚº Ù…Ù†ØªÙ‚Ù„ Ú©Ø±ÛŒÚº
   message_data = {
       'task_id': task_id,  # Ù…Ø·Ø§Ø¨Ù‚ØªÛŒ Ø´Ù†Ø§Ø®Øª
       'timestamp': datetime.utcnow().isoformat()
   }
   ```

4. **Ù¾ÛŒØºØ§Ù… Ú©Ø§ TTL (time-to-live) Ø³ÛŒÙ¹ Ú©Ø±ÛŒÚº**
   ```bicep
   properties: {
     defaultMessageTimeToLive: 'PT1H'  // 1 hour max
   }
   ```

5. **dead letter queues Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ú©Ø±ÛŒÚº**
   ```python
   # Ù†Ø§Ú©Ø§Ù… Ù¾ÛŒØºØ§Ù…Ø§Øª Ú©ÛŒ Ø¨Ø§Ù‚Ø§Ø¹Ø¯Û Ù†Ú¯Ø±Ø§Ù†ÛŒ
   monitor_dead_letters()
   ```

### âŒ Ù†Û Ú©Ø±ÛŒÚº:

1. **Ú¯ÙˆÙ„ Ø¯Ø§Ø¦Ø±Û Ù†Ù…Ø§ Ø§Ù†Ø­ØµØ§Ø±Ø§Øª Ù¾ÛŒØ¯Ø§ Ù†Û Ú©Ø±ÛŒÚº**
   ```python
   # âŒ Ø®Ø±Ø§Ø¨: Ø§ÛŒØ¬Ù†Ù¹ A â†’ Ø§ÛŒØ¬Ù†Ù¹ B â†’ Ø§ÛŒØ¬Ù†Ù¹ A (Ù„Ø§Ù…ØªÙ†Ø§ÛÛŒ Ù„ÙˆÙ¾)
   # âœ… Ø§Ú†Ú¾Ø§: ÙˆØ§Ø¶Ø­ ÛØ¯Ø§ÛŒØªÛŒ ØºÛŒØ±Ø­Ù„Ù‚ÙˆÛŒ Ú¯Ø±Ø§Ù (DAG) Ù…ØªØ¹ÛŒÙ† Ú©Ø±ÛŒÚº
   ```

2. **Ø§ÛŒØ¬Ù†Ù¹ ØªÚ¾Ø±ÛŒÚˆØ² Ú©Ùˆ Ø¨Ù„Ø§Ú© Ù†Û Ú©Ø±ÛŒÚº**
   ```python
   # âŒ Ø®Ø±Ø§Ø¨: ÛÙ… ÙˆÙ‚ØªÛŒ Ø§Ù†ØªØ¸Ø§Ø±
   while not task_complete:
       time.sleep(1)
   
   # âœ… Ø§Ú†Ú¾Ø§: Ù¾ÛŒØºØ§Ù… Ù‚Ø·Ø§Ø± Ú©Û’ Ú©Ø§Ù„ Ø¨ÛŒÚ©Ø³ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº
   ```

3. **Ø¬Ø²ÙˆÛŒ Ù†Ø§Ú©Ø§Ù…ÛŒÙˆÚº Ú©Ùˆ Ù†Ø¸Ø± Ø§Ù†Ø¯Ø§Ø² Ù†Û Ú©Ø±ÛŒÚº**
   ```python
   # âŒ Ø®Ø±Ø§Ø¨: Ø§Ú¯Ø± Ú©ÙˆØ¦ÛŒ Ø§ÛŒÚ© Ø§ÛŒØ¬Ù†Ù¹ Ù†Ø§Ú©Ø§Ù… ÛÙˆØ¬Ø§Ø¦Û’ ØªÙˆ Ù¾ÙˆØ±Ø§ ÙˆØ±Ú© ÙÙ„Ùˆ Ù†Ø§Ú©Ø§Ù… Ø³Ù…Ø¬Ú¾ Ù„ÛŒÚº
   # âœ… Ø§Ú†Ú¾Ø§: Ø®Ø±Ø§Ø¨ÛŒ Ú©Û’ Ø§Ø´Ø§Ø±ÙˆÚº Ú©Û’ Ø³Ø§ØªÚ¾ Ø¬Ø²ÙˆÛŒ Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù¾Ø³ Ú©Ø±ÛŒÚº
   ```

4. **Ù„Ø§Ù…Ø­Ø¯ÙˆØ¯ Ø±ÛŒÙ¹Ø±ÛŒØ² Ú©Ø§ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ù†Û Ú©Ø±ÛŒÚº**
   ```python
   # âŒ Ø¨Ø±Ø§: ÛÙ…ÛŒØ´Û Ø¯ÙˆØ¨Ø§Ø±Û Ú©ÙˆØ´Ø´ Ú©Ø±Ù†Ø§
   # âœ… Ø§Ú†Ú¾Ø§: max_retries = 3ØŒ Ù¾Ú¾Ø± dead letter Ù…ÛŒÚº Ø¨Ú¾ÛŒØ¬ÛŒÚº
   ```

---
â€®## Ù…Ø³Ø§Ø¦Ù„ Ø­Ù„ Ú©Ø±Ù†Û’ Ú©ÛŒ Ø±ÛÙ†Ù…Ø§Ø¦ÛŒ

### Ù…Ø³Ø¦Ù„Û: Ù¾ÛŒØºØ§Ù…Ø§Øª Ù‚Ø·Ø§Ø± Ù…ÛŒÚº Ù¾Ú¾Ù†Ø³ Ú¯Ø¦Û’

**Ø¹Ù„Ø§Ù…Ø§Øª:**
- Ù¾ÛŒØºØ§Ù…Ø§Øª Ù‚Ø·Ø§Ø± Ù…ÛŒÚº Ø¬Ù…Ø¹ ÛÙˆ Ø±ÛÛ’ ÛÛŒÚº
- Ø§ÛŒØ¬Ù†Ù¹Ø³ Ø¹Ù…Ù„ Ù†ÛÛŒÚº Ú©Ø± Ø±ÛÛ’
- Ù¹Ø§Ø³Ú© Ú©ÛŒ Ø­ÛŒØ«ÛŒØª "pending" Ù¾Ø± Ù¾Ú¾Ù†Ø³ Ú¯Ø¦ÛŒ

**ØªØ´Ø®ÛŒØµ:**
```bash
# Ù‚Ø·Ø§Ø± Ú©ÛŒ Ú¯ÛØ±Ø§Ø¦ÛŒ Ú†ÛŒÚ© Ú©Ø±ÛŒÚº
az servicebus queue show \
  --namespace-name mybus \
  --name research-tasks \
  --query "countDetails"

# Azure CLI Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ØªÛ’ ÛÙˆØ¦Û’ Ø§ÛŒØ¬Ù†Ù¹ Ú©Û’ Ù„Ø§Ú¯Ø² Ú†ÛŒÚ© Ú©Ø±ÛŒÚº
az containerapp logs show --name research-agent --resource-group $RG_NAME --tail 50
```

**Ø­Ù„:**

1. **Ø§ÛŒØ¬Ù†Ù¹Ø³ Ú©ÛŒ ØªØ¹Ø¯Ø§Ø¯ Ø¨Ú‘Ú¾Ø§Ø¦ÛŒÚº:**
   ```bash
   az containerapp update \
     --name research-agent \
     --min-replicas 3 \
     --max-replicas 10
   ```

2. **ÚˆÛŒÚˆ Ù„ÛŒÙ¹Ø± Ú©ÛŒ Ù‚Ø·Ø§Ø± Ú†ÛŒÚ© Ú©Ø±ÛŒÚº:**
   ```bash
   az servicebus queue show \
     --namespace-name mybus \
     --name research-tasks \
     --query "countDetails.deadLetterMessageCount"
   ```

---

### Ù…Ø³Ø¦Ù„Û: Ù¹Ø§Ø³Ú© Ú©Ø§ Ù¹Ø§Ø¦Ù… Ø¢Ø¤Ù¹/Ú©Ø¨Ú¾ÛŒ Ù…Ú©Ù…Ù„ Ù†ÛÛŒÚº ÛÙˆØªØ§

**Ø¹Ù„Ø§Ù…Ø§Øª:**
- Ù¹Ø§Ø³Ú© Ú©ÛŒ Ø­ÛŒØ«ÛŒØª "in_progress" Ø±ÛØªÛŒ ÛÛ’
- Ú©Ú†Ú¾ Ø§ÛŒØ¬Ù†Ù¹Ø³ Ù…Ú©Ù…Ù„ ÛÙˆ Ø¬Ø§ØªÛ’ ÛÛŒÚºØŒ Ø¬Ø¨Ú©Û Ø¯ÙˆØ³Ø±Û’ Ù†ÛÛŒÚº
- Ú©ÙˆØ¦ÛŒ Ø®Ø±Ø§Ø¨ÛŒ Ú©Û’ Ù¾ÛŒØºØ§Ù…Ø§Øª Ù†ÛÛŒÚº

**ØªØ´Ø®ÛŒØµ:**
```bash
# Ù¹Ø§Ø³Ú© Ú©ÛŒ Ø­Ø§Ù„Øª Ú†ÛŒÚ© Ú©Ø±ÛŒÚº
curl $ORCHESTRATOR_URL/task/$TASK_ID

# Ø§ÛŒÙ¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù†Ø³Ø§Ø¦Ù¹Ø³ Ú†ÛŒÚ© Ú©Ø±ÛŒÚº
# Ú©ÙˆØ¦Ø±ÛŒ Ú†Ù„Ø§Ø¦ÛŒÚº: traces | where customDimensions.task_id == "..."
```

**Ø­Ù„:**

1. **Ø§ÛŒÚ¯Ø±ÛŒÚ¯ÛŒÙ¹Ø± Ù…ÛŒÚº Ù¹Ø§Ø¦Ù… Ø¢Ø¤Ù¹ Ù†Ø§ÙØ° Ú©Ø±ÛŒÚº (Ù…Ø´Ù‚ 1)**

2. **Azure Monitor Ú©Û’ Ø°Ø±ÛŒØ¹Û’ Ø§ÛŒØ¬Ù†Ù¹ Ú©ÛŒ Ù†Ø§Ú©Ø§Ù…ÛŒÙˆÚº Ú©ÛŒ Ø¬Ø§Ù†Ú† Ú©Ø±ÛŒÚº:**
   ```bash
   # azd monitor Ú©Û’ Ø°Ø±ÛŒØ¹Û’ Ù„Ø§Ú¯Ø² Ø¯ÛŒÚ©Ú¾ÛŒÚº
   azd monitor --logs
   
   # ÛŒØ§ Ù…Ø®ØµÙˆØµ Ú©Ù†Ù¹ÛŒÙ†Ø± Ø§ÛŒÙ¾ Ú©Û’ Ù„Ø§Ú¯Ø² Ú†ÛŒÚ© Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Azure CLI Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº
   az containerapp logs show --name <agent-name> --resource-group $RG_NAME --follow | grep "ERROR\|FAIL"
   ```

3. **ØªØµØ¯ÛŒÙ‚ Ú©Ø±ÛŒÚº Ú©Û ØªÙ…Ø§Ù… Ø§ÛŒØ¬Ù†Ù¹Ø³ Ú†Ù„ Ø±ÛÛ’ ÛÛŒÚº:**
   ```bash
   az containerapp list \
     --resource-group rg-agents \
     --query "[].{name:name, status:properties.runningStatus}"
   ```

---

## Ù…Ø²ÛŒØ¯ Ø¬Ø§Ù†ÛŒÚº

### Ø³Ø±Ú©Ø§Ø±ÛŒ Ø¯Ø³ØªØ§ÙˆÛŒØ²Ø§Øª
- [Azure Ø³Ø±ÙˆØ³ Ø¨Ø³](https://learn.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview)
- [Cosmos DB](https://learn.microsoft.com/azure/cosmos-db/introduction)
- [Container Apps DAPR](https://learn.microsoft.com/azure/container-apps/dapr-overview)
- [Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ ÚˆÛŒØ²Ø§Ø¦Ù† Ù¾ÛŒÙ¹Ø±Ù†Ø²](https://learn.microsoft.com/azure/architecture/guide/ai/multi-agent-systems)

### Ø§Ø³ Ú©ÙˆØ±Ø³ Ù…ÛŒÚº Ø§Ú¯Ù„Û’ Ø§Ù‚Ø¯Ø§Ù…Ø§Øª
- â† Ù¾Ú†Ú¾Ù„Ø§: [Ø¸Ø±ÙÛŒØª Ú©ÛŒ Ù…Ù†ØµÙˆØ¨Û Ø¨Ù†Ø¯ÛŒ](capacity-planning.md)
- â†’ Ø§Ú¯Ù„Ø§: [SKU Ú©Ø§ Ø§Ù†ØªØ®Ø§Ø¨](sku-selection.md)
- ğŸ  [Ú©ÙˆØ±Ø³ ÛÙˆÙ…](../../README.md)

### Ù…ØªØ¹Ù„Ù‚Û Ù…Ø«Ø§Ù„ÛŒÚº
- [Ù…Ø§Ø¦ÛŒÚ©Ø±Ùˆ Ø³Ø±ÙˆØ³Ø² Ú©ÛŒ Ù…Ø«Ø§Ù„](../../../../examples/microservices) - Ø³Ø±ÙˆØ³ Ù…ÙˆØ§ØµÙ„Øª Ú©Û’ Ù†Ù…ÙˆÙ†Û’
- [Azure OpenAI Ú©ÛŒ Ù…Ø«Ø§Ù„](../../../../examples/azure-openai-chat) - Ù…ØµÙ†ÙˆØ¹ÛŒ Ø°ÛØ§Ù†Øª Ú©Ø§ Ø§Ù†Ø¶Ù…Ø§Ù…

---

## Ø®Ù„Ø§ØµÛ

**Ø¢Ù¾ Ù†Û’ Ø³ÛŒÚ©Ú¾Ø§:**
- âœ… Ù¾Ø§Ù†Ú† ÛÙ… Ø¢ÛÙ†Ú¯ÛŒ Ù¾ÛŒÙ¹Ø±Ù†Ø² (ØªØ³Ù„Ø³Ù„ÛŒØŒ Ù…ØªÙˆØ§Ø²ÛŒØŒ Ø¯Ø±Ø¬Û Ø¨Ù†Ø¯ÛŒØŒ ÙˆØ§Ù‚Ø¹Û Ù¾Ø± Ù…Ø¨Ù†ÛŒØŒ Ø§ØªÙØ§Ù‚ Ø±Ø§Ø¦Û’)
- âœ… Azure Ù¾Ø± Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ Ø¢Ø±Ú©ÛŒÙ¹ÛŒÚ©Ú†Ø± (Service Bus, Cosmos DB, Container Apps)
- âœ… ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ø§ÛŒØ¬Ù†Ù¹Ø³ Ù…ÛŒÚº Ø­Ø§Ù„Øª Ú©Ø§ Ø§Ù†ØªØ¸Ø§Ù…
- âœ… Ù¹Ø§Ø¦Ù… Ø¢Ø¤Ù¹ ÛÛŒÙ†ÚˆÙ„Ù†Ú¯ØŒ Ø¯ÙˆØ¨Ø§Ø±Û Ú©ÙˆØ´Ø´ÛŒÚºØŒ Ø§ÙˆØ± Ø³Ø±Ú©Ù¹ Ø¨Ø±ÛŒÚ©Ø±Ø²
- âœ… ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ø³Ø³Ù¹Ù…Ø² Ú©ÛŒ Ù…Ø§Ù†ÛŒÙ¹Ø±Ù†Ú¯ Ø§ÙˆØ± Ø®Ø±Ø§Ø¨ÛŒÙˆÚº Ú©Ø§ Ø³Ø±Ø§Øº Ù„Ú¯Ø§Ù†Ø§
- âœ… Ù„Ø§Ú¯Øª Ú©ÛŒ Ø§ØµÙ„Ø§Ø­ Ú©ÛŒ Ø­Ú©Ù…Øª Ø¹Ù…Ù„ÛŒØ§Úº

**Ø§ÛÙ… Ù†Ú©Ø§Øª:**
1. **ØµØ­ÛŒØ­ Ù¾ÛŒÙ¹Ø±Ù† Ú©Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±ÛŒÚº** - ØªØ±ØªÛŒØ¨ ÙˆØ§Ø± ÙˆØ±Ú© ÙÙ„Ùˆ Ú©Û’ Ù„ÛŒÛ’ ØªØ³Ù„Ø³Ù„ÛŒØŒ Ø±ÙØªØ§Ø± Ú©Û’ Ù„ÛŒÛ’ Ù…ØªÙˆØ§Ø²ÛŒØŒ Ù„Ú†Ú© Ú©Û’ Ù„ÛŒÛ’ ÙˆØ§Ù‚Ø¹Û Ù¾Ø± Ù…Ø¨Ù†ÛŒ
2. **Ø­Ø§Ù„Øª Ú©Ùˆ Ø§Ø­ØªÛŒØ§Ø· Ø³Û’ Ø³Ù†Ø¨Ú¾Ø§Ù„ÛŒÚº** - Ù…Ø´ØªØ±Ú©Û Ø­Ø§Ù„Øª Ú©Û’ Ù„ÛŒÛ’ Cosmos DB ÛŒØ§ Ø§Ø³ÛŒ Ø¬ÛŒØ³Û’ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº
3. **Ù†Ø§Ú©Ø§Ù…ÛŒÙˆÚº Ú©Ùˆ Ø¨ÛØªØ± Ø·Ø±ÛŒÙ‚Û’ Ø³Û’ Ø³Ù†Ø¨Ú¾Ø§Ù„ÛŒÚº** - Ù¹Ø§Ø¦Ù… Ø¢Ø¤Ù¹Ø³ØŒ Ø¯ÙˆØ¨Ø§Ø±Û Ú©ÙˆØ´Ø´ÛŒÚºØŒ Ø³Ø±Ú©Ù¹ Ø¨Ø±ÛŒÚ©Ø±Ø²ØŒ ÚˆÛŒÚˆ Ù„ÛŒÙ¹Ø± Ù‚Ø·Ø§Ø±ÛŒÚº
4. **ÛØ± Ú†ÛŒØ² Ú©ÛŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ú©Ø±ÛŒÚº** - ØªÙ‚Ø³ÛŒÙ… Ø´Ø¯Û Ù¹Ø±ÛŒØ³Ù†Ú¯ ÚˆÛŒ Ø¨Ú¯Ù†Ú¯ Ú©Û’ Ù„ÛŒÛ’ Ø¶Ø±ÙˆØ±ÛŒ ÛÛ’
5. **Ù„Ø§Ú¯Øª Ú©Ùˆ Ø¨ÛØªØ± Ø¨Ù†Ø§Ø¦ÛŒÚº** - Ø²ÛŒØ±Ùˆ ØªÚ© Ø§Ø³Ú©ÛŒÙ„ Ú©Ø±ÛŒÚºØŒ Ø³Ø±ÙˆØ± Ù„ÛŒØ³ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚºØŒ Ú©ÛŒØ´Ù†Ú¯ Ù†Ø§ÙØ° Ú©Ø±ÛŒÚº

**Ø§Ú¯Ù„Û’ Ø§Ù‚Ø¯Ø§Ù…Ø§Øª:**
1. Ø¹Ù…Ù„ÛŒ Ù…Ø´Ù‚ÛŒÚº Ù…Ú©Ù…Ù„ Ú©Ø±ÛŒÚº
2. Ø§Ù¾Ù†Û’ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Û’ Ú©ÛŒØ³ Ú©Û’ Ù„ÛŒÛ’ Ù…Ù„Ù¹ÛŒ-Ø§ÛŒØ¬Ù†Ù¹ Ø³Ø³Ù¹Ù… Ø¨Ù†Ø§Ø¦ÛŒÚº
3. Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ Ø§ÙˆØ± Ù„Ø§Ú¯Øª Ú©Ùˆ Ø¨ÛØªØ± Ø¨Ù†Ø§Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ [SKU Ú©Ø§ Ø§Ù†ØªØ®Ø§Ø¨](sku-selection.md) Ú©Ø§ Ù…Ø·Ø§Ù„Ø¹Û Ú©Ø±ÛŒÚºâ€®.

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
Ø¯Ø³ØªØ¨Ø±Ø¯Ø§Ø±ÛŒ:
ÛŒÛ Ø¯Ø³ØªØ§ÙˆÛŒØ² Ù…ØµÙ†ÙˆØ¹ÛŒ Ø°ÛØ§Ù†Øª (AI) Ù¾Ø± Ù…Ø¨Ù†ÛŒ ØªØ±Ø¬Ù…Û Ø³Ø±ÙˆØ³ [Co-op Translator](https://github.com/Azure/co-op-translator) Ú©Û’ Ø°Ø±ÛŒØ¹Û’ ØªØ±Ø¬Ù…Û Ú©ÛŒ Ú¯Ø¦ÛŒ ÛÛ’Û” Ø§Ú¯Ø±Ú†Û ÛÙ… Ø¯Ø±Ø³ØªÚ¯ÛŒ Ú©Û’ Ù„ÛŒÛ’ Ú©ÙˆØ´Ø§Úº ÛÛŒÚºØŒ Ø¨Ø±Ø§ÛÙ Ú©Ø±Ù… Ù†ÙˆÙ¹ Ú©Ø±ÛŒÚº Ú©Û Ø®ÙˆØ¯Ú©Ø§Ø± ØªØ±Ø§Ø¬Ù… Ù…ÛŒÚº ØºÙ„Ø·ÛŒØ§Úº ÛŒØ§ ØºÛŒØ± Ø¯Ø±Ø³ØªÛŒØ§Úº Ù…ÙˆØ¬ÙˆØ¯ ÛÙˆ Ø³Ú©ØªÛŒ ÛÛŒÚºÛ” Ø§ØµÙ„ Ø¯Ø³ØªØ§ÙˆÛŒØ² Ø§Ø³ Ú©ÛŒ Ù…Ø§Ø¯Ø±ÛŒ Ø²Ø¨Ø§Ù† Ù…ÛŒÚº Ù…Ø¹ØªØ¨Ø± Ù…Ø§Ø®Ø° Ø³Ù…Ø¬Ú¾ÛŒ Ø¬Ø§Ø¦Û’ Ú¯ÛŒÛ” Ø§ÛÙ… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ú©Û’ Ù„ÛŒÛ’ Ù¾ÛŒØ´Û ÙˆØ± Ø§Ù†Ø³Ø§Ù†ÛŒ ØªØ±Ø¬Ù…Û Ú©ÛŒ Ø³ÙØ§Ø±Ø´ Ú©ÛŒ Ø¬Ø§ØªÛŒ ÛÛ’Û” ÛÙ… Ø§Ø³ ØªØ±Ø¬Ù…Û’ Ú©Û’ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ø³Û’ Ù¾ÛŒØ¯Ø§ ÛÙˆÙ†Û’ ÙˆØ§Ù„ÛŒ Ú©Ø³ÛŒ Ø¨Ú¾ÛŒ ØºÙ„Ø· ÙÛÙ…ÛŒ ÛŒØ§ ØºÙ„Ø· ØªØ´Ø±ÛŒØ­ Ú©Û’ Ù„ÛŒÛ’ Ø°Ù…Û Ø¯Ø§Ø± Ù†ÛÛŒÚº ÛÛŒÚºÛ”
<!-- CO-OP TRANSLATOR DISCLAIMER END -->