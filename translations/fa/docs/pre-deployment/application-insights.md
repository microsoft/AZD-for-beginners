# ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ Application Insights Ø¨Ø§ AZD

â±ï¸ **Ø²Ù…Ø§Ù† ØªØ®Ù…ÛŒÙ†ÛŒ**: Û´Û°-ÛµÛ° Ø¯Ù‚ÛŒÙ‚Ù‡ | ğŸ’° **Ù‡Ø²ÛŒÙ†Ù‡ ØªÙ‚Ø±ÛŒØ¨ÛŒ**: ~Ûµ-Û±Ûµ Ø¯Ù„Ø§Ø±/Ù…Ø§Ù‡ | â­ **Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ**: Ù…ØªÙˆØ³Ø·

**ğŸ“š Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ:**
- â† Ù‚Ø¨Ù„ÛŒ: [Ø¨Ø±Ø±Ø³ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´ Ø§Ø² Ø§Ø¬Ø±Ø§](preflight-checks.md) - Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ù¾ÛŒØ´ Ø§Ø² Ø§Ø³ØªÙ‚Ø±Ø§Ø±
- ğŸ¯ **Ø´Ù…Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù‡Ø³ØªÛŒØ¯**: ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ Application Insights (Ù†Ø¸Ø§Ø±ØªØŒ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒØŒ Ø§Ø´Ú©Ø§Ù„â€ŒØ²Ø¯Ø§ÛŒÛŒ)
- â†’ Ø¨Ø¹Ø¯ÛŒ: [Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙ‚Ø±Ø§Ø±](../deployment/deployment-guide.md) - Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¯Ø± Azure
- ğŸ  [ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø¯ÙˆØ±Ù‡](../../README.md)

---

## Ø¢Ù†Ú†Ù‡ ÛŒØ§Ø¯ Ø®ÙˆØ§Ù‡ÛŒØ¯ Ú¯Ø±ÙØª

Ø¨Ø§ ØªÚ©Ù…ÛŒÙ„ Ø§ÛŒÙ† Ø¯Ø±Ø³ØŒ Ø´Ù…Ø§:
- **Application Insights** Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ AZD ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯
- **Ø±Ø¯ÛŒØ§Ø¨ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡** Ø¨Ø±Ø§ÛŒ Ù…ÛŒÚ©Ø±ÙˆØ³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯
- **ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ** (Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ØŒ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ØŒ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§) Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯
- **Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡** Ø¨Ø±Ø§ÛŒ Ù†Ø¸Ø§Ø±Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯
- **Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ Ùˆ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯Ù‡Ø§** Ø§Ø² Ø§Ø³ØªÙ‚Ø±Ø§Ø±Ù‡Ø§ÛŒ AZD Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯
- Ù…Ø´Ú©Ù„Ø§Øª ØªÙˆÙ„ÛŒØ¯ Ø±Ø§ Ø¨Ø§ **Ù¾Ø±Ø³Ø´â€ŒÙ‡Ø§ÛŒ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ** Ø§Ø´Ú©Ø§Ù„â€ŒØ²Ø¯Ø§ÛŒÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯
- **Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ùˆ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ** Ø±Ø§ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯
- **Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ AI/LLM** Ø±Ø§ Ù†Ø¸Ø§Ø±Øª Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ (ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ØŒ ØªØ£Ø®ÛŒØ±ØŒ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§)

## Ú†Ø±Ø§ Application Insights Ø¨Ø§ AZD Ø§Ù‡Ù…ÛŒØª Ø¯Ø§Ø±Ø¯

### Ú†Ø§Ù„Ø´: Ù…Ø´Ø§Ù‡Ø¯Ù‡â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¯Ø± ØªÙˆÙ„ÛŒØ¯

**Ø¨Ø¯ÙˆÙ† Application Insights:**
```
âŒ No visibility into production behavior
âŒ Manual log aggregation across services
âŒ Reactive debugging (wait for customer complaints)
âŒ No performance metrics
âŒ Cannot trace requests across services
âŒ Unknown failure rates and bottlenecks
```

**Ø¨Ø§ Application Insights + AZD:**
```
âœ… Automatic telemetry collection
âœ… Centralized logs from all services
âœ… Proactive issue detection
âœ… End-to-end request tracing
âœ… Performance metrics and insights
âœ… Real-time dashboards
âœ… AZD provisions everything automatically
```

**ØªØ´Ø¨ÛŒÙ‡**: Application Insights Ù…Ø§Ù†Ù†Ø¯ Ø¯Ø§Ø´ØªÙ† ÛŒÚ© "Ø¬Ø¹Ø¨Ù‡ Ø³ÛŒØ§Ù‡" Ø¶Ø¨Ø·â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù¾Ø±ÙˆØ§Ø² + Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ú©Ø§Ø¨ÛŒÙ† Ø®Ù„Ø¨Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø´Ù…Ø§ Ø§Ø³Øª. Ø´Ù…Ø§ Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø±Ø§ Ø¯Ø± Ù„Ø­Ø¸Ù‡ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù‡Ø± Ø­Ø§Ø¯Ø«Ù‡â€ŒØ§ÛŒ Ø±Ø§ Ø¨Ø§Ø²Ù¾Ø®Ø´ Ú©Ù†ÛŒØ¯.

---

## Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ù…Ø¹Ù…Ø§Ø±ÛŒ

### Application Insights Ø¯Ø± Ù…Ø¹Ù…Ø§Ø±ÛŒ AZD

```mermaid
graph TB
    User[Ú©Ø§Ø±Ø¨Ø±/Ù…Ø´ØªØ±ÛŒ]
    App1[Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ø§Ù†ØªÛŒÙ†Ø±ÛŒ Û±<br/>Ø¯Ø±ÙˆØ§Ø²Ù‡ API]
    App2[Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ø§Ù†ØªÛŒÙ†Ø±ÛŒ Û²<br/>Ø³Ø±ÙˆÛŒØ³ Ù…Ø­ØµÙˆÙ„]
    App3[Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ø§Ù†ØªÛŒÙ†Ø±ÛŒ Û³<br/>Ø³Ø±ÙˆÛŒØ³ Ø³ÙØ§Ø±Ø´]
    
    AppInsights[Ø¨ÛŒÙ†Ø´â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡<br/>Ù…Ø±Ú©Ø² ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ]
    LogAnalytics[(ØªØ­Ù„ÛŒÙ„ Ù„Ø§Ú¯â€ŒÙ‡Ø§<br/>ÙØ¶Ø§ÛŒ Ú©Ø§Ø±ÛŒ)]
    
    Portal[Ù¾ÙˆØ±ØªØ§Ù„ Ø¢Ú˜ÙˆØ±<br/>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯Ù‡Ø§ Ùˆ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§]
    Query[Ù¾Ø±Ø³Ø´â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØ³ØªÙˆ<br/>ØªØ­Ù„ÛŒÙ„ Ø³ÙØ§Ø±Ø´ÛŒ]
    
    User --> App1
    App1 --> App2
    App2 --> App3
    
    App1 -.->|Ø§Ø¨Ø²Ø§Ø± Ø®ÙˆØ¯Ú©Ø§Ø±| AppInsights
    App2 -.->|Ø§Ø¨Ø²Ø§Ø± Ø®ÙˆØ¯Ú©Ø§Ø±| AppInsights
    App3 -.->|Ø§Ø¨Ø²Ø§Ø± Ø®ÙˆØ¯Ú©Ø§Ø±| AppInsights
    
    AppInsights --> LogAnalytics
    LogAnalytics --> Portal
    LogAnalytics --> Query
    
    style AppInsights fill:#9C27B0,stroke:#7B1FA2,stroke-width:3px,color:#fff
    style LogAnalytics fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
```
### Ø¢Ù†Ú†Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ù†Ø¸Ø§Ø±Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯

| Ù†ÙˆØ¹ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ | Ø¢Ù†Ú†Ù‡ Ø¶Ø¨Ø· Ù…ÛŒâ€ŒÚ©Ù†Ø¯ | Ù…ÙˆØ±Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ |
|--------------|-----------------|--------------|
| **Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§** | Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ HTTPØŒ Ú©Ø¯Ù‡Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØªØŒ Ù…Ø¯Øª Ø²Ù…Ø§Ù† | Ù†Ø¸Ø§Ø±Øª Ø¨Ø± Ø¹Ù…Ù„Ú©Ø±Ø¯ API |
| **ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§** | ØªÙ…Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ÛŒ (Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ØŒ APIâ€ŒÙ‡Ø§ØŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ) | Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ú¯Ù„ÙˆÚ¯Ø§Ù‡â€ŒÙ‡Ø§ |
| **Ø§Ø³ØªØ«Ù†Ø§Ù‡Ø§** | Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø¨Ø¯ÙˆÙ† Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø§ Ø±Ø¯Ù¾Ø§ÛŒ Ù¾Ø´ØªÙ‡ | Ø§Ø´Ú©Ø§Ù„â€ŒØ²Ø¯Ø§ÛŒÛŒ Ø®Ø±Ø§Ø¨ÛŒâ€ŒÙ‡Ø§ |
| **Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ** | Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ ØªØ¬Ø§Ø±ÛŒ (Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…ØŒ Ø®Ø±ÛŒØ¯) | ØªØ­Ù„ÛŒÙ„ Ùˆ Ù‚ÛŒÙâ€ŒÙ‡Ø§ |
| **Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§** | Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ØŒ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ | Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø¸Ø±ÙÛŒØª |
| **Ø±Ø¯ÛŒØ§Ø¨ÛŒâ€ŒÙ‡Ø§** | Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ú¯ Ø¨Ø§ Ø´Ø¯Øª | Ø§Ø´Ú©Ø§Ù„â€ŒØ²Ø¯Ø§ÛŒÛŒ Ùˆ Ø­Ø³Ø§Ø¨Ø±Ø³ÛŒ |
| **Ø¯Ø³ØªØ±Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ** | Ø¢Ø²Ù…Ø§ÛŒØ´â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø® Ùˆ Ø¢Ù¾â€ŒØªØ§ÛŒÙ… | Ù†Ø¸Ø§Ø±Øª Ø¨Ø± SLA |

---

## Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§

### Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²

```bash
# ØªØ£ÛŒÛŒØ¯ CLI ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Azure
azd version
# âœ… Ù…ÙˆØ±Ø¯ Ø§Ù†ØªØ¸Ø§Ø±: Ù†Ø³Ø®Ù‡ azd 1.0.0 ÛŒØ§ Ø¨Ø§Ù„Ø§ØªØ±

# ØªØ£ÛŒÛŒØ¯ CLI Azure
az --version
# âœ… Ù…ÙˆØ±Ø¯ Ø§Ù†ØªØ¸Ø§Ø±: azure-cli Ù†Ø³Ø®Ù‡ 2.50.0 ÛŒØ§ Ø¨Ø§Ù„Ø§ØªØ±
```

### Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Azure

- Ø§Ø´ØªØ±Ø§Ú© ÙØ¹Ø§Ù„ Azure
- Ù…Ø¬ÙˆØ² Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯:
  - Ù…Ù†Ø§Ø¨Ø¹ Application Insights
  - ÙØ¶Ø§ÛŒ Ú©Ø§Ø±ÛŒ Log Analytics
  - Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù†ØªÛŒÙ†Ø±ÛŒ
  - Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø§Ø¨Ø¹

### Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ø¯Ø§Ù†Ø´ÛŒ

Ø´Ù…Ø§ Ø¨Ø§ÛŒØ¯ ØªÚ©Ù…ÛŒÙ„ Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´ÛŒØ¯:
- [Ù…Ø¨Ø§Ù†ÛŒ AZD](../getting-started/azd-basics.md) - Ù…ÙØ§Ù‡ÛŒÙ… Ø§ØµÙ„ÛŒ AZD
- [Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ](../getting-started/configuration.md) - ØªÙ†Ø¸ÛŒÙ… Ù…Ø­ÛŒØ·
- [Ù¾Ø±ÙˆÚ˜Ù‡ Ø§ÙˆÙ„](../getting-started/first-project.md) - Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ù¾Ø§ÛŒÙ‡

---

## Ø¯Ø±Ø³ Û±: Application Insights Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø§ AZD

### Ù†Ø­ÙˆÙ‡ Ø§ÛŒØ¬Ø§Ø¯ Application Insights ØªÙˆØ³Ø· AZD

AZD Ù‡Ù†Ú¯Ø§Ù… Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Application Insights Ø±Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¨Ø¨ÛŒÙ†ÛŒÙ… Ú†Ú¯ÙˆÙ†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

### Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡

```
monitored-app/
â”œâ”€â”€ azure.yaml                     # AZD configuration
â”œâ”€â”€ infra/
â”‚   â”œâ”€â”€ main.bicep                # Main infrastructure
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ monitoring.bicep      # Application Insights + Log Analytics
â”‚   â””â”€â”€ app/
â”‚       â””â”€â”€ api.bicep             # Container App with monitoring
â””â”€â”€ src/
    â”œâ”€â”€ app.py                    # Application with telemetry
    â”œâ”€â”€ requirements.txt
    â””â”€â”€ Dockerfile
```

---

### Ù…Ø±Ø­Ù„Ù‡ Û±: Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ AZD (azure.yaml)

**ÙØ§ÛŒÙ„: `azure.yaml`**

```yaml
name: monitored-app
metadata:
  template: monitored-app@1.0.0

services:
  api:
    project: ./src
    language: python
    host: containerapp

# AZD automatically provisions monitoring!
```

**Ù‡Ù…ÛŒÙ†!** AZD Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Application Insights Ø±Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø¨Ø±Ø§ÛŒ Ù†Ø¸Ø§Ø±Øª Ù¾Ø§ÛŒÙ‡ Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø§Ø¶Ø§ÙÛŒ Ù†ÛŒØ³Øª.

---

### Ù…Ø±Ø­Ù„Ù‡ Û²: Ø²ÛŒØ±Ø³Ø§Ø®Øª Ù†Ø¸Ø§Ø±Øª (Bicep)

**ÙØ§ÛŒÙ„: `infra/core/monitoring.bicep`**

```bicep
param logAnalyticsName string
param applicationInsightsName string
param location string = resourceGroup().location
param tags object = {}

// Log Analytics Workspace (required for Application Insights)
resource logAnalytics 'Microsoft.OperationalInsights/workspaces@2022-10-01' = {
  name: logAnalyticsName
  location: location
  tags: tags
  properties: {
    sku: {
      name: 'PerGB2018'  // Pay-as-you-go pricing
    }
    retentionInDays: 30  // Keep logs for 30 days
    features: {
      enableLogAccessUsingOnlyResourcePermissions: true
    }
  }
}

// Application Insights
resource applicationInsights 'Microsoft.Insights/components@2020-02-02' = {
  name: applicationInsightsName
  location: location
  tags: tags
  kind: 'web'
  properties: {
    Application_Type: 'web'
    WorkspaceResourceId: logAnalytics.id
    IngestionMode: 'LogAnalytics'
    publicNetworkAccessForIngestion: 'Enabled'
    publicNetworkAccessForQuery: 'Enabled'
  }
}

// Outputs for Container Apps
output logAnalyticsWorkspaceId string = logAnalytics.id
output logAnalyticsWorkspaceName string = logAnalytics.name
output applicationInsightsConnectionString string = applicationInsights.properties.ConnectionString
output applicationInsightsInstrumentationKey string = applicationInsights.properties.InstrumentationKey
output applicationInsightsName string = applicationInsights.name
```

---

### Ù…Ø±Ø­Ù„Ù‡ Û³: Ø§ØªØµØ§Ù„ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ø§Ù†ØªÛŒÙ†Ø±ÛŒ Ø¨Ù‡ Application Insights

**ÙØ§ÛŒÙ„: `infra/app/api.bicep`**

```bicep
param name string
param location string
param tags object = {}
param containerAppsEnvironmentName string
param applicationInsightsConnectionString string

resource containerApp 'Microsoft.App/containerApps@2023-05-01' = {
  name: name
  location: location
  tags: tags
  properties: {
    configuration: {
      ingress: {
        external: true
        targetPort: 8000
      }
      secrets: [
        {
          name: 'appinsights-connection-string'
          value: applicationInsightsConnectionString
        }
      ]
    }
    template: {
      containers: [
        {
          name: 'api'
          image: 'myregistry.azurecr.io/api:latest'
          resources: {
            cpu: json('0.5')
            memory: '1Gi'
          }
          env: [
            {
              name: 'APPLICATIONINSIGHTS_CONNECTION_STRING'
              secretRef: 'appinsights-connection-string'
            }
            {
              name: 'APPLICATIONINSIGHTS_ENABLED'
              value: 'true'
            }
          ]
        }
      ]
    }
  }
}

output uri string = 'https://${containerApp.properties.configuration.ingress.fqdn}'
```

---

### Ù…Ø±Ø­Ù„Ù‡ Û´: Ú©Ø¯ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø§ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ

**ÙØ§ÛŒÙ„: `src/app.py`**

```python
from flask import Flask, request, jsonify
from opencensus.ext.azure.log_exporter import AzureLogHandler
from opencensus.ext.azure.trace_exporter import AzureExporter
from opencensus.ext.flask.flask_middleware import FlaskMiddleware
from opencensus.trace.samplers import ProbabilitySampler
import logging
import os

app = Flask(__name__)

# Ø¯Ø±ÛŒØ§ÙØª Ø±Ø´ØªÙ‡ Ø§ØªØµØ§Ù„ Application Insights
connection_string = os.environ.get('APPLICATIONINSIGHTS_CONNECTION_STRING')

if connection_string:
    # Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø±Ø¯ÛŒØ§Ø¨ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡
    middleware = FlaskMiddleware(
        app,
        exporter=AzureExporter(connection_string=connection_string),
        sampler=ProbabilitySampler(rate=1.0)  # Ù†Ù…ÙˆÙ†Ù‡â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ Û±Û°Û°Ùª Ø¨Ø±Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡
    )
    
    # Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø«Ø¨Øª ÙˆÙ‚Ø§ÛŒØ¹
    logger = logging.getLogger(__name__)
    logger.addHandler(AzureLogHandler(connection_string=connection_string))
    logger.setLevel(logging.INFO)
    
    print("âœ… Application Insights enabled")
else:
    logger = logging.getLogger(__name__)
    logger.setLevel(logging.INFO)
    print("âš ï¸ Application Insights not configured")

@app.route('/health')
def health():
    logger.info('Health check endpoint called')
    return jsonify({'status': 'healthy', 'monitoring': 'enabled'})

@app.route('/api/products')
def get_products():
    logger.info('Fetching products')
    
    # Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªÙ…Ø§Ø³ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ (Ø¨Ù‡â€ŒØ·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡â€ŒØ¹Ù†ÙˆØ§Ù† ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
    products = [
        {'id': 1, 'name': 'Laptop', 'price': 999.99},
        {'id': 2, 'name': 'Mouse', 'price': 29.99},
        {'id': 3, 'name': 'Keyboard', 'price': 79.99}
    ]
    
    logger.info(f'Returned {len(products)} products')
    return jsonify(products)

@app.route('/api/error-test')
def error_test():
    """Test error tracking"""
    logger.error('Testing error tracking')
    try:
        raise ValueError('This is a test exception')
    except Exception as e:
        logger.exception('Exception occurred in error-test endpoint')
        return jsonify({'error': str(e)}), 500

@app.route('/api/slow')
def slow_endpoint():
    """Test performance tracking"""
    import time
    logger.info('Slow endpoint called')
    time.sleep(3)  # Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„ÛŒØ§Øª Ú©Ù†Ø¯
    logger.warning('Endpoint took 3 seconds to respond')
    return jsonify({'message': 'Slow operation completed'})

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8000)
```

**ÙØ§ÛŒÙ„: `src/requirements.txt`**

```txt
Flask==3.0.0
opencensus-ext-azure==1.1.13
opencensus-ext-flask==0.8.1
gunicorn==21.2.0
```

---

### Ù…Ø±Ø­Ù„Ù‡ Ûµ: Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ùˆ ØªØ£ÛŒÛŒØ¯

```bash
# Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ AZD
azd init

# Ø§Ø³ØªÙ‚Ø±Ø§Ø± (Ø¨Ù‡â€ŒØ·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± Application Insights Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯)
azd up

# Ø¯Ø±ÛŒØ§ÙØª URL Ø¨Ø±Ù†Ø§Ù…Ù‡
APP_URL=$(azd env get-values | grep API_URL | cut -d '=' -f2 | tr -d '"')

# ØªÙˆÙ„ÛŒØ¯ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ
curl $APP_URL/health
curl $APP_URL/api/products
curl $APP_URL/api/error-test
curl $APP_URL/api/slow
```

**âœ… Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆØ±Ø¯ Ø§Ù†ØªØ¸Ø§Ø±:**
```json
{
  "status": "healthy",
  "monitoring": "enabled"
}
```

---

### Ù…Ø±Ø­Ù„Ù‡ Û¶: Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ø¯Ø± Ù¾ÙˆØ±ØªØ§Ù„ Azure

```bash
# Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø²Ø¦ÛŒØ§Øª Application Insights
azd env get-values | grep APPLICATIONINSIGHTS

# Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¯Ø± Ù¾ÙˆØ±ØªØ§Ù„ Azure
az monitor app-insights component show \
  --app $(azd env get-values | grep APPLICATIONINSIGHTS_NAME | cut -d '=' -f2 | tr -d '"') \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --query "appId" -o tsv
```

**Ø¨Ù‡ Ù¾ÙˆØ±ØªØ§Ù„ Azure â†’ Application Insights â†’ Ø¬Ø³ØªØ¬ÙˆÛŒ ØªØ±Ø§Ú©Ù†Ø´ Ø¨Ø±ÙˆÛŒØ¯**

Ø´Ù…Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ø¨ÛŒÙ†ÛŒØ¯:
- âœ… Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ HTTP Ø¨Ø§ Ú©Ø¯Ù‡Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª
- âœ… Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª (Ø¨ÛŒØ´ Ø§Ø² Û³ Ø«Ø§Ù†ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ `/api/slow`)
- âœ… Ø¬Ø²Ø¦ÛŒØ§Øª Ø§Ø³ØªØ«Ù†Ø§Ù‡Ø§ Ø§Ø² `/api/error-test`
- âœ… Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ú¯ Ø³ÙØ§Ø±Ø´ÛŒ

---

## Ø¯Ø±Ø³ Û²: ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ùˆ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ

### Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ ØªØ¬Ø§Ø±ÛŒ

Ø¨ÛŒØ§ÛŒÛŒØ¯ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø±Ø§ÛŒ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ ØªØ¬Ø§Ø±ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ….

**ÙØ§ÛŒÙ„: `src/telemetry.py`**

```python
from opencensus.ext.azure import metrics_exporter
from opencensus.stats import aggregation as aggregation_module
from opencensus.stats import measure as measure_module
from opencensus.stats import stats as stats_module
from opencensus.stats import view as view_module
from opencensus.tags import tag_map as tag_map_module
from opencensus.ext.azure.log_exporter import AzureLogHandler
from opencensus.ext.azure.trace_exporter import AzureExporter
from opencensus.trace import tracer as tracer_module
import logging
import os

class TelemetryClient:
    """Custom telemetry client for Application Insights"""
    
    def __init__(self, connection_string=None):
        self.connection_string = connection_string or os.environ.get('APPLICATIONINSIGHTS_CONNECTION_STRING')
        
        if not self.connection_string:
            print("âš ï¸ Application Insights connection string not found")
            return
        
        # ØªÙ†Ø¸ÛŒÙ… Ø«Ø¨Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡
        self.logger = logging.getLogger(__name__)
        self.logger.addHandler(AzureLogHandler(connection_string=self.connection_string))
        self.logger.setLevel(logging.INFO)
        
        # ØªÙ†Ø¸ÛŒÙ… ØµØ§Ø¯Ø±Ú©Ù†Ù†Ø¯Ù‡ Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§
        self.stats = stats_module.stats
        self.view_manager = self.stats.view_manager
        self.stats_recorder = self.stats.stats_recorder
        
        exporter = metrics_exporter.new_metrics_exporter(
            connection_string=self.connection_string
        )
        self.view_manager.register_exporter(exporter)
        
        # ØªÙ†Ø¸ÛŒÙ… Ø±Ø¯ÛŒØ§Ø¨
        self.tracer = tracer_module.Tracer(
            exporter=AzureExporter(connection_string=self.connection_string)
        )
        
        print("âœ… Custom telemetry client initialized")
    
    def track_event(self, event_name: str, properties: dict = None):
        """Track custom business event"""
        properties = properties or {}
        self.logger.info(
            f"CustomEvent: {event_name}",
            extra={
                'custom_dimensions': {
                    'event_name': event_name,
                    **properties
                }
            }
        )
    
    def track_metric(self, metric_name: str, value: float, properties: dict = None):
        """Track custom metric"""
        properties = properties or {}
        self.logger.info(
            f"CustomMetric: {metric_name} = {value}",
            extra={
                'custom_dimensions': {
                    'metric_name': metric_name,
                    'value': value,
                    **properties
                }
            }
        )
    
    def track_dependency(self, name: str, dependency_type: str, duration: float, success: bool):
        """Track external dependency call"""
        with self.tracer.span(name=name) as span:
            span.add_attribute('dependency.type', dependency_type)
            span.add_attribute('duration', duration)
            span.add_attribute('success', success)

# Ù…Ø´ØªØ±ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ
telemetry = TelemetryClient()
```

### Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø§ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ

**ÙØ§ÛŒÙ„: `src/app.py` (Ø¨Ù‡Ø¨ÙˆØ¯ ÛŒØ§ÙØªÙ‡)**

```python
from flask import Flask, request, jsonify
from telemetry import telemetry
import time
import random

app = Flask(__name__)

@app.route('/api/purchase', methods=['POST'])
def purchase():
    """Track purchase event with custom telemetry"""
    data = request.json
    product_id = data.get('product_id')
    quantity = data.get('quantity', 1)
    price = data.get('price', 0)
    
    # Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø±ÙˆÛŒØ¯Ø§Ø¯ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±
    telemetry.track_event('Purchase', {
        'product_id': product_id,
        'quantity': quantity,
        'total_amount': price * quantity,
        'user_id': request.headers.get('X-User-Id', 'anonymous')
    })
    
    # Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ù…Ø¹ÛŒØ§Ø± Ø¯Ø±Ø¢Ù…Ø¯
    telemetry.track_metric('Revenue', price * quantity, {
        'product_id': product_id,
        'currency': 'USD'
    })
    
    return jsonify({
        'order_id': f'ORD-{random.randint(1000, 9999)}',
        'status': 'confirmed',
        'total': price * quantity
    })

@app.route('/api/search')
def search():
    """Track search queries"""
    query = request.args.get('q', '')
    
    start_time = time.time()
    
    # Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¬Ø³ØªØ¬Ùˆ (Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ ÛŒÚ© Ù¾Ø±Ø³â€ŒÙˆØ¬ÙˆÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ Ø¨Ø§Ø´Ø¯)
    results = [{'id': 1, 'name': f'Result for {query}'}]
    
    duration = (time.time() - start_time) * 1000  # ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡
    
    # Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¬Ø³ØªØ¬Ùˆ
    telemetry.track_event('Search', {
        'query': query,
        'results_count': len(results),
        'duration_ms': duration
    })
    
    # Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ù…Ø¹ÛŒØ§Ø± Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¬Ø³ØªØ¬Ùˆ
    telemetry.track_metric('SearchDuration', duration, {
        'query_length': len(query)
    })
    
    return jsonify({'results': results, 'count': len(results)})

@app.route('/api/external-call')
def external_call():
    """Track external API dependency"""
    import requests
    
    start_time = time.time()
    success = True
    
    try:
        # Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªÙ…Ø§Ø³ API Ø®Ø§Ø±Ø¬ÛŒ
        response = requests.get('https://api.example.com/data', timeout=5)
        result = response.json()
    except Exception as e:
        success = False
        result = {'error': str(e)}
    
    duration = (time.time() - start_time) * 1000
    
    # Ø±Ø¯ÛŒØ§Ø¨ÛŒ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ
    telemetry.track_dependency(
        name='ExternalAPI',
        dependency_type='HTTP',
        duration=duration,
        success=success
    )
    
    return jsonify(result)

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8000)
```

### Ø¢Ø²Ù…Ø§ÛŒØ´ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ

```bash
# Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø®Ø±ÛŒØ¯
curl -X POST $APP_URL/api/purchase \
  -H "Content-Type: application/json" \
  -H "X-User-Id: user123" \
  -d '{"product_id": 1, "quantity": 2, "price": 29.99}'

# Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¬Ø³ØªØ¬Ùˆ
curl "$APP_URL/api/search?q=laptop"

# Ø±Ø¯ÛŒØ§Ø¨ÛŒ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ Ø®Ø§Ø±Ø¬ÛŒ
curl $APP_URL/api/external-call
```

**Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Ù¾ÙˆØ±ØªØ§Ù„ Azure:**

Ø¨Ù‡ Application Insights â†’ Logs Ø¨Ø±ÙˆÛŒØ¯ Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:

```kusto
// View purchase events
traces
| where customDimensions.event_name == "Purchase"
| project 
    timestamp,
    product_id = tostring(customDimensions.product_id),
    total_amount = todouble(customDimensions.total_amount),
    user_id = tostring(customDimensions.user_id)
| order by timestamp desc

// View revenue metrics
traces
| where customDimensions.metric_name == "Revenue"
| summarize TotalRevenue = sum(todouble(customDimensions.value)) by bin(timestamp, 1h)
| render timechart

// View search performance
traces
| where customDimensions.event_name == "Search"
| summarize 
    AvgDuration = avg(todouble(customDimensions.duration_ms)),
    SearchCount = count()
  by bin(timestamp, 5m)
| render timechart
```

---

## Ø¯Ø±Ø³ Û³: Ø±Ø¯ÛŒØ§Ø¨ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù…ÛŒÚ©Ø±ÙˆØ³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§

### ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø¨ÛŒÙ†â€ŒØ³Ø±ÙˆÛŒØ³ÛŒ

Ø¨Ø±Ø§ÛŒ Ù…ÛŒÚ©Ø±ÙˆØ³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ØŒ Application Insights Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨ÛŒÙ† Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ Ù…Ø±ØªØ¨Ø· Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

**ÙØ§ÛŒÙ„: `infra/main.bicep`**

```bicep
targetScope = 'subscription'

param environmentName string
param location string = 'eastus'

var tags = { 'azd-env-name': environmentName }

resource rg 'Microsoft.Resources/resourceGroups@2021-04-01' = {
  name: 'rg-${environmentName}'
  location: location
  tags: tags
}

// Monitoring (shared by all services)
module monitoring './core/monitoring.bicep' = {
  name: 'monitoring'
  scope: rg
  params: {
    logAnalyticsName: 'log-${environmentName}'
    applicationInsightsName: 'appi-${environmentName}'
    location: location
    tags: tags
  }
}

// API Gateway
module apiGateway './app/api-gateway.bicep' = {
  name: 'api-gateway'
  scope: rg
  params: {
    name: 'ca-gateway-${environmentName}'
    location: location
    tags: union(tags, { 'azd-service-name': 'gateway' })
    applicationInsightsConnectionString: monitoring.outputs.applicationInsightsConnectionString
  }
}

// Product Service
module productService './app/product-service.bicep' = {
  name: 'product-service'
  scope: rg
  params: {
    name: 'ca-products-${environmentName}'
    location: location
    tags: union(tags, { 'azd-service-name': 'products' })
    applicationInsightsConnectionString: monitoring.outputs.applicationInsightsConnectionString
  }
}

// Order Service
module orderService './app/order-service.bicep' = {
  name: 'order-service'
  scope: rg
  params: {
    name: 'ca-orders-${environmentName}'
    location: location
    tags: union(tags, { 'azd-service-name': 'orders' })
    applicationInsightsConnectionString: monitoring.outputs.applicationInsightsConnectionString
  }
}

output APPLICATIONINSIGHTS_CONNECTION_STRING string = monitoring.outputs.applicationInsightsConnectionString
output GATEWAY_URL string = apiGateway.outputs.uri
```

### Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªØ±Ø§Ú©Ù†Ø´ Ø§Ù†ØªÙ‡Ø§ Ø¨Ù‡ Ø§Ù†ØªÙ‡Ø§

```mermaid
sequenceDiagram
    participant User
    participant Gateway as Ø¯Ø±ÙˆØ§Ø²Ù‡ API<br/>(Ø´Ù†Ø§Ø³Ù‡ Ø±Ø¯ÛŒØ§Ø¨ÛŒ: abc123)
    participant Product as Ø³Ø±ÙˆÛŒØ³ Ù…Ø­ØµÙˆÙ„<br/>(Ø´Ù†Ø§Ø³Ù‡ ÙˆØ§Ù„Ø¯: abc123)
    participant Order as Ø³Ø±ÙˆÛŒØ³ Ø³ÙØ§Ø±Ø´<br/>(Ø´Ù†Ø§Ø³Ù‡ ÙˆØ§Ù„Ø¯: abc123)
    participant AppInsights as Ø¨ÛŒÙ†Ø´â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡
    
    User->>Gateway: Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST /api/checkout
    Note over Gateway: Ø´Ø±ÙˆØ¹ Ø±Ø¯ÛŒØ§Ø¨ÛŒ: abc123
    Gateway->>AppInsights: Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª (Ø´Ù†Ø§Ø³Ù‡ Ø±Ø¯ÛŒØ§Ø¨ÛŒ: abc123)
    
    Gateway->>Product: Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª GET /products/123
    Note over Product: Ø´Ù†Ø§Ø³Ù‡ ÙˆØ§Ù„Ø¯: abc123
    Product->>AppInsights: Ø«Ø¨Øª ØªÙ…Ø§Ø³ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ
    Product-->>Gateway: Ø¬Ø²Ø¦ÛŒØ§Øª Ù…Ø­ØµÙˆÙ„
    
    Gateway->>Order: Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST /orders
    Note over Order: Ø´Ù†Ø§Ø³Ù‡ ÙˆØ§Ù„Ø¯: abc123
    Order->>AppInsights: Ø«Ø¨Øª ØªÙ…Ø§Ø³ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ
    Order-->>Gateway: Ø³ÙØ§Ø±Ø´ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯
    
    Gateway-->>User: ØªÚ©Ù…ÛŒÙ„ ÙØ±Ø¢ÛŒÙ†Ø¯ Ù¾Ø±Ø¯Ø§Ø®Øª
    Gateway->>AppInsights: Ø«Ø¨Øª Ù¾Ø§Ø³Ø® (Ù…Ø¯Øª Ø²Ù…Ø§Ù†: 450ms)
    
    Note over AppInsights: Ù‡Ù…Ø¨Ø³ØªÚ¯ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø´Ù†Ø§Ø³Ù‡ Ø±Ø¯ÛŒØ§Ø¨ÛŒ
```
**Ù¾Ø±Ø³Ø´ Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø§Ù†ØªÙ‡Ø§ Ø¨Ù‡ Ø§Ù†ØªÙ‡Ø§:**

```kusto
// Find complete request flow
let traceId = "abc123...";  // Get from response header
dependencies
| union requests
| where operation_Id == traceId
| project 
    timestamp,
    type = itemType,
    name,
    duration,
    success,
    cloud_RoleName
| order by timestamp asc
```

---

## Ø¯Ø±Ø³ Û´: Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡ Ùˆ Ù†Ø¸Ø§Ø±Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ

### ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø¬Ø±ÛŒØ§Ù† Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡

Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø¨Ø§ ØªØ£Ø®ÛŒØ± Ú©Ù…ØªØ± Ø§Ø² Û± Ø«Ø§Ù†ÛŒÙ‡ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯.

**Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡:**

```bash
# Ø¯Ø±ÛŒØ§ÙØª Ù…Ù†Ø¨Ø¹ Application Insights
APPI_NAME=$(azd env get-values | grep APPLICATIONINSIGHTS_NAME | cut -d '=' -f2 | tr -d '"')

# Ø¯Ø±ÛŒØ§ÙØª Ú¯Ø±ÙˆÙ‡ Ù…Ù†Ø§Ø¨Ø¹
RG_NAME=$(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"')

echo "Navigate to: Azure Portal â†’ Resource Groups â†’ $RG_NAME â†’ $APPI_NAME â†’ Live Metrics"
```

**Ø¢Ù†Ú†Ù‡ Ø¯Ø± Ù„Ø­Ø¸Ù‡ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯:**
- âœ… Ù†Ø±Ø® Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ (Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§/Ø«Ø§Ù†ÛŒÙ‡)
- âœ… ØªÙ…Ø§Ø³â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ Ø®Ø±ÙˆØ¬ÛŒ
- âœ… ØªØ¹Ø¯Ø§Ø¯ Ø§Ø³ØªØ«Ù†Ø§Ù‡Ø§
- âœ… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² CPU Ùˆ Ø­Ø§ÙØ¸Ù‡
- âœ… ØªØ¹Ø¯Ø§Ø¯ Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ ÙØ¹Ø§Ù„
- âœ… Ù†Ù…ÙˆÙ†Ù‡ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ

### Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø¢Ø²Ù…Ø§ÛŒØ´

```bash
# ØªÙˆÙ„ÛŒØ¯ Ø¨Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡
for i in {1..100}; do
  curl $APP_URL/api/products &
  curl $APP_URL/api/search?q=test$i &
done

# Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡ Ø¯Ø± Ù¾ÙˆØ±ØªØ§Ù„ Azure
# Ø¨Ø§ÛŒØ¯ Ø§ÙØ²Ø§ÛŒØ´ Ù†Ø±Ø® Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯
```

---

## ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒ

### ØªÙ…Ø±ÛŒÙ† Û±: ØªÙ†Ø¸ÛŒÙ… Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ â­â­ (Ù…ØªÙˆØ³Ø·)

**Ù‡Ø¯Ù**: Ø§ÛŒØ¬Ø§Ø¯ Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù†Ø±Ø® Ø®Ø·Ø§ÛŒ Ø¨Ø§Ù„Ø§ Ùˆ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ú©Ù†Ø¯.

**Ù…Ø±Ø§Ø­Ù„:**

Û±. **Ø§ÛŒØ¬Ø§Ø¯ Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù†Ø±Ø® Ø®Ø·Ø§:**

```bash
# Ø´Ù†Ø§Ø³Ù‡ Ù…Ù†Ø¨Ø¹ Application Insights Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯
APPI_ID=$(az monitor app-insights component show \
  --app $APPI_NAME \
  --resource-group $RG_NAME \
  --query "id" -o tsv)

# Ù‡Ø´Ø¯Ø§Ø± Ù…ØªØ±ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯
az monitor metrics alert create \
  --name "High-Error-Rate" \
  --resource-group $RG_NAME \
  --scopes $APPI_ID \
  --condition "count requests/failed > 10" \
  --window-size 5m \
  --evaluation-frequency 1m \
  --description "Alert when error rate exceeds 10 per 5 minutes"
```

Û². **Ø§ÛŒØ¬Ø§Ø¯ Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ú©Ù†Ø¯:**

```bash
az monitor metrics alert create \
  --name "Slow-Responses" \
  --resource-group $RG_NAME \
  --scopes $APPI_ID \
  --condition "avg requests/duration > 3000" \
  --window-size 5m \
  --evaluation-frequency 1m \
  --description "Alert when average response time exceeds 3 seconds"
```

Û³. **Ø§ÛŒØ¬Ø§Ø¯ Ù‡Ø´Ø¯Ø§Ø± Ø§Ø² Ø·Ø±ÛŒÙ‚ Bicep (ØªØ±Ø¬ÛŒØ­Ø§Ù‹ Ø¨Ø±Ø§ÛŒ AZD):**

**ÙØ§ÛŒÙ„: `infra/core/alerts.bicep`**

```bicep
param applicationInsightsId string
param actionGroupId string = ''
param location string = resourceGroup().location

// High error rate alert
resource errorRateAlert 'Microsoft.Insights/metricAlerts@2018-03-01' = {
  name: 'high-error-rate'
  location: 'global'
  properties: {
    description: 'Alert when error rate exceeds threshold'
    severity: 2
    enabled: true
    scopes: [
      applicationInsightsId
    ]
    evaluationFrequency: 'PT1M'
    windowSize: 'PT5M'
    criteria: {
      'odata.type': 'Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria'
      allOf: [
        {
          name: 'Error rate'
          metricName: 'requests/failed'
          operator: 'GreaterThan'
          threshold: 10
          timeAggregation: 'Count'
        }
      ]
    }
    actions: actionGroupId != '' ? [
      {
        actionGroupId: actionGroupId
      }
    ] : []
  }
}

// Slow response alert
resource slowResponseAlert 'Microsoft.Insights/metricAlerts@2018-03-01' = {
  name: 'slow-responses'
  location: 'global'
  properties: {
    description: 'Alert when response time is too high'
    severity: 3
    enabled: true
    scopes: [
      applicationInsightsId
    ]
    evaluationFrequency: 'PT1M'
    windowSize: 'PT5M'
    criteria: {
      'odata.type': 'Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria'
      allOf: [
        {
          name: 'Response duration'
          metricName: 'requests/duration'
          operator: 'GreaterThan'
          threshold: 3000
          timeAggregation: 'Average'
        }
      ]
    }
  }
}

output errorAlertId string = errorRateAlert.id
output slowResponseAlertId string = slowResponseAlert.id
```

Û´. **Ø¢Ø²Ù…Ø§ÛŒØ´ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§:**

```bash
# ØªÙˆÙ„ÛŒØ¯ Ø®Ø·Ø§Ù‡Ø§
for i in {1..20}; do
  curl $APP_URL/api/error-test
done

# ØªÙˆÙ„ÛŒØ¯ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ú©Ù†Ø¯
for i in {1..10}; do
  curl $APP_URL/api/slow
done

# ÙˆØ¶Ø¹ÛŒØª Ù‡Ø´Ø¯Ø§Ø± Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ (5-10 Ø¯Ù‚ÛŒÙ‚Ù‡ ØµØ¨Ø± Ú©Ù†ÛŒØ¯)
az monitor metrics alert list \
  --resource-group $RG_NAME \
  --query "[].{Name:name, Enabled:enabled, State:properties.enabled}" \
  --output table
```

**âœ… Ù…Ø¹ÛŒØ§Ø± Ù…ÙˆÙÙ‚ÛŒØª:**
- âœ… Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù†Ø¯
- âœ… Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ Ù‡Ù†Ú¯Ø§Ù… ØªØ¬Ø§ÙˆØ² Ø§Ø² Ø¢Ø³ØªØ§Ù†Ù‡â€ŒÙ‡Ø§ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
- âœ… Ù…ÛŒâ€ŒØªÙˆØ§Ù† ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ Ø±Ø§ Ø¯Ø± Ù¾ÙˆØ±ØªØ§Ù„ Azure Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø±Ø¯
- âœ… ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡ Ø¨Ø§ Ø§Ø³ØªÙ‚Ø±Ø§Ø± AZD

**Ø²Ù…Ø§Ù†**: Û²Û°-Û²Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡

---

### ØªÙ…Ø±ÛŒÙ† Û²: Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø³ÙØ§Ø±Ø´ÛŒ â­â­ (Ù…ØªÙˆØ³Ø·)

**Ù‡Ø¯Ù**: Ø³Ø§Ø®Øª Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ÛŒ Ú©Ù‡ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±Ø§ Ù†Ø´Ø§Ù† Ø¯Ù‡Ø¯.

**Ù…Ø±Ø§Ø­Ù„:**

Û±. **Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù¾ÙˆØ±ØªØ§Ù„ Azure:**

Ø¨Ù‡: Ù¾ÙˆØ±ØªØ§Ù„ Azure â†’ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯Ù‡Ø§ â†’ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±ÙˆÛŒØ¯

Û². **Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø´ÛŒâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ:**

- ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ (Û²Û´ Ø³Ø§Ø¹Øª Ú¯Ø°Ø´ØªÙ‡)
- Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®
- Ù†Ø±Ø® Ø®Ø·Ø§
- Ûµ Ø¹Ù…Ù„ÛŒØ§Øª Ú©Ù†Ø¯ØªØ±ÛŒÙ†
- ØªÙˆØ²ÛŒØ¹ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†

Û³. **Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø² Ø·Ø±ÛŒÙ‚ Bicep:**

**ÙØ§ÛŒÙ„: `infra/core/dashboard.bicep`**

```bicep
param dashboardName string
param applicationInsightsId string
param location string = resourceGroup().location

resource dashboard 'Microsoft.Portal/dashboards@2020-09-01-preview' = {
  name: dashboardName
  location: location
  properties: {
    lenses: [
      {
        order: 0
        parts: [
          // Request count
          {
            position: { x: 0, y: 0, rowSpan: 4, colSpan: 6 }
            metadata: {
              type: 'Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart'
              inputs: [
                {
                  name: 'resourceId'
                  value: applicationInsightsId
                }
                {
                  name: 'query'
                  value: '''
                    requests
                    | summarize RequestCount = count() by bin(timestamp, 1h)
                    | render timechart
                  '''
                }
              ]
            }
          }
          // Error rate
          {
            position: { x: 6, y: 0, rowSpan: 4, colSpan: 6 }
            metadata: {
              type: 'Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart'
              inputs: [
                {
                  name: 'resourceId'
                  value: applicationInsightsId
                }
                {
                  name: 'query'
                  value: '''
                    requests
                    | summarize 
                        Total = count(),
                        Failed = countif(success == false)
                    | extend ErrorRate = (Failed * 100.0) / Total
                    | project ErrorRate
                  '''
                }
              ]
            }
          }
        ]
      }
    ]
  }
}

output dashboardId string = dashboard.id
```

Û´. **Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯:**

```bash
# Ø¨Ù‡ main.bicep Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
module dashboard './core/dashboard.bicep' = {
  name: 'dashboard'
  scope: rg
  params: {
    dashboardName: 'dashboard-${environmentName}'
    applicationInsightsId: monitoring.outputs.applicationInsightsId
    location: location
  }
}

# Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯
azd up
```

**âœ… Ù…Ø¹ÛŒØ§Ø± Ù…ÙˆÙÙ‚ÛŒØª:**
- âœ… Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
- âœ… Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¢Ù† Ø±Ø§ Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ù¾ÙˆØ±ØªØ§Ù„ Azure Ù¾ÛŒÙ† Ú©Ø±Ø¯
- âœ… Ø¨Ù‡ ØµÙˆØ±Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- âœ… Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ø² Ø·Ø±ÛŒÙ‚ AZD

**Ø²Ù…Ø§Ù†**: Û²Ûµ-Û³Û° Ø¯Ù‚ÛŒÙ‚Ù‡

---

### ØªÙ…Ø±ÛŒÙ† Û³: Ù†Ø¸Ø§Ø±Øª Ø¨Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ AI/LLM â­â­â­ (Ù¾ÛŒØ´Ø±ÙØªÙ‡)

**Ù‡Ø¯Ù**: Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Azure OpenAI (ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ØŒ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ØŒ ØªØ£Ø®ÛŒØ±).

**Ù…Ø±Ø§Ø­Ù„:**

Û±. **Ø§ÛŒØ¬Ø§Ø¯ Ù¾ÙˆØ´Ø´ Ù†Ø¸Ø§Ø±Øª Ø¨Ø± AI:**

**ÙØ§ÛŒÙ„: `src/ai_telemetry.py`**

```python
from telemetry import telemetry
from openai import AzureOpenAI
import time

class MonitoredAzureOpenAI:
    """Azure OpenAI client with automatic telemetry"""
    
    def __init__(self, api_key, endpoint, api_version="2024-02-01"):
        self.client = AzureOpenAI(
            api_key=api_key,
            api_version=api_version,
            azure_endpoint=endpoint
        )
    
    def chat_completion(self, model: str, messages: list, **kwargs):
        """Track chat completion with telemetry"""
        start_time = time.time()
        
        try:
            # ØªÙ…Ø§Ø³ Ø¨Ø§ Azure OpenAI
            response = self.client.chat.completions.create(
                model=model,
                messages=messages,
                **kwargs
            )
            
            duration = (time.time() - start_time) * 1000  # Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡
            
            # Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ø³ØªÙØ§Ø¯Ù‡
            usage = response.usage
            prompt_tokens = usage.prompt_tokens
            completion_tokens = usage.completion_tokens
            total_tokens = usage.total_tokens
            
            # Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‡Ø²ÛŒÙ†Ù‡ (Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ GPT-4)
            prompt_cost = (prompt_tokens / 1000) * 0.03  # Û°.Û°Û³ Ø¯Ù„Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù‡Ø± Û±Û°Û°Û° ØªÙˆÚ©Ù†
            completion_cost = (completion_tokens / 1000) * 0.06  # Û°.Û°Û¶ Ø¯Ù„Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù‡Ø± Û±Û°Û°Û° ØªÙˆÚ©Ù†
            total_cost = prompt_cost + completion_cost
            
            # Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø³ÙØ§Ø±Ø´ÛŒ
            telemetry.track_event('OpenAI_Request', {
                'model': model,
                'prompt_tokens': prompt_tokens,
                'completion_tokens': completion_tokens,
                'total_tokens': total_tokens,
                'duration_ms': duration,
                'cost_usd': total_cost,
                'success': True
            })
            
            # Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§
            telemetry.track_metric('OpenAI_Tokens', total_tokens, {
                'model': model,
                'type': 'total'
            })
            
            telemetry.track_metric('OpenAI_Cost', total_cost, {
                'model': model,
                'currency': 'USD'
            })
            
            telemetry.track_metric('OpenAI_Duration', duration, {
                'model': model
            })
            
            return response
            
        except Exception as e:
            duration = (time.time() - start_time) * 1000
            
            telemetry.track_event('OpenAI_Request', {
                'model': model,
                'duration_ms': duration,
                'success': False,
                'error': str(e)
            })
            
            raise
```

Û². **Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©Ù„Ø§ÛŒÙ†Øª Ù†Ø¸Ø§Ø±Øªâ€ŒØ´Ø¯Ù‡:**

```python
from flask import Flask, request, jsonify
from ai_telemetry import MonitoredAzureOpenAI
import os

app = Flask(__name__)

# Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ù…Ø´ØªØ±ÛŒ OpenAI Ù†Ø¸Ø§Ø±Øª Ø´Ø¯Ù‡
openai_client = MonitoredAzureOpenAI(
    api_key=os.environ['AZURE_OPENAI_API_KEY'],
    endpoint=os.environ['AZURE_OPENAI_ENDPOINT']
)

@app.route('/api/chat', methods=['POST'])
def chat():
    data = request.json
    user_message = data.get('message')
    
    # ØªÙ…Ø§Ø³ Ø¨Ø§ Ù†Ø¸Ø§Ø±Øª Ø®ÙˆØ¯Ú©Ø§Ø±
    response = openai_client.chat_completion(
        model='gpt-4',
        messages=[
            {'role': 'user', 'content': user_message}
        ]
    )
    
    return jsonify({
        'response': response.choices[0].message.content,
        'tokens': response.usage.total_tokens
    })
```

Û³. **Ù¾Ø±Ø³Ø´ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ AI:**

```kusto
// Total AI spend over time
traces
| where customDimensions.event_name == "OpenAI_Request"
| where customDimensions.success == "True"
| summarize TotalCost = sum(todouble(customDimensions.cost_usd)) by bin(timestamp, 1h)
| render timechart

// Token usage by model
traces
| where customDimensions.event_name == "OpenAI_Request"
| summarize 
    TotalTokens = sum(toint(customDimensions.total_tokens)),
    RequestCount = count()
  by Model = tostring(customDimensions.model)

// Average latency
traces
| where customDimensions.event_name == "OpenAI_Request"
| summarize AvgDuration = avg(todouble(customDimensions.duration_ms))
| project AvgDurationSeconds = AvgDuration / 1000

// Cost per request
traces
| where customDimensions.event_name == "OpenAI_Request"
| extend Cost = todouble(customDimensions.cost_usd)
| summarize 
    TotalCost = sum(Cost),
    RequestCount = count(),
    AvgCostPerRequest = avg(Cost)
```

**âœ… Ù…Ø¹ÛŒØ§Ø± Ù…ÙˆÙÙ‚ÛŒØª:**
- âœ… Ù‡Ø± ØªÙ…Ø§Ø³ OpenAI Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- âœ… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ Ùˆ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø§Ø³Øª
- âœ… ØªØ£Ø®ÛŒØ± Ù†Ø¸Ø§Ø±Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯
- âœ… Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ø¨ÙˆØ¯Ø¬Ù‡ ØªÙ†Ø¸ÛŒÙ… Ú©Ø±Ø¯

**Ø²Ù…Ø§Ù†**: Û³Ûµ-Û´Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡

---

## Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù‡Ø²ÛŒÙ†Ù‡

### Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ

Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§ Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ú©Ù†ØªØ±Ù„ Ú©Ù†ÛŒØ¯:

```python
from opencensus.trace.samplers import ProbabilitySampler

# ØªÙˆØ³Ø¹Ù‡: Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Û±Û°Û°Ùª
sampler = ProbabilitySampler(rate=1.0)

# ØªÙˆÙ„ÛŒØ¯: Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Û±Û°Ùª (Ú©Ø§Ù‡Ø´ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ Ù…ÛŒØ²Ø§Ù† Û¹Û°Ùª)
sampler = ProbabilitySampler(rate=0.1)

# Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ ØªØ·Ø¨ÛŒÙ‚ÛŒ (Ø¨Ù‡â€ŒØ·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯)
from opencensus.trace.samplers import AdaptiveSampler
sampler = AdaptiveSampler()
```

**Ø¯Ø± Bicep:**

```bicep
resource applicationInsights 'Microsoft.Insights/components@2020-02-02' = {
  name: applicationInsightsName
  properties: {
    SamplingPercentage: 10  // 10% sampling
  }
}
```

### Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§

```bicep
resource logAnalytics 'Microsoft.OperationalInsights/workspaces@2022-10-01' = {
  name: logAnalyticsName
  properties: {
    retentionInDays: 30  // Minimum (cheapest)
    // Options: 30, 31, 60, 90, 120, 180, 270, 365, 550, 730
  }
}
```

### ØªØ®Ù…ÛŒÙ† Ù‡Ø²ÛŒÙ†Ù‡ Ù…Ø§Ù‡Ø§Ù†Ù‡

| Ø­Ø¬Ù… Ø¯Ø§Ø¯Ù‡ | Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ | Ù‡Ø²ÛŒÙ†Ù‡ Ù…Ø§Ù‡Ø§Ù†Ù‡ |
|----------|---------|--------------|
| Û± Ú¯ÛŒÚ¯Ø§Ø¨Ø§ÛŒØª/Ù…Ø§Ù‡ | Û³Û° Ø±ÙˆØ² | ~Û²-Ûµ Ø¯Ù„Ø§Ø± |
| Ûµ Ú¯ÛŒÚ¯Ø§Ø¨Ø§ÛŒØª/Ù…Ø§Ù‡ | Û³Û° Ø±ÙˆØ² | ~Û±Û°-Û±Ûµ Ø¯Ù„Ø§Ø± |
| Û±Û° Ú¯ÛŒÚ¯Ø§Ø¨Ø§ÛŒØª/Ù…Ø§Ù‡ | Û¹Û° Ø±ÙˆØ² | ~Û²Ûµ-Û´Û° Ø¯Ù„Ø§Ø± |
| ÛµÛ° Ú¯ÛŒÚ¯Ø§Ø¨Ø§ÛŒØª/Ù…Ø§Ù‡ | Û¹Û° Ø±ÙˆØ² | ~Û±Û°Û°-Û±ÛµÛ° Ø¯Ù„Ø§Ø± |

**Ø³Ø·Ø­ Ø±Ø§ÛŒÚ¯Ø§Ù†**: Ûµ Ú¯ÛŒÚ¯Ø§Ø¨Ø§ÛŒØª/Ù…Ø§Ù‡ Ø´Ø§Ù…Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯

---

## Ù†Ù‚Ø·Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø§Ù†Ø´

### Û±. ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø§ÛŒÙ‡ âœ“

Ø¯Ø§Ù†Ø´ Ø®ÙˆØ¯ Ø±Ø§ Ø¢Ø²Ù…Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯:

- [ ] **Ø³Ø¤Ø§Ù„ Û±**: AZD Ú†Ú¯ÙˆÙ†Ù‡ Application Insights Ø±Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ
  - **Ù¾Ø§Ø³Ø®**: Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù‚Ø§Ù„Ø¨â€ŒÙ‡Ø§ÛŒ Bicep Ø¯Ø± `infra/core/monitoring.bicep`

- [ ] **Ø³Ø¤Ø§Ù„ Û²**: Ú©Ø¯Ø§Ù… Ù…ØªØºÛŒØ± Ù…Ø­ÛŒØ·ÛŒ Application Insights Ø±Ø§ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ
  - **Ù¾Ø§Ø³Ø®**: `APPLICATIONINSIGHTS_CONNECTION_STRING`

- [ ] **Ø³Ø¤Ø§Ù„ Û³**: Ø³Ù‡ Ù†ÙˆØ¹ Ø§ØµÙ„ÛŒ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ú†ÛŒØ³ØªØŸ
  - **Ù¾Ø§Ø³Ø®**: Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ (ØªÙ…Ø§Ø³â€ŒÙ‡Ø§ÛŒ HTTP)ØŒ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ (ØªÙ…Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ÛŒ)ØŒ Ø§Ø³ØªØ«Ù†Ø§Ù‡Ø§ (Ø®Ø·Ø§Ù‡Ø§)

**ØªØ£ÛŒÛŒØ¯ Ø¹Ù…Ù„ÛŒ:**
```bash
# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ø¢ÛŒØ§ Application Insights Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª
azd env get-values | grep APPLICATIONINSIGHTS

# ØªØ£ÛŒÛŒØ¯ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ø¬Ø±ÛŒØ§Ù† Ø¯Ø§Ø±Ù†Ø¯
az monitor app-insights metrics show \
  --app $APPI_NAME \
  --resource-group $RG_NAME \
  --metric "requests/count"
```

---

### Û². ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ âœ“

Ø¯Ø§Ù†Ø´ Ø®ÙˆØ¯ Ø±Ø§ Ø¢Ø²Ù…Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯:

- [ ] **Ø³Ø¤Ø§Ù„ Û±**: Ú†Ú¯ÙˆÙ†Ù‡ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ ØªØ¬Ø§Ø±ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø±Ø§ Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ
  - **Ù¾Ø§Ø³Ø®**: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² logger Ø¨Ø§ `custom_dimensions` ÛŒØ§ `TelemetryClient.track_event()`

- [ ] **Ø³Ø¤Ø§Ù„ Û²**: ØªÙØ§ÙˆØª Ø¨ÛŒÙ† Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ Ùˆ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ Ú†ÛŒØ³ØªØŸ
  - **Ù¾Ø§Ø³Ø®**: Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ ÙˆÙ‚ÙˆØ¹â€ŒÙ‡Ø§ÛŒ Ú¯Ø³Ø³ØªÙ‡ Ù‡Ø³ØªÙ†Ø¯ØŒ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ Ù‡Ø³ØªÙ†Ø¯

- [ ] **Ø³Ø¤Ø§Ù„ Û³**: Ú†Ú¯ÙˆÙ†Ù‡ ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ø±Ø§ Ø¨ÛŒÙ† Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ Ù…Ø±ØªØ¨Ø· Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ
  - **Ù¾Ø§Ø³Ø®**: Application Insights Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø² `operation_Id` Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯

**ØªØ£ÛŒÛŒØ¯ Ø¹Ù…Ù„ÛŒ:**
```kusto
// Verify custom events
traces
| where customDimensions.event_name != ""
| summarize count() by tostring(customDimensions.event_name)
```

---

### Û³. Ù†Ø¸Ø§Ø±Øª Ø¨Ø± ØªÙˆÙ„ÛŒØ¯ âœ“

Ø¯Ø§Ù†Ø´ Ø®ÙˆØ¯ Ø±Ø§ Ø¢Ø²Ù…Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯:

- [ ] **Ø³Ø¤Ø§Ù„ Û±**: Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ú†ÛŒØ³Øª Ùˆ Ú†Ø±Ø§ Ø§Ø² Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ
  - **Ù¾Ø§Ø³Ø®**: Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø­Ø¬Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ (Ùˆ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§) Ø±Ø§ Ø¨Ø§ Ø¶Ø¨Ø· Ø¯Ø±ØµØ¯ÛŒ Ø§Ø² ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ú©Ø§Ù‡Ø´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯

- [ ] **Ø³Ø¤Ø§Ù„ Û²**: Ú†Ú¯ÙˆÙ†Ù‡ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ
  - **Ù¾Ø§Ø³Ø®**: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ù…ØªØ±ÛŒÚ© Ø¯Ø± Bicep ÛŒØ§ Ù¾ÙˆØ±ØªØ§Ù„ Azure Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Application Insights

- [ ] **Ø³Ø¤Ø§Ù„ Û³**: ØªÙØ§ÙˆØª Ø¨ÛŒÙ† Log Analytics Ùˆ Application Insights Ú†ÛŒØ³ØªØŸ
  - **Ù¾Ø§Ø³Ø®**: Application Insights Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø± ÙØ¶Ø§ÛŒ Ú©Ø§Ø±ÛŒ Log Analytics Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯Ø› App Insights Ù†Ù…Ø§Ù‡Ø§ÛŒ Ø®Ø§Øµ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯

**ØªØ£ÛŒÛŒØ¯ Ø¹Ù…Ù„ÛŒ:**
```bash
# ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
az monitor app-insights component show \
  --app $APPI_NAME \
  --resource-group $RG_NAME \
  --query "properties.SamplingPercentage"
```

---

## Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§

### âœ… Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯:

Û±. **Ø§Ø² Ø´Ù†Ø§Ø³Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø·ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯**
   ```python
   logger.info('Processing order', extra={
       'custom_dimensions': {
           'order_id': order_id,
           'user_id': user_id
       }
   })
   ```

Û². **Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯**
   ```bicep
   // Error rate, slow responses, availability
   ```

Û³. **Ø§Ø² Ù„Ø§Ú¯â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø³Ø§Ø®ØªØ§Ø±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯**
   ```python
   # âœ… Ø®ÙˆØ¨: Ø³Ø§Ø®ØªØ§Ø±Ù…Ù†Ø¯
   logger.info('User signup', extra={'custom_dimensions': {'user_id': 123}})
   
   # âŒ Ø¨Ø¯: Ø¨Ø¯ÙˆÙ† Ø³Ø§Ø®ØªØ§Ø±
   logger.info(f'User 123 signed up')
   ```

Û´. **ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ù†Ø¸Ø§Ø±Øª Ú©Ù†ÛŒØ¯**
   ```python
   # Ø¨Ù‡â€ŒØ·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙ…Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ HTTP Ùˆ ØºÛŒØ±Ù‡ Ø±Ø§ Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ú©Ù†ÛŒØ¯.
   ```

Ûµ. **Ø¯Ø± Ø·ÙˆÙ„ Ø§Ø³ØªÙ‚Ø±Ø§Ø±Ù‡Ø§ Ø§Ø² Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯**

### âŒ Ø§Ù†Ø¬Ø§Ù… Ù†Ø¯Ù‡ÛŒØ¯:

Û±. **Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ø³Ø§Ø³ Ø±Ø§ Ù„Ø§Ú¯ Ù†Ú©Ù†ÛŒØ¯**
   ```python
   # âŒ Ø¨Ø¯
   logger.info(f'Login: {username}:{password}')
   
   # âœ… Ø®ÙˆØ¨
   logger.info('Login attempt', extra={'custom_dimensions': {'username': username}})
   ```

Û². **Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Û±Û°Û°Ùª Ø¯Ø± ØªÙˆÙ„ÛŒØ¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ú©Ù†ÛŒØ¯**
   ```python
   # âŒ Ú¯Ø±Ø§Ù†
   sampler = ProbabilitySampler(rate=1.0)
   
   # âœ… Ù…Ù‚Ø±ÙˆÙ† Ø¨Ù‡ ØµØ±ÙÙ‡
   sampler = ProbabilitySampler(rate=0.1)
   ```

Û³. **ØµÙâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¯Ù‡ Ø±Ø§ Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ù†Ú¯ÛŒØ±ÛŒØ¯**

Û´. **ÙØ±Ø§Ù…ÙˆØ´ Ù†Ú©Ù†ÛŒØ¯ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯**

---

## Ø±ÙØ¹ Ø§Ø´Ú©Ø§Ù„

### Ù…Ø´Ú©Ù„: Ù‡ÛŒÚ† ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ø¸Ø§Ù‡Ø± Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯

**ØªØ´Ø®ÛŒØµ:**
```bash
# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ø±Ø´ØªÙ‡ Ø§ØªØµØ§Ù„ ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡ Ø§Ø³Øª
azd env get-values | grep APPLICATIONINSIGHTS

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡
azd logs api --tail 50
```

**Ø±Ø§Ù‡â€ŒØ­Ù„:**
```bash
# Ø±Ø´ØªÙ‡ Ø§ØªØµØ§Ù„ Ø±Ø§ Ø¯Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
az containerapp show \
  --name $APP_NAME \
  --resource-group $RG_NAME \
  --query "properties.template.containers[0].env" \
  | grep -i applicationinsights
```

---

### Ù…Ø´Ú©Ù„: Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ù„Ø§

**ØªØ´Ø®ÛŒØµ:**
```bash
# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ±ÙˆØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
az monitor app-insights metrics show \
  --app $APPI_NAME \
  --resource-group $RG_NAME \
  --metric "availabilityResults/count"
```

**Ø±Ø§Ù‡â€ŒØ­Ù„:**
- Ú©Ø§Ù‡Ø´ Ù†Ø±Ø® Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ
- Ú©Ø§Ù‡Ø´ Ø¯ÙˆØ±Ù‡ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ
- Ø­Ø°Ù Ù„Ø§Ú¯â€ŒÚ¯Ø°Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø­Ø¬Ù…

---

## Ø¨ÛŒØ´ØªØ± Ø¨ÛŒØ§Ù…ÙˆØ²ÛŒØ¯

### Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø±Ø³Ù…ÛŒ
- [Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Application Insights](https://learn.microsoft.com/azure/azure-monitor/app/app-insights-overview)
- [Application Insights Ø¨Ø±Ø§ÛŒ Python](https://learn.microsoft.com/azure/azure-monitor/app/opencensus-python)
- [Ø²Ø¨Ø§Ù† Ù¾Ø±Ø³Ø´ Kusto](https://learn.microsoft.com/azure/data-explorer/kusto/query/)
- [Ù†Ø¸Ø§Ø±Øª Ø¨Ø± AZD](https://learn.microsoft.com/azure/developer/azure-developer-cli/monitor-your-app)

### Ù…Ø±Ø§Ø­Ù„ Ø¨Ø¹Ø¯ÛŒ Ø¯Ø± Ø§ÛŒÙ† Ø¯ÙˆØ±Ù‡
- â† Ù‚Ø¨Ù„ÛŒ: [Ø¨Ø±Ø±Ø³ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´ Ø§Ø² Ø§Ø¬Ø±Ø§](preflight-checks.md)
- â†’ Ø¨Ø¹Ø¯ÛŒ: [Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙ‚Ø±Ø§Ø±](../deployment/deployment-guide.md)
- ğŸ  [ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø¯ÙˆØ±Ù‡](../../README.md)

### Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø·
- [Ù…Ø«Ø§Ù„ Azure OpenAI](../../../../examples/azure-openai-chat) - ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ AI
- [Ù…Ø«Ø§Ù„ Ù…ÛŒÚ©Ø±ÙˆØ³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§](../../../../examples/microservices) - Ø±Ø¯ÛŒØ§Ø¨ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡

---

## Ø®Ù„Ø§ØµÙ‡

**Ø¢Ù†Ú†Ù‡ ÛŒØ§Ø¯ Ú¯Ø±ÙØªÛŒØ¯:**
- âœ… Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø± Application Insights Ø¨Ø§ AZD
- âœ… ØªÙ„Ù‡â€ŒÙ…ØªØ±ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ (Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ØŒ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ØŒ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§)
- âœ… Ø±Ø¯ÛŒØ§Ø¨ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ Ø¨ÛŒÙ† Ù…ÛŒÚ©Ø±ÙˆØ³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
- âœ… Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡ Ùˆ Ù†Ø¸Ø§Ø±Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ
- âœ… Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ Ùˆ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯Ù‡Ø§
- âœ… Ù†Ø¸Ø§Ø±Øª Ø¨Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ AI/LLM  
- âœ… Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù‡Ø²ÛŒÙ†Ù‡  

**Ù†Ú©Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ:**  
1. **AZD Ù†Ø¸Ø§Ø±Øª Ø±Ø§ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯** - Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ… Ø¯Ø³ØªÛŒ Ù†ÛŒØ³Øª  
2. **Ø§Ø² Ø«Ø¨Øª Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªØ§Ø±ÛŒØ§ÙØªÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯** - Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ Ø¢Ø³Ø§Ù†â€ŒØªØ± Ù…ÛŒâ€ŒÚ©Ù†Ø¯  
3. **Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø± Ø±Ø§ Ø¯Ù†Ø¨Ø§Ù„ Ú©Ù†ÛŒØ¯** - Ù†Ù‡ ÙÙ‚Ø· Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ ÙÙ†ÛŒ  
4. **Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ AI Ø±Ø§ Ù†Ø¸Ø§Ø±Øª Ú©Ù†ÛŒØ¯** - ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ Ùˆ Ù…Ø®Ø§Ø±Ø¬ Ø±Ø§ Ø¯Ù†Ø¨Ø§Ù„ Ú©Ù†ÛŒØ¯  
5. **Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯** - Ù¾ÛŒØ´Ú¯ÛŒØ±Ø§Ù†Ù‡ Ø¹Ù…Ù„ Ú©Ù†ÛŒØ¯ØŒ Ù†Ù‡ ÙˆØ§Ú©Ù†Ø´ÛŒ  
6. **Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ÛŒÙ†Ù‡ Ú©Ù†ÛŒØ¯** - Ø§Ø² Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ùˆ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯  

**Ú¯Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ:**  
1. ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒ Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ù†ÛŒØ¯  
2. Application Insights Ø±Ø§ Ø¨Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ AZD Ø®ÙˆØ¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯  
3. Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø±Ø§ÛŒ ØªÛŒÙ… Ø®ÙˆØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯  
4. [Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙ‚Ø±Ø§Ø±](../deployment/deployment-guide.md) Ø±Ø§ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±ÛŒØ¯  

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Ø³Ù„Ø¨ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª**:  
Ø§ÛŒÙ† Ø³Ù†Ø¯ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø³Ø±ÙˆÛŒØ³ ØªØ±Ø¬Ù…Ù‡ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ [Co-op Translator](https://github.com/Azure/co-op-translator) ØªØ±Ø¬Ù…Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø¯Ø± Ø­Ø§Ù„ÛŒ Ú©Ù‡ Ù…Ø§ ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ø¯Ù‚Øª Ø±Ø§ Ø­ÙØ¸ Ú©Ù†ÛŒÙ…ØŒ Ù„Ø·ÙØ§Ù‹ ØªÙˆØ¬Ù‡ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯ Ú©Ù‡ ØªØ±Ø¬Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø´Ø§Ù…Ù„ Ø®Ø·Ø§Ù‡Ø§ ÛŒØ§ Ù†Ø§Ø¯Ø±Ø³ØªÛŒâ€ŒÙ‡Ø§ Ø¨Ø§Ø´Ù†Ø¯. Ø³Ù†Ø¯ Ø§ØµÙ„ÛŒ Ø¨Ù‡ Ø²Ø¨Ø§Ù† Ø§ØµÙ„ÛŒ Ø¢Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù…Ù†Ø¨Ø¹ Ù…Ø¹ØªØ¨Ø± Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ‡ Ø´ÙˆØ¯. Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­ÛŒØ§ØªÛŒØŒ ØªØ±Ø¬Ù…Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø§Ù†Ø³Ø§Ù†ÛŒ ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ù…Ø§ Ù…Ø³Ø¦ÙˆÙ„ÛŒØªÛŒ Ø¯Ø± Ù‚Ø¨Ø§Ù„ Ø³ÙˆØ¡ ØªÙØ§Ù‡Ù…â€ŒÙ‡Ø§ ÛŒØ§ ØªÙØ³ÛŒØ±Ù‡Ø§ÛŒ Ù†Ø§Ø¯Ø±Ø³Øª Ù†Ø§Ø´ÛŒ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† ØªØ±Ø¬Ù…Ù‡ Ù†Ø¯Ø§Ø±ÛŒÙ….
<!-- CO-OP TRANSLATOR DISCLAIMER END -->