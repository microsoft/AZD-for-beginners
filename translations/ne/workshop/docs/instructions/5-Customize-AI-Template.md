# 5. рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдЕрдиреБрдХреВрд▓рди рдЧрд░реНрдиреБрд╣реЛрд╕реН

!!! tip "рдпрд╕ рдореЛрдбреНрдпреБрд▓рдХреЛ рдЕрдиреНрддреНрдпрд╕рдореНрдордорд╛ рддрдкрд╛рдИрдВ рд╕рдХреНрд╖рдо рд╣реБрдиреБрд╣реБрдиреЗрдЫ"

    - [ ] рдбрд┐рдлрд▓реНрдЯ AI рдПрдЬреЗрдиреНрдЯ рдХреНрд╖рдорддрд╛рд╣рд░реВ рдЕрдиреНрд╡реЗрд╖рдг рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ
    - [ ] рдЖрдлреНрдиреИ рдЗрдиреНрдбреЗрдХреНрд╕рдХреЛ рд╕рд╛рде AI рдЦреЛрдЬ рдердкреНрдиреБрднрдПрдХреЛ рдЫ
    - [ ] рдЯреНрд░реЗрд╕рд┐рдЩ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рд╕рдХреНрд░рд┐рдп рд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ
    - [ ] рдореВрд▓реНрдпрд╛рдЩреНрдХрди рд░рди рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ
    - [ ] рд░реЗрдб-рдЯрд┐рдорд┐рдЩ рд╕реНрдХреНрдпрд╛рди рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ
    - [ ] **рдкреНрд░рдпреЛрдЧрд╢рд╛рд▓рд╛ рел: рдЕрдиреБрдХреВрд▓рди рдпреЛрдЬрдирд╛ рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ** 

---

## 5.1 AI рдПрдЬреЗрдиреНрдЯ рдХреНрд╖рдорддрд╛рд╣рд░реВ

!!! success "рд╣рд╛рдореАрд▓реЗ рдпреЛ рдкреНрд░рдпреЛрдЧрд╢рд╛рд▓рд╛ режрез рдорд╛ рдкреВрд░рд╛ рдЧрд░реНрдпреМрдВ"

- **рдлрд╛рдЗрд▓ рдЦреЛрдЬ**: OpenAI рдХреЛ рдмрд┐рд▓реНрдЯ-рдЗрди рдлрд╛рдЗрд▓ рдЦреЛрдЬ рдЬреНрдЮрд╛рди рдкреБрдирдГрдкреНрд░рд╛рдкреНрддрд┐рдХрд╛ рд▓рд╛рдЧрд┐
- **рдЙрджреНрдзрд░рдгрд╣рд░реВ**: рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдорд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╕реНрд░реЛрдд рд╢реНрд░реЗрдп
- **рдЕрдиреБрдХреВрд▓рди рдпреЛрдЧреНрдп рдирд┐рд░реНрджреЗрд╢рдирд╣рд░реВ**: рдПрдЬреЗрдиреНрдЯрдХреЛ рд╡реНрдпрд╡рд╣рд╛рд░ рд░ рд╡реНрдпрдХреНрддрд┐рддреНрд╡ рдкрд░рд┐рдорд╛рд░реНрдЬрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
- **рдЯреВрд▓ рдПрдХреАрдХрд░рдг**: рдЕрдиреБрдХреВрд▓рди рдХреНрд╖рдорддрд╛рд╣рд░реВрдХрд╛ рд▓рд╛рдЧрд┐ рд╡рд┐рд╕реНрддрд╛рд░ рдпреЛрдЧреНрдп рдЯреВрд▓ рдкреНрд░рдгрд╛рд▓реА

---

## 5.2 рдЬреНрдЮрд╛рди рдкреБрдирдГрдкреНрд░рд╛рдкреНрддрд┐ рд╡рд┐рдХрд▓реНрдкрд╣рд░реВ

!!! task "рдпрд╕рд▓рд╛рдИ рдкреВрд░рд╛ рдЧрд░реНрди рд╣рд╛рдореАрд▓реЗ рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрди рд░ рдкреБрдирдГрдкрд░рд┐рдирд┐рдпреЛрдЬрди рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫ"    
    
    ```bash title=""
    # рд╡рд╛рддрд╛рд╡рд░рдг рдЪрд░ рд╕реЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    azd env set USE_AZURE_AI_SEARCH_SERVICE true
    azd env set AZURE_AI_EMBED_MODEL_NAME "text-embedding-3-large"
    azd env set AZURE_AI_EMBED_DEPLOYMENT_NAME "embeddings-large"
    azd env set AZURE_AI_EMBED_DEPLOYMENT_CAPACITY 75
    azd env set AZURE_AI_SEARCH_INDEX_NAME "retail-products"

    # рдбреЗрдЯрд╛ рдЕрдкрд▓реЛрдб рдЧрд░реНрдиреБрд╣реЛрд╕реН рд░ рдореЗрд░реЛ рдЗрдиреНрдбреЗрдХреНрд╕ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН

    ```

---

**OpenAI рдлрд╛рдЗрд▓ рдЦреЛрдЬ (рдбрд┐рдлрд▓реНрдЯ):**

- Azure AI рдПрдЬреЗрдиреНрдЯ рд╕реЗрд╡рд╛рдорд╛ рдмрд┐рд▓реНрдЯ-рдЗрди
- рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рджрд╕реНрддрд╛рд╡реЗрдЬ рдкреНрд░рд╢реЛрдзрди рд░ рдЗрдиреНрдбреЗрдХреНрд╕рд┐рдЩ
- рдХреБрдиреИ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди рдЖрд╡рд╢реНрдпрдХ рдЫреИрди

**Azure AI рдЦреЛрдЬ (рд╡реИрдХрд▓реНрдкрд┐рдХ):**

- рд╣рд╛рдЗрдмреНрд░рд┐рдб рд╕реЗрдореНрдпрд╛рдиреНрдЯрд┐рдХ рд░ рднреЗрдХреНрдЯрд░ рдЦреЛрдЬ
- рдЕрдиреБрдХреВрд▓рди рдЗрдиреНрдбреЗрдХреНрд╕ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди
- рдЙрдиреНрдирдд рдЦреЛрдЬ рдХреНрд╖рдорддрд╛рд╣рд░реВ
- `USE_AZURE_AI_SEARCH_SERVICE=true` рдЖрд╡рд╢реНрдпрдХ рдЫ

---

## 5.3 [рдЯреНрд░реЗрд╕рд┐рдЩ рд░ рдЕрдиреБрдЧрдорди](https://github.com/Azure-Samples/get-started-with-ai-agents/blob/main/docs/other_features.md#tracing-and-monitoring)

!!! task "рдпрд╕рд▓рд╛рдИ рдкреВрд░рд╛ рдЧрд░реНрди рд╣рд╛рдореАрд▓реЗ рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрди рд░ рдкреБрдирдГрдкрд░рд┐рдирд┐рдпреЛрдЬрди рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫ"    
    
    ```bash title=""
    azd env set ENABLE_AZURE_MONITOR_TRACING true
    azd deploy
    ```

**рдЯреНрд░реЗрд╕рд┐рдЩ:**

- OpenTelemetry рдПрдХреАрдХрд░рдг
- рдЕрдиреБрд░реЛрдз/рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдЯреНрд░реНрдпрд╛рдХрд┐рдЩ
- рдкреНрд░рджрд░реНрд╢рди рдореЗрдЯреНрд░рд┐рдХреНрд╕
- AI Foundry рдкреЛрд░реНрдЯрд▓рдорд╛ рдЙрдкрд▓рдмреНрдз

**рд▓рдЧрд┐рдЩ:**

- рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕рдорд╛ рдПрдкреНрд▓рд┐рдХреЗрд╕рди рд▓рдЧрд╣рд░реВ
- рд╕рдореНрдмрдиреНрдзрд┐рдд ID рд╣рд░реВрд╕рдБрдЧ рд╕рдВрд░рдЪрд┐рдд рд▓рдЧрд┐рдЩ
- рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рд░ рдРрддрд┐рд╣рд╛рд╕рд┐рдХ рд▓рдЧ рд╣реЗрд░реНрдиреЗ рд╕реБрд╡рд┐рдзрд╛

---

## 5.4 [рдПрдЬреЗрдиреНрдЯ рдореВрд▓реНрдпрд╛рдЩреНрдХрди](https://github.com/Azure-Samples/get-started-with-ai-agents/blob/main/docs/other_features.md#agent-evaluation)

**рд╕реНрдерд╛рдиреАрдп рдореВрд▓реНрдпрд╛рдЩреНрдХрди:**

- рдЧреБрдгрд╕реНрддрд░ рдореВрд▓реНрдпрд╛рдЩреНрдХрдирдХрд╛ рд▓рд╛рдЧрд┐ рдмрд┐рд▓реНрдЯ-рдЗрди рдореВрд▓реНрдпрд╛рдЩреНрдХрдирдХрд░реНрддрд╛
- рдЕрдиреБрдХреВрд▓рди рдореВрд▓реНрдпрд╛рдЩреНрдХрди рд╕реНрдХреНрд░рд┐рдкреНрдЯрд╣рд░реВ
- рдкреНрд░рджрд░реНрд╢рди рдмреЗрдВрдЪрдорд╛рд░реНрдХрд┐рдЩ

**рдирд┐рд░рдиреНрддрд░ рдЕрдиреБрдЧрдорди:**

- рдкреНрд░рддреНрдпрдХреНрд╖ рдЕрдиреНрддрд░рдХреНрд░рд┐рдпрд╛рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдореВрд▓реНрдпрд╛рдЩреНрдХрди
- рдЧреБрдгрд╕реНрддрд░ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдЯреНрд░реНрдпрд╛рдХрд┐рдЩ
- рдкреНрд░рджрд░реНрд╢рди рдкреНрд░рддрд┐рдЧрдорди рдкрддреНрддрд╛ рд▓рдЧрд╛рдЙрдиреЗ

**CI/CD рдПрдХреАрдХрд░рдг:**

- GitHub Actions рд╡рд░реНрдХрдлреНрд▓реЛ
- рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдкрд░реАрдХреНрд╖рдг рд░ рдореВрд▓реНрдпрд╛рдЩреНрдХрди
- рд╕рд╛рдВрдЦреНрдпрд┐рдХреАрдп рддреБрд▓рдирд╛ рдкрд░реАрдХреНрд╖рдг

---

## 5.5 [AI рд░реЗрдб рдЯрд┐рдорд┐рдЩ рдПрдЬреЗрдиреНрдЯ](https://github.com/Azure-Samples/get-started-with-ai-agents/blob/main/docs/other_features.md#ai-red-teaming-agent)

**AI рд░реЗрдб рдЯрд┐рдорд┐рдЩ:**

- рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╕реБрд░рдХреНрд╖рд╛ рд╕реНрдХреНрдпрд╛рдирд┐рдЩ
- AI рдкреНрд░рдгрд╛рд▓реАрд╣рд░реВрдХреЛ рдЬреЛрдЦрд┐рдо рдореВрд▓реНрдпрд╛рдЩреНрдХрди
- рд╡рд┐рднрд┐рдиреНрди рд╢реНрд░реЗрдгреАрд╣рд░реВрдорд╛ рд╕реБрд░рдХреНрд╖рд╛ рдореВрд▓реНрдпрд╛рдЩреНрдХрди

**рдкреНрд░рдорд╛рдгреАрдХрд░рдг:**

- Azure рд╕реЗрд╡рд╛рд╣рд░реВрдХрд╛ рд▓рд╛рдЧрд┐ рдкреНрд░рдмрдиреНрдзрд┐рдд рдкрд╣рд┐рдЪрд╛рди
- рд╡реИрдХрд▓реНрдкрд┐рдХ Azure App Service рдкреНрд░рдорд╛рдгреАрдХрд░рдг
- рд╡рд┐рдХрд╛рд╕рдХрд╛ рд▓рд╛рдЧрд┐ рдЖрдзрд╛рд░рднреВрдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╡рд┐рдХрд▓реНрдк

!!! quote "рдпрд╕ рдкреНрд░рдпреЛрдЧрд╢рд╛рд▓рд╛рдХреЛ рдЕрдиреНрддреНрдпрд╕рдореНрдордорд╛ рддрдкрд╛рдИрдВрд▓реЗ рдкреВрд░рд╛ рдЧрд░реНрдиреБрднрдПрдХреЛ рд╣реБрдиреЗрдЫ"
    - [ ] рдЖрдлреНрдиреЛ рдкрд░рд┐рджреГрд╢реНрдп рдЖрд╡рд╢реНрдпрдХрддрд╛рд╣рд░реВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ
    - [ ] рд╡рд╛рддрд╛рд╡рд░рдг рдЪрд░рд╣рд░реВ рдЕрдиреБрдХреВрд▓рди рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ (рдХрдиреНрдлрд┐рдЧ)
    - [ ] рдПрдЬреЗрдиреНрдЯ рдирд┐рд░реНрджреЗрд╢рдирд╣рд░реВ рдЕрдиреБрдХреВрд▓рди рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ (рдХрд╛рд░реНрдп)
    - [ ] рдЕрдиреБрдХреВрд▓рд┐рдд рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ (рдПрдк)
    - [ ] рдкрд░рд┐рдирд┐рдпреЛрдЬрдирдкрдЫрд┐рдХрд╛ рдХрд╛рд░реНрдпрд╣рд░реВ рдкреВрд░рд╛ рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ (рдореНрдпрд╛рдиреБрдЕрд▓)
    - [ ] рдкрд░реАрдХреНрд╖рдг рдореВрд▓реНрдпрд╛рдЩреНрдХрди рдЪрд▓рд╛рдЙрдиреБрднрдПрдХреЛ рдЫ

рдпреЛ рдЙрджрд╛рд╣рд░рдгрд▓реЗ рджреБрдИ рд╡рд┐рд╢реЗрд╖ рдПрдЬреЗрдиреНрдЯрд╣рд░реВ рд░ рдмрд╣реБ рдореЛрдбреЗрд▓ рдкрд░рд┐рдирд┐рдпреЛрдЬрдирдХреЛ рд╕рд╛рде рдЙрджреНрдпрдо рдЦреБрджреНрд░рд╛ рдЙрдкрдпреЛрдЧ рдХреЗрд╕рдХрд╛ рд▓рд╛рдЧрд┐ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдЕрдиреБрдХреВрд▓рди рдЧрд░реНрдиреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреНрд░рджрд░реНрд╢рди рдЧрд░реНрджрдЫред

---

## 5.6 рдпрд╕рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ рд▓рд╛рдЧрд┐ рдЕрдиреБрдХреВрд▓рди рдЧрд░реНрдиреБрд╣реЛрд╕реН!

### 5.6.1. рдкрд░рд┐рджреГрд╢реНрдп рдЖрд╡рд╢реНрдпрдХрддрд╛рд╣рд░реВ

#### **рдПрдЬреЗрдиреНрдЯ рдкрд░рд┐рдирд┐рдпреЛрдЬрдирд╣рд░реВ:** 

   - рд╢рдкрд┐рдЩ рдПрдЬреЗрдиреНрдЯ: рдЧреНрд░рд╛рд╣рдХрд╣рд░реВрд▓рд╛рдИ рдЙрддреНрдкрд╛рджрдирд╣рд░реВ рдлреЗрд▓рд╛ рдкрд╛рд░реНрди рд░ рддреБрд▓рдирд╛ рдЧрд░реНрди рдорджреНрджрдд рдЧрд░реНрджрдЫ
   - рд╡рдлрд╛рджрд╛рд░реА рдПрдЬреЗрдиреНрдЯ: рдЧреНрд░рд╛рд╣рдХ рдкреБрд░рд╕реНрдХрд╛рд░ рд░ рдкреНрд░рдЪрд╛рд░рд╣рд░реВ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрджрдЫ

#### **рдореЛрдбреЗрд▓ рдкрд░рд┐рдирд┐рдпреЛрдЬрдирд╣рд░реВ:**

   - `gpt-4.1`: рдкреНрд░рд╛рдердорд┐рдХ рдЪреНрдпрд╛рдЯ рдореЛрдбреЗрд▓
   - `o3`: рдЬрдЯрд┐рд▓ рдкреНрд░рд╢реНрдирд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рддрд░реНрдХ рдореЛрдбреЗрд▓
   - `gpt-4.1-nano`: рд╕рд╛рдзрд╛рд░рдг рдЕрдиреНрддрд░рдХреНрд░рд┐рдпрд╛рд╣рд░реВрдХрд╛ рд▓рд╛рдЧрд┐ рд╣рд▓реНрдХрд╛ рдореЛрдбреЗрд▓
   - `text-embedding-3-large`: рдЦреЛрдЬрдХрд╛ рд▓рд╛рдЧрд┐ рдЙрдЪреНрдЪ-рдЧреБрдгрд╕реНрддрд░ рдЗрдореНрдмреЗрдбрд┐рдЩ

#### **рд╡рд┐рд╢реЗрд╖рддрд╛рд╣рд░реВ:**

   - рдЯреНрд░реЗрд╕рд┐рдЩ рд░ рдЕрдиреБрдЧрдорди рд╕рдХреНрд╖рдо
   - рдЙрддреНрдкрд╛рджрди рдХреНрдпрд╛рдЯрд▓рдЧрдХрд╛ рд▓рд╛рдЧрд┐ AI рдЦреЛрдЬ
   - рдЧреБрдгрд╕реНрддрд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рддрддрд╛рдХрд╛ рд▓рд╛рдЧрд┐ рдореВрд▓реНрдпрд╛рдЩреНрдХрди рдлреНрд░реЗрдорд╡рд░реНрдХ
   - рд╕реБрд░рдХреНрд╖рд╛ рдорд╛рдиреНрдпрддрд╛рдХрд╛ рд▓рд╛рдЧрд┐ рд░реЗрдб рдЯрд┐рдорд┐рдЩ

---

### 5.6.2 рдкрд░рд┐рджреГрд╢реНрдп рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди


#### 5.6.2.1. рдкрд░рд┐рдирд┐рдпреЛрдЬрдирдкреВрд░реНрд╡ рдХрдиреНрдлрд┐рдЧ

рд╕реЗрдЯрдЕрдк рд╕реНрдХреНрд░рд┐рдкреНрдЯ (`setup-retail.sh`) рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН

```bash title="" linenums="0"
#!/bin/bash

# Set environment name
azd env set AZURE_ENV_NAME "retail-ai-agents"

# Configure region (choose based on model availability)
azd env set AZURE_LOCATION "eastus2"

# Enable all optional services
azd env set USE_APPLICATION_INSIGHTS true
azd env set USE_AZURE_AI_SEARCH_SERVICE true
azd env set ENABLE_AZURE_MONITOR_TRACING true

# Configure primary chat model (gpt-4o as closest available to gpt-4.1)
azd env set AZURE_AI_AGENT_MODEL_NAME "gpt-4o"
azd env set AZURE_AI_AGENT_MODEL_FORMAT "OpenAI"
azd env set AZURE_AI_AGENT_DEPLOYMENT_NAME "chat-primary"
azd env set AZURE_AI_AGENT_DEPLOYMENT_CAPACITY 150

# Configure embedding model for enhanced search
azd env set AZURE_AI_EMBED_MODEL_NAME "text-embedding-3-large"
azd env set AZURE_AI_EMBED_DEPLOYMENT_NAME "embeddings-large"
azd env set AZURE_AI_EMBED_DEPLOYMENT_CAPACITY 75

# Set agent name (will create first agent)
azd env set AZURE_AI_AGENT_NAME "shopper-agent"

# Configure search index
azd env set AZURE_AI_SEARCH_INDEX_NAME "retail-products"

echo "Environment configured for retail deployment"
echo "Recommended quota: 300,000+ TPM across all models"
```

---

#### 5.6.2.2: рдПрдЬреЗрдиреНрдЯ рдирд┐рд░реНрджреЗрд╢рдирд╣рд░реВ

`custom-agents/shopper-agent-instructions.md` рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```markdown
# Shopper Agent Instructions

You are a helpful shopping assistant for an enterprise retail company. Your role is to:

1. **Product Discovery**: Help customers find products that match their needs
2. **Comparison**: Provide detailed product comparisons with pros/cons
3. **Recommendations**: Suggest complementary products and alternatives
4. **Inventory**: Check product availability and delivery options

## Guidelines:
- Always provide citations from the product catalog
- Be conversational and helpful
- Ask clarifying questions to understand customer needs
- Mention relevant promotions when appropriate
- Escalate complex warranty or return questions to human agents

## Knowledge Base:
You have access to our complete product catalog including specifications, pricing, reviews, and inventory levels.
```

`custom-agents/loyalty-agent-instructions.md` рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```markdown
# Loyalty Agent Instructions

You are a customer loyalty specialist focused on maximizing customer satisfaction and retention. Your responsibilities include:

1. **Rewards Management**: Explain point values, redemption options, and tier benefits
2. **Promotions**: Identify applicable discounts and special offers
3. **Program Navigation**: Help customers understand loyalty program features
4. **Account Support**: Assist with account-related questions and updates

## Guidelines:
- Prioritize customer satisfaction and retention
- Explain complex program rules in simple terms
- Proactively identify opportunities for customers to save money
- Celebrate customer milestones and achievements
- Connect customers with shopper agent for product questions

## Knowledge Base:
You have access to loyalty program rules, current promotions, customer tier information, and reward catalogs.
```

---

#### 5.6.2.3: рдкрд░рд┐рдирд┐рдпреЛрдЬрди рд╕реНрдХреНрд░рд┐рдкреНрдЯ

`deploy-retail.sh` рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash title="" linenums="0"
#!/bin/bash
set -e

echo "ЁЯЪА Starting Enterprise Retail AI Agents deployment..."

# Validate prerequisites
echo "ЁЯУЛ Validating prerequisites..."
if ! command -v azd &> /dev/null; then
    echo "тЭМ Azure Developer CLI (azd) is required"
    exit 1
fi

if ! az account show &> /dev/null; then
    echo "тЭМ Please login to Azure CLI: az login"
    exit 1
fi

# Set up environment
echo "ЁЯФз Configuring deployment environment..."
chmod +x setup-retail.sh
./setup-retail.sh

# Check quota in selected region
echo "ЁЯУК Checking quota availability..."
LOCATION=$(azd env get-values | grep AZURE_LOCATION | cut -d'=' -f2 | tr -d '"')
echo "Deploying to region: $LOCATION"
echo "тЪая╕П  Please verify you have 300,000+ TPM quota for:"
echo "   - gpt-4o: 150,000 TPM"
echo "   - text-embedding-3-large: 75,000 TPM"
echo "   - Additional models: 75,000+ TPM"

read -p "Continue with deployment? (y/N): " -n 1 -r
echo
if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    echo "Deployment cancelled"
    exit 1
fi

# Deploy infrastructure and application
echo "ЁЯПЧя╕П  Deploying Azure infrastructure..."
azd up

# Capture deployment outputs
echo "ЁЯУЭ Capturing deployment information..."
azd show > deployment-info.txt

# Get the web app URL
APP_URL=$(azd show --output json | jq -r '.services.api_and_frontend.project.target.url // empty')

if [ ! -z "$APP_URL" ]; then
    echo "тЬЕ Deployment completed successfully!"
    echo "ЁЯМР Web Application: $APP_URL"
    echo "ЁЯФН Azure Portal: Run 'azd show' for resource group link"
    echo "ЁЯУК AI Foundry Portal: https://ai.azure.com"
else
    echo "тЪая╕П  Deployment completed but unable to retrieve URL"
    echo "Run 'azd show' for deployment details"
fi

echo "ЁЯУЪ Next steps:"
echo "1. Create second agent (Loyalty Agent) in AI Foundry portal"
echo "2. Upload product catalog to search index"
echo "3. Configure custom agent instructions"
echo "4. Test both agents with sample queries"
```

---

#### 5.6.2.4: рдкрд░рд┐рдирд┐рдпреЛрдЬрдирдкрдЫрд┐рдХреЛ рдХрдиреНрдлрд┐рдЧ

`configure-retail-agents.sh` рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash title="" linenums="0"
#!/bin/bash

echo "ЁЯФз Configuring retail agents..."

# Get deployment information
PROJECT_ENDPOINT=$(azd env get-values | grep AZURE_EXISTING_AIPROJECT_ENDPOINT | cut -d'=' -f2 | tr -d '"')
AGENT_ID=$(azd env get-values | grep AZURE_EXISTING_AGENT_ID | cut -d'=' -f2 | tr -d '"')

echo "Project Endpoint: $PROJECT_ENDPOINT"
echo "Primary Agent ID: $AGENT_ID"

# Instructions for manual configuration
echo "
ЁЯдЦ Agent Configuration:

1. **Update Shopper Agent Instructions:**
   - Go to AI Foundry portal: https://ai.azure.com
   - Navigate to your project
   - Select Agents tab
   - Edit the existing agent
   - Update instructions with content from custom-agents/shopper-agent-instructions.md

2. **Create Loyalty Agent:**
   - In Agents tab, click 'Create Agent'
   - Name: 'loyalty-agent'
   - Model: Use same deployment as shopper agent
   - Instructions: Use content from custom-agents/loyalty-agent-instructions.md
   - Enable file search tool
   - Save and note the Agent ID

3. **Upload Knowledge Base:**
   - Prepare product catalog files (JSON/CSV format)
   - Upload to both agents' file search
   - Or configure Azure AI Search index

4. **Test Configuration:**
   - Test shopper agent with product queries
   - Test loyalty agent with rewards questions
   - Verify citations and search functionality

ЁЯУК Monitoring Setup:
- Tracing: Available in AI Foundry > Tracing tab
- Logs: Azure Portal > Container Apps > Monitoring > Log Stream
- Evaluation: Run python evals/evaluate.py

ЁЯФТ Security Validation:
- Run red teaming: python airedteaming/ai_redteaming.py
- Review security recommendations
- Configure authentication if needed
"
```

### 5.6.3: рдкрд░реАрдХреНрд╖рдг рд░ рдорд╛рдиреНрдпрддрд╛

`test-retail-deployment.sh` рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash title="" linenums="0"
#!/bin/bash

echo "ЁЯзк Testing retail deployment..."

# Verify environment variables are set
echo "ЁЯУЛ Checking environment configuration..."
azd env get-values | grep -E "(AZURE_AI_|USE_|ENABLE_)"

# Test web application availability
APP_URL=$(azd show --output json | jq -r '.services.api_and_frontend.project.target.url // empty')
if [ ! -z "$APP_URL" ]; then
    echo "ЁЯМР Testing web application at: $APP_URL"
    HTTP_STATUS=$(curl -s -o /dev/null -w "%{http_code}" "$APP_URL")
    if [ "$HTTP_STATUS" = "200" ]; then
        echo "тЬЕ Web application is responding"
    else
        echo "тЭМ Web application returned status: $HTTP_STATUS"
    fi
else
    echo "тЭМ Could not retrieve web application URL"
fi

# Run evaluation if configured
if [ -f "evals/evaluate.py" ]; then
    echo "ЁЯУК Running agent evaluation..."
    cd evals
    python -m pip install -r ../src/requirements.txt
    python -m pip install azure-ai-evaluation
    python evaluate.py
    cd ..
fi

echo "
ЁЯОп Deployment validation complete!

Next steps:
1. Access the web application and test basic functionality
2. Create the second agent (Loyalty Agent) in AI Foundry portal
3. Upload your product catalog and loyalty program data
4. Configure agent instructions for your specific use case
5. Run comprehensive testing with your retail scenarios
"
```

---

### 5.6.4 рдЕрдкреЗрдХреНрд╖рд┐рдд рдкрд░рд┐рдгрд╛рдорд╣рд░реВ

рдпрд╕ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдорд╛рд░реНрдЧрджрд░реНрд╢рдирд▓рд╛рдИ рдкрд╛рд▓рдирд╛ рдЧрд░реЗрдкрдЫрд┐, рддрдкрд╛рдИрдВрд▓реЗ рдирд┐рдореНрди рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реБрдиреЗрдЫ:

1. **рдкрд░рд┐рдирд┐рдпреЛрдЬрд┐рдд рдкреВрд░реНрд╡рд╛рдзрд╛рд░:**

      - рдореЛрдбреЗрд▓ рдкрд░рд┐рдирд┐рдпреЛрдЬрдирдХреЛ рд╕рд╛рде AI Foundry рдкрд░рд┐рдпреЛрдЬрдирд╛
      - рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╕рди рд╣реЛрд╕реНрдЯ рдЧрд░реНрдиреЗ рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕
      - рдЙрддреНрдкрд╛рджрди рдХреНрдпрд╛рдЯрд▓рдЧрдХрд╛ рд▓рд╛рдЧрд┐ AI рдЦреЛрдЬ рд╕реЗрд╡рд╛
      - рдЕрдиреБрдЧрдордирдХрд╛ рд▓рд╛рдЧрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕

2. **рдкреНрд░рд╛рд░рдореНрднрд┐рдХ рдПрдЬреЗрдиреНрдЯ:**

      - рдЖрдзрд╛рд░рднреВрдд рдирд┐рд░реНрджреЗрд╢рдирд╣рд░реВрд╕рдБрдЧ рдХрдиреНрдлрд┐рдЧ рдЧрд░рд┐рдПрдХреЛ рд╢рдкрд┐рдЩ рдПрдЬреЗрдиреНрдЯ
      - рдлрд╛рдЗрд▓ рдЦреЛрдЬ рдХреНрд╖рдорддрд╛ рд╕рдХреНрд╖рдо
      - рдЯреНрд░реЗрд╕рд┐рдЩ рд░ рдЕрдиреБрдЧрдорди рдХрдиреНрдлрд┐рдЧ рдЧрд░рд┐рдПрдХреЛ

3. **рдЕрдиреБрдХреВрд▓рдирдХрд╛ рд▓рд╛рдЧрд┐ рддрдпрд╛рд░:**

      - рд╡рдлрд╛рджрд╛рд░реА рдПрдЬреЗрдиреНрдЯ рдердкреНрди рдлреНрд░реЗрдорд╡рд░реНрдХ
      - рдЕрдиреБрдХреВрд▓рди рдирд┐рд░реНрджреЗрд╢рди рдЯреЗрдореНрдкреНрд▓реЗрдЯрд╣рд░реВ
      - рдкрд░реАрдХреНрд╖рдг рд░ рдорд╛рдиреНрдпрддрд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯрд╣рд░реВ
      - рдЕрдиреБрдЧрдорди рд░ рдореВрд▓реНрдпрд╛рдЩреНрдХрди рд╕реЗрдЯрдЕрдк

4. **рдЙрддреНрдкрд╛рджрди рддрдпрд╛рд░реА:**

      - рд░реЗрдб рдЯрд┐рдорд┐рдЩрдХреЛ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд╛ рд╕реНрдХреНрдпрд╛рдирд┐рдЩ
      - рдкреНрд░рджрд░реНрд╢рди рдЕрдиреБрдЧрдорди
      - рдЧреБрдгрд╕реНрддрд░ рдореВрд▓реНрдпрд╛рдЩреНрдХрди рдлреНрд░реЗрдорд╡рд░реНрдХ
      - рд╕реНрдХреЗрд▓реЗрдмрд▓ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░

рдпреЛ рдЙрджрд╛рд╣рд░рдгрд▓реЗ AZD рдЯреЗрдореНрдкреНрд▓реЗрдЯрд▓рд╛рдИ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЙрджреНрдпрдо рдкрд░рд┐рджреГрд╢реНрдпрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рдХрд╕рд░реА рд╡рд┐рд╕реНрддрд╛рд░ рд░ рдЕрдиреБрдХреВрд▓рди рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫ рднрдиреНрдиреЗ рдкреНрд░рджрд░реНрд╢рди рдЧрд░реНрджрдЫ, рд╕реБрд░рдХреНрд╖рд╛, рдЕрдиреБрдЧрдорди, рд░ рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреАрдХрд╛ рд▓рд╛рдЧрд┐ рдЙрддреНрддрдо рдЕрднреНрдпрд╛рд╕рд╣рд░реВ рдХрд╛рдпрдо рд░рд╛рдЦреНрджреИред

---

