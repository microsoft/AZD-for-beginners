# рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рд╕рдордиреНрд╡рдп рдврд╛рдБрдЪрд╛рд╣рд░реВ

тП▒я╕П **рдЕрдиреБрдорд╛рдирд┐рдд рд╕рдордп**: ремреж-ренрел рдорд┐рдиреЗрдЯ | ЁЯТ░ **рдЕрдиреБрдорд╛рдирд┐рдд рд▓рд╛рдЧрдд**: ~$резрежреж-рейрежреж/рдорд╣рд┐рдирд╛ | тнР **рдЬрдЯрд┐рд▓рддрд╛**: рдЙрдиреНрдирдд

**ЁЯУЪ рд╕рд┐рдХрд╛рдЗ рдорд╛рд░реНрдЧ:**
- тЖР рдЕрдШрд┐рд▓реНрд▓реЛ: [рдХреНрд╖рдорддрд╛ рдпреЛрдЬрдирд╛](capacity-planning.md) - рд╕реНрд░реЛрддрдХреЛ рдЖрдХрд╛рд░ рд░ рд╕реНрдХреЗрд▓рд┐рдЩ рд░рдгрдиреАрддрд┐рд╣рд░реВ
- ЁЯОп **рддрдкрд╛рдИрдВ рдпрд╣рд╛рдБ рд╣реБрдиреБрд╣реБрдиреНрдЫ**: рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рд╕рдордиреНрд╡рдп рдврд╛рдБрдЪрд╛рд╣рд░реВ (рд╕рдордиреНрд╡рдп, рд╕рдЮреНрдЪрд╛рд░, рдЕрд╡рд╕реНрдерд╛ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди)
- тЖТ рдЕрд░реНрдХреЛ: [SKU рдЪрдпрди](sku-selection.md) - рд╕рд╣реА Azure рд╕реЗрд╡рд╛рд╣рд░реВ рдЫрдиреЛрдЯ рдЧрд░реНрдиреЗ
- ЁЯПа [рдкрд╛рда рдЧреГрд╣](../../README.md)

---

## рддрдкрд╛рдИрдВрд▓реЗ рдХреЗ рд╕рд┐рдХреНрдиреБрд╣реБрдиреЗрдЫ

рдпреЛ рдкрд╛рда рдкреВрд░рд╛ рдЧрд░реЗрд░, рддрдкрд╛рдИрдВ:
- **рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░** рдврд╛рдБрдЪрд╛рд╣рд░реВ рдмреБрдЭреНрдиреБрд╣реБрдиреЗрдЫ рд░ рддрд┐рдиреАрд╣рд░реВ рдХрд╣рд┐рд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ
- **рд╕рдордиреНрд╡рдп рдврд╛рдБрдЪрд╛рд╣рд░реВ** рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН (рдХреЗрдиреНрджреНрд░рд┐рдд, рд╡рд┐рдХреЗрдиреНрджреНрд░рд┐рдд, рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд)
- **рдПрдЬреЗрдиреНрдЯ рд╕рдЮреНрдЪрд╛рд░** рд░рдгрдиреАрддрд┐рд╣рд░реВ рдбрд┐рдЬрд╛рдЗрди рдЧрд░реНрдиреБрд╣реЛрд╕реН (рд╕рдордХрд╛рд▓рд┐рдХ, рдЕрд╕рдордХрд╛рд▓рд┐рдХ, рдШрдЯрдирд╛-рдЖрдзрд╛рд░рд┐рдд)
- рд╡рд┐рддрд░рд┐рдд рдПрдЬреЗрдиреНрдЯрд╣рд░реВ рдмреАрдЪ **рд╕рд╛рдЭрд╛ рдЕрд╡рд╕реНрдерд╛** рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
- AZD рдХреЛ рд╕рд╛рде **рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рдкреНрд░рдгрд╛рд▓реАрд╣рд░реВ** Azure рдорд╛ рддреИрдирд╛рде рдЧрд░реНрдиреБрд╣реЛрд╕реН
- рд╡рд╛рд╕реНрддрд╡рд┐рдХ-рд╡рд┐рд╢реНрд╡ AI рдкрд░рд┐рджреГрд╢реНрдпрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ **рд╕рдордиреНрд╡рдп рдврд╛рдБрдЪрд╛рд╣рд░реВ** рд▓рд╛рдЧреВ рдЧрд░реНрдиреБрд╣реЛрд╕реН
- рд╡рд┐рддрд░рд┐рдд рдПрдЬреЗрдиреНрдЯ рдкреНрд░рдгрд╛рд▓реАрд╣рд░реВ рдЕрдиреБрдЧрдорди рд░ рдбрд┐рдмрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН

## рдХрд┐рди рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рд╕рдордиреНрд╡рдп рдорд╣рддреНрддреНрд╡рдкреВрд░реНрдг рдЫ

### рд╡рд┐рдХрд╛рд╕: рдПрдХрд▓ рдПрдЬреЗрдиреНрдЯрдмрд╛рдЯ рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯрд╕рдореНрдо

**рдПрдХрд▓ рдПрдЬреЗрдиреНрдЯ (рд╕рд░рд▓):**
```
User тЖТ Agent тЖТ Response
```
- тЬЕ рдмреБрдЭреНрди рд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрди рд╕рдЬрд┐рд▓реЛ
- тЬЕ рд╕рд╛рдзрд╛рд░рдг рдХрд╛рд░реНрдпрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рдЫрд┐рдЯреЛ
- тЭМ рдПрдХрд▓ рдореЛрдбреЗрд▓рдХреЛ рдХреНрд╖рдорддрд╛рд▓реЗ рд╕реАрдорд┐рдд
- тЭМ рдЬрдЯрд┐рд▓ рдХрд╛рд░реНрдпрд╣рд░реВ рд╕рдорд╛рдирд╛рдиреНрддрд░ рдЧрд░реНрди рд╕рдХреНрджреИрди
- тЭМ рдХреБрдиреИ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮрддрд╛ рдЫреИрди

**рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рдкреНрд░рдгрд╛рд▓реА (рдЙрдиреНрдирдд):**
```
           тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
           тФВ OrchestratorтФВ
           тФФтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФШ
        тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
        тФВ         тФВ         тФВ
    тФМтФАтФАтФАтЦ╝тФАтФАтФР  тФМтФАтФАтЦ╝тФАтФАтФАтФР  тФМтФАтФАтЦ╝тФАтФАтФАтФАтФР
    тФВAgent1тФВ  тФВAgent2тФВ  тФВAgent3 тФВ
    тФВ(Plan)тФВ  тФВ(Code)тФВ  тФВ(Review)тФВ
    тФФтФАтФАтФАтФАтФАтФАтФШ  тФФтФАтФАтФАтФАтФАтФАтФШ  тФФтФАтФАтФАтФАтФАтФАтФАтФШ
```
- тЬЕ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдпрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдПрдЬреЗрдиреНрдЯрд╣рд░реВ
- тЬЕ рдЧрддрд┐ рдХреЛ рд▓рд╛рдЧрд┐ рд╕рдорд╛рдирд╛рдиреНрддрд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди
- тЬЕ рдореЛрдбреНрдпреБрд▓рд░ рд░ рдорд░реНрдорддрдпреЛрдЧреНрдп
- тЬЕ рдЬрдЯрд┐рд▓ рдХрд╛рд░реНрдпрдкреНрд░рд╡рд╛рд╣рд╣рд░реВрдорд╛ рд░рд╛рдореНрд░реЛ
- тЪая╕П рд╕рдордиреНрд╡рдп рддрд░реНрдХ рдЖрд╡рд╢реНрдпрдХ рдЫ

**рдЙрджрд╛рд╣рд░рдг**: рдПрдХрд▓ рдПрдЬреЗрдиреНрдЯ рднрдиреЗрдХреЛ рд╕рдмреИ рдХрд╛рд░реНрдпрд╣рд░реВ рдЧрд░реНрдиреЗ рдПрдХ рд╡реНрдпрдХреНрддрд┐рдХреЛ рдЬрд╕реНрддреИ рд╣реЛред рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рднрдиреЗрдХреЛ рдкреНрд░рддреНрдпреЗрдХ рд╕рджрд╕реНрдпрд╕рдБрдЧ рд╡рд┐рд╢реЗрд╖ рд╕реАрдк (рдЕрдиреБрд╕рдиреНрдзрд╛рдирдХрд░реНрддрд╛, рдХреЛрдбрд░, рд╕рдореАрдХреНрд╖рдХ, рд▓реЗрдЦрдХ) рднрдПрдХреЛ рдЯреЛрд▓реА рдЬрд╕реНрддреИ рд╣реЛ, рдЬрд╕рд▓реЗ рд╕рдБрдЧреИ рдХрд╛рдо рдЧрд░реНрдЫред

---

## рдореБрдЦреНрдп рд╕рдордиреНрд╡рдп рдврд╛рдБрдЪрд╛рд╣рд░реВ

### рдврд╛рдБрдЪрд╛ рез: рдЕрдиреБрдХреНрд░рдорд┐рдХ рд╕рдордиреНрд╡рдп (рдЬрд┐рдореНрдореЗрд╡рд╛рд░реАрдХреЛ рд╢реНрд░реГрдВрдЦрд▓рд╛)

**рдХрд╣рд┐рд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ**: рдХрд╛рд░реНрдпрд╣рд░реВ рд╡рд┐рд╢реЗрд╖ рдЖрджреЗрд╢рдорд╛ рдкреВрд░рд╛ рдЧрд░реНрдиреБрдкрд░реНрдЫ, рдкреНрд░рддреНрдпреЗрдХ рдПрдЬреЗрдиреНрдЯрд▓реЗ рдЕрдШрд┐рд▓реНрд▓реЛ рдЙрддреНрдкрд╛рджрдирдорд╛ рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрджрдЫред

```mermaid
sequenceDiagram
    participant User
    participant Orchestrator
    participant Agent1 as рдЕрдиреБрд╕рдиреНрдзрд╛рди рдПрдЬреЗрдиреНрдЯ
    participant Agent2 as рд▓реЗрдЦрдХ рдПрдЬреЗрдиреНрдЯ
    participant Agent3 as рд╕рдореНрдкрд╛рджрдХ рдПрдЬреЗрдиреНрдЯ
    
    User->>Orchestrator: "рдПрдЖрдИрдХреЛ рдмрд╛рд░реЗрдорд╛ рд▓реЗрдЦ рд▓реЗрдЦреНрдиреБрд╣реЛрд╕реН"
    Orchestrator->>Agent1: рд╡рд┐рд╖рдп рдЕрдиреБрд╕рдиреНрдзрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН
    Agent1-->>Orchestrator: рдЕрдиреБрд╕рдиреНрдзрд╛рди рдкрд░рд┐рдгрд╛рдорд╣рд░реВ
    Orchestrator->>Agent2: рдорд╕реНрдпреМрджрд╛ рд▓реЗрдЦреНрдиреБрд╣реЛрд╕реН (рдЕрдиреБрд╕рдиреНрдзрд╛рди рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИ)
    Agent2-->>Orchestrator: рдорд╕реНрдпреМрджрд╛ рд▓реЗрдЦ
    Orchestrator->>Agent3: рд╕рдореНрдкрд╛рджрди рдЧрд░реНрдиреБрд╣реЛрд╕реН рд░ рд╕реБрдзрд╛рд░ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    Agent3-->>Orchestrator: рдЕрдиреНрддрд┐рдо рд▓реЗрдЦ
    Orchestrator-->>User: рдкрд░рд┐рд╖реНрдХреГрдд рд▓реЗрдЦ
    
    Note over User,Agent3: рдХреНрд░рдорд┐рдХ: рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рдгрд▓реЗ рдЕрдШрд┐рд▓реНрд▓реЛрдХреЛ рдкреНрд░рддреАрдХреНрд╖рд╛ рдЧрд░реНрджрдЫ
```
**рдлрд╛рдЗрджрд╛рд╣рд░реВ:**
- тЬЕ рд╕реНрдкрд╖реНрдЯ рдбрд╛рдЯрд╛ рдкреНрд░рд╡рд╛рд╣
- тЬЕ рдбрд┐рдмрдЧ рдЧрд░реНрди рд╕рдЬрд┐рд▓реЛ
- тЬЕ рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди рдпреЛрдЧреНрдп рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреНрд░рдо

**рд╕реАрдорд╛рд╣рд░реВ:**
- тЭМ рдврд┐рд▓реЛ (рдХреБрдиреИ рд╕рдорд╛рдирд╛рдиреНрддрд░рддрд╛ рдЫреИрди)
- тЭМ рдПрдХ рдЕрд╕рдлрд▓рддрд╛рд▓реЗ рд╕рдореНрдкреВрд░реНрдг рд╢реНрд░реГрдВрдЦрд▓рд╛ рдЕрд╡рд░реБрджреНрдз рдЧрд░реНрджрдЫ
- тЭМ рдкрд░рд╕реНрдкрд░ рдирд┐рд░реНрднрд░ рдХрд╛рд░реНрдпрд╣рд░реВ рд╣реНрдпрд╛рдиреНрдбрд▓ рдЧрд░реНрди рд╕рдХреНрджреИрди

**рдЙрджрд╛рд╣рд░рдг рдкреНрд░рдпреЛрдЧ рдХреЗрд╕рд╣рд░реВ:**
- рд╕рд╛рдордЧреНрд░реА рд╕рд┐рд░реНрдЬрдирд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрди (рдЕрдиреБрд╕рдиреНрдзрд╛рди тЖТ рд▓реЗрдЦреНрдиреБрд╣реЛрд╕реН тЖТ рд╕рдореНрдкрд╛рджрди рдЧрд░реНрдиреБрд╣реЛрд╕реН тЖТ рдкреНрд░рдХрд╛рд╢рд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН)
- рдХреЛрдб рдЙрддреНрдкрд╛рджрди (рдпреЛрдЬрдирд╛ тЖТ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди тЖТ рдкрд░реАрдХреНрд╖рдг тЖТ рддреИрдирд╛рде)
- рдкреНрд░рддрд┐рд╡реЗрджрди рдЙрддреНрдкрд╛рджрди (рдбрд╛рдЯрд╛ рд╕рдЩреНрдХрд▓рди тЖТ рд╡рд┐рд╢реНрд▓реЗрд╖рдг тЖТ рджреГрд╢реНрдпрддрд╛ тЖТ рд╕рд╛рд░рд╛рдВрд╢)

---

### рдврд╛рдБрдЪрд╛ реи: рд╕рдорд╛рдирд╛рдиреНрддрд░ рд╕рдордиреНрд╡рдп (рдлреНрдпрд╛рди-рдЖрдЙрдЯ/рдлреНрдпрд╛рди-рдЗрди)

**рдХрд╣рд┐рд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ**: рд╕реНрд╡рддрдиреНрддреНрд░ рдХрд╛рд░реНрдпрд╣рд░реВ рдПрдХреИ рд╕рдордпрдорд╛ рдЪрд▓реНрди рд╕рдХреНрдЫрдиреН, рдкрд░рд┐рдгрд╛рдорд╣рд░реВ рдЕрдиреНрддрдорд╛ рд╕рдВрдпреЛрдЬрди рдЧрд░рд┐рдиреНрдЫред

```mermaid
graph TB
    User[рдкреНрд░рдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд░реЛрдз]
    Orchestrator[рд╕рдордиреНрд╡рдпрдХрд░реНрддрд╛]
    Agent1[рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдПрдЬреЗрдиреНрдЯ]
    Agent2[рдЕрдиреБрд╕рдиреНрдзрд╛рди рдПрдЬреЗрдиреНрдЯ]
    Agent3[рдбрд╛рдЯрд╛ рдПрдЬреЗрдиреНрдЯ]
    Aggregator[рдкрд░рд┐рдгрд╛рдо рд╕рдВрдХрд▓рдХ]
    Response[рд╕рдВрдпреБрдХреНрдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛]
    
    User --> Orchestrator
    Orchestrator --> Agent1
    Orchestrator --> Agent2
    Orchestrator --> Agent3
    Agent1 --> Aggregator
    Agent2 --> Aggregator
    Agent3 --> Aggregator
    Aggregator --> Response
    
    style Orchestrator fill:#2196F3,stroke:#1976D2,stroke-width:3px,color:#fff
    style Aggregator fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
```
**рдлрд╛рдЗрджрд╛рд╣рд░реВ:**
- тЬЕ рдЫрд┐рдЯреЛ (рд╕рдорд╛рдирд╛рдиреНрддрд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди)
- тЬЕ рдЧрд▓реНрддреА-рд╕рд╣рдирд╢реАрд▓ (рдЖрдВрд╢рд┐рдХ рдкрд░рд┐рдгрд╛рдо рд╕реНрд╡реАрдХрд╛рд░реНрдп)
- тЬЕ рддреЗрд░реНрд╕реЛ рд░реВрдкрдорд╛ рд╕реНрдХреЗрд▓ рд╣реБрдиреНрдЫ

**рд╕реАрдорд╛рд╣рд░реВ:**
- тЪая╕П рдкрд░рд┐рдгрд╛рдорд╣рд░реВ рдХреНрд░рдордмрд╛рд╣рд┐рд░ рдЖрдЙрди рд╕рдХреНрдЫрдиреН
- тЪая╕П рд╕рдордЧреНрд░ рддрд░реНрдХ рдЖрд╡рд╢реНрдпрдХ рдЫ
- тЪая╕П рдЬрдЯрд┐рд▓ рдЕрд╡рд╕реНрдерд╛ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди

**рдЙрджрд╛рд╣рд░рдг рдкреНрд░рдпреЛрдЧ рдХреЗрд╕рд╣рд░реВ:**
- рдмрд╣реБ-рд╕реНрд░реЛрдд рдбрд╛рдЯрд╛ рд╕рдЩреНрдХрд▓рди (API + рдбреЗрдЯрд╛рдмреЗрд╕ + рд╡реЗрдм рд╕реНрдХреНрд░реНрдпрд╛рдкрд┐рдЩ)
- рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзрд╛рддреНрдордХ рд╡рд┐рд╢реНрд▓реЗрд╖рдг (рдзреЗрд░реИ рдореЛрдбреЗрд▓рд╣рд░реВрд▓реЗ рд╕рдорд╛рдзрд╛рди рдЙрддреНрдкрдиреНрди рдЧрд░реНрдЫрдиреН, рдЙрддреНрдХреГрд╖реНрдЯ рдЪрдпрди рдЧрд░рд┐рдиреНрдЫ)
- рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛рд╣рд░реВ (рдПрдХреИ рд╕рдордпрдорд╛ рдзреЗрд░реИ рднрд╛рд╖рд╛рд╣рд░реВрдорд╛ рдЕрдиреБрд╡рд╛рдж рдЧрд░реНрдиреБрд╣реЛрд╕реН)

---

### рдврд╛рдБрдЪрд╛ рей: рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд рд╕рдордиреНрд╡рдп (рдкреНрд░рдмрдиреНрдзрдХ-рдХрд░реНрдордЪрд╛рд░реА)

**рдХрд╣рд┐рд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ**: рдЙрдк-рдХрд╛рд░реНрдпрд╣рд░реВ рд╕рд╣рд┐рдд рдЬрдЯрд┐рд▓ рдХрд╛рд░реНрдпрдкреНрд░рд╡рд╛рд╣рд╣рд░реВ, рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдЖрд╡рд╢реНрдпрдХ рдЫред

```mermaid
graph TB
    Master[рдорд╛рд╕реНрдЯрд░ рдЕрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯрд░]
    Manager1[рдЕрдиреБрд╕рдиреНрдзрд╛рди рдкреНрд░рдмрдиреНрдзрдХ]
    Manager2[рд╕рд╛рдордЧреНрд░реА рдкреНрд░рдмрдиреНрдзрдХ]
    W1[рд╡реЗрдм рд╕реНрдХреНрд░реНрдпрд╛рдкрд░]
    W2[рдХрд╛рдЧрдЬ рд╡рд┐рд╢реНрд▓реЗрд╖рдХ]
    W3[рд▓реЗрдЦрдХ]
    W4[рд╕рдореНрдкрд╛рджрдХ]
    
    Master --> Manager1
    Master --> Manager2
    Manager1 --> W1
    Manager1 --> W2
    Manager2 --> W3
    Manager2 --> W4
    
    style Master fill:#FF9800,stroke:#F57C00,stroke-width:3px,color:#fff
    style Manager1 fill:#2196F3,stroke:#1976D2,stroke-width:2px,color:#fff
    style Manager2 fill:#2196F3,stroke:#1976D2,stroke-width:2px,color:#fff
```
**рдлрд╛рдЗрджрд╛рд╣рд░реВ:**
- тЬЕ рдЬрдЯрд┐рд▓ рдХрд╛рд░реНрдпрдкреНрд░рд╡рд╛рд╣рд╣рд░реВ рд╣реНрдпрд╛рдиреНрдбрд▓ рдЧрд░реНрджрдЫ
- тЬЕ рдореЛрдбреНрдпреБрд▓рд░ рд░ рдорд░реНрдорддрдпреЛрдЧреНрдп
- тЬЕ рд╕реНрдкрд╖реНрдЯ рдЬрд┐рдореНрдореЗрд╡рд╛рд░реА рд╕реАрдорд╛рд╣рд░реВ

**рд╕реАрдорд╛рд╣рд░реВ:**
- тЪая╕П рдердк рдЬрдЯрд┐рд▓ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░
- тЪая╕П рдЙрдЪреНрдЪ рд╡рд┐рд▓рдореНрдмрддрд╛ (рдзреЗрд░реИ рд╕рдордиреНрд╡рдп рддрд╣рд╣рд░реВ)
- тЪая╕П рдкрд░рд┐рд╖реНрдХреГрдд рд╕рдордиреНрд╡рдп рдЖрд╡рд╢реНрдпрдХ рдЫ

**рдЙрджрд╛рд╣рд░рдг рдкреНрд░рдпреЛрдЧ рдХреЗрд╕рд╣рд░реВ:**
- рдЙрджреНрдпрдо рджрд╕реНрддрд╛рд╡реЗрдЬ рдкреНрд░рд╢реЛрдзрди (рд╡рд░реНрдЧреАрдХреГрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН тЖТ рдорд╛рд░реНрдЧ тЖТ рдкреНрд░рдХреНрд░рд┐рдпрд╛ тЖТ рдЕрднрд┐рд▓реЗрдЦ)
- рдмрд╣реБ-рдЪрд░рдг рдбрд╛рдЯрд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрдирд╣рд░реВ (рд╕рдЩреНрдХрд▓рди рдЧрд░реНрдиреБрд╣реЛрд╕реН тЖТ рд╕рдлрд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН тЖТ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН тЖТ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН тЖТ рдкреНрд░рддрд┐рд╡реЗрджрди)
- рдЬрдЯрд┐рд▓ рд╕реНрд╡рдЪрд╛рд▓рди рдХрд╛рд░реНрдпрдкреНрд░рд╡рд╛рд╣рд╣рд░реВ (рдпреЛрдЬрдирд╛ тЖТ рд╕реНрд░реЛрдд рдЖрд╡рдВрдЯрди тЖТ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди тЖТ рдЕрдиреБрдЧрдорди)

---

### рдврд╛рдБрдЪрд╛ рек: рдШрдЯрдирд╛-рдЖрдзрд╛рд░рд┐рдд рд╕рдордиреНрд╡рдп (рдкреНрд░рдХрд╛рд╢рди-рд╕рджрд╕реНрдпрддрд╛)

**рдХрд╣рд┐рд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ**: рдПрдЬреЗрдиреНрдЯрд╣рд░реВрд▓реЗ рдШрдЯрдирд╛рд╣рд░реВрдорд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджрд┐рди рдЖрд╡рд╢реНрдпрдХ рдЫ, рдвреАрд▓рд╛ рдпреБрдЧреНрдорди рдЪрд╛рд╣рд┐рдиреНрдЫред

```mermaid
sequenceDiagram
    participant Agent1 as рдбрд╛рдЯрд╛ рд╕рдЩреНрдХрд▓рдХ
    participant EventBus as Azure рд╕реЗрд╡рд╛ рдмрд╕
    participant Agent2 as рд╡рд┐рд╢реНрд▓реЗрд╖рдХ
    participant Agent3 as рд╕реВрдЪрдирд╛рдХрд░реНрддрд╛
    participant Agent4 as рдЕрднрд┐рд▓реЗрдЦрдХ
    
    Agent1->>EventBus: рдкреНрд░рдХрд╛рд╢рд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН "рдбрд╛рдЯрд╛ рдкреНрд░рд╛рдкреНрдд рднрдпреЛ" рдШрдЯрдирд╛
    EventBus->>Agent2: рд╕рджрд╕реНрдпрддрд╛ рд▓рд┐рдиреБрд╣реЛрд╕реН: рдбрд╛рдЯрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН
    EventBus->>Agent3: рд╕рджрд╕реНрдпрддрд╛ рд▓рд┐рдиреБрд╣реЛрд╕реН: рд╕реВрдЪрдирд╛ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН
    EventBus->>Agent4: рд╕рджрд╕реНрдпрддрд╛ рд▓рд┐рдиреБрд╣реЛрд╕реН: рдбрд╛рдЯрд╛ рдЕрднрд┐рд▓реЗрдЦ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    
    Note over Agent1,Agent4: рд╕рдмреИ рд╕рджрд╕реНрдпрд╣рд░реВрд▓реЗ рд╕реНрд╡рддрдиреНрддреНрд░ рд░реВрдкрдорд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░реНрдЫрдиреН
    
    Agent2->>EventBus: рдкреНрд░рдХрд╛рд╢рд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреВрд░рд╛ рднрдпреЛ" рдШрдЯрдирд╛
    EventBus->>Agent3: рд╕рджрд╕реНрдпрддрд╛ рд▓рд┐рдиреБрд╣реЛрд╕реН: рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд░рд┐рдкреЛрд░реНрдЯ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН
```
**рдлрд╛рдЗрджрд╛рд╣рд░реВ:**
- тЬЕ рдПрдЬреЗрдиреНрдЯрд╣рд░реВ рдмреАрдЪ рдвреАрд▓рд╛ рдпреБрдЧреНрдорди
- тЬЕ рдирдпрд╛рдБ рдПрдЬреЗрдиреНрдЯрд╣рд░реВ рдердкреНрди рд╕рдЬрд┐рд▓реЛ (рд╕рд┐рд░реНрдл рд╕рджрд╕реНрдпрддрд╛ рд▓рд┐рдиреБрд╣реЛрд╕реН)
- тЬЕ рдЕрд╕рдордХрд╛рд▓рд┐рдХ рдкреНрд░рд╢реЛрдзрди
- тЬЕ рд▓рдЪрд┐рд▓реЛ (рд╕рдиреНрджреЗрд╢ рд╕реНрдерд╛рдпрд┐рддреНрд╡)

**рд╕реАрдорд╛рд╣рд░реВ:**
- тЪая╕П рдЕрдиреНрддрддрдГ рд╕реНрдерд┐рд░рддрд╛
- тЪая╕П рдЬрдЯрд┐рд▓ рдбрд┐рдмрдЧрд┐рдЩ
- тЪая╕П рд╕рдиреНрджреЗрд╢ рдХреНрд░рдордмрджреНрдзрддрд╛ рдЪреБрдиреМрддреАрд╣рд░реВ

**рдЙрджрд╛рд╣рд░рдг рдкреНрд░рдпреЛрдЧ рдХреЗрд╕рд╣рд░реВ:**
- рд╡рд╛рд╕реНрддрд╡рд┐рдХ-рд╕рдордп рдЕрдиреБрдЧрдорди рдкреНрд░рдгрд╛рд▓реАрд╣рд░реВ (рд╕рддрд░реНрдХрддрд╛, рдбреНрдпрд╛рд╕рдмреЛрд░реНрдб, рд▓рдЧрд╣рд░реВ)
- рдмрд╣реБ-рдЪреНрдпрд╛рдирд▓ рд╕реВрдЪрдирд╛рд╣рд░реВ (рдЗрдореЗрд▓, рдПрд╕рдПрдордПрд╕, рдкреБрд╢, рд╕реНрд▓реНрдпрд╛рдХ)
- рдбрд╛рдЯрд╛ рдкреНрд░рд╢реЛрдзрди рдкрд╛рдЗрдкрд▓рд╛рдЗрдирд╣рд░реВ (рдЙрд╣реА рдбрд╛рдЯрд╛рдХрд╛ рдзреЗрд░реИ рдЙрдкрднреЛрдХреНрддрд╛рд╣рд░реВ)

---

### рдврд╛рдБрдЪрд╛ рел: рд╕рд╣рдорддрд┐-рдЖрдзрд╛рд░рд┐рдд рд╕рдордиреНрд╡рдп (рдорддрджрд╛рди/рдХреНрд╡реЛрд░рдо)

**рдХрд╣рд┐рд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ**: рдЕрдШрд┐ рдмрдвреНрдиреБ рдЕрдШрд┐ рдзреЗрд░реИ рдПрдЬреЗрдиреНрдЯрд╣рд░реВрдХреЛ рд╕рд╣рдорддрд┐ рдЖрд╡рд╢реНрдпрдХ рдЫред

```mermaid
graph TB
    Input[рдЗрдирдкреБрдЯ рдХрд╛рд░реНрдп]
    Agent1[рдПрдЬреЗрдиреНрдЯ рез: рдЬреАрдкреАрдЯреА-рек]
    Agent2[рдПрдЬреЗрдиреНрдЯ реи: рдХреНрд▓рд╛рдЙрдб]
    Agent3[рдПрдЬреЗрдиреНрдЯ рей: рдЬреЗрдорд┐рдиреА]
    Voter[рд╕рд╣рдорддрд┐ рдорддрджрд╛рддрд╛]
    Output[рд╕рд╣рдорддрд┐ рдЧрд░рд┐рдПрдХреЛ рдЖрдЙрдЯрдкреБрдЯ]
    
    Input --> Agent1
    Input --> Agent2
    Input --> Agent3
    Agent1 --> Voter
    Agent2 --> Voter
    Agent3 --> Voter
    Voter --> Output
    
    style Voter fill:#9C27B0,stroke:#7B1FA2,stroke-width:3px,color:#fff
```
**рдлрд╛рдЗрджрд╛рд╣рд░реВ:**
- тЬЕ рдЙрдЪреНрдЪ рд╕рдЯреАрдХрддрд╛ (рдзреЗрд░реИ рд░рд╛рдпрд╣рд░реВ)
- тЬЕ рдЧрд▓реНрддреА-рд╕рд╣рдирд╢реАрд▓ (рдЕрд▓реНрдкрд╕рдВрдЦреНрдпрдХ рдЕрд╕рдлрд▓рддрд╛рд╣рд░реВ рд╕реНрд╡реАрдХрд╛рд░реНрдп)
- тЬЕ рдЧреБрдгрд╕реНрддрд░ рдЖрд╢реНрд╡рд╛рд╕рди рдирд┐рд░реНрдорд┐рдд

**рд╕реАрдорд╛рд╣рд░реВ:**
- тЭМ рдорд╣рдБрдЧреЛ (рдзреЗрд░реИ рдореЛрдбреЗрд▓ рдХрд▓рд╣рд░реВ)
- тЭМ рдврд┐рд▓реЛ (рд╕рдмреИ рдПрдЬреЗрдиреНрдЯрд╣рд░реВрдХреЛ рдкреНрд░рддреАрдХреНрд╖рд╛ рдЧрд░реНрджреИ)
- тЪая╕П рджреНрд╡рдиреНрджреНрд╡ рд╕рдорд╛рдзрд╛рди рдЖрд╡рд╢реНрдпрдХ

**рдЙрджрд╛рд╣рд░рдг рдкреНрд░рдпреЛрдЧ рдХреЗрд╕рд╣рд░реВ:**
- рд╕рд╛рдордЧреНрд░реА рд╕рдВрдпрдо (рдзреЗрд░реИ рдореЛрдбреЗрд▓рд╣рд░реВрд▓реЗ рд╕рд╛рдордЧреНрд░реА рд╕рдореАрдХреНрд╖рд╛ рдЧрд░реНрдЫрдиреН)
- рдХреЛрдб рд╕рдореАрдХреНрд╖рд╛ (рдзреЗрд░реИ рд▓рд┐рдиреНрдЯрд░/рд╡рд┐рд╢реНрд▓реЗрд╖рдХрд╣рд░реВ)
- рдЪрд┐рдХрд┐рддреНрд╕рд╛ рдирд┐рджрд╛рди (рдзреЗрд░реИ AI рдореЛрдбреЗрд▓рд╣рд░реВ, рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдорд╛рдиреНрдпрддрд╛)

---

## рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдЕрд╡рд▓реЛрдХрди

### Azure рдорд╛ рдкреВрд░реНрдг рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рдкреНрд░рдгрд╛рд▓реА

```mermaid
graph TB
    User[рдкреНрд░рдпреЛрдЧрдХрд░реНрддрд╛/API рдЧреНрд░рд╛рд╣рдХ]
    APIM[Azure API рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди]
    Orchestrator[рдУрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯрд░ рд╕реЗрд╡рд╛<br/>рдХрдиреНрдЯреЗрдирд░ рдПрдк]
    ServiceBus[Azure рд╕реЗрд╡рд╛ рдмрд╕<br/>рдЗрднреЗрдиреНрдЯ рд╣рдм]
    
    Agent1[рдЕрдиреБрд╕рдиреНрдзрд╛рди рдПрдЬреЗрдиреНрдЯ<br/>рдХрдиреНрдЯреЗрдирд░ рдПрдк]
    Agent2[рд▓реЗрдЦрдХ рдПрдЬреЗрдиреНрдЯ<br/>рдХрдиреНрдЯреЗрдирд░ рдПрдк]
    Agent3[рд╡рд┐рд╢реНрд▓реЗрд╖рдХ рдПрдЬреЗрдиреНрдЯ<br/>рдХрдиреНрдЯреЗрдирд░ рдПрдк]
    Agent4[рд╕рдореАрдХреНрд╖рдХ рдПрдЬреЗрдиреНрдЯ<br/>рдХрдиреНрдЯреЗрдирд░ рдПрдк]
    
    CosmosDB[(Cosmos DB<br/>рд╕рд╛рдЭрд╛ рдЕрд╡рд╕реНрдерд╛)]
    Storage[Azure рд╕реНрдЯреЛрд░реЗрдЬ<br/>рдХрд▓рд╛рдХреГрддрд┐]
    AppInsights[рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕<br/>рдЕрдиреБрдЧрдорди]
    
    User --> APIM
    APIM --> Orchestrator
    
    Orchestrator --> ServiceBus
    ServiceBus --> Agent1
    ServiceBus --> Agent2
    ServiceBus --> Agent3
    ServiceBus --> Agent4
    
    Agent1 --> CosmosDB
    Agent2 --> CosmosDB
    Agent3 --> CosmosDB
    Agent4 --> CosmosDB
    
    Agent1 --> Storage
    Agent2 --> Storage
    Agent3 --> Storage
    Agent4 --> Storage
    
    Orchestrator -.-> AppInsights
    Agent1 -.-> AppInsights
    Agent2 -.-> AppInsights
    Agent3 -.-> AppInsights
    Agent4 -.-> AppInsights
    
    style Orchestrator fill:#FF9800,stroke:#F57C00,stroke-width:3px,color:#fff
    style ServiceBus fill:#9C27B0,stroke:#7B1FA2,stroke-width:3px,color:#fff
    style CosmosDB fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
```
**рдореБрдЦреНрдп рдШрдЯрдХрд╣рд░реВ:**

| рдШрдЯрдХ | рдЙрджреНрджреЗрд╢реНрдп | Azure рд╕реЗрд╡рд╛ |
|-----------|---------|---------------|
| **API рдЧреЗрдЯрд╡реЗ** | рдкреНрд░рд╡реЗрд╢ рдмрд┐рдиреНрджреБ, рджрд░ рд╕реАрдорд┐рдд, рдкреНрд░рдорд╛рдгреАрдХрд░рдг | API рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди |
| **рд╕рдордиреНрд╡рдпрдХрд░реНрддрд╛** | рдПрдЬреЗрдиреНрдЯ рдХрд╛рд░реНрдпрдкреНрд░рд╡рд╛рд╣рд╣рд░реВ рд╕рдордиреНрд╡рдп рдЧрд░реНрджрдЫ | рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕ |
| **рд╕рдиреНрджреЗрд╢ рдкрдЩреНрдХреНрддрд┐** | рдЕрд╕рдордХрд╛рд▓рд┐рдХ рд╕рдЮреНрдЪрд╛рд░ | рд╕реЗрд╡рд╛ рдмрд╕ / рдШрдЯрдирд╛ рд╣рдм |
| **рдПрдЬреЗрдиреНрдЯрд╣рд░реВ** | рд╡рд┐рд╢реЗрд╖ AI рдХрд╛рдорджрд╛рд░рд╣рд░реВ | рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕ / рдХрд╛рд░реНрдпрд╣рд░реВ |
| **рдЕрд╡рд╕реНрдерд╛ рднрдгреНрдбрд╛рд░** | рд╕рд╛рдЭрд╛ рдЕрд╡рд╕реНрдерд╛, рдХрд╛рд░реНрдп рдЯреНрд░реНрдпрд╛рдХрд┐рдЩ | рдХреЛрд╕реНрдореЛрд╕ DB |
| **рдХрд▓рд╛рдХреГрддрд┐ рднрдгреНрдбрд╛рд░рдг** | рдХрд╛рдЧрдЬрд╛рддрд╣рд░реВ, рдкрд░рд┐рдгрд╛рдорд╣рд░реВ, рд▓рдЧрд╣рд░реВ | рдмреНрд▓рдм рднрдгреНрдбрд╛рд░рдг |
| **рдЕрдиреБрдЧрдорди** | рд╡рд┐рддрд░рд┐рдд рдЯреНрд░реЗрд╕рд┐рдЩ, рд▓рдЧрд╣рд░реВ | рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕ |

---

## рдкреВрд░реНрд╡рд╛рдкреЗрдХреНрд╖рд╛рд╣рд░реВ

### рдЖрд╡рд╢реНрдпрдХ рдЙрдкрдХрд░рдгрд╣рд░реВ

```bash
# Azure Developer CLI рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd version
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: azd рд╕рдВрд╕реНрдХрд░рдг 1.0.0 рд╡рд╛ рдЙрдЪреНрдЪ

# Azure CLI рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН
az --version
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: azure-cli 2.50.0 рд╡рд╛ рдЙрдЪреНрдЪ

# Docker рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН (рд╕реНрдерд╛рдиреАрдп рдкрд░реАрдХреНрд╖рдгрдХреЛ рд▓рд╛рдЧрд┐)
docker --version
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: Docker рд╕рдВрд╕реНрдХрд░рдг 20.10 рд╡рд╛ рдЙрдЪреНрдЪ
```

### Azure рдЖрд╡рд╢реНрдпрдХрддрд╛рд╣рд░реВ

- рд╕рдХреНрд░рд┐рдп Azure рд╕рджрд╕реНрдпрддрд╛
- рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрди рдЕрдиреБрдорддрд┐:
  - рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕
  - рд╕реЗрд╡рд╛ рдмрд╕ рдирд╛рдорд╕реНрдерд╛рдирд╣рд░реВ
  - рдХреЛрд╕реНрдореЛрд╕ DB рдЦрд╛рддрд╛
  - рднрдгреНрдбрд╛рд░рдг рдЦрд╛рддрд╛
  - рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕

### рдЬреНрдЮрд╛рди рдкреВрд░реНрд╡рд╛рдкреЗрдХреНрд╖рд╛рд╣рд░реВ

рддрдкрд╛рдИрдВрд▓реЗ рдкреВрд░рд╛ рдЧрд░реНрдиреБрднрдПрдХреЛ рд╣реБрдиреБрдкрд░реНрдЫ:
- [рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди](../getting-started/configuration.md)
- [рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд░ рд╕реБрд░рдХреНрд╖рд╛](../getting-started/authsecurity.md)
- [рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдЙрджрд╛рд╣рд░рдг](../../../../examples/microservices)

---

## рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛

### рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╕рдВрд░рдЪрдирд╛

```
multi-agent-system/
тФЬтФАтФА azure.yaml                    # AZD configuration
тФЬтФАтФА infra/
тФВ   тФЬтФАтФА main.bicep               # Main infrastructure
тФВ   тФЬтФАтФА core/
тФВ   тФВ   тФЬтФАтФА servicebus.bicep     # Message queue
тФВ   тФВ   тФЬтФАтФА cosmos.bicep         # State store
тФВ   тФВ   тФЬтФАтФА storage.bicep        # Artifact storage
тФВ   тФВ   тФФтФАтФА monitoring.bicep     # Application Insights
тФВ   тФФтФАтФА app/
тФВ       тФЬтФАтФА orchestrator.bicep   # Orchestrator service
тФВ       тФФтФАтФА agent.bicep          # Agent template
тФФтФАтФА src/
    тФЬтФАтФА orchestrator/            # Orchestration logic
    тФВ   тФЬтФАтФА app.py
    тФВ   тФЬтФАтФА workflows.py
    тФВ   тФФтФАтФА Dockerfile
    тФЬтФАтФА agents/
    тФВ   тФЬтФАтФА research/            # Research agent
    тФВ   тФЬтФАтФА writer/              # Writer agent
    тФВ   тФЬтФАтФА analyst/             # Analyst agent
    тФВ   тФФтФАтФА reviewer/            # Reviewer agent
    тФФтФАтФА shared/
        тФЬтФАтФА state_manager.py     # Shared state logic
        тФФтФАтФА message_handler.py   # Message handling
```

---

## рдкрд╛рда рез: рдЕрдиреБрдХреНрд░рдорд┐рдХ рд╕рдордиреНрд╡рдп рдврд╛рдБрдЪрд╛

### рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди: рд╕рд╛рдордЧреНрд░реА рд╕рд┐рд░реНрдЬрдирд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрди

рдЖрдЙрдиреБрд╣реЛрд╕реН, рдПрдХ рдЕрдиреБрдХреНрд░рдорд┐рдХ рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдирд┐рд░реНрдорд╛рдг рдЧрд░реМрдВ: рдЕрдиреБрд╕рдиреНрдзрд╛рди тЖТ рд▓реЗрдЦреНрдиреБрд╣реЛрд╕реН тЖТ рд╕рдореНрдкрд╛рджрди рдЧрд░реНрдиреБрд╣реЛрд╕реН тЖТ рдкреНрд░рдХрд╛рд╢рд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

### рез. AZD рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди

**рдлрд╛рдЗрд▓: `azure.yaml`**

```yaml
name: content-pipeline
metadata:
  template: multi-agent-sequential@1.0.0

services:
  orchestrator:
    project: ./src/orchestrator
    language: python
    host: containerapp
  
  research-agent:
    project: ./src/agents/research
    language: python
    host: containerapp
  
  writer-agent:
    project: ./src/agents/writer
    language: python
    host: containerapp
  
  editor-agent:
    project: ./src/agents/editor
    language: python
    host: containerapp
```

### реи. рдкреВрд░реНрд╡рд╛рдзрд╛рд░: рд╕рдордиреНрд╡рдпрдХреЛ рд▓рд╛рдЧрд┐ рд╕реЗрд╡рд╛ рдмрд╕

**рдлрд╛рдЗрд▓: `infra/core/servicebus.bicep`**

```bicep
param name string
param location string
param tags object = {}

resource serviceBusNamespace 'Microsoft.ServiceBus/namespaces@2022-10-01-preview' = {
  name: name
  location: location
  tags: tags
  sku: {
    name: 'Standard'
    tier: 'Standard'
  }
  properties: {
    minimumTlsVersion: '1.2'
  }
}

// Queue for orchestrator тЖТ research agent
resource researchQueue 'Microsoft.ServiceBus/namespaces/queues@2022-10-01-preview' = {
  parent: serviceBusNamespace
  name: 'research-tasks'
  properties: {
    maxDeliveryCount: 3
    lockDuration: 'PT5M'
    deadLetteringOnMessageExpiration: true
  }
}

// Queue for research agent тЖТ writer agent
resource writerQueue 'Microsoft.ServiceBus/namespaces/queues@2022-10-01-preview' = {
  parent: serviceBusNamespace
  name: 'writer-tasks'
  properties: {
    maxDeliveryCount: 3
    lockDuration: 'PT5M'
  }
}

// Queue for writer agent тЖТ editor agent
resource editorQueue 'Microsoft.ServiceBus/namespaces/queues@2022-10-01-preview' = {
  parent: serviceBusNamespace
  name: 'editor-tasks'
  properties: {
    maxDeliveryCount: 3
    lockDuration: 'PT5M'
  }
}

output namespace string = serviceBusNamespace.name
output connectionString string = listKeys('${serviceBusNamespace.id}/AuthorizationRules/RootManageSharedAccessKey', serviceBusNamespace.apiVersion).primaryConnectionString
```

### рей. рд╕рд╛рдЭрд╛ рдЕрд╡рд╕реНрдерд╛ рдкреНрд░рдмрдиреНрдзрдХ

**рдлрд╛рдЗрд▓: `src/shared/state_manager.py`**

```python
from azure.cosmos import CosmosClient, PartitionKey
from datetime import datetime
import os

class StateManager:
    """Manages shared state across agents using Cosmos DB"""
    
    def __init__(self):
        endpoint = os.environ['COSMOS_ENDPOINT']
        key = os.environ['COSMOS_KEY']
        
        self.client = CosmosClient(endpoint, key)
        self.database = self.client.get_database_client('agent-state')
        self.container = self.database.get_container_client('tasks')
    
    def create_task(self, task_id: str, task_type: str, input_data: dict):
        """Create a new task"""
        task = {
            'id': task_id,
            'type': task_type,
            'status': 'pending',
            'input': input_data,
            'created_at': datetime.utcnow().isoformat(),
            'steps': []
        }
        self.container.create_item(task)
        return task
    
    def update_task_step(self, task_id: str, step_name: str, result: dict):
        """Update task with completed step"""
        task = self.container.read_item(task_id, partition_key=task_id)
        
        task['steps'].append({
            'name': step_name,
            'completed_at': datetime.utcnow().isoformat(),
            'result': result
        })
        
        self.container.replace_item(task_id, task)
        return task
    
    def complete_task(self, task_id: str, final_result: dict):
        """Mark task as complete"""
        task = self.container.read_item(task_id, partition_key=task_id)
        task['status'] = 'completed'
        task['result'] = final_result
        task['completed_at'] = datetime.utcnow().isoformat()
        self.container.replace_item(task_id, task)
        return task
    
    def get_task(self, task_id: str):
        """Retrieve task state"""
        return self.container.read_item(task_id, partition_key=task_id)
```

### рек. рд╕рдордиреНрд╡рдпрдХрд░реНрддрд╛ рд╕реЗрд╡рд╛

**рдлрд╛рдЗрд▓: `src/orchestrator/app.py`**

```python
from flask import Flask, request, jsonify
from azure.servicebus import ServiceBusClient, ServiceBusMessage
import json
import uuid
import os
from shared.state_manager import StateManager

app = Flask(__name__)
state_manager = StateManager()

# рд╕реЗрд╡рд╛ рдмрд╕ рдЬрдбрд╛рди
servicebus_connection_str = os.environ['SERVICEBUS_CONNECTION_STRING']
servicebus_client = ServiceBusClient.from_connection_string(servicebus_connection_str)

@app.route('/health', methods=['GET'])
def health():
    return jsonify({'status': 'healthy', 'service': 'orchestrator'})

@app.route('/create-content', methods=['POST'])
def create_content():
    """
    Sequential workflow: Research тЖТ Write тЖТ Edit тЖТ Publish
    """
    data = request.json
    topic = data.get('topic')
    
    if not topic:
        return jsonify({'error': 'Topic required'}), 400
    
    # рд░рд╛рдЬреНрдп рд╕реНрдЯреЛрд░рдорд╛ рдХрд╛рд░реНрдп рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    task_id = str(uuid.uuid4())
    task = state_manager.create_task(
        task_id=task_id,
        task_type='content_creation',
        input_data={'topic': topic}
    )
    
    # рдЕрдиреБрд╕рдиреНрдзрд╛рди рдПрдЬреЗрдиреНрдЯрд▓рд╛рдИ рд╕рдиреНрджреЗрд╢ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН (рдкрд╣рд┐рд▓реЛ рдЪрд░рдг)
    sender = servicebus_client.get_queue_sender('research-tasks')
    message = ServiceBusMessage(
        body=json.dumps({
            'task_id': task_id,
            'topic': topic,
            'next_queue': 'writer-tasks'  # рдкрд░рд┐рдгрд╛рдорд╣рд░реВ рдХрд╣рд╛рдБ рдкрдард╛рдЙрдиреЗ
        }),
        content_type='application/json'
    )
    
    with sender:
        sender.send_messages(message)
    
    return jsonify({
        'task_id': task_id,
        'status': 'started',
        'workflow': 'sequential',
        'steps': ['research', 'write', 'edit', 'publish'],
        'message': 'Content creation pipeline initiated'
    }), 202

@app.route('/task/<task_id>', methods=['GET'])
def get_task_status(task_id):
    """Check task status"""
    try:
        task = state_manager.get_task(task_id)
        return jsonify(task)
    except Exception as e:
        return jsonify({'error': str(e)}), 404

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)
```

### рел. рдЕрдиреБрд╕рдиреНрдзрд╛рди рдПрдЬреЗрдиреНрдЯ

**рдлрд╛рдЗрд▓: `src/agents/research/app.py`**

```python
from azure.servicebus import ServiceBusClient, ServiceBusMessage
from openai import AzureOpenAI
import json
import os
import time
from shared.state_manager import StateManager

# рдХреНрд▓рд╛рдЗрдиреНрдЯрд╣рд░реВ рдЖрд░рдореНрдн рдЧрд░реНрдиреБрд╣реЛрд╕реН
state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

openai_client = AzureOpenAI(
    api_key=os.environ['AZURE_OPENAI_API_KEY'],
    api_version="2024-02-01",
    azure_endpoint=os.environ['AZURE_OPENAI_ENDPOINT']
)

def process_research_task(message_data):
    """Process research request and pass to writer"""
    task_id = message_data['task_id']
    topic = message_data['topic']
    next_queue = message_data['next_queue']
    
    print(f"ЁЯФм Researching: {topic}")
    
    # рдЕрдиреБрд╕рдиреНрдзрд╛рдирдХреЛ рд▓рд╛рдЧрд┐ Azure OpenAI рдХрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    response = openai_client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "You are a research assistant. Provide comprehensive research on the given topic."},
            {"role": "user", "content": f"Research this topic thoroughly: {topic}"}
        ],
        max_tokens=1500
    )
    
    research_results = response.choices[0].message.content
    
    # рдЕрд╡рд╕реНрдерд╛ рдЕрджреНрдпрд╛рд╡рдзрд┐рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    state_manager.update_task_step(
        task_id=task_id,
        step_name='research',
        result={'research': research_results}
    )
    
    # рдЕрд░реНрдХреЛ рдПрдЬреЗрдиреНрдЯ (рд▓реЗрдЦрдХ) рдорд╛ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН
    sender = servicebus_client.get_queue_sender(next_queue)
    message = ServiceBusMessage(
        body=json.dumps({
            'task_id': task_id,
            'topic': topic,
            'research': research_results,
            'next_queue': 'editor-tasks'
        }),
        content_type='application/json'
    )
    
    with sender:
        sender.send_messages(message)
    
    print(f"тЬЕ Research complete for task {task_id}")

def main():
    """Listen to research queue"""
    receiver = servicebus_client.get_queue_receiver('research-tasks')
    
    print("ЁЯФм Research Agent started, listening for tasks...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_research_task(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"тЭМ Error processing message: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

### рем. рд▓реЗрдЦрдХ рдПрдЬреЗрдиреНрдЯ

**рдлрд╛рдЗрд▓: `src/agents/writer/app.py`**

```python
from azure.servicebus import ServiceBusClient, ServiceBusMessage
from openai import AzureOpenAI
import json
import os
from shared.state_manager import StateManager

state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

openai_client = AzureOpenAI(
    api_key=os.environ['AZURE_OPENAI_API_KEY'],
    api_version="2024-02-01",
    azure_endpoint=os.environ['AZURE_OPENAI_ENDPOINT']
)

def process_writing_task(message_data):
    """Write article based on research"""
    task_id = message_data['task_id']
    topic = message_data['topic']
    research = message_data['research']
    next_queue = message_data['next_queue']
    
    print(f"тЬНя╕П Writing article: {topic}")
    
    # Azure OpenAI рд▓рд╛рдИ рд▓реЗрдЦ рд▓реЗрдЦреНрди рдХрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    response = openai_client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "You are a professional writer. Write engaging, well-structured articles."},
            {"role": "user", "content": f"Based on this research:\n\n{research}\n\nWrite a comprehensive article about: {topic}"}
        ],
        max_tokens=2000
    )
    
    article_draft = response.choices[0].message.content
    
    # рдЕрд╡рд╕реНрдерд╛ рдЕрджреНрдпрд╛рд╡рдзрд┐рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    state_manager.update_task_step(
        task_id=task_id,
        step_name='writing',
        result={'draft': article_draft}
    )
    
    # рд╕рдореНрдкрд╛рджрдХрд▓рд╛рдИ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН
    sender = servicebus_client.get_queue_sender(next_queue)
    message = ServiceBusMessage(
        body=json.dumps({
            'task_id': task_id,
            'topic': topic,
            'draft': article_draft
        }),
        content_type='application/json'
    )
    
    with sender:
        sender.send_messages(message)
    
    print(f"тЬЕ Article draft complete for task {task_id}")

def main():
    """Listen to writer queue"""
    receiver = servicebus_client.get_queue_receiver('writer-tasks')
    
    print("тЬНя╕П Writer Agent started, listening for tasks...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_writing_task(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"тЭМ Error: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

### рен. рд╕рдореНрдкрд╛рджрдХ рдПрдЬреЗрдиреНрдЯ

**рдлрд╛рдЗрд▓: `src/agents/editor/app.py`**

```python
from azure.servicebus import ServiceBusClient
from openai import AzureOpenAI
import json
import os
from shared.state_manager import StateManager

state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

openai_client = AzureOpenAI(
    api_key=os.environ['AZURE_OPENAI_API_KEY'],
    api_version="2024-02-01",
    azure_endpoint=os.environ['AZURE_OPENAI_ENDPOINT']
)

def process_editing_task(message_data):
    """Edit and finalize article"""
    task_id = message_data['task_id']
    topic = message_data['topic']
    draft = message_data['draft']
    
    print(f"ЁЯУЭ Editing article: {topic}")
    
    # Azure OpenAI рд▓рд╛рдИ рд╕рдореНрдкрд╛рджрди рдЧрд░реНрди рдХрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    response = openai_client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "You are an expert editor. Improve grammar, clarity, and structure."},
            {"role": "user", "content": f"Edit and improve this article:\n\n{draft}"}
        ],
        max_tokens=2000
    )
    
    final_article = response.choices[0].message.content
    
    # рдХрд╛рд░реНрдпрд▓рд╛рдИ рдкреВрд░рд╛ рднрдПрдХреЛ рд░реВрдкрдорд╛ рдЪрд┐рдиреНрд╣ рд▓рдЧрд╛рдЙрдиреБрд╣реЛрд╕реН
    state_manager.complete_task(
        task_id=task_id,
        final_result={
            'topic': topic,
            'final_article': final_article,
            'word_count': len(final_article.split())
        }
    )
    
    print(f"тЬЕ Article finalized for task {task_id}")

def main():
    """Listen to editor queue"""
    receiver = servicebus_client.get_queue_receiver('editor-tasks')
    
    print("ЁЯУЭ Editor Agent started, listening for tasks...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_editing_task(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"тЭМ Error: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

### рео. рддреИрдирд╛рде рд░ рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН

```bash
# рдЖрд░рдореНрдн рдЧрд░реНрдиреБрд╣реЛрд╕реН рд░ рддреИрдирд╛рде рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd init
azd up

# рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯрд░ URL рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН
ORCHESTRATOR_URL=$(azd env get-values | grep ORCHESTRATOR_URL | cut -d '=' -f2 | tr -d '"')

# рд╕рд╛рдордЧреНрд░реА рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН
curl -X POST $ORCHESTRATOR_URL/create-content \
  -H "Content-Type: application/json" \
  -d '{"topic": "The Future of AI in Healthcare"}'
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдкрд░рд┐рдгрд╛рдо:**
```json
{
  "task_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "status": "started",
  "workflow": "sequential",
  "steps": ["research", "write", "edit", "publish"],
  "message": "Content creation pipeline initiated"
}
```

**рдХрд╛рд░реНрдп рдкреНрд░рдЧрддрд┐ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН:**
```bash
TASK_ID="a1b2c3d4-e5f6-7890-abcd-ef1234567890"
curl $ORCHESTRATOR_URL/task/$TASK_ID
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдкрд░рд┐рдгрд╛рдо (рдкреВрд░рд╛):**
```json
{
  "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "type": "content_creation",
  "status": "completed",
  "steps": [
    {
      "name": "research",
      "completed_at": "2025-11-19T10:30:00Z",
      "result": {"research": "..."}
    },
    {
      "name": "writing",
      "completed_at": "2025-11-19T10:32:00Z",
      "result": {"draft": "..."}
    }
  ],
  "result": {
    "topic": "The Future of AI in Healthcare",
    "final_article": "...",
    "word_count": 1500
  }
}
```

---

## рдкрд╛рда реи: рд╕рдорд╛рдирд╛рдиреНрддрд░ рд╕рдордиреНрд╡рдп рдврд╛рдБрдЪрд╛

### рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди: рдмрд╣реБ-рд╕реНрд░реЛрдд рдЕрдиреБрд╕рдиреНрдзрд╛рди рд╕рдЩреНрдХрд▓рдХ

рдЖрдЙрдиреБрд╣реЛрд╕реН, рдПрдХ рд╕рдорд╛рдирд╛рдиреНрддрд░ рдкреНрд░рдгрд╛рд▓реА рдирд┐рд░реНрдорд╛рдг рдЧрд░реМрдВ рдЬрд╕рд▓реЗ рдПрдХреИ рд╕рдордпрдорд╛ рдзреЗрд░реИ рд╕реНрд░реЛрддрд╣рд░реВрдмрд╛рдЯ рдЬрд╛рдирдХрд╛рд░реА рд╕рдЩреНрдХрд▓рди рдЧрд░реНрджрдЫред

### рд╕рдорд╛рдирд╛рдиреНрддрд░ рд╕рдордиреНрд╡рдпрдХрд░реНрддрд╛

**рдлрд╛рдЗрд▓: `src/orchestrator/parallel_workflow.py`**

```python
from flask import Flask, request, jsonify
from azure.servicebus import ServiceBusClient, ServiceBusMessage
import json
import uuid
import os
from shared.state_manager import StateManager

app = Flask(__name__)
state_manager = StateManager()

servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

@app.route('/research-parallel', methods=['POST'])
def research_parallel():
    """
    Parallel workflow: Multiple agents work simultaneously
    """
    data = request.json
    query = data.get('query')
    
    task_id = str(uuid.uuid4())
    task = state_manager.create_task(
        task_id=task_id,
        task_type='parallel_research',
        input_data={
            'query': query,
            'agents': ['web', 'academic', 'news', 'social']
        }
    )
    
    # рдлреНрдпрд╛рди-рдЖрдЙрдЯ: рд╕рдмреИ рдПрдЬреЗрдиреНрдЯрд╣рд░реВрд▓рд╛рдИ рдПрдХреИрдкрдЯрдХ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН
    agents = [
        ('web-research-queue', 'web'),
        ('academic-research-queue', 'academic'),
        ('news-research-queue', 'news'),
        ('social-research-queue', 'social')
    ]
    
    for queue_name, agent_type in agents:
        sender = servicebus_client.get_queue_sender(queue_name)
        message = ServiceBusMessage(
            body=json.dumps({
                'task_id': task_id,
                'query': query,
                'agent_type': agent_type,
                'result_queue': 'aggregation-queue'
            }),
            content_type='application/json'
        )
        
        with sender:
            sender.send_messages(message)
    
    return jsonify({
        'task_id': task_id,
        'status': 'started',
        'workflow': 'parallel',
        'agents_dispatched': 4,
        'message': 'Parallel research initiated'
    }), 202

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)
```

### рд╕рдордЧреНрд░ рддрд░реНрдХ

**рдлрд╛рдЗрд▓: `src/agents/aggregator/app.py`**

```python
from azure.servicebus import ServiceBusClient
import json
import os
from collections import defaultdict
from shared.state_manager import StateManager

state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

# рдкреНрд░рддреНрдпреЗрдХ рдХрд╛рд░реНрдпрдХреЛ рдкрд░рд┐рдгрд╛рдо рдЯреНрд░реНрдпрд╛рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реН
task_results = defaultdict(list)
expected_agents = 4  # рд╡реЗрдм, рд╢реИрдХреНрд╖рд┐рдХ, рд╕рдорд╛рдЪрд╛рд░, рд╕рд╛рдорд╛рдЬрд┐рдХ

def process_result(message_data):
    """Aggregate results from parallel agents"""
    task_id = message_data['task_id']
    agent_type = message_data['agent_type']
    result = message_data['result']
    
    # рдкрд░рд┐рдгрд╛рдо рднрдгреНрдбрд╛рд░рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН
    task_results[task_id].append({
        'agent': agent_type,
        'data': result
    })
    
    print(f"ЁЯУК Received result from {agent_type} agent ({len(task_results[task_id])}/{expected_agents})")
    
    # рд╕рдмреИ рдПрдЬреЗрдиреНрдЯрд╣рд░реВ рдкреВрд░рд╛ рднрдП рдХрд┐ рдЫреИрди рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН (рдлреНрдпрд╛рди-рдЗрди)
    if len(task_results[task_id]) == expected_agents:
        print(f"тЬЕ All agents completed for task {task_id}. Aggregating...")
        
        # рдкрд░рд┐рдгрд╛рдорд╣рд░реВ рд╕рдВрдпреЛрдЬрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
        aggregated = {
            'query': message_data['query'],
            'sources': task_results[task_id],
            'summary': generate_summary(task_results[task_id])
        }
        
        # рдкреВрд░рд╛ рднрдПрдХреЛ рдЪрд┐рдиреНрд╣ рд▓рдЧрд╛рдЙрдиреБрд╣реЛрд╕реН
        state_manager.complete_task(task_id, aggregated)
        
        # рд╕рдлрд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН
        del task_results[task_id]
        
        print(f"тЬЕ Aggregation complete for task {task_id}")

def generate_summary(results):
    """Generate summary from all sources"""
    summaries = [r['data'].get('summary', '') for r in results]
    return '\n\n'.join(summaries)

def main():
    """Listen to aggregation queue"""
    receiver = servicebus_client.get_queue_receiver('aggregation-queue')
    
    print("ЁЯУК Aggregator started, listening for results...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_result(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"тЭМ Error: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

**рд╕рдорд╛рдирд╛рдиреНрддрд░ рдврд╛рдБрдЪрд╛рдХреЛ рдлрд╛рдЗрджрд╛рд╣рд░реВ:**
- тЪб **рекx рдЫрд┐рдЯреЛ** (рдПрдЬреЗрдиреНрдЯрд╣рд░реВ рдПрдХреИ рд╕рдордпрдорд╛ рдЪрд▓реНрдЫрдиреН)
- ЁЯФД **рдЧрд▓реНрддреА-рд╕рд╣рдирд╢реАрд▓** (рдЖрдВрд╢рд┐рдХ рдкрд░рд┐рдгрд╛рдо рд╕реНрд╡реАрдХрд╛рд░реНрдп)
- ЁЯУИ **рд╕реНрдХреЗрд▓реЗрдмрд▓** (рд╕рдЬрд┐рд▓реИ рдердк рдПрдЬреЗрдиреНрдЯрд╣рд░реВ рдердкреНрдиреБрд╣реЛрд╕реН)

---

## рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЕрднреНрдпрд╛рд╕рд╣рд░реВ

### рдЕрднреНрдпрд╛рд╕ рез: рдЯрд╛рдЗрдордЖрдЙрдЯ рд╣реНрдпрд╛рдиреНрдбрд▓рд┐рдЩ рдердкреНрдиреБрд╣реЛрд╕реН тнРтнР (рдордзреНрдпрдо)

**рдЙрджреНрджреЗрд╢реНрдп**: рдЯрд╛рдЗрдордЖрдЙрдЯ рддрд░реНрдХ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН рддрд╛рдХрд┐ рд╕рдЩреНрдХрд▓рдХрд▓реЗ рд╕реБрд╕реНрдд рдПрдЬреЗрдиреНрдЯрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рд╕рдзреИрдВ рдкреНрд░рддреАрдХреНрд╖рд╛ рдирдЧрд░реЛрд╕реНред

**рдЪрд░рдгрд╣рд░реВ**:

1. **рд╕рдЩреНрдХрд▓рдХрдорд╛ рдЯрд╛рдЗрдордЖрдЙрдЯ рдЯреНрд░реНрдпрд╛рдХрд┐рдЩ рдердкреНрдиреБрд╣реЛрд╕реН:**

```python
from datetime import datetime, timedelta

task_timeouts = {}  # рдХрд╛рд░реНрдп_рдЖрдИрдбреА -> рд╕рдорд╛рдкреНрддрд┐_рд╕рдордп

def process_result(message_data):
    task_id = message_data['task_id']
    
    # рдкрд╣рд┐рд▓реЛ рдирддрд┐рдЬрд╛рдорд╛ рд╕рдордп рд╕реАрдорд╛ рд╕реЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    if task_id not in task_timeouts:
        task_timeouts[task_id] = datetime.utcnow() + timedelta(seconds=30)
    
    task_results[task_id].append({
        'agent': message_data['agent_type'],
        'data': message_data['result']
    })
    
    # рдкреВрд░рд╛ рднрдпреЛ рд╡рд╛ рд╕рдордп рд╕рдорд╛рдкреНрдд рднрдпреЛ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    if len(task_results[task_id]) == expected_agents or \
       datetime.utcnow() > task_timeouts[task_id]:
        
        print(f"ЁЯУК Aggregating with {len(task_results[task_id])}/{expected_agents} results")
        
        aggregated = {
            'query': message_data['query'],
            'sources': task_results[task_id],
            'completed_agents': len(task_results[task_id]),
            'timed_out': len(task_results[task_id]) < expected_agents
        }
        
        state_manager.complete_task(task_id, aggregated)
        
        # рд╕рдлрд╛рдЗ рдЧрд░реНрдиреБрд╣реЛрд╕реН
        del task_results[task_id]
        del task_timeouts[task_id]
```

2. **рдХреГрддреНрд░рд┐рдо рдврд┐рд▓рд╛рдЗрд╣рд░реВрд╕рдБрдЧ рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН:**

```python
# рдПрдХ рдПрдЬреЗрдиреНрдЯрдорд╛ рдврд┐рд▓реЛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЕрдиреБрдХрд░рдг рдЧрд░реНрди рдврд┐рд▓рд╛рдЗ рдердкреНрдиреБрд╣реЛрд╕реН
import time
time.sleep(35)  # рейреж-рд╕реЗрдХреЗрдиреНрдбрдХреЛ рд╕рдордпрд╕реАрдорд╛ рдирд╛рдШреНрдпреЛ
```

3. **рддреИрдирд╛рде рд░ рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН:**

```bash
azd deploy aggregator

# рдХрд╛рд░реНрдп рдкреЗрд╢ рдЧрд░реНрдиреБрд╣реЛрд╕реН
curl -X POST $ORCHESTRATOR_URL/research-parallel \
  -H "Content-Type: application/json" \
  -d '{"query": "AI safety research"}'

# рейреж рд╕реЗрдХреЗрдиреНрдб рдкрдЫрд┐ рдкрд░рд┐рдгрд╛рдо рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
curl $ORCHESTRATOR_URL/task/$TASK_ID
```

**тЬЕ рд╕рдлрд▓рддрд╛ рдорд╛рдкрджрдгреНрдб:**
- тЬЕ рдХрд╛рд░реНрдп рейреж рд╕реЗрдХреЗрдиреНрдб рдкрдЫрд┐ рдкреВрд░рд╛ рд╣реБрдиреНрдЫ, рднрд▓реЗ рдкрдирд┐ рдПрдЬреЗрдиреНрдЯрд╣рд░реВ рдЕрдкреВрд░реНрдг рдЫрдиреН
- тЬЕ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдЖрдВрд╢рд┐рдХ рдкрд░рд┐рдгрд╛рдорд╣рд░реВ рд╕рдВрдХреЗрдд рдЧрд░реНрджрдЫ (`"timed_out": true`)
- тЬЕ рдЙрдкрд▓рдмреНрдз рдкрд░рд┐рдгрд╛рдорд╣рд░реВ рдлрд┐рд░реНрддрд╛ рдЧрд░рд┐рдиреНрдЫ (рек рдордзреНрдпреЗ рей рдПрдЬреЗрдиреНрдЯрд╣рд░реВ)

**рд╕рдордп**: реиреж-реирел рдорд┐рдиреЗрдЯ

---

### рдЕрднреНрдпрд╛рд╕ реи: рдкреБрди: рдкреНрд░рдпрд╛рд╕ рддрд░реНрдХ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН тнРтнРтнР (рдЙрдиреНрдирдд)

**рдЙрджреНрджреЗрд╢реНрдп**: рдЕрд╕рдлрд▓ рдПрдЬреЗрдиреНрдЯ рдХрд╛рд░реНрдпрд╣рд░реВ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдкрдорд╛ рдкреБрди: рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

**рдЪрд░рдгрд╣рд░реВ**:

1. **рд╕рдордиреНрд╡рдпрдХрд░реНрддрд╛рдорд╛ рдкреБрди: рдкреНрд░рдпрд╛рд╕ рдЯреНрд░реНрдпрд╛рдХрд┐рдЩ рдердкреНрдиреБрд╣реЛрд╕реН:**

```python
from dataclasses import dataclass
from typing import Dict

@dataclass
class RetryConfig:
    max_retries: int = 3
    backoff_seconds: int = 5

retry_counts: Dict[str, int] = {}  # рд╕рдиреНрджреЗрд╢_рдЖрдИрдбреА -> рдкреБрди: рдкреНрд░рдпрд╛рд╕ рдЧрдгрдирд╛

def send_with_retry(queue_name: str, message_data: dict, retry_config: RetryConfig):
    """Send message with retry metadata"""
    message_id = message_data.get('message_id', str(uuid.uuid4()))
    message_data['message_id'] = message_id
    message_data['retry_count'] = retry_counts.get(message_id, 0)
    message_data['max_retries'] = retry_config.max_retries
    
    sender = servicebus_client.get_queue_sender(queue_name)
    message = ServiceBusMessage(
        body=json.dumps(message_data),
        content_type='application/json',
        message_id=message_id
    )
    
    with sender:
        sender.send_messages(message)
```

2. **рдПрдЬреЗрдиреНрдЯрд╣рд░реВрдорд╛ рдкреБрди: рдкреНрд░рдпрд╛рд╕ рд╣реНрдпрд╛рдиреНрдбрд▓рд░ рдердкреНрдиреБрд╣реЛрд╕реН:**

```python
def process_with_retry(message, receiver, process_func):
    """Process message with automatic retry on failure"""
    try:
        message_data = json.loads(str(message))
        
        # рд╕рдиреНрджреЗрд╢ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН
        process_func(message_data)
        
        # рд╕рдлрд▓ - рдкреВрд░рд╛ рднрдпреЛ
        receiver.complete_message(message)
        
    except Exception as e:
        message_id = message.message_id
        retry_count = message_data.get('retry_count', 0)
        max_retries = message_data.get('max_retries', 3)
        
        if retry_count < max_retries:
            # рдкреБрди: рдкреНрд░рдпрд╛рд╕: рддреНрдпрд╛рдЧреНрдиреБрд╣реЛрд╕реН рд░ рдЧрдгрдирд╛ рдмрдврд╛рдПрд░ рдкреБрди: рдкрдЩреНрдХреНрддрд┐рдмрджреНрдз рдЧрд░реНрдиреБрд╣реЛрд╕реН
            print(f"тЪая╕П Retry {retry_count + 1}/{max_retries} for message {message_id}")
            
            message_data['retry_count'] = retry_count + 1
            
            # рд╕рдорд╛рди рдкрдЩреНрдХреНрддрд┐рдорд╛ рдврд┐рд▓рд╛рдЗрд╕рд╣рд┐рдд рдлрд┐рд░реНрддрд╛ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН
            time.sleep(5 * (retry_count + 1))  # рдШрд╛рддрд╛рдВрдХ рдмреНрдпрд╛рдХрдЕрдл
            send_with_retry(queue_name, message_data, RetryConfig())
            
            receiver.complete_message(message)  # рдореВрд▓ рд╣рдЯрд╛рдЙрдиреБрд╣реЛрд╕реН
        else:
            # рдЕрдзрд┐рдХрддрдо рдкреБрди: рдкреНрд░рдпрд╛рд╕ рдкрд╛рд░ рднрдпреЛ - рдореГрдд рдкрддреНрд░ рдкрдЩреНрдХреНрддрд┐рдорд╛ рд╕рд╛рд░реНрдиреБрд╣реЛрд╕реН
            print(f"тЭМ Max retries exceeded for message {message_id}")
            receiver.dead_letter_message(
                message,
                reason="MaxRetriesExceeded",
                error_description=str(e)
            )
```

3. **рдбреЗрдб рд▓реЗрдЯрд░ рдкрдЩреНрдХреНрддрд┐ рдЕрдиреБрдЧрдорди рдЧрд░реНрдиреБрд╣реЛрд╕реН:**

```python
def monitor_dead_letters():
    """Check dead letter queue for failed messages"""
    receiver = servicebus_client.get_queue_receiver(
        'research-queue',
        sub_queue='deadletter'
    )
    
    with receiver:
        messages = receiver.receive_messages(max_wait_time=5)
        for message in messages:
            print(f"тШая╕П Dead letter: {message.message_id}")
            print(f"Reason: {message.dead_letter_reason}")
            print(f"Description: {message.dead_letter_error_description}")
```

**тЬЕ рд╕рдлрд▓рддрд╛ рдорд╛рдкрджрдгреНрдб:**
- тЬЕ рдЕрд╕рдлрд▓ рдХрд╛рд░реНрдпрд╣рд░реВ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдкрдорд╛ рдкреБрди: рдкреНрд░рдпрд╛рд╕ рд╣реБрдиреНрдЫрдиреН (рей рдкрдЯрдХрд╕рдореНрдо)
- тЬЕ рдкреБрди: рдкреНрд░рдпрд╛рд╕рд╣рд░реВ рдмреАрдЪ рдШрд╛рддреАрдп рдкрдЫрд╛рдбрд┐ (рел рд╕реЗрдХреЗрдиреНрдб, резреж рд╕реЗрдХреЗрдиреНрдб, резрел рд╕реЗрдХреЗрдиреНрдб)
- тЬЕ рдЕрдзрд┐рдХрддрдо рдкреБрди: рдкреНрд░рдпрд╛рд╕ рдкрдЫрд┐, рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдбреЗрдб рд▓реЗрдЯрд░ рдкрдЩреНрдХреНрддрд┐рдорд╛ рдЬрд╛рдиреНрдЫрдиреН
- тЬЕ рдбреЗрдб рд▓реЗрдЯрд░ рдкрдЩреНрдХреНрддрд┐ рдЕрдиреБрдЧрдорди рд░ рдкреБрди: рдкреНрд▓реЗ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫ

**рд╕рдордп**: рейреж-рекреж рдорд┐рдиреЗрдЯ

---

### рдЕрднреНрдпрд╛рд╕ рей: рд╕рд░реНрдХрд┐рдЯ рдмреНрд░реЗрдХрд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН тнРтнРтнР (рдЙрдиреНрдирдд)

**рдЙрджреНрджреЗрд╢реНрдп**: рдЕрд╕рдлрд▓ рдПрдЬреЗрдиреНрдЯрд╣рд░реВрдорд╛ рдЕрдиреБрд░реЛрдзрд╣рд░реВ рд░реЛрдХреНрди рдХреНрдпрд╛рд╕реНрдХреЗрдбрд┐рдЩ рдЕрд╕рдлрд▓рддрд╛рд╣рд░реВ рд░реЛрдХреНрдиреБрд╣реЛрд╕реНред

**рдЪрд░рдгрд╣рд░реВ**:

1. **рд╕рд░реНрдХрд┐рдЯ рдмреНрд░реЗрдХрд░ рдХрдХреНрд╖рд╛ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:**

```python
from enum import Enum
from datetime import datetime, timedelta

class CircuitState(Enum):
    CLOSED = "closed"      # рд╕рд╛рдорд╛рдиреНрдп рд╕рдЮреНрдЪрд╛рд▓рди
    OPEN = "open"          # рдЕрд╕рдлрд▓, рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    HALF_OPEN = "half_open"  # рдкреБрди: рдкреНрд░рд╛рдкреНрдд рднрдПрдХреЛ рдЫ рдХрд┐ рдЫреИрди рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрджреИ

class CircuitBreaker:
    def __init__(self, failure_threshold=5, timeout_seconds=60):
        self.failure_threshold = failure_threshold
        self.timeout_seconds = timeout_seconds
        self.failure_count = 0
        self.last_failure_time = None
        self.state = CircuitState.CLOSED
    
    def call(self, func):
        """Execute function with circuit breaker protection"""
        if self.state == CircuitState.OPEN:
            # рд╕рдордп рд╕реАрдорд╛ рд╕рдорд╛рдкреНрдд рднрдПрдХреЛ рдЫ рдХрд┐ рдЫреИрди рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
            if datetime.utcnow() - self.last_failure_time > timedelta(seconds=self.timeout_seconds):
                self.state = CircuitState.HALF_OPEN
                print("ЁЯФД Circuit breaker: HALF_OPEN (testing)")
            else:
                raise Exception(f"Circuit breaker OPEN for agent. Try again in {self.timeout_seconds}s")
        
        try:
            result = func()
            
            # рд╕рдлрд▓
            if self.state == CircuitState.HALF_OPEN:
                self.state = CircuitState.CLOSED
                self.failure_count = 0
                print("тЬЕ Circuit breaker: CLOSED (recovered)")
            
            return result
            
        except Exception as e:
            self.failure_count += 1
            self.last_failure_time = datetime.utcnow()
            
            if self.failure_count >= self.failure_threshold:
                self.state = CircuitState.OPEN
                print(f"ЁЯФ┤ Circuit breaker: OPEN (too many failures)")
            
            raise e
```

2. **рдПрдЬреЗрдиреНрдЯ рдХрд▓рд╣рд░реВрдорд╛ рд▓рд╛рдЧреВ рдЧрд░реНрдиреБрд╣реЛрд╕реН:**

```python
# рдЕрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯрд░рдорд╛
agent_circuits = {
    'web': CircuitBreaker(failure_threshold=5, timeout_seconds=60),
    'academic': CircuitBreaker(failure_threshold=5, timeout_seconds=60),
    'news': CircuitBreaker(failure_threshold=5, timeout_seconds=60),
    'social': CircuitBreaker(failure_threshold=5, timeout_seconds=60)
}

def send_to_agent(agent_type, message_data):
    """Send with circuit breaker protection"""
    circuit = agent_circuits[agent_type]
    
    try:
        circuit.call(lambda: send_message(agent_type, message_data))
    except Exception as e:
        print(f"тЪая╕П Skipping {agent_type} agent: {e}")
        # рдЕрдиреНрдп рдПрдЬреЗрдиреНрдЯрд╣рд░реВрд╕рдБрдЧ рдЬрд╛рд░реА рд░рд╛рдЦреНрдиреБрд╣реЛрд╕реН
```

3. **рд╕рд░реНрдХрд┐рдЯ рдмреНрд░реЗрдХрд░ рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН:**

```bash
# рдмрд╛рд░рдореНрдмрд╛рд░ рдЕрд╕рдлрд▓рддрд╛ рдЕрдиреБрдХрд░рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН (рдПрдХ рдПрдЬреЗрдиреНрдЯ рд░реЛрдХреНрдиреБрд╣реЛрд╕реН)
az containerapp stop --name web-research-agent --resource-group rg-agents

# рдзреЗрд░реИ рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН
for i in {1..10}; do
  curl -X POST $ORCHESTRATOR_URL/research-parallel \
    -H "Content-Type: application/json" \
    -d '{"query": "test query '$i'"}'
  sleep 2
done

# рд▓рдЧрд╣рд░реВ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН - рел рдЕрд╕рдлрд▓рддрд╛рдкрдЫрд┐ рд╕рд░реНрдХрд┐рдЯ рдЦреБрд▓рд╛ рджреЗрдЦрд┐рдиреБ рдкрд░реНрдЫ
azd logs orchestrator --tail 50
```

**тЬЕ рд╕рдлрд▓рддрд╛ рдорд╛рдкрджрдгреНрдб:**
- тЬЕ рел рдЕрд╕рдлрд▓рддрд╛рдкрдЫрд┐, рд╕рд░реНрдХрд┐рдЯ рдЦреБрд▓реНрдЫ (рдЕрдиреБрд░реЛрдз рдЕрд╕реНрд╡реАрдХрд╛рд░ рдЧрд░реНрджрдЫ)
- тЬЕ ремреж рд╕реЗрдХреЗрдиреНрдб рдкрдЫрд┐, рд╕рд░реНрдХрд┐рдЯ рдЖрдзрд╛-рдЦреБрд▓рд╛ рдЬрд╛рдиреНрдЫ (рдкреБрди: рдкреНрд░рд╛рдкреНрддрд┐ рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрджрдЫ)
- тЬЕ рдЕрдиреНрдп рдПрдЬреЗрдиреНрдЯрд╣рд░реВ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдкрдорд╛ рдХрд╛рдо рдЧрд░реНрди рдЬрд╛рд░реА рд░рд╛рдЦреНрдЫрдиреН
- тЬЕ рдПрдЬреЗрдиреНрдЯ рдкреБрди: рдкреНрд░рд╛рдкреНрдд рд╣реБрдБрджрд╛ рд╕рд░реНрдХрд┐рдЯ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдкрдорд╛ рдмрдиреНрдж рд╣реБрдиреНрдЫ

**рд╕рдордп**: рекреж-релреж рдорд┐рдиреЗрдЯ

---

## рдЕрдиреБрдЧрдорди рд░ рдбрд┐рдмрдЧрд┐рдЩ

### рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕рдХреЛ рд╕рд╛рде рд╡рд┐рддрд░рд┐рдд рдЯреНрд░реЗрд╕рд┐рдЩ

**рдлрд╛рдЗрд▓: `src/shared/tracing.py`**

```python
from opencensus.ext.azure.log_exporter import AzureLogHandler
from opencensus.ext.azure.trace_exporter import AzureExporter
from opencensus.trace import config_integration
from opencensus.trace.tracer import Tracer
from opencensus.trace.samplers import AlwaysOnSampler
import logging
import os

# рдЯреНрд░реЗрд╕рд┐рдЩ рдХрдиреНрдлрд┐рдЧрд░ рдЧрд░реНрдиреБрд╣реЛрд╕реН
config_integration.trace_integrations(['requests', 'logging'])

connection_string = os.environ.get('APPLICATIONINSIGHTS_CONNECTION_STRING')

# рдЯреНрд░реЗрд╕рд░ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН
tracer = Tracer(
    exporter=AzureExporter(connection_string=connection_string),
    sampler=AlwaysOnSampler()
)

# рд▓рдЧрд┐рдЩ рдХрдиреНрдлрд┐рдЧрд░ рдЧрд░реНрдиреБрд╣реЛрд╕реН
logger = logging.getLogger(__name__)
logger.addHandler(AzureLogHandler(connection_string=connection_string))
logger.setLevel(logging.INFO)

def trace_agent_call(agent_name, task_id, operation):
    """Trace agent operations"""
    with tracer.span(name=f'{agent_name}.{operation}') as span:
        span.add_attribute('agent', agent_name)
        span.add_attribute('task_id', task_id)
        span.add_attribute('operation', operation)
        
        try:
            result = operation()
            span.add_attribute('status', 'success')
            return result
        except Exception as e:
            span.add_attribute('status', 'error')
            span.add_attribute('error', str(e))
            raise
```

### рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕ рдХреНрд╡реЗрд░реАрд╣рд░реВ

**рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рдХрд╛рд░реНрдпрдкреНрд░рд╡рд╛рд╣рд╣рд░реВ рдЯреНрд░реНрдпрд╛рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реН:**

```kusto
// Trace complete workflow for a task
traces
| where customDimensions.task_id == "a1b2c3d4-..."
| project timestamp, message, customDimensions.agent, customDimensions.operation
| order by timestamp asc
```

**рдПрдЬреЗрдиреНрдЯ рдкреНрд░рджрд░реНрд╢рди рддреБрд▓рдирд╛:**

```kusto
// Compare agent execution times
dependencies
| where name contains "agent"
| summarize 
    avg_duration = avg(duration),
    p95_duration = percentile(duration, 95),
    count = count()
  by agent = tostring(customDimensions.agent)
| order by avg_duration desc
```

**рдЕрд╕рдлрд▓рддрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг:**

```kusto
// Find which agents fail most
exceptions
| where customDimensions.agent != ""
| summarize 
    failure_count = count(),
    unique_errors = dcount(outerMessage)
  by agent = tostring(customDimensions.agent)
| order by failure_count desc
```

---

## рд▓рд╛рдЧрдд рд╡рд┐рд╢реНрд▓реЗрд╖рдг

### рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рдкреНрд░рдгрд╛рд▓реА рд▓рд╛рдЧрдд (рдорд╛рд╕рд┐рдХ рдЕрдиреБрдорд╛рди)

| рдШрдЯрдХ | рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди | рд▓рд╛рдЧрдд |
|-----------|--------------|------|
| **рд╕рдордиреНрд╡рдпрдХрд░реНрддрд╛** | рез рдХрдиреНрдЯреЗрдирд░ рдПрдк (рез vCPU, реиGB) | $рейреж-релреж |
| **рек рдПрдЬреЗрдиреНрдЯрд╣рд░реВ** | рек рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕ (реж.рел vCPU, резGB рдкреНрд░рддреНрдпреЗрдХ) | $ремреж-резреиреж |
| **рд╕реЗрд╡рд╛ рдмрд╕** | рдорд╛рдирдХ рд╕реНрддрд░, резрежM рд╕рдиреНрджреЗрд╢рд╣рд░реВ | $резреж-реиреж |
| **рдХреЛрд╕реНрдореЛрд╕ DB** | рд╕рд░реНрднрд░рд▓реЗрд╕, релGB рднрдгреНрдбрд╛рд░рдг, резM RUs | $реирел-релреж |
| **рдмреНрд▓рдм рднрдгреНрдбрд╛рд░рдг** | резрежGB рднрдгреНрдбрд╛рд░рдг, резрежрежK рдЕрдкрд░реЗрд╕рдирд╣рд░реВ | $рел-резреж |
| **рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕** | релGB рдЗрдиреНрдЯреЗрдХреНрд╕рди | $резреж-резрел |
| **Azure OpenAI** | GPT-4, резрежM рдЯреЛрдХрди | $резрежреж-рейрежреж |
| **рдХреБрд▓** | | **$реирекреж-релремрел/рдорд╣рд┐рдирд╛** |

### рд▓рд╛рдЧрдд рдЕрдиреБрдХреВрд▓рди рд░рдгрдиреАрддрд┐рд╣рд░реВ

1. **рдЬрд╣рд╛рдБ рд╕рдореНрднрд╡ рдЫ, рд╕рд░реНрднрд░рд▓реЗрд╕ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН:**
   ```bicep
   // Cosmos DB serverless (no minimum cost)
   properties: {
     databaseAccountOfferType: 'Standard'
     capabilities: [{ name: 'EnableServerless' }]
   }
   ```

2. **рдПрдЬреЗрдиреНрдЯрд╣рд░реВрд▓рд╛рдИ рдирд┐рд╖реНрдХреНрд░рд┐рдп рд╣реБрдБрджрд╛ рд╢реВрдиреНрдпрдорд╛ рд╕реНрдХреЗрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реН:**
   ```bicep
   scale: {
     minReplicas: 0  // Scale to zero when no messages
     maxReplicas: 10
   }
   ```

3. **рд╕реЗрд╡рд╛ рдмрд╕рдХреЛ рд▓рд╛рдЧрд┐ рдмреНрдпрд╛рдЪрд┐рдЩ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН:**
   ```python
   # рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдмреНрдпрд╛рдЪрдорд╛ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН (рд╕рд╕реНрддреЛ)
   sender.send_messages([message1, message2, message3])
   ```

4. **рдмрд╛рд░рдореНрдмрд╛рд░ рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдПрдХрд╛ рдкрд░рд┐рдгрд╛рдорд╣рд░реВ рдХреНрдпрд╛рд╕ рдЧрд░реНрдиреБрд╣реЛрд╕реН:**
   ```python
   # Azure Cache рдХреЛ рд▓рд╛рдЧрд┐ Redis рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН
   if cache.exists(query_hash):
       return cache.get(query_hash)
   ```

---

## рдЙрддреНрдХреГрд╖реНрдЯ рдЕрднреНрдпрд╛рд╕рд╣рд░реВ

### тЬЕ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

1. **рдЗрдбреЗрдореНрдкреЛрдЯреЗрдиреНрдЯ рдЕрдкрд░реЗрд╕рдирд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН**
   ```python
   # рдПрдЬреЗрдиреНрдЯрд▓реЗ рдПрдЙрдЯреИ рд╕рдиреНрджреЗрд╢ рдзреЗрд░реИ рдкрдЯрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдкрдорд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░реНрди рд╕рдХреНрдЫ
   def process_task(task_id):
       if state_manager.task_exists(task_id):
           print(f"Task {task_id} already processed, skipping")
           return
       # рдХрд╛рд░реНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░реНрджреИ...
   ```

2. **рд╡реНрдпрд╛рдкрдХ рд▓рдЧрд┐рдЩ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН**
   ```python
   logger.info(f"Agent: {agent_name}, Task: {task_id}, Action: {action}")
   ```

3. **рд╕рд╣рд╕рдВрдмрдВрдз рдЖрдИрдбреАрд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН**
   ```python
   # рд╕рдореНрдкреВрд░реНрдг рдХрд╛рд░реНрдпрдкреНрд░рд╡рд╛рд╣рдорд╛ task_id рдкрд╛рд╕ рдЧрд░реНрдиреБрд╣реЛрд╕реН
   message_data = {
       'task_id': task_id,  # рд╕рдореНрдмрдиреНрдз рдЖрдИрдбреА
       'timestamp': datetime.utcnow().isoformat()
   }
   ```

4.
## рд╕рдорд╕реНрдпрд╛ рд╕рдорд╛рдзрд╛рди рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛

### рд╕рдорд╕реНрдпрд╛: рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкрдВрдХреНрддрд┐рдорд╛ рдЕрдбреНрдХрд┐рдПрдХрд╛ рдЫрдиреН

**рд▓рдХреНрд╖рдгрд╣рд░реВ:**
- рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкрдВрдХреНрддрд┐рдорд╛ рдЬрдореНрдорд╛ рд╣реБрдиреНрдЫрдиреН
- рдПрдЬреЗрдиреНрдЯрд╣рд░реВрд▓реЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░реНрджреИрдирдиреН
- рдХрд╛рд░реНрдпрдХреЛ рд╕реНрдерд┐рддрд┐ "pending" рдорд╛ рдЕрдбреНрдХрд┐рдПрдХреЛ рдЫ

**рдирд┐рджрд╛рди:**
```bash
# рдкрдВрдХреНрддрд┐рдХреЛ рдЧрд╣рд┐рд░рд╛рдИ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
az servicebus queue show \
  --namespace-name mybus \
  --name research-tasks \
  --query "countDetails"

# рдПрдЬреЗрдиреНрдЯрдХреЛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd logs research-agent --tail 50
```

**рд╕рдорд╛рдзрд╛рдирд╣рд░реВ:**

1. **рдПрдЬреЗрдиреНрдЯ рдкреНрд░рддрд┐рдХреГрддрд┐рд╣рд░реВ рдмрдврд╛рдЙрдиреБрд╣реЛрд╕реН:**
   ```bash
   az containerapp update \
     --name research-agent \
     --min-replicas 3 \
     --max-replicas 10
   ```

2. **рдбреЗрдб рд▓реЗрдЯрд░ рдкрдВрдХреНрддрд┐ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН:**
   ```bash
   az servicebus queue show \
     --namespace-name mybus \
     --name research-tasks \
     --query "countDetails.deadLetterMessageCount"
   ```

---

### рд╕рдорд╕реНрдпрд╛: рдХрд╛рд░реНрдп рд╕рдордп рд╕рдорд╛рдкреНрдд/рдХрд╣рд┐рд▓реНрдпреИ рдкреВрд░рд╛ рд╣реБрдБрджреИрди

**рд▓рдХреНрд╖рдгрд╣рд░реВ:**
- рдХрд╛рд░реНрдпрдХреЛ рд╕реНрдерд┐рддрд┐ "in_progress" рдорд╛ рд░рд╣рдиреНрдЫ
- рдХреЗрд╣реА рдПрдЬреЗрдиреНрдЯрд╣рд░реВ рдкреВрд░рд╛ рдЧрд░реНрдЫрдиреН, рдЕрд░реВрд▓реЗ рдЧрд░реНрджреИрдирдиреН
- рдХреБрдиреИ рддреНрд░реБрдЯрд┐ рд╕рдиреНрджреЗрд╢ рдЫреИрди

**рдирд┐рджрд╛рди:**
```bash
# рдХрд╛рд░реНрдпрдХреЛ рдЕрд╡рд╕реНрдерд╛ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
curl $ORCHESTRATOR_URL/task/$TASK_ID

# рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
# рдХреНрд╡реЗрд░реА рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН: traces | where customDimensions.task_id == "..."
```

**рд╕рдорд╛рдзрд╛рдирд╣рд░реВ:**

1. **рдПрдЧреНрд░рд┐рдЧреЗрдЯрд░рдорд╛ рд╕рдордп рд╕реАрдорд╛ рд▓рд╛рдЧреВ рдЧрд░реНрдиреБрд╣реЛрд╕реН (рдЕрднреНрдпрд╛рд╕ 1)**

2. **рдПрдЬреЗрдиреНрдЯ рд╡рд┐рдлрд▓рддрд╛рд╣рд░реВ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН:**
   ```bash
   azd logs --follow | grep "ERROR\|FAIL"
   ```

3. **рд╕рдмреИ рдПрдЬреЗрдиреНрдЯрд╣рд░реВ рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рдЫрдиреН рднрдиреА рдкреБрд╖реНрдЯрд┐ рдЧрд░реНрдиреБрд╣реЛрд╕реН:**
   ```bash
   az containerapp list \
     --resource-group rg-agents \
     --query "[].{name:name, status:properties.runningStatus}"
   ```

---

## рдердк рдЬрд╛рдиреНрдиреБрд╣реЛрд╕реН

### рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рджрд╕реНрддрд╛рд╡реЗрдЬ
- [Azure Service Bus](https://learn.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview)
- [Cosmos DB](https://learn.microsoft.com/azure/cosmos-db/introduction)
- [Container Apps DAPR](https://learn.microsoft.com/azure/container-apps/dapr-overview)
- [Multi-Agent Design Patterns](https://learn.microsoft.com/azure/architecture/guide/ai/multi-agent-systems)

### рдпрд╕ рдкрд╛рдардХреНрд░рдордорд╛ рдЕрд░реНрдХреЛ рдЪрд░рдг
- тЖР рдЕрдШрд┐рд▓реНрд▓реЛ: [рдХреНрд╖рдорддрд╛ рдпреЛрдЬрдирд╛](capacity-planning.md)
- тЖТ рдЕрд░реНрдХреЛ: [SKU рдЪрдпрди](sku-selection.md)
- ЁЯПа [рдкрд╛рдардХреНрд░рдо рдЧреГрд╣рдкреГрд╖реНрда](../../README.md)

### рд╕рдореНрдмрдиреНрдзрд┐рдд рдЙрджрд╛рд╣рд░рдгрд╣рд░реВ
- [рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдЙрджрд╛рд╣рд░рдг](../../../../examples/microservices) - рд╕реЗрд╡рд╛ рд╕рдЮреНрдЪрд╛рд░ рдврд╛рдБрдЪрд╛рд╣рд░реВ
- [Azure OpenAI рдЙрджрд╛рд╣рд░рдг](../../../../examples/azure-openai-chat) - рдПрдЖрдИ рдПрдХреАрдХрд░рдг

---

## рд╕рд╛рд░рд╛рдВрд╢

**рддрдкрд╛рдИрдВрд▓реЗ рд╕рд┐рдХреНрдиреБрднрдпреЛ:**
- тЬЕ рдкрд╛рдБрдЪ рд╕рдордиреНрд╡рдп рдврд╛рдБрдЪрд╛рд╣рд░реВ (рдХреНрд░рдорд┐рдХ, рд╕рдорд╛рдирд╛рдиреНрддрд░, рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд, рдШрдЯрдирд╛-рдЪрд╛рд▓рд┐рдд, рд╕рд╣рдорддрд┐)
- тЬЕ Azure рдорд╛ рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ (Service Bus, Cosmos DB, Container Apps)
- тЬЕ рд╡рд┐рддрд░рд┐рдд рдПрдЬреЗрдиреНрдЯрд╣рд░реВрдорд╛ рд░рд╛рдЬреНрдп рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди
- тЬЕ рд╕рдордп рд╕реАрдорд╛ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди, рдкреБрди: рдкреНрд░рдпрд╛рд╕, рд░ рд╕рд░реНрдХрд┐рдЯ рдмреНрд░реЗрдХрд░рд╣рд░реВ
- тЬЕ рд╡рд┐рддрд░рд┐рдд рдкреНрд░рдгрд╛рд▓реАрд╣рд░реВрдХреЛ рдирд┐рдЧрд░рд╛рдиреА рд░ рдбрд┐рдмрдЧрд┐рдЩ
- тЬЕ рд▓рд╛рдЧрдд рдЕрдиреБрдХреВрд▓рди рд░рдгрдиреАрддрд┐рд╣рд░реВ

**рдореБрдЦреНрдп рдХреБрд░рд╛:**
1. **рд╕рд╣реА рдврд╛рдБрдЪрд╛ рдЪрдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН** - рдХреНрд░рдорд┐рдХ рдХреНрд░рдордмрджреНрдз рдХрд╛рд░реНрдпрдкреНрд░рд╡рд╛рд╣рдХрд╛ рд▓рд╛рдЧрд┐, рд╕рдорд╛рдирд╛рдиреНрддрд░ рдЧрддрд┐ рд▓рд╛рдЧрд┐, рдШрдЯрдирд╛-рдЪрд╛рд▓рд┐рдд рд▓рдЪрд┐рд▓реЛрдкрдирдХрд╛ рд▓рд╛рдЧрд┐
2. **рд░рд╛рдЬреНрдп рд╕рд╛рд╡рдзрд╛рдиреАрдкреВрд░реНрд╡рдХ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реН** - рд╕рд╛рдЭрд╛ рд░рд╛рдЬреНрдпрдХрд╛ рд▓рд╛рдЧрд┐ Cosmos DB рд╡рд╛ рдпрд╕реНрддреИ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН
3. **рд╡рд┐рдлрд▓рддрд╛рд╣рд░реВ рд╕рдЬрд┐рд▓реИрд╕рдБрдЧ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реН** - рд╕рдордп рд╕реАрдорд╛, рдкреБрди: рдкреНрд░рдпрд╛рд╕, рд╕рд░реНрдХрд┐рдЯ рдмреНрд░реЗрдХрд░рд╣рд░реВ, рдбреЗрдб рд▓реЗрдЯрд░ рдкрдВрдХреНрддрд┐рд╣рд░реВ
4. **рд╕рдмреИ рдХреБрд░рд╛ рдирд┐рдЧрд░рд╛рдиреА рдЧрд░реНрдиреБрд╣реЛрд╕реН** - рд╡рд┐рддрд░рд┐рдд рдЯреНрд░реЗрд╕рд┐рдЩ рдбрд┐рдмрдЧрд┐рдЩрдХрд╛ рд▓рд╛рдЧрд┐ рдЖрд╡рд╢реНрдпрдХ рдЫ
5. **рд▓рд╛рдЧрдд рдЕрдиреБрдХреВрд▓рди рдЧрд░реНрдиреБрд╣реЛрд╕реН** - рд╢реВрдиреНрдпрдорд╛ рд╕реНрдХреЗрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реН, рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН, рдХреНрдпрд╛рд╕рд┐рдЩ рд▓рд╛рдЧреВ рдЧрд░реНрдиреБрд╣реЛрд╕реН

**рдЕрд░реНрдХреЛ рдЪрд░рдгрд╣рд░реВ:**
1. рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЕрднреНрдпрд╛рд╕рд╣рд░реВ рдкреВрд░рд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН
2. рдЖрдлреНрдиреЛ рдкреНрд░рдпреЛрдЧрдХреЛ рд▓рд╛рдЧрд┐ рдмрд╣реБ-рдПрдЬреЗрдиреНрдЯ рдкреНрд░рдгрд╛рд▓реА рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН
3. [SKU рдЪрдпрди](sku-selection.md) рдЕрдзреНрдпрдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН рдкреНрд░рджрд░реНрд╢рди рд░ рд▓рд╛рдЧрдд рдЕрдиреБрдХреВрд▓рди рдЧрд░реНрди

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпреЛ рджрд╕реНрддрд╛рд╡реЗрдЬ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЕрдиреБрд╡рд╛рдж рдЧрд░рд┐рдПрдХреЛ рдЫред рд╣рд╛рдореА рд╢реБрджреНрдзрддрд╛рдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫреМрдВ, рддрд░ рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджрд┐рдиреБрд╣реЛрд╕реН рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рджрдорд╛ рддреНрд░реБрдЯрд┐рд╣рд░реВ рд╡рд╛ рдЕрд╢реБрджреНрдзрддрд╛рд╣рд░реВ рд╣реБрди рд╕рдХреНрдЫред рдпрд╕рдХреЛ рдореВрд▓ рднрд╛рд╖рд╛ рдорд╛ рд░рд╣реЗрдХреЛ рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд▓рд╛рдИ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд┐рдиреБрдкрд░реНрдЫред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реАрдХреЛ рд▓рд╛рдЧрд┐, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рд╕рд┐рдлрд╛рд░рд┐рд╕ рдЧрд░рд┐рдиреНрдЫред рдпрд╕ рдЕрдиреБрд╡рд╛рджрдХреЛ рдкреНрд░рдпреЛрдЧрдмрд╛рдЯ рдЙрддреНрдкрдиреНрди рд╣реБрдиреЗ рдХреБрдиреИ рдкрдирд┐ рдЧрд▓рддрдлрд╣рдореА рд╡рд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛рдХреЛ рд▓рд╛рдЧрд┐ рд╣рд╛рдореА рдЬрд┐рдореНрдореЗрд╡рд╛рд░ рд╣реБрдиреЗрдЫреИрдиреМрдВред
<!-- CO-OP TRANSLATOR DISCLAIMER END -->