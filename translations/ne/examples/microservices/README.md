# рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ - рдХрдиреНрдЯреЗрдирд░ рдПрдк рдЙрджрд╛рд╣рд░рдг

тП▒я╕П **рдЕрдиреБрдорд╛рдирд┐рдд рд╕рдордп**: реирел-рейрел рдорд┐рдиреЗрдЯ | ЁЯТ░ **рдЕрдиреБрдорд╛рдирд┐рдд рд▓рд╛рдЧрдд**: ~$релреж-резрежреж/рдорд╣рд┐рдирд╛ | тнР **рдЬрдЯрд┐рд▓рддрд╛**: рдЙрдиреНрдирдд

**ЁЯУЪ рд╕рд┐рдХреНрдиреЗ рдорд╛рд░реНрдЧ:**
- тЖР рдЕрдШрд┐рд▓реНрд▓реЛ: [рд╕рд╛рдзрд╛рд░рдг Flask API](../../../../examples/container-app/simple-flask-api) - рдПрдХрд▓ рдХрдиреНрдЯреЗрдирд░рдХреЛ рдЖрдзрд╛рд░рднреВрдд
- ЁЯОп **рддрдкрд╛рдИрдВ рдпрд╣рд╛рдБ рд╣реБрдиреБрд╣реБрдиреНрдЫ**: рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ (реи-рд╕рд░реНрднрд┐рд╕рдХреЛ рдЖрдзрд╛рд░)
- тЖТ рдЕрд░реНрдХреЛ: [AI рдПрдХреАрдХрд░рдг](../../../../docs/ai-foundry) - рддрдкрд╛рдИрдВрдХреЛ рд╕рд░реНрднрд┐рд╕рд╣рд░реВрдорд╛ рдмреБрджреНрдзрд┐рдорддреНрддрд╛ рдердкреНрдиреБрд╣реЛрд╕реН
- ЁЯПа [рдХреЛрд░реНрд╕ рд╣реЛрдо](../../README.md)

---

рдПрдХ **рд╕рд░рд▓ рддрд░ рдХрд╛рд░реНрдпрд╛рддреНрдордХ** рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ AZD CLI рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ Azure Container Apps рдорд╛ рддреИрдирд╛рдд рдЧрд░рд┐рдПрдХреЛред рдпреЛ рдЙрджрд╛рд╣рд░рдгрд▓реЗ рд╕рд░реНрднрд┐рд╕-рджреЗрдЦрд┐-рд╕рд░реНрднрд┐рд╕ рд╕рдВрдЪрд╛рд░, рдХрдиреНрдЯреЗрдирд░ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди, рд░ рдирд┐рдЧрд░рд╛рдиреАрд▓рд╛рдИ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ реи-рд╕рд░реНрднрд┐рд╕ рд╕реЗрдЯрдЕрдкрд╕рдБрдЧ рдкреНрд░рджрд░реНрд╢рди рдЧрд░реНрджрдЫред

> **ЁЯУЪ рд╕рд┐рдХреНрдиреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг**: рдпреЛ рдЙрджрд╛рд╣рд░рдг рдПрдХ рдиреНрдпреВрдирддрдо реи-рд╕рд░реНрднрд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ (API Gateway + Backend Service) рдмрд╛рдЯ рд╕реБрд░реБ рд╣реБрдиреНрдЫ рдЬреБрди рддрдкрд╛рдИрдВ рд╡рд╛рд╕реНрддрд╡рдореИ рддреИрдирд╛рдд рдЧрд░реНрди рд░ рд╕рд┐рдХреНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдпреЛ рдЖрдзрд╛рд░рд▓рд╛рдИ рдорд╛рд╕реНрдЯрд░ рдЧрд░реЗрдкрдЫрд┐, рд╣рд╛рдореА рдкреВрд░реНрдг рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдЗрдХреЛрд╕рд┐рд╕реНрдЯрдордорд╛ рд╡рд┐рд╕реНрддрд╛рд░рдХреЛ рд▓рд╛рдЧрд┐ рдорд╛рд░реНрдЧрджрд░реНрд╢рди рдкреНрд░рджрд╛рди рдЧрд░реНрджрдЫреМрдВред

## рддрдкрд╛рдИрдВрд▓реЗ рдХреЗ рд╕рд┐рдХреНрдиреБрд╣реБрдиреЗрдЫ

рдпреЛ рдЙрджрд╛рд╣рд░рдг рдкреВрд░рд╛ рдЧрд░реЗрд░, рддрдкрд╛рдИрдВ:
- Azure Container Apps рдорд╛ рдзреЗрд░реИ рдХрдиреНрдЯреЗрдирд░ рддреИрдирд╛рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН
- рдЖрдиреНрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдЩрдХреЛ рд╕рд╛рде рд╕рд░реНрднрд┐рд╕-рджреЗрдЦрд┐-рд╕рд░реНрднрд┐рд╕ рд╕рдВрдЪрд╛рд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
- рд╡рд╛рддрд╛рд╡рд░рдг-рдЖрдзрд╛рд░рд┐рдд рд╕реНрдХреЗрд▓рд┐рдЩ рд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдБрдЪрд╣рд░реВ рдХрдиреНрдлрд┐рдЧрд░ рдЧрд░реНрдиреБрд╣реЛрд╕реН
- Application Insights рдХреЛ рд╕рд╛рде рд╡рд┐рддрд░рд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╕рдирд╣рд░реВ рдирд┐рдЧрд░рд╛рдиреА рдЧрд░реНрдиреБрд╣реЛрд╕реН
- рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рддреИрдирд╛рддреА рдврд╛рдБрдЪрд╛рд╣рд░реВ рд░ рдЙрддреНрддрдо рдЕрднреНрдпрд╛рд╕рд╣рд░реВ рдмреБрдЭреНрдиреБрд╣реЛрд╕реН
- рд╕рд░рд▓рджреЗрдЦрд┐ рдЬрдЯрд┐рд▓ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рдорд╛ рдкреНрд░рдЧрддрд┐рд╢реАрд▓ рд╡рд┐рд╕реНрддрд╛рд░ рд╕рд┐рдХреНрдиреБрд╣реЛрд╕реН

## рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░

### рдЪрд░рдг рез: рд╣рд╛рдореА рдХреЗ рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрджреИрдЫреМрдВ (рдпреЛ рдЙрджрд╛рд╣рд░рдгрдорд╛ рд╕рдорд╛рд╡реЗрд╢)

```mermaid
graph TB
    Internet[рдЗрдиреНрдЯрд░рдиреЗрдЯ/рдкреНрд░рдпреЛрдЧрдХрд░реНрддрд╛]
    Gateway[рдПрдкреАрдЖрдИ рдЧреЗрдЯрд╡реЗ<br/>рдиреЛрдб.рдЬрдПрд╕ рдХрдиреНрдЯреЗрдирд░<br/>рдкреЛрд░реНрдЯ реорежреореж]
    Product[рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛<br/>рдкрд╛рдЗрдерди рдХрдиреНрдЯреЗрдирд░<br/>рдкреЛрд░реНрдЯ реорежрежреж]
    AppInsights[рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдЗрдирд╕рд╛рдЗрдЯреНрд╕<br/>рдЕрдиреБрдЧрдорди рд░ рд▓рдЧрд╣рд░реВ]
    
    Internet -->|рдПрдЪрдЯреАрдЯреАрдкреАрдПрд╕| Gateway
    Gateway -->|рдЖрдиреНрддрд░рд┐рдХ рдПрдЪрдЯреАрдЯреАрдкреА| Product
    Gateway -.->|рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реА| AppInsights
    Product -.->|рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реА| AppInsights
    
    style Gateway fill:#2196F3,stroke:#1976D2,stroke-width:3px,color:#fff
    style Product fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
    style Internet fill:#FF9800,stroke:#F57C00,stroke-width:2px,color:#fff
    style AppInsights fill:#9C27B0,stroke:#7B1FA2,stroke-width:2px,color:#fff
```
**рдШрдЯрдХ рд╡рд┐рд╡рд░рдг:**

| рдШрдЯрдХ | рдЙрджреНрджреЗрд╢реНрдп | рдкрд╣реБрдБрдЪ | рд╕реНрд░реЛрддрд╣рд░реВ |
|-----------|---------|--------|-----------|
| **API Gateway** | рдмрд╛рд╣реНрдп рдЕрдиреБрд░реЛрдзрд╣рд░реВрд▓рд╛рдИ рдмреНрдпрд╛рдХрдПрдиреНрдб рд╕рд░реНрднрд┐рд╕рд╣рд░реВрдорд╛ рд░реБрдЯ рдЧрд░реНрджрдЫ | рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ (HTTPS) | рез vCPU, реиGB RAM, реи-реиреж рдкреНрд░рддрд┐рдХреГрддрд┐ |
| **Product Service** | рдЗрди-рдореЗрдореЛрд░реА рдбрд╛рдЯрд╛рдХреЛ рд╕рд╛рде рдЙрддреНрдкрд╛рджрди рдХреНрдпрд╛рдЯрд▓рдЧ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрджрдЫ | рдХреЗрд╡рд▓ рдЖрдиреНрддрд░рд┐рдХ | реж.рел vCPU, резGB RAM, рез-резреж рдкреНрд░рддрд┐рдХреГрддрд┐ |
| **Application Insights** | рдХреЗрдиреНрджреНрд░реАрдХреГрдд рд▓рдЧрд┐рдЩ рд░ рд╡рд┐рддрд░рд┐рдд рдЯреНрд░реЗрд╕рд┐рдЩ | Azure Portal | рез-реи GB/рдорд╣рд┐рдирд╛ рдбрд╛рдЯрд╛ рдЗрдирдЬреЗрд╕рди |

**рдХрд┐рди рд╕рд░рд▓рдмрд╛рдЯ рд╕реБрд░реБ рдЧрд░реНрдиреЗ?**
- тЬЕ рдЫрд┐рдЯреЛ рддреИрдирд╛рдд рд░ рдмреБрдЭреНрди рд╕рдХрд┐рдиреНрдЫ (реирел-рейрел рдорд┐рдиреЗрдЯ)
- тЬЕ рдЬрдЯрд┐рд▓рддрд╛ рдмрд┐рдирд╛ рдХреЛрд░ рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдврд╛рдБрдЪрд╛рд╣рд░реВ рд╕рд┐рдХреНрдиреБрд╣реЛрд╕реН
- тЬЕ рдХрд╛рд░реНрдпрд░рдд рдХреЛрдб рдЬреБрди рддрдкрд╛рдИрдВ рд╕рдВрд╢реЛрдзрди рд░ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ
- тЬЕ рд╕рд┐рдХреНрдирдХреЛ рд▓рд╛рдЧрд┐ рдХрдо рд▓рд╛рдЧрдд (~$релреж-резрежреж/рдорд╣рд┐рдирд╛ рдмрдирд╛рдо $рейрежреж-резрекрежреж/рдорд╣рд┐рдирд╛)
- тЬЕ рдбреЗрдЯрд╛рдмреЗрд╕ рд░ рд╕рдиреНрджреЗрд╢ рдХреНрдпреБрд╣рд░реВ рдердкреНрдиреБрдЕрдШрд┐ рдЖрддреНрдорд╡рд┐рд╢реНрд╡рд╛рд╕ рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН

**рдЙрдкрдорд╛**: рдпрд╕рд▓рд╛рдИ рдбреНрд░рд╛рдЗрдн рдЧрд░реНрди рд╕рд┐рдХреНрди рдЬрд╕реНрддреИ рд╕реЛрдЪреНрдиреБрд╣реЛрд╕реНред рддрдкрд╛рдИрдВ рдЦрд╛рд▓реА рдкрд╛рд░реНрдХрд┐рдЩ рд╕реНрдерд▓рдмрд╛рдЯ рд╕реБрд░реБ рдЧрд░реНрдиреБрд╣реБрдиреНрдЫ (реи рд╕рд░реНрднрд┐рд╕рд╣рд░реВ), рдЖрдзрд╛рд░рднреВрдд рдорд╛рд╕реНрдЯрд░ рдЧрд░реНрдиреБрд╣реЛрд╕реН, рддреНрдпрд╕рдкрдЫрд┐ рд╕рд╣рд░рдХреЛ рдЯреНрд░рд╛рдлрд┐рдХрдорд╛ рдкреНрд░рдЧрддрд┐ рдЧрд░реНрдиреБрд╣реЛрд╕реН (рел+ рд╕рд░реНрднрд┐рд╕рд╣рд░реВ рдбреЗрдЯрд╛рдмреЗрд╕рд╣рд░реВрд╕рдБрдЧ)ред

### рдЪрд░рдг реи: рднрд╡рд┐рд╖реНрдп рд╡рд┐рд╕реНрддрд╛рд░ (рд╕рдиреНрджрд░реНрдн рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░)

реи-рд╕рд░реНрднрд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдорд╛рд╕реНрдЯрд░ рдЧрд░реЗрдкрдЫрд┐, рддрдкрд╛рдИрдВ рд╡рд┐рд╕реНрддрд╛рд░ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ:

```mermaid
graph TB
    User[рдкреНрд░рдпреЛрдЧрдХрд░реНрддрд╛]
    Gateway[рдПрдкреАрдЖрдИ рдЧреЗрдЯрд╡реЗ<br/>тЬЕ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░рд┐рдПрдХреЛ]
    Product[рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛<br/>тЬЕ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░рд┐рдПрдХреЛ]
    Order[рдЕрд░реНрдбрд░ рд╕реЗрд╡рд╛<br/>ЁЯФЬ рдЕрд░реНрдХреЛ рдердкреНрдиреБрд╣реЛрд╕реН]
    UserSvc[рдкреНрд░рдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗрд╡рд╛<br/>ЁЯФЬ рдЕрд░реНрдХреЛ рдердкреНрдиреБрд╣реЛрд╕реН]
    Notify[рд╕реВрдЪрдирд╛ рд╕реЗрд╡рд╛<br/>ЁЯФЬ рдЕрдиреНрддрд┐рдордорд╛ рдердкреНрдиреБрд╣реЛрд╕реН]
    
    CosmosDB[(рдХреЛрд╕рдореЛрд╕ рдбрд╛рдЯрд╛рдмреЗрд╕<br/>ЁЯФЬ рдЙрддреНрдкрд╛рджрди рдбреЗрдЯрд╛)]
    AzureSQL[(рдПрдЬреБрд░ рдПрд╕рдХреНрдпреВрдПрд▓<br/>ЁЯФЬ рдЕрд░реНрдбрд░ рдбреЗрдЯрд╛)]
    ServiceBus[рдПрдЬреБрд░ рд╕реЗрд╡рд╛ рдмрд╕<br/>ЁЯФЬ рдПрд╕рд┐рдВрдХреНрд░реЛрдирд╕ рдШрдЯрдирд╛рд╣рд░реВ]
    AppInsights[рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕<br/>тЬЕ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░рд┐рдПрдХреЛ]
    
    User --> Gateway
    Gateway --> Product
    Gateway --> Order
    Gateway --> UserSvc
    
    Product --> CosmosDB
    Order --> AzureSQL
    UserSvc --> AzureSQL
    
    Product -.->|рдЙрддреНрдкрд╛рджрди рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░рд┐рдПрдХреЛ рдШрдЯрдирд╛| ServiceBus
    ServiceBus -.->|рд╕рджрд╕реНрдпрддрд╛ рд▓рд┐рдиреБрд╣реЛрд╕реН| Notify
    ServiceBus -.->|рд╕рджрд╕реНрдпрддрд╛ рд▓рд┐рдиреБрд╣реЛрд╕реН| Order
    
    Gateway -.-> AppInsights
    Product -.-> AppInsights
    Order -.-> AppInsights
    UserSvc -.-> AppInsights
    Notify -.-> AppInsights
    
    style Product fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
    style Gateway fill:#2196F3,stroke:#1976D2,stroke-width:3px,color:#fff
    style Order fill:#9E9E9E,stroke:#616161,stroke-width:2px,color:#fff
    style UserSvc fill:#9E9E9E,stroke:#616161,stroke-width:2px,color:#fff
    style Notify fill:#9E9E9E,stroke:#616161,stroke-width:2px,color:#fff
```
"Expansion Guide" рдЦрдгреНрдбрдорд╛ рдЪрд░рдг-рджрд░-рдЪрд░рдг рдирд┐рд░реНрджреЗрд╢рдирд╣рд░реВ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реНред

## рд╕рдорд╛рд╡реЗрд╢ рд╕реБрд╡рд┐рдзрд╛рд╣рд░реВ

тЬЕ **рд╕рд░реНрднрд┐рд╕ рдбрд┐рд╕реНрдХрднрд░реА**: рдХрдиреНрдЯреЗрдирд░рд╣рд░реВ рдмреАрдЪ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд DNS-рдЖрдзрд╛рд░рд┐рдд рдбрд┐рд╕реНрдХрднрд░реА  
тЬЕ **рд▓реЛрдб рдмреНрдпрд╛рд▓реЗрдиреНрд╕рд┐рдЩ**: рдкреНрд░рддрд┐рдХреГрддрд┐рд╣рд░реВрдорд╛ рдирд┐рд░реНрдорд┐рдд рд▓реЛрдб рдмреНрдпрд╛рд▓реЗрдиреНрд╕рд┐рдЩ  
тЬЕ **рдЕрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдЩ**: HTTP рдЕрдиреБрд░реЛрдзрд╣рд░реВрдорд╛ рдЖрдзрд╛рд░рд┐рдд рдкреНрд░рддреНрдпреЗрдХ рд╕рд░реНрднрд┐рд╕ рд╕реНрд╡рддрдиреНрддреНрд░ рд░реВрдкрдорд╛ рд╕реНрдХреЗрд▓рд┐рдЩ  
тЬЕ **рд╕реНрд╡рд╛рд╕реНрдереНрдп рдирд┐рдЧрд░рд╛рдиреА**: рджреБрд╡реИ рд╕рд░реНрднрд┐рд╕рд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рд▓рд┐рднрдиреЗрд╕ рд░ рд░реЗрдбрд┐рдиреЗрд╕ рдкреНрд░реЛрдмрд╣рд░реВ  
тЬЕ **рд╡рд┐рддрд░рд┐рдд рд▓рдЧрд┐рдЩ**: Application Insights рдХреЛ рд╕рд╛рде рдХреЗрдиреНрджреНрд░реАрдХреГрдд рд▓рдЧрд┐рдЩ  
тЬЕ **рдЖрдиреНрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдЩ**: рд╕реБрд░рдХреНрд╖рд┐рдд рд╕рд░реНрднрд┐рд╕-рджреЗрдЦрд┐-рд╕рд░реНрднрд┐рд╕ рд╕рдВрдЪрд╛рд░  
тЬЕ **рдХрдиреНрдЯреЗрдирд░ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди**: рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рддреИрдирд╛рддреА рд░ рд╕реНрдХреЗрд▓рд┐рдЩ  
тЬЕ **рд╢реВрдиреНрдп-рдбрд╛рдЙрдирдЯрд╛рдЗрдо рдЕрдкрдбреЗрдЯрд╣рд░реВ**: рд░рд┐рднрд┐рдЬрди рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдирдХреЛ рд╕рд╛рде рд░реЛрд▓рд┐рдЩ рдЕрдкрдбреЗрдЯрд╣рд░реВ  

## рдЖрд╡рд╢реНрдпрдХрддрд╛рд╣рд░реВ

### рдЖрд╡рд╢реНрдпрдХ рдЙрдкрдХрд░рдгрд╣рд░реВ

рд╕реБрд░реБ рдЧрд░реНрдиреБ рдЕрдШрд┐, рдпреА рдЙрдкрдХрд░рдгрд╣рд░реВ рд╕реНрдерд╛рдкрдирд╛ рднрдПрдХреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН:

1. **[Azure Developer CLI (azd)](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd)** (рд╕рдВрд╕реНрдХрд░рдг рез.реж.реж рд╡рд╛ рдЙрдЪреНрдЪ)
   ```bash
   azd version
   # рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ: azd рд╕рдВрд╕реНрдХрд░рдг 1.0.0 рд╡рд╛ рдЙрдЪреНрдЪред
   ```

2. **[Azure CLI](https://learn.microsoft.com/cli/azure/install-azure-cli)** (рд╕рдВрд╕реНрдХрд░рдг реи.релреж.реж рд╡рд╛ рдЙрдЪреНрдЪ)
   ```bash
   az --version
   # рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ: azure-cli 2.50.0 рд╡рд╛ рдЙрдЪреНрдЪ
   ```

3. **[Docker](https://www.docker.com/get-started)** (рд╕реНрдерд╛рдиреАрдп рд╡рд┐рдХрд╛рд╕/рдкрд░реАрдХреНрд╖рдгрдХреЛ рд▓рд╛рдЧрд┐ - рд╡реИрдХрд▓реНрдкрд┐рдХ)
   ```bash
   docker --version
   # рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ: Docker рд╕рдВрд╕реНрдХрд░рдг 20.10 рд╡рд╛ рдЙрдЪреНрдЪ
   ```

### рддрдкрд╛рдИрдВрдХреЛ рд╕реЗрдЯрдЕрдк рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

рдпреА рдЖрджреЗрд╢рд╣рд░реВ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрди рддрдкрд╛рдИрдВ рддрдпрд╛рд░ рд╣реБрдиреБрд╣реБрдиреНрдЫ:

```bash
# Azure Developer CLI рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd version
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: azd рд╕рдВрд╕реНрдХрд░рдг 1.0.0 рд╡рд╛ рдЙрдЪреНрдЪ

# Azure CLI рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
az --version
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: azure-cli 2.50.0 рд╡рд╛ рдЙрдЪреНрдЪ

# Docker рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН (рд╡реИрдХрд▓реНрдкрд┐рдХ)
docker --version
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: Docker рд╕рдВрд╕реНрдХрд░рдг 20.10 рд╡рд╛ рдЙрдЪреНрдЪ
```

**рд╕рдлрд▓рддрд╛рдХреЛ рдорд╛рдкрджрдгреНрдб**: рд╕рдмреИ рдЖрджреЗрд╢рд╣рд░реВ рдиреНрдпреВрдирддрдо рд╡рд╛ рдЙрдЪреНрдЪ рд╕рдВрд╕реНрдХрд░рдг рдирдореНрдмрд░рд╣рд░реВ рдлрд░реНрдХрд╛рдЙрдБрдЫрдиреНред

### Azure рдЖрд╡рд╢реНрдпрдХрддрд╛рд╣рд░реВ

- рд╕рдХреНрд░рд┐рдп **Azure рд╕рджрд╕реНрдпрддрд╛** ([рдирд┐рдГрд╢реБрд▓реНрдХ рдЦрд╛рддрд╛ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН](https://azure.microsoft.com/free/))
- рддрдкрд╛рдИрдВрдХреЛ рд╕рджрд╕реНрдпрддрд╛ рднрд┐рддреНрд░ рд╕реНрд░реЛрддрд╣рд░реВ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрди рдЕрдиреБрдорддрд┐
- рд╕рджрд╕реНрдпрддрд╛ рд╡рд╛ рд╕реНрд░реЛрдд рд╕рдореВрд╣рдорд╛ **Contributor** рднреВрдорд┐рдХрд╛

### рдЬреНрдЮрд╛рди рдЖрд╡рд╢реНрдпрдХрддрд╛рд╣рд░реВ

рдпреЛ рдПрдХ **рдЙрдиреНрдирдд-рд╕реНрддрд░** рдЙрджрд╛рд╣рд░рдг рд╣реЛред рддрдкрд╛рдИрдВрд▓реЗ:
- [рд╕рд╛рдзрд╛рд░рдг Flask API рдЙрджрд╛рд╣рд░рдг](../../../../examples/container-app/simple-flask-api) рдкреВрд░рд╛ рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ
- рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рдХреЛ рдЖрдзрд╛рд░рднреВрдд рдмреБрдЭрд╛рдЗ
- REST APIs рд░ HTTP рдХреЛ рдкрд░рд┐рдЪрд┐рддрддрд╛
- рдХрдиреНрдЯреЗрдирд░ рдЕрд╡рдзрд╛рд░рдгрд╛рд╣рд░реВрдХреЛ рдмреБрдЭрд╛рдЗ

**рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕рдорд╛ рдирдпрд╛рдБ?** рдЖрдзрд╛рд░рднреВрдд рд╕рд┐рдХреНрдирдХреЛ рд▓рд╛рдЧрд┐ рдкрд╣рд┐рд▓реЗ [рд╕рд╛рдзрд╛рд░рдг Flask API рдЙрджрд╛рд╣рд░рдг](../../../../examples/container-app/simple-flask-api) рдмрд╛рдЯ рд╕реБрд░реБ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

## рдЫрд┐рдЯреЛ рд╕реБрд░реБ (рдЪрд░рдг-рджрд░-рдЪрд░рдг)

### рдЪрд░рдг рез: рдХреНрд▓реЛрди рд░ рдиреЗрднрд┐рдЧреЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН

```bash
git clone https://github.com/microsoft/AZD-for-beginners.git
cd AZD-for-beginners/examples/microservices
```

**тЬУ рд╕рдлрд▓рддрд╛рдХреЛ рдЬрд╛рдБрдЪ**: `azure.yaml` рджреЗрдЦреНрди рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН:
```bash
ls
# рдЕрдкреЗрдХреНрд╖рд┐рдд: README.md, azure.yaml, infra/, src/
```

### рдЪрд░рдг реи: Azure рд╕рдБрдЧ рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

```bash
azd auth login
```

рдпрд╕рд▓реЗ Azure рдкреНрд░рдорд╛рдгрд┐рдХрд░рдгрдХреЛ рд▓рд╛рдЧрд┐ рддрдкрд╛рдИрдВрдХреЛ рдмреНрд░рд╛рдЙрдЬрд░ рдЦреЛрд▓реНрдЫред рддрдкрд╛рдИрдВрдХреЛ Azure рдкреНрд░рдорд╛рдгрд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рд╕рд╛рдЗрди рдЗрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

**тЬУ рд╕рдлрд▓рддрд╛рдХреЛ рдЬрд╛рдБрдЪ**: рддрдкрд╛рдИрдВрд▓реЗ рджреЗрдЦреНрдиреБрдкрд░реНрдЫ:
```
Logged in to Azure.
```

### рдЪрд░рдг рей: рд╡рд╛рддрд╛рд╡рд░рдг рдЖрд░рдореНрдн рдЧрд░реНрдиреБрд╣реЛрд╕реН

```bash
azd init
```

**рддрдкрд╛рдИрдВрд▓реЗ рджреЗрдЦреНрдиреЗ рд╕рдВрдХреЗрддрд╣рд░реВ**:
- **рд╡рд╛рддрд╛рд╡рд░рдг рдирд╛рдо**: рдЫреЛрдЯреЛ рдирд╛рдо рдкреНрд░рд╡рд┐рд╖реНрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН (рдЬрд╕реНрддреИ, `microservices-dev`)
- **Azure рд╕рджрд╕реНрдпрддрд╛**: рддрдкрд╛рдИрдВрдХреЛ рд╕рджрд╕реНрдпрддрд╛ рдЪрдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
- **Azure рд╕реНрдерд╛рди**: рдХреНрд╖реЗрддреНрд░ рдЪрдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН (рдЬрд╕реНрддреИ, `eastus`, `westeurope`)

**тЬУ рд╕рдлрд▓рддрд╛рдХреЛ рдЬрд╛рдБрдЪ**: рддрдкрд╛рдИрдВрд▓реЗ рджреЗрдЦреНрдиреБрдкрд░реНрдЫ:
```
SUCCESS: New project initialized!
```

### рдЪрд░рдг рек: рдкреВрд░реНрд╡рд╛рдзрд╛рд░ рд░ рд╕рд░реНрднрд┐рд╕рд╣рд░реВ рддреИрдирд╛рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

```bash
azd up
```

**рдХреЗ рд╣реБрдиреНрдЫ** (рео-резреи рдорд┐рдиреЗрдЯ рд▓рд╛рдЧреНрдЫ):

```mermaid
graph LR
    A[azd up] --> B[рд╕реНрд░реЛрдд рд╕рдореВрд╣ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН]
    B --> C[рдХрдиреНрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА рддреИрдирд╛рде рдЧрд░реНрдиреБрд╣реЛрд╕реН]
    C --> D[рд▓рдЧ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рддреИрдирд╛рде рдЧрд░реНрдиреБрд╣реЛрд╕реН]
    D --> E[рдПрдк рдЗрдиреНрд╕рд╛рдЗрдЯреНрд╕ рддреИрдирд╛рде рдЧрд░реНрдиреБрд╣реЛрд╕реН]
    E --> F[рдХрдиреНрдЯреЗрдирд░ рд╡рд╛рддрд╛рд╡рд░рдг рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН]
    F --> G[API рдЧреЗрдЯрд╡реЗ рдЫрд╡рд┐ рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН]
    F --> H[рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рдЫрд╡рд┐ рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН]
    G --> I[рд░рдЬрд┐рд╕реНрдЯреНрд░реАрдорд╛ рдзрдХреЗрд▓реНрдиреБрд╣реЛрд╕реН]
    H --> I
    I --> J[API рдЧреЗрдЯрд╡реЗ рддреИрдирд╛рде рдЧрд░реНрдиреБрд╣реЛрд╕реН]
    I --> K[рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рддреИрдирд╛рде рдЧрд░реНрдиреБрд╣реЛрд╕реН]
    J --> L[Ingress рд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдБрдЪ рдХрдиреНрдлрд┐рдЧрд░ рдЧрд░реНрдиреБрд╣реЛрд╕реН]
    K --> L
    L --> M[рддреИрдирд╛рдереА рдкреВрд░рд╛ рднрдпреЛ тЬУ]
    
    style A fill:#2196F3,stroke:#1976D2,stroke-width:3px,color:#fff
    style M fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
```
**тЬУ рд╕рдлрд▓рддрд╛рдХреЛ рдЬрд╛рдБрдЪ**: рддрдкрд╛рдИрдВрд▓реЗ рджреЗрдЦреНрдиреБрдкрд░реНрдЫ:
```
SUCCESS: Your application was deployed to Azure in X minutes Y seconds.
Endpoint: https://api-gateway-<unique-id>.azurecontainerapps.io
```

**тП▒я╕П рд╕рдордп**: рео-резреи рдорд┐рдиреЗрдЯ

### рдЪрд░рдг рел: рддреИрдирд╛рддреА рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН

```bash
# рдЧреЗрдЯрд╡реЗ рдЕрдиреНрдд рдмрд┐рдиреНрджреБ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН
GATEWAY_URL=$(azd env get-values | grep API_GATEWAY_URL | cut -d '=' -f2 | tr -d '"')

# API рдЧреЗрдЯрд╡реЗ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН
curl $GATEWAY_URL/health
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ:**
```json
{
  "status": "healthy",
  "service": "api-gateway",
  "timestamp": "2025-11-19T10:30:00Z"
}
```

**рдЧреЗрдЯрд╡реЗ рдорд╛рд░реНрдлрдд рдЙрддреНрдкрд╛рджрди рд╕рд░реНрднрд┐рд╕ рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН**:
```bash
# рдЙрддреНрдкрд╛рджрдирд╣рд░реВрдХреЛ рд╕реВрдЪреА
curl $GATEWAY_URL/api/products
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ:**
```json
[
  {"id":1,"name":"Laptop","price":999.99,"stock":50},
  {"id":2,"name":"Mouse","price":29.99,"stock":200},
  {"id":3,"name":"Keyboard","price":79.99,"stock":150}
]
```

**тЬУ рд╕рдлрд▓рддрд╛рдХреЛ рдЬрд╛рдБрдЪ**: рджреБрд╡реИ рдЕрдиреНрдд рдмрд┐рдиреНрджреБрд╣рд░реВрд▓реЗ рддреНрд░реБрдЯрд┐ рдмрд┐рдирд╛ JSON рдбрд╛рдЯрд╛ рдлрд░реНрдХрд╛рдЙрдБрдЫрдиреНред

---

**ЁЯОЙ рдмрдзрд╛рдИ рдЫ!** рддрдкрд╛рдИрдВрд▓реЗ Azure рдорд╛ рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рддреИрдирд╛рдд рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ!

## рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╕рдВрд░рдЪрдирд╛

рд╕рдмреИ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдлрд╛рдЗрд▓рд╣рд░реВ рд╕рдорд╛рд╡реЗрд╢ рдЫрдиреНтАФрдпреЛ рдПрдХ рдкреВрд░реНрдг, рдХрд╛рд░реНрдпрд░рдд рдЙрджрд╛рд╣рд░рдг рд╣реЛ:

```
microservices/
тФВ
тФЬтФАтФА README.md                         # This file
тФЬтФАтФА azure.yaml                        # AZD configuration
тФЬтФАтФА .gitignore                        # Git ignore patterns
тФВ
тФЬтФАтФА infra/                           # Infrastructure as Code (Bicep)
тФВ   тФЬтФАтФА main.bicep                   # Main orchestration
тФВ   тФЬтФАтФА abbreviations.json           # Naming conventions
тФВ   тФЬтФАтФА core/                        # Shared infrastructure
тФВ   тФВ   тФЬтФАтФА container-apps-environment.bicep  # Container environment + registry
тФВ   тФВ   тФФтФАтФА monitor.bicep            # Application Insights + Log Analytics
тФВ   тФФтФАтФА app/                         # Service definitions
тФВ       тФЬтФАтФА api-gateway.bicep        # API Gateway container app
тФВ       тФФтФАтФА product-service.bicep    # Product Service container app
тФВ
тФФтФАтФА src/                             # Application source code
    тФЬтФАтФА api-gateway/                 # Node.js API Gateway
    тФВ   тФЬтФАтФА app.js                   # Express server with routing
    тФВ   тФЬтФАтФА package.json             # Node dependencies
    тФВ   тФФтФАтФА Dockerfile               # Container definition
    тФФтФАтФА product-service/             # Python Product Service
        тФЬтФАтФА main.py                  # Flask API with product data
        тФЬтФАтФА requirements.txt         # Python dependencies
        тФФтФАтФА Dockerfile               # Container definition
```

**рдкреНрд░рддреНрдпреЗрдХ рдШрдЯрдХ рдХреЗ рдЧрд░реНрдЫ:**

**рдкреВрд░реНрд╡рд╛рдзрд╛рд░ (infra/)**:
- `main.bicep`: рд╕рдмреИ Azure рд╕реНрд░реЛрддрд╣рд░реВ рд░ рддрд┐рдиреАрд╣рд░реВрдХреЛ рдирд┐рд░реНрднрд░рддрд╛ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрджрдЫ
- `core/container-apps-environment.bicep`: рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕ рд╡рд╛рддрд╛рд╡рд░рдг рд░ Azure Container Registry рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрджрдЫ
- `core/monitor.bicep`: рд╡рд┐рддрд░рд┐рдд рд▓рдЧрд┐рдЩрдХреЛ рд▓рд╛рдЧрд┐ Application Insights рд╕реЗрдЯрдЕрдк рдЧрд░реНрджрдЫ
- `app/*.bicep`: рд╕реНрдХреЗрд▓рд┐рдЩ рд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдБрдЪрдХреЛ рд╕рд╛рде рд╡реНрдпрдХреНрддрд┐рдЧрдд рдХрдиреНрдЯреЗрдирд░ рдПрдк рдкрд░рд┐рднрд╛рд╖рд╛рд╣рд░реВ

**API Gateway (src/api-gateway/)**:
- рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ-рд╕рд╛рдордирд╛ рдЧрд░реНрдиреЗ рд╕рд░реНрднрд┐рд╕ рдЬрд╕рд▓реЗ рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдмреНрдпрд╛рдХрдПрдиреНрдб рд╕рд░реНрднрд┐рд╕рд╣рд░реВрдорд╛ рд░реБрдЯ рдЧрд░реНрджрдЫ
- рд▓рдЧрд┐рдЩ, рддреНрд░реБрдЯрд┐ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди, рд░ рдЕрдиреБрд░реЛрдз рдЕрдЧреНрд░реЗрд╖рдг рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрджрдЫ
- рд╕рд░реНрднрд┐рд╕-рджреЗрдЦрд┐-рд╕рд░реНрднрд┐рд╕ HTTP рд╕рдВрдЪрд╛рд░ рдкреНрд░рджрд░реНрд╢рди рдЧрд░реНрджрдЫ

**Product Service (src/product-service/)**:
- рдЙрддреНрдкрд╛рджрди рдХреНрдпрд╛рдЯрд▓рдЧрдХреЛ рд╕рд╛рде рдЖрдиреНрддрд░рд┐рдХ рд╕рд░реНрднрд┐рд╕ (рд╕рд░рд▓рддрд╛рдХреЛ рд▓рд╛рдЧрд┐ рдЗрди-рдореЗрдореЛрд░реА)
- рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдБрдЪрдХреЛ рд╕рд╛рде REST API
- рдмреНрдпрд╛рдХрдПрдиреНрдб рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдврд╛рдБрдЪрд╛рдХреЛ рдЙрджрд╛рд╣рд░рдг

## рд╕рд░реНрднрд┐рд╕рд╣рд░реВрдХреЛ рдЕрд╡рд▓реЛрдХрди

### API Gateway (Node.js/Express)

**рдкреЛрд░реНрдЯ**: реорежреореж  
**рдкрд╣реБрдБрдЪ**: рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ (рдмрд╛рд╣реНрдп рдЗрдирдЧреНрд░реЗрд╕)  
**рдЙрджреНрджреЗрд╢реНрдп**: рдЖрдЙрдиреЗ рдЕрдиреБрд░реЛрдзрд╣рд░реВрд▓рд╛рдИ рдЙрдкрдпреБрдХреНрдд рдмреНрдпрд╛рдХрдПрдиреНрдб рд╕рд░реНрднрд┐рд╕рд╣рд░реВрдорд╛ рд░реБрдЯ рдЧрд░реНрджрдЫ  

**рдЕрдиреНрдд рдмрд┐рдиреНрджреБрд╣рд░реВ**:
- `GET /` - рд╕рд░реНрднрд┐рд╕ рдЬрд╛рдирдХрд╛рд░реА
- `GET /health` - рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдБрдЪ рдЕрдиреНрдд рдмрд┐рдиреНрджреБ
- `GET /api/products` - рдЙрддреНрдкрд╛рджрди рд╕рд░реНрднрд┐рд╕рдорд╛ рдЕрдЧреНрд░реЗрд╖рдг (рд╕рдмреИ рд╕реВрдЪреА)
- `GET /api/products/:id` - рдЙрддреНрдкрд╛рджрди рд╕рд░реНрднрд┐рд╕рдорд╛ рдЕрдЧреНрд░реЗрд╖рдг (ID рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН)

**рдореБрдЦреНрдп рд╕реБрд╡рд┐рдзрд╛рд╣рд░реВ**:
- axios рдХреЛ рд╕рд╛рде рдЕрдиреБрд░реЛрдз рд░реБрдЯрд┐рдЩ
- рдХреЗрдиреНрджреНрд░реАрдХреГрдд рд▓рдЧрд┐рдЩ
- рддреНрд░реБрдЯрд┐ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рд░ рдЯрд╛рдЗрдордЖрдЙрдЯ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди
- рд╡рд╛рддрд╛рд╡рд░рдг рдЪрд░рд╣рд░реВ рдорд╛рд░реНрдлрдд рд╕рд░реНрднрд┐рд╕ рдбрд┐рд╕реНрдХрднрд░реА
- Application Insights рдПрдХреАрдХрд░рдг

**рдХреЛрдб рд╣рд╛рдЗрд▓рд╛рдЗрдЯ** (`src/api-gateway/app.js`):
```javascript
// рдЖрдиреНрддрд░рд┐рдХ рд╕реЗрд╡рд╛ рд╕рдЮреНрдЪрд╛рд░
app.get('/api/products', async (req, res) => {
  const response = await axios.get(`${PRODUCT_SERVICE_URL}/products`, {
    timeout: 5000
  });
  res.json(response.data);
});
```

### Product Service (Python/Flask)

**рдкреЛрд░реНрдЯ**: реорежрежреж  
**рдкрд╣реБрдБрдЪ**: рдХреЗрд╡рд▓ рдЖрдиреНрддрд░рд┐рдХ (рдмрд╛рд╣реНрдп рдЗрдирдЧреНрд░реЗрд╕ рдЫреИрди)  
**рдЙрджреНрджреЗрд╢реНрдп**: рдЙрддреНрдкрд╛рджрди рдХреНрдпрд╛рдЯрд▓рдЧ рдЗрди-рдореЗрдореЛрд░реА рдбрд╛рдЯрд╛рдХреЛ рд╕рд╛рде рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрджрдЫ  

**рдЕрдиреНрдд рдмрд┐рдиреНрджреБрд╣рд░реВ**:
- `GET /` - рд╕рд░реНрднрд┐рд╕ рдЬрд╛рдирдХрд╛рд░реА
- `GET /health` - рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдБрдЪ рдЕрдиреНрдд рдмрд┐рдиреНрджреБ
- `GET /products` - рд╕рдмреИ рдЙрддреНрдкрд╛рджрдирд╣рд░реВрдХреЛ рд╕реВрдЪреА
- `GET /products/<id>` - ID рджреНрд╡рд╛рд░рд╛ рдЙрддреНрдкрд╛рджрди рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

**рдореБрдЦреНрдп рд╕реБрд╡рд┐рдзрд╛рд╣рд░реВ**:
- Flask рдХреЛ рд╕рд╛рде RESTful API
- рдЗрди-рдореЗрдореЛрд░реА рдЙрддреНрдкрд╛рджрди рд╕реНрдЯреЛрд░ (рд╕рд░рд▓, рдХреБрдиреИ рдбреЗрдЯрд╛рдмреЗрд╕ рдЖрд╡рд╢реНрдпрдХ рдЫреИрди)
- рдкреНрд░реЛрдмрд╣рд░реВрдХреЛ рд╕рд╛рде рд╕реНрд╡рд╛рд╕реНрдереНрдп рдирд┐рдЧрд░рд╛рдиреА
- рд╕рдВрд░рдЪрд┐рдд рд▓рдЧрд┐рдЩ
- Application Insights рдПрдХреАрдХрд░рдг

**рдбрд╛рдЯрд╛ рдореЛрдбреЗрд▓**:
```python
{
  "id": 1,
  "name": "Laptop",
  "description": "High-performance laptop",
  "price": 999.99,
  "stock": 50
}
```

**рдХрд┐рди рдХреЗрд╡рд▓ рдЖрдиреНрддрд░рд┐рдХ?**
рдЙрддреНрдкрд╛рджрди рд╕рд░реНрднрд┐рд╕ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд░реВрдкрдорд╛ рдЙрдЬрд╛рдЧрд░ рдЧрд░рд┐рдПрдХреЛ рдЫреИрдиред рд╕рдмреИ рдЕрдиреБрд░реЛрдзрд╣рд░реВ API Gateway рдорд╛рд░реНрдлрдд рдЬрд╛рдиреБрдкрд░реНрдЫ, рдЬрд╕рд▓реЗ рдкреНрд░рджрд╛рди рдЧрд░реНрджрдЫ:
- рд╕реБрд░рдХреНрд╖рд╛: рдирд┐рдпрдиреНрддреНрд░рдг рдЧрд░рд┐рдПрдХреЛ рдкрд╣реБрдБрдЪ рдмрд┐рдиреНрджреБ
- рд▓рдЪрд┐рд▓реЛрдкрди: рдХреНрд▓рд╛рдЗрдиреНрдЯрд╣рд░реВрд▓рд╛рдИ рдЕрд╕рд░ рдирдЧрд░реА рдмреНрдпрд╛рдХрдПрдиреНрдб рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫ
- рдирд┐рдЧрд░рд╛рдиреА: рдХреЗрдиреНрджреНрд░реАрдХреГрдд рдЕрдиреБрд░реЛрдз рд▓рдЧрд┐рдЩ

## рд╕рд░реНрднрд┐рд╕ рд╕рдВрдЪрд╛рд░ рдмреБрдЭреНрджреИ

### рд╕рд░реНрднрд┐рд╕рд╣рд░реВ рдПрдХ-рдЕрд░реНрдХрд╛рд╕рдБрдЧ рдХрд╕рд░реА рдХреБрд░рд╛ рдЧрд░реНрдЫрдиреН

```mermaid
sequenceDiagram
    participant User
    participant Gateway as API Gateway<br/>(Port 8080)
    participant Product as рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛<br/>(Port 8000)
    participant AI as рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕
    
    User->>Gateway: GET /api/products
    Gateway->>AI: рдЕрдиреБрд░реЛрдз рд▓рдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    Gateway->>Product: GET /products (рдЖрдиреНрддрд░рд┐рдХ HTTP)
    Product->>AI: рдХреНрд╡реЗрд░реА рд▓рдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    Product-->>Gateway: JSON рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ [рел рдЙрддреНрдкрд╛рджрдирд╣рд░реВ]
    Gateway->>AI: рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд▓рдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    Gateway-->>User: JSON рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ [рел рдЙрддреНрдкрд╛рджрдирд╣рд░реВ]
    
    Note over Gateway,Product: рдЖрдиреНрддрд░рд┐рдХ DNS: http://product-service
    Note over User,AI: рд╕рдмреИ рд╕рдЮреНрдЪрд╛рд░ рд▓рдЧ рдЧрд░рд┐рдПрдХреЛ рд░ рдЯреНрд░реЗрд╕ рдЧрд░рд┐рдПрдХреЛ рдЫ
```
рдпрд╕ рдЙрджрд╛рд╣рд░рдгрдорд╛, API Gateway рд▓реЗ **рдЖрдиреНрддрд░рд┐рдХ HTTP рдХрд▓рд╣рд░реВ** рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ Product Service рд╕рдБрдЧ рд╕рдВрдЪрд╛рд░ рдЧрд░реНрджрдЫ:

```javascript
// рдПрдкреАрдЖрдИ рдЧреЗрдЯрд╡реЗ (src/api-gateway/app.js)
const PRODUCT_SERVICE_URL = process.env.PRODUCT_SERVICE_URL;

// рдЖрдиреНрддрд░рд┐рдХ HTTP рдЕрдиреБрд░реЛрдз рдЧрд░реНрдиреБрд╣реЛрд╕реН
const response = await axios.get(`${PRODUCT_SERVICE_URL}/products`);
```

**рдореБрдЦреНрдп рдмрд┐рдиреНрджреБрд╣рд░реВ**:

1. **DNS-рдЖрдзрд╛рд░рд┐рдд рдбрд┐рд╕реНрдХрднрд░реА**: рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕рд▓реЗ рдЖрдиреНрддрд░рд┐рдХ рд╕рд░реНрднрд┐рд╕рд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдкрдорд╛ DNS рдкреНрд░рджрд╛рди рдЧрд░реНрджрдЫ
   - Product Service FQDN: `product-service.internal.<environment>.azurecontainerapps.io`
   - рд╕рд░рд▓ рд░реВрдкрдорд╛: `http://product-service` (рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕рд▓реЗ рдпрд╕рд▓рд╛рдИ рд╕рдорд╛рдзрд╛рди рдЧрд░реНрджрдЫ)

2. **рдХреБрдиреИ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдПрдХреНрд╕рдкреЛрдЬрд░ рдЫреИрди**: Product Service рдорд╛ Bicep рдорд╛ `external: false` рдЫ
   - рдХреЗрд╡рд▓ рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕ рд╡рд╛рддрд╛рд╡рд░рдг рднрд┐рддреНрд░ рдкрд╣реБрдБрдЪрдпреЛрдЧреНрдп
   - рдЗрдиреНрдЯрд░рдиреЗрдЯрдмрд╛рдЯ рдкреБрдЧреНрди рд╕рдХрд┐рдБрджреИрди

3. **Environment Variables**: рд╕рд░реНрднрд┐рд╕ URL рд╣рд░реВ рддреИрдирд╛рддреА рд╕рдордпрдорд╛ рдЗрдВрдЬреЗрдХреНрдЯ рдЧрд░рд┐рдиреНрдЫ
   - Bicep рд▓реЗ рдЧреЗрдЯрд╡реЗрдорд╛ рдЖрдиреНрддрд░рд┐рдХ FQDN рдкрд╛рд╕ рдЧрд░реНрджрдЫ
   - рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдХреЛрдбрдорд╛ рдХреБрдиреИ рд╣рд╛рд░реНрдбрдХреЛрдбреЗрдб URL рдЫреИрди

**рдЙрдкрдорд╛**: рдпрд╕рд▓рд╛рдИ рдХрд╛рд░реНрдпрд╛рд▓рдп рдХреЛрдард╛рд╣рд░реВ рдЬрд╕реНрддреИ рд╕реЛрдЪреНрдиреБрд╣реЛрд╕реНред API Gateway рд░рд┐рд╕реЗрдкреНрд╢рди рдбреЗрд╕реНрдХ рд╣реЛ (рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ-рд╕рд╛рдордирд╛ рдЧрд░реНрдиреЗ), рд░ Product Service рдХрд╛рд░реНрдпрд╛рд▓рдп рдХреЛрдард╛ рд╣реЛ (рдХреЗрд╡рд▓ рдЖрдиреНрддрд░рд┐рдХ)ред рдЖрдЧрдиреНрддреБрдХрд╣рд░реВрд▓реЗ рдХреБрдиреИ рдкрдирд┐ рдХрд╛рд░реНрдпрд╛рд▓рдпрдорд╛ рдкреБрдЧреНрди рд░рд┐рд╕реЗрдкреНрд╢рди рдорд╛рд░реНрдлрдд рдЬрд╛рдиреБрдкрд░реНрдЫред

## рддреИрдирд╛рддреА рд╡рд┐рдХрд▓реНрдкрд╣рд░реВ

### рдкреВрд░реНрдг рддреИрдирд╛рддреА (рд╕рд┐рдлрд╛рд░рд┐рд╕ рдЧрд░рд┐рдПрдХреЛ)

```bash
# рдкреВрд░реНрд╡рд╛рдзрд╛рд░ рд░ рджреБрдмреИ рд╕реЗрд╡рд╛рд╣рд░реВ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd up
```

рдпрд╕рд▓реЗ рддреИрдирд╛рдд рдЧрд░реНрджрдЫ:
1. рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕ рд╡рд╛рддрд╛рд╡рд░рдг
2. Application Insights
3. рдХрдиреНрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА
4. API Gateway рдХрдиреНрдЯреЗрдирд░
5. Product Service рдХрдиреНрдЯреЗрдирд░

**рд╕рдордп**: рео-резреи рдорд┐рдиреЗрдЯ

### рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕рд░реНрднрд┐рд╕ рддреИрдирд╛рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

```bash
# рдХреЗрд╡рд▓ рдПрдХ рд╕реЗрд╡рд╛ рддреИрдирд╛рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН (рдкреНрд░рд╛рд░рдореНрднрд┐рдХ azd up рдкрдЫрд┐)
azd deploy api-gateway

# рд╡рд╛ рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рддреИрдирд╛рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd deploy product-service
```

**рдкреНрд░рдпреЛрдЧ рдХреЗрд╕**: рдЬрдм рддрдкрд╛рдИрдВрд▓реЗ рдПрдХ рд╕рд░реНрднрд┐рд╕рдорд╛ рдХреЛрдб рдЕрдкрдбреЗрдЯ рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ рд░ рдХреЗрд╡рд▓ рддреНрдпреЛ рд╕рд░реНрднрд┐рд╕ рдкреБрдирдГ рддреИрдирд╛рдд рдЧрд░реНрди рдЪрд╛рд╣рдиреБрд╣реБрдиреНрдЫред

### рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди рдЕрдкрдбреЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН

```bash
# рд╕реНрдХреЗрд▓рд┐рдЩ рдкреНрдпрд╛рд░рд╛рдорд┐рдЯрд░рд╣рд░реВ рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd env set GATEWAY_MAX_REPLICAS 30

# рдирдпрд╛рдБ рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рдирд╕рдБрдЧ рдкреБрдирдГ рддреИрдирд╛рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd up
```

## рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди

### рд╕реНрдХреЗрд▓рд┐рдЩ рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди

рджреБрд╡реИ рд╕рд░реНрднрд┐рд╕рд╣рд░реВ Bicep рдлрд╛рдЗрд▓рд╣рд░реВрдорд╛ HTTP-рдЖрдзрд╛рд░рд┐рдд рдЕрдЯреЛрд╕реНрдХреЗрд▓рд┐рдЩрдХреЛ рд╕рд╛рде рдХрдиреНрдлрд┐рдЧрд░ рдЧрд░рд┐рдПрдХреЛ рдЫ:

**API Gateway**:
- рдиреНрдпреВрдирддрдо рдкреНрд░рддрд┐рдХреГрддрд┐: реи (рд╕рдзреИрдВ рдХрдореНрддрд┐рдорд╛ реи рдЙрдкрд▓рдмреНрдзрддрд╛рдХрд╛ рд▓рд╛рдЧрд┐)
- рдЕрдзрд┐рдХрддрдо рдкреНрд░рддрд┐рдХреГрддрд┐: реиреж
- рд╕реНрдХреЗрд▓ рдЯреНрд░рд┐рдЧрд░: рдкреНрд░рддрд┐ рдкреНрд░рддрд┐рдХреГрддрд┐ релреж рд╕рдорд╡рд░реНрддреА рдЕрдиреБрд░реЛрдзрд╣рд░реВ

**Product Service**:
- рдиреНрдпреВрдирддрдо рдкреНрд░рддрд┐рдХреГрддрд┐: рез (рдЖрд╡рд╢реНрдпрдХ рднрдПрдорд╛ рд╢реВрдиреНрдпрдорд╛ рд╕реНрдХреЗрд▓ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫ)
- рдЕрдзрд┐рдХрддрдо рдкреНрд░рддрд┐рдХреГрддрд┐: резреж
- рд╕реНрдХреЗрд▓ рдЯреНрд░рд┐рдЧрд░: рдкреНрд░рддрд┐ рдкреНрд░рддрд┐рдХреГрддрд┐ резрежреж рд╕рдорд╡рд░реНрддреА рдЕрдиреБрд░реЛрдзрд╣рд░реВ

**рд╕реНрдХреЗрд▓рд┐рдЩ рдЕрдиреБрдХреВрд▓рди рдЧрд░реНрдиреБрд╣реЛрд╕реН** (`infra/app/*.bicep` рдорд╛):
```bicep
scale: {
  minReplicas: 1
  maxReplicas: 10
  rules: [
    {
      name: 'http-scale-rule'
      http: {
        metadata: {
          concurrentRequests: '100'  // Adjust this
        }
      }
    }
  ]
}
```

### рд╕реНрд░реЛрдд рдЖрд╡рдВрдЯрди

**API Gateway**:
- CPU: рез.реж vCPU
- рдореЗрдореЛрд░реА: реи GiB
- рдХрд╛рд░рдг: рд╕рдмреИ рдмрд╛рд╣реНрдп рдЯреНрд░рд╛рдлрд┐рдХ рд╣реНрдпрд╛рдиреНрдбрд▓ рдЧрд░реНрджрдЫ

**Product Service**:
- CPU: реж.рел vCPU
- рдореЗрдореЛрд░реА: рез GiB
- рдХрд╛рд░рдг: рд╣рд▓реНрдХрд╛ рдЗрди-рдореЗрдореЛрд░реА рдЕрдкрд░реЗрд╕рдирд╣рд░реВ

### рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдБрдЪрд╣рд░реВ

рджреБрд╡реИ рд╕рд░реНрднрд┐рд╕рд╣рд░реВрдорд╛ рд▓рд┐рднрдиреЗрд╕ рд░ рд░реЗрдбрд┐рдиреЗрд╕ рдкреНрд░реЛрдмрд╣рд░реВ рд╕рдорд╛рд╡реЗрд╢ рдЫрдиреН:

```bicep
probes: [
  {
    type: 'Liveness'
    httpGet: {
      path: '/health'
      port: 8080
    }
    initialDelaySeconds: 10
    periodSeconds: 30
  }
  {
    type: 'Readiness'
    httpGet: {
      path: '/health'
      port: 8080
    }
    initialDelaySeconds: 5
    periodSeconds: 10
  }
]
```

**рдпрд╕рдХреЛ рдЕрд░реНрде рдХреЗ рд╣реЛ**:
- **рд▓рд┐рднрдиреЗрд╕**: рдпрджрд┐ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдБрдЪ рдЕрд╕рдлрд▓ рднрдпреЛ рднрдиреЗ, рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕рд▓реЗ рдХрдиреНрдЯреЗрдирд░ рдкреБрдирдГ рд╕реБрд░реБ рдЧрд░реНрджрдЫ
- **рд░реЗрдбрд┐рдиреЗрд╕**: рдпрджрд┐ рддрдпрд╛рд░ рдЫреИрди рднрдиреЗ, рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕рд▓реЗ рдЙрдХреНрдд рдкреНрд░рддрд┐рдХреГрддрд┐рдорд╛ рдЯреНрд░рд╛рдлрд┐рдХ рд░реБрдЯ рдЧрд░реНрди рд░реЛрдХреНрдЫ

## рдирд┐рдЧрд░рд╛рдиреА рд░ рдЕрд╡рд▓реЛрдХрди

### рд╕рд░реНрднрд┐рд╕ рд▓рдЧрд╣рд░реВ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН

```bash
# API рдЧреЗрдЯрд╡реЗрдмрд╛рдЯ рд▓рдЧрд╣рд░реВ рд╕реНрдЯреНрд░рд┐рдо рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd logs api-gateway --follow

# рд╣рд╛рд▓рд╕рд╛рд▓реИрдХреЛ рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рд▓рдЧрд╣рд░реВ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН
azd logs product-service --tail 100

# рджреБрдмреИ рд╕реЗрд╡рд╛рд╣рд░реВрдмрд╛рдЯ рд╕рдмреИ рд▓рдЧрд╣рд░реВ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН
azd logs --follow
```

**рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ**:
```
[api-gateway] API Gateway listening on port 8080
[api-gateway] Product Service URL: http://product-service
[api-gateway] GET /api/products 200 - 45ms
[product-service] Retrieved 5 products
```

### Application Insights рдХреНрд╡реЗрд░реАрд╣рд░реВ

Azure Portal рдорд╛ Application Insights рдкрд╣реБрдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН, рддреНрдпрд╕рдкрдЫрд┐ рдпреА рдХреНрд╡реЗрд░реАрд╣рд░реВ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

**рдврд┐рд▓реЛ рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдлреЗрд▓рд╛ рдкрд╛рд░реНрдиреБрд╣реЛрд╕реН**:
```kusto
requests
| where timestamp > ago(1h)
| where duration > 1000  // Requests taking >1 second
| summarize count() by name, cloud_RoleName
| order by count_ desc
```

**рд╕рд░реНрднрд┐рд╕-рджреЗрдЦрд┐-рд╕рд░реНрднрд┐рд╕ рдХрд▓рд╣рд░реВ рдЯреНрд░реНрдпрд╛рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реН**:
```kusto
dependencies
| where timestamp > ago(1h)
| where type == "Http"
| project timestamp, name, target, duration, success
| order by timestamp desc
```

**рд╕рд░реНрднрд┐рд╕рджреНрд╡рд╛рд░рд╛ рддреНрд░реБрдЯрд┐ рджрд░**:
```kusto
exceptions
| where timestamp > ago(24h)
| summarize errorCount = count() by cloud_RoleName, type
| order by errorCount desc
```

**рд╕рдордпрдХреЛ рд╕рд╛рде рдЕрдиреБрд░реЛрдз рдорд╛рддреНрд░рд╛**:
```kusto
requests
| where timestamp > ago(1h)
| summarize requestCount = count() by bin(timestamp, 5m), cloud_RoleName
| render timechart
```

### рдирд┐рдЧрд░рд╛рдиреА рдбреНрдпрд╛рд╕рдмреЛрд░реНрдб рдкрд╣реБрдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН

```bash
# рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕ рд╡рд┐рд╡рд░рдг рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd env get-values | grep APPLICATIONINSIGHTS

# рдПрдЬрд░ рдкреЛрд░реНрдЯрд▓ рдЕрдиреБрдЧрдорди рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН
az monitor app-insights component show \
  --app $(azd env get-values | grep APPLICATIONINSIGHTS_CONNECTION_STRING | cut -d '=' -f2) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2) \
  --query "appId" -o tsv
```

### рд▓рд╛рдЗрдн рдореЗрдЯреНрд░рд┐рдХреНрд╕

1. Azure Portal рдорд╛ Application Insights рдиреЗрднрд┐рдЧреЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН
2. "Live Metrics" рдорд╛ рдХреНрд▓рд┐рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реН
3. рд╡рд╛рд╕реНрддрд╡рд┐рдХ-рд╕рдордп рдЕрдиреБрд░реЛрдзрд╣рд░реВ, рдЕрд╕рдлрд▓рддрд╛рд╣рд░реВ, рд░ рдкреНрд░рджрд░реНрд╢рди рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН
4. рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН: `curl $(azd env get-values | grep API_GATEWAY_URL | cut -d '=' -f2 | tr -d '"')/api/products` рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН

## рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЕрднреНрдпрд╛рд╕рд╣рд░реВ

### рдЕрднреНрдпрд╛рд╕ рез: рдирдпрд╛рдБ рдЙрддреНрдкрд╛рджрди рдЕрдиреНрдд рдмрд┐рдиреНрджреБ рдердкреНрдиреБрд╣реЛрд╕реН тнР (рд╕рдЬрд┐рд▓реЛ)

**рдЙрджреНрджреЗрд╢реНрдп**: рдирдпрд╛рдБ рдЙрддреНрдкрд╛рджрдирд╣рд░реВ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрди POST рдЕрдиреНрдд рдмрд┐рдиреНрджреБ рдердкреНрдиреБрд╣реЛрд╕реН

**рд╕реБрд░реБ рдмрд┐рдиреНрджреБ**: `src/product-service/main.py`

**рдЪрд░рдгрд╣рд░реВ**:

1. `main.py` рдорд╛ `get_product` рдлрдВрдХреНрд╢рди рдкрдЫрд┐ рдпреЛ рдЕрдиреНрдд рдмрд┐рдиреНрджреБ рдердкреНрдиреБрд╣реЛрд╕реН:

```python
@app.route('/products', methods=['POST'])
def create_product():
    """Create a new product"""
    data = request.get_json()
    
    # рдЖрд╡рд╢реНрдпрдХ рдХреНрд╖реЗрддреНрд░рд╣рд░реВ рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН
    if not data or 'name' not in data or 'price' not in data:
        return jsonify({'error': 'Missing required fields: name, price'}), 400
    
    new_id = max(p['id'] for p in products) + 1
    new_product = {
        'id': new_id,
        'name': data['name'],
        'description': data.get('description', ''),
        'price': float(data['price']),
        'stock': int(data.get('stock', 0))
    }
    products.append(new_product)
    logger.info(f"Created product {new_id}")
    return jsonify(new_product), 201
```

2. API Gateway рдорд╛ POST рд░реБрдЯ рдердк
3. рджреБрдмреИ рд╕реЗрд╡рд╛рд╣рд░реВ рдкреБрдирдГ рддреИрдирд╛рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash
azd deploy product-service
azd deploy api-gateway
```

4. рдирдпрд╛рдБ рдЕрдиреНрдд рдмрд┐рдиреНрджреБ рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash
GATEWAY_URL=$(azd env get-values | grep API_GATEWAY_URL | cut -d '=' -f2 | tr -d '"')

# рдирдпрд╛рдБ рдЙрддреНрдкрд╛рджрди рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН
curl -X POST $GATEWAY_URL/api/products \
  -H "Content-Type: application/json" \
  -d '{"name":"USB Cable","price":9.99,"stock":500}'
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдирддрд┐рдЬрд╛:**
```json
{"id":6,"name":"USB Cable","description":"","price":9.99,"stock":500}
```

5. рд╕реВрдЪреАрдорд╛ рджреЗрдЦрд┐рдиреНрдЫ рдХрд┐ рдЫреИрди рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash
curl $GATEWAY_URL/api/products
# рдЕрдм рдирдпрд╛рдБ USB рдХреЗрдмрд▓ рд╕рд╣рд┐рдд рем рдЙрддреНрдкрд╛рджрдирд╣рд░реВ рджреЗрдЦрд╛рдЙрдиреБ рдкрд░реНрдиреЗрдЫ
```

**рд╕рдлрд▓рддрд╛рдХреЛ рдорд╛рдкрджрдгреНрдб**:
- тЬЕ POST рдЕрдиреБрд░реЛрдзрд▓реЗ HTTP 201 рдлрд░реНрдХрд╛рдЙрдБрдЫ
- тЬЕ рдирдпрд╛рдБ рдЙрддреНрдкрд╛рджрди GET /api/products рд╕реВрдЪреАрдорд╛ рджреЗрдЦрд┐рдиреНрдЫ
- тЬЕ рдЙрддреНрдкрд╛рджрдирдорд╛ рд╕реНрд╡рддрдГ рд╡реГрджреНрдзрд┐ рднрдПрдХреЛ ID рд╣реБрдиреНрдЫ

**рд╕рдордп**: 10-15 рдорд┐рдиреЗрдЯ

---

### рдЕрднреНрдпрд╛рд╕ 2: Autoscaling рдирд┐рдпрдорд╣рд░реВ рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрдиреБрд╣реЛрд╕реН тнРтнР (рдордзреНрдпрдо)

**рдЙрджреНрджреЗрд╢реНрдп**: Product Service рд▓рд╛рдИ рдмрдвреА рдЖрдХреНрд░рд╛рдордХ рд░реВрдкрдорд╛ рд╕реНрдХреЗрд▓ рдЧрд░реНрди рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрдиреБрд╣реЛрд╕реН

**рд╕реБрд░реБрд╡рд╛рдд рдмрд┐рдиреНрджреБ**: `infra/app/product-service.bicep`

**рдЪрд░рдгрд╣рд░реВ**:

1. `infra/app/product-service.bicep` рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН рд░ `scale` рдмреНрд▓рдХ (рд▓рд╛рдЗрди 95 рд╡рд░рд┐рдкрд░рд┐) рдЦреЛрдЬреНрдиреБрд╣реЛрд╕реН

2. рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрдиреБрд╣реЛрд╕реН:
```bicep
scale: {
  minReplicas: 1
  maxReplicas: 10
  rules: [
    {
      name: 'http-scale-rule'
      http: {
        metadata: {
          concurrentRequests: '100'  // OLD
        }
      }
    }
  ]
}
```

рдмрд╛рдЯ:
```bicep
scale: {
  minReplicas: 2  // Always have 2 running
  maxReplicas: 20  // Allow more scaling
  rules: [
    {
      name: 'http-scale-rule'
      http: {
        metadata: {
          concurrentRequests: '20'  // Scale at lower threshold
        }
      }
    }
  ]
}
```

рдорд╛:
3. рдкреВрд░реНрд╡рд╛рдзрд╛рд░ рдкреБрдирдГ рддреИрдирд╛рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash
azd up
```

4. рдирдпрд╛рдБ рд╕реНрдХреЗрд▓рд┐рдЩ рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash
az containerapp show \
  --name $(azd env get-values | grep PRODUCT_SERVICE | head -1 | cut -d '/' -f5) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --query "properties.template.scale" -o json
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдирддрд┐рдЬрд╛:**
```json
{
  "minReplicas": 2,
  "maxReplicas": 20,
  "rules": [...]
}
```

5. рд▓реЛрдбрдХреЛ рд╕рд╛рде autoscaling рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash
# рд╕рдорд╛рдирд╛рдиреНрддрд░ рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдЙрддреНрдкрдиреНрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
for i in {1..500}; do curl $GATEWAY_URL/api/products & done

# рд╕реНрдХреЗрд▓рд┐рдЩ рд╣реБрдБрджреИ рдЧрд░реЗрдХреЛ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН
azd logs product-service --follow
# рдЦреЛрдЬреНрдиреБрд╣реЛрд╕реН: рдХрдиреНрдЯреЗрдирд░ рдПрдкреНрд╕ рд╕реНрдХреЗрд▓рд┐рдЩ рдШрдЯрдирд╛рд╣рд░реВ
```

**рд╕рдлрд▓рддрд╛рдХреЛ рдорд╛рдкрджрдгреНрдб**:
- тЬЕ Product Service рд╕рдзреИрдВ рдХрдореНрддрд┐рдорд╛ 2 рдкреНрд░рддрд┐рдХреГрддрд┐ рдЪрд▓рд╛рдЙрдБрдЫ
- тЬЕ рд▓реЛрдбрдХреЛ рд╕рдордпрдорд╛, 2 рднрдиреНрджрд╛ рдмрдвреА рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕реНрдХреЗрд▓ рд╣реБрдиреНрдЫ
- тЬЕ Azure Portal рдорд╛ рдирдпрд╛рдБ рд╕реНрдХреЗрд▓рд┐рдЩ рдирд┐рдпрдорд╣рд░реВ рджреЗрдЦрд┐рдиреНрдЫ

**рд╕рдордп**: 15-20 рдорд┐рдиреЗрдЯ

---

### рдЕрднреНрдпрд╛рд╕ 3: рдХрд╕реНрдЯрдо рдирд┐рдЧрд░рд╛рдиреА рдХреНрд╡реЗрд░реА рдердкреНрдиреБрд╣реЛрд╕реН тнРтнР (рдордзреНрдпрдо)

**рдЙрджреНрджреЗрд╢реНрдп**: Product API рдкреНрд░рджрд░реНрд╢рди рдЯреНрд░реНрдпрд╛рдХ рдЧрд░реНрди рдХрд╕реНрдЯрдо Application Insights рдХреНрд╡реЗрд░реА рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН

**рдЪрд░рдгрд╣рд░реВ**:

1. Azure Portal рдорд╛ Application Insights рдорд╛ рдЬрд╛рдиреБрд╣реЛрд╕реН:
   - Azure Portal рдорд╛ рдЬрд╛рдиреБрд╣реЛрд╕реН
   - рдЖрдлреНрдиреЛ рд╕реНрд░реЛрдд рд╕рдореВрд╣ (rg-microservices-*) рдЦреЛрдЬреНрдиреБрд╣реЛрд╕реН
   - Application Insights рд╕реНрд░реЛрддрдорд╛ рдХреНрд▓рд┐рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реН

2. рдмрд╛рдБрдпрд╛ рдореЗрдиреБрдорд╛ "Logs" рдорд╛ рдХреНрд▓рд┐рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реН

3. рдпреЛ рдХреНрд╡реЗрд░реА рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```kusto
requests
| where timestamp > ago(1h)
| where name contains "products"
| summarize 
    RequestCount = count(),
    AvgDuration = avg(duration),
    P95Duration = percentile(duration, 95),
    SuccessRate = 100.0 * countif(success == true) / count()
  by bin(timestamp, 5m)
| render timechart
```

4. рдХреНрд╡реЗрд░реА рдЪрд▓рд╛рдЙрди "Run" рдорд╛ рдХреНрд▓рд┐рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реН

5. рдХреНрд╡реЗрд░реА рдмрдЪрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН:
   - "Save" рдорд╛ рдХреНрд▓рд┐рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реН
   - рдирд╛рдо: "Product API Performance"
   - рд╢реНрд░реЗрдгреА: "Performance"

6. рдкрд░реАрдХреНрд╖рдг рдЯреНрд░рд╛рдлрд┐рдХ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash
for i in {1..100}; do curl $GATEWAY_URL/api/products; sleep 1; done
```

7. рдбреЗрдЯрд╛ рд╣реЗрд░реНрди рдХреНрд╡реЗрд░реА рд░рд┐рдлреНрд░реЗрд╕ рдЧрд░реНрдиреБрд╣реЛрд╕реН

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рдирддрд┐рдЬрд╛:**
- рд╕рдордпрдХреЛ рд╕рд╛рде рдЕрдиреБрд░реЛрдз рдЧрдгрдирд╛ рджреЗрдЦрд╛рдЙрдиреЗ рдЪрд╛рд░реНрдЯ
- рдФрд╕рдд рдЕрд╡рдзрд┐ < 500ms
- рд╕рдлрд▓рддрд╛ рджрд░ = 100%
- 5 рдорд┐рдиреЗрдЯрдХреЛ рд╕рдордп рдмрд┐рдирд╣рд░реВ

**рд╕рдлрд▓рддрд╛рдХреЛ рдорд╛рдкрджрдгреНрдб**:
- тЬЕ рдХреНрд╡реЗрд░реАрд▓реЗ 100+ рдЕрдиреБрд░реЛрдз рджреЗрдЦрд╛рдЙрдБрдЫ
- тЬЕ рд╕рдлрд▓рддрд╛ рджрд░ 100% рдЫ
- тЬЕ рдФрд╕рдд рдЕрд╡рдзрд┐ < 500ms
- тЬЕ рдЪрд╛рд░реНрдЯрд▓реЗ 5-рдорд┐рдиреЗрдЯ рд╕рдордп рдмрд┐рдирд╣рд░реВ рджреЗрдЦрд╛рдЙрдБрдЫ

**рд╕рд┐рдХрд╛рдЗ рдкрд░рд┐рдгрд╛рдо**: рдХрд╕реНрдЯрдо рдХреНрд╡реЗрд░реАрд╣рд░реВрдХреЛ рд╕рд╛рде рд╕реЗрд╡рд╛ рдкреНрд░рджрд░реНрд╢рди рдирд┐рдЧрд░рд╛рдиреА рдЧрд░реНрди рдмреБрдЭреНрдиреБрд╣реЛрд╕реН

**рд╕рдордп**: 10-15 рдорд┐рдиреЗрдЯ

---

### рдЕрднреНрдпрд╛рд╕ 4: Retry Logic рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН тнРтнРтнР (рдЙрдиреНрдирдд)

**рдЙрджреНрджреЗрд╢реНрдп**: Product Service рдЕрд╕реНрдерд╛рдпреА рд░реВрдкрдорд╛ рдЕрдиреБрдкрд▓рдмреНрдз рд╣реБрдБрджрд╛ API Gateway рдорд╛ Retry Logic рдердкреНрдиреБрд╣реЛрд╕реН

**рд╕реБрд░реБрд╡рд╛рдд рдмрд┐рдиреНрджреБ**: `src/api-gateway/app.js`

**рдЪрд░рдгрд╣рд░реВ**:

1. Retry рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash
cd src/api-gateway
npm install axios-retry --save
cd ../..
```

2. `src/api-gateway/app.js` рдЕрдкрдбреЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН (axios рдЖрдпрд╛рдд рдкрдЫрд┐ рдердкреНрдиреБрд╣реЛрд╕реН):

```javascript
const axiosRetry = require('axios-retry');

// рдкреБрди: рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдиреЗ рддрд░реНрдХ рд╕реЗрдЯрдЕрдк рдЧрд░реНрдиреБрд╣реЛрд╕реН
axiosRetry(axios, {
  retries: 3,
  retryDelay: (retryCount) => {
    return retryCount * 1000; // рез рд╕реЗрдХреЗрдиреНрдб, реи рд╕реЗрдХреЗрдиреНрдб, рей рд╕реЗрдХреЗрдиреНрдб
  },
  retryCondition: (error) => {
    // рдиреЗрдЯрд╡рд░реНрдХ рддреНрд░реБрдЯрд┐рд╣рд░реВ рд╡рд╛ релxx рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдорд╛ рдкреБрди: рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    return axiosRetry.isNetworkOrIdempotentRequestError(error) ||
           (error.response && error.response.status >= 500);
  }
});

console.log('Retry logic configured: 3 retries with exponential backoff');
```

3. API Gateway рдкреБрдирдГ рддреИрдирд╛рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash
azd deploy api-gateway
```

4. рд╕реЗрд╡рд╛ рд╡рд┐рдлрд▓рддрд╛ рдЕрдиреБрдХрд░рдг рдЧрд░реЗрд░ Retry рд╡реНрдпрд╡рд╣рд╛рд░ рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН:

```bash
# рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ 0 рдорд╛ рд╕реНрдХреЗрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реН (рд╡рд┐рдлрд▓рддрд╛ рдЕрдиреБрдХрд░рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН)
az containerapp update \
  --name $(azd env get-values | grep PRODUCT_SERVICE | head -1 | cut -d '/' -f5) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --min-replicas 0 \
  --max-replicas 0

# рдЙрддреНрдкрд╛рджрдирд╣рд░реВ рдкрд╣реБрдБрдЪ рдЧрд░реНрди рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдиреБрд╣реЛрд╕реН (рей рдкрдЯрдХ рдкреБрди: рдкреНрд░рдпрд╛рд╕ рд╣реБрдиреЗрдЫ)
time curl -v $GATEWAY_URL/api/products
# рдЕрд╡рд▓реЛрдХрди рдЧрд░реНрдиреБрд╣реЛрд╕реН: рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ ~рем рд╕реЗрдХреЗрдиреНрдб рд▓рд╛рдЧреНрдЫ (рез рд╕реЗрдХреЗрдиреНрдб + реи рд╕реЗрдХреЗрдиреНрдб + рей рд╕реЗрдХреЗрдиреНрдб рдкреБрди: рдкреНрд░рдпрд╛рд╕)

# рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рдкреБрдирд░реНрд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН
az containerapp update \
  --name $(azd env get-values | grep PRODUCT_SERVICE | head -1 | cut -d '/' -f5) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --min-replicas 1 \
  --max-replicas 10
```

5. Retry рд▓рдЧрд╣рд░реВ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН:

```bash
azd logs api-gateway --tail 50
# рдкреБрди: рдкреНрд░рдпрд╛рд╕ рд╕рдиреНрджреЗрд╢рд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рдЦреЛрдЬреНрдиреБрд╣реЛрд╕реН
```

**тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░:**
- рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдЕрд╕рдлрд▓ рд╣реБрдиреБ рдЕрдШрд┐ 3 рдкрдЯрдХ Retry рдЧрд░реНрдЫ
- рдкреНрд░рддреНрдпреЗрдХ Retry рд▓рд╛рдореЛ рд╕рдордп рдкрд░реНрдЦрдиреНрдЫ (1s, 2s, 3s)
- рд╕реЗрд╡рд╛ рдкреБрдирдГ рд╕реБрд░реБ рднрдПрдкрдЫрд┐ рд╕рдлрд▓ рдЕрдиреБрд░реЛрдзрд╣рд░реВ
- рд▓рдЧрд╣рд░реВрд▓реЗ Retry рдкреНрд░рдпрд╛рд╕рд╣рд░реВ рджреЗрдЦрд╛рдЙрдБрдЫ

**рд╕рдлрд▓рддрд╛рдХреЛ рдорд╛рдкрджрдгреНрдб**:
- тЬЕ рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдЕрд╕рдлрд▓ рд╣реБрдиреБ рдЕрдШрд┐ 3 рдкрдЯрдХ Retry рдЧрд░реНрдЫ
- тЬЕ рдкреНрд░рддреНрдпреЗрдХ Retry рд▓рд╛рдореЛ рд╕рдордп рдкрд░реНрдЦрдиреНрдЫ (exponential backoff)
- тЬЕ рд╕реЗрд╡рд╛ рдкреБрдирдГ рд╕реБрд░реБ рднрдПрдкрдЫрд┐ рд╕рдлрд▓ рдЕрдиреБрд░реЛрдзрд╣рд░реВ
- тЬЕ рд▓рдЧрд╣рд░реВрд▓реЗ Retry рдкреНрд░рдпрд╛рд╕рд╣рд░реВ рджреЗрдЦрд╛рдЙрдБрдЫ

**рд╕рд┐рдХрд╛рдЗ рдкрд░рд┐рдгрд╛рдо**: рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕рд╣рд░реВрдорд╛ рд▓рдЪрд┐рд▓реЛрдкрди рдврд╛рдБрдЪрд╛рд╣рд░реВ рдмреБрдЭреНрдиреБрд╣реЛрд╕реН (circuit breakers, retries, timeouts)

**рд╕рдордп**: 20-25 рдорд┐рдиреЗрдЯ

---

## рдЬреНрдЮрд╛рди рдЬрд╛рдБрдЪ рдмрд┐рдиреНрджреБ

рдпреЛ рдЙрджрд╛рд╣рд░рдг рдкреВрд░рд╛ рдЧрд░реЗрдкрдЫрд┐, рдЖрдлреНрдиреЛ рдмреБрдЭрд╛рдЗ рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН:

### 1. рд╕реЗрд╡рд╛ рд╕рдВрдЪрд╛рд░ тЬУ

рдЖрдлреНрдиреЛ рдЬреНрдЮрд╛рди рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН:
- [ ] API Gateway рд▓реЗ Product Service рдХрд╕рд░реА рдкрддреНрддрд╛ рд▓рдЧрд╛рдЙрдБрдЫ рд╡реНрдпрд╛рдЦреНрдпрд╛ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ? (DNS-рдЖрдзрд╛рд░рд┐рдд рд╕реЗрд╡рд╛ рдЦреЛрдЬ)
- [ ] Product Service рдбрд╛рдЙрди рднрдПрдорд╛ рдХреЗ рд╣реБрдиреНрдЫ? (Gateway рд▓реЗ 503 рддреНрд░реБрдЯрд┐ рдлрд░реНрдХрд╛рдЙрдБрдЫ)
- [ ] рддреЗрд╕реНрд░реЛ рд╕реЗрд╡рд╛ рдХрд╕рд░реА рдердкреНрдиреЗ? (рдирдпрд╛рдБ Bicep рдлрд╛рдЗрд▓ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН, main.bicep рдорд╛ рдердкреНрдиреБрд╣реЛрд╕реН, src рдлреЛрд▓реНрдбрд░ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН)

**рд╣реНрдпрд╛рдиреНрдбреНрд╕-рдЕрди рдкреНрд░рдорд╛рдгрд┐рдХрд░рдг**:
```bash
# рд╕реЗрд╡рд╛ рдЕрд╕рдлрд▓рддрд╛ рдЕрдиреБрдХрд░рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН
az containerapp update --name <product-service-name> --min-replicas 0 --max-replicas 0
curl $GATEWAY_URL/api/products
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: 503 рд╕реЗрд╡рд╛ рдЙрдкрд▓рдмреНрдз рдЫреИрди

# рд╕реЗрд╡рд╛ рдкреБрдирд░реНрд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН
az containerapp update --name <product-service-name> --min-replicas 1 --max-replicas 10
```

### 2. рдирд┐рдЧрд░рд╛рдиреА рд░ рдЕрд╡рд▓реЛрдХрдиреАрдпрддрд╛ тЬУ

рдЖрдлреНрдиреЛ рдЬреНрдЮрд╛рди рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН:
- [ ] рд╡рд┐рддрд░рд┐рдд рд▓рдЧрд╣рд░реВ рдХрд╣рд╛рдБ рджреЗрдЦреНрдиреБрд╣реБрдиреНрдЫ? (Azure Portal рдорд╛ Application Insights)
- [ ] рд╕реБрд╕реНрдд рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдХрд╕рд░реА рдЯреНрд░реНрдпрд╛рдХ рдЧрд░реНрдиреБрд╣реБрдиреНрдЫ? (Kusto рдХреНрд╡реЗрд░реА: `requests | where duration > 1000`)
- [ ] рдХреБрди рд╕реЗрд╡рд╛рд▓реЗ рддреНрд░реБрдЯрд┐ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНтАНрдпреЛ рдкрд╣рд┐рдЪрд╛рди рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ? (рд▓рдЧрд╣рд░реВрдорд╛ `cloud_RoleName` рдлрд┐рд▓реНрдб рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН)

**рд╣реНрдпрд╛рдиреНрдбреНрд╕-рдЕрди рдкреНрд░рдорд╛рдгрд┐рдХрд░рдг**:
```bash
# рд╕реБрд╕реНрдд рдЕрдиреБрд░реЛрдз рд╕рд┐рдореБрд▓реЗрд╢рди рдЙрддреНрдкрдиреНрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
curl "$GATEWAY_URL/api/products?delay=2000"

# рд╕реБрд╕реНрдд рдЕрдиреБрд░реЛрдзрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕ рд╕реЛрдзрдкреБрдЫ рдЧрд░реНрдиреБрд╣реЛрд╕реН
# Azure рдкреЛрд░реНрдЯрд▓ тЖТ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕ тЖТ рд▓рдЧреНрд╕рдорд╛ рдЬрд╛рдиреБрд╣реЛрд╕реН
# рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН: requests | where duration > 1000 | project timestamp, name, duration, cloud_RoleName
```

### 3. рд╕реНрдХреЗрд▓рд┐рдЩ рд░ рдкреНрд░рджрд░реНрд╢рди тЬУ

рдЖрдлреНрдиреЛ рдЬреНрдЮрд╛рди рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН:
- [ ] Autoscaling рдХреЗрд▓реЗ рдЯреНрд░рд┐рдЧрд░ рдЧрд░реНрдЫ? (HTTP рд╕рдорд╡рд░реНрддреА рдЕрдиреБрд░реЛрдз рдирд┐рдпрдорд╣рд░реВ: Gateway рдХрд╛ рд▓рд╛рдЧрд┐ 50, Product рдХрд╛ рд▓рд╛рдЧрд┐ 100)
- [ ] рдЕрд╣рд┐рд▓реЗ рдХрддрд┐ рдкреНрд░рддрд┐рдХреГрддрд┐ рдЪрд▓рд┐рд░рд╣реЗрдХрд╛ рдЫрдиреН? (рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН `az containerapp revision list`)
- [ ] Product Service рд▓рд╛рдИ 5 рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕реНрдХреЗрд▓ рдХрд╕рд░реА рдЧрд░реНрдиреЗ? (Bicep рдорд╛ minReplicas рдЕрдкрдбреЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН)

**рд╣реНрдпрд╛рдиреНрдбреНрд╕-рдЕрди рдкреНрд░рдорд╛рдгрд┐рдХрд░рдг**:
```bash
# рдЕрдЯреЛрд╕реНрдХреЗрд▓рд┐рдЩ рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрди рд▓реЛрдб рдЙрддреНрдкрдиреНрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
for i in {1..1000}; do curl $GATEWAY_URL/api/products & done

# рдкреНрд░рддрд┐рдХреГрддрд┐рд╣рд░реВ рдмрдвреНрджреИ рдЧрдПрдХреЛ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН
azd logs api-gateway --follow
# тЬЕ рдЕрдкреЗрдХреНрд╖рд┐рдд: рд▓рдЧрд╣рд░реВрдорд╛ рд╕реНрдХреЗрд▓рд┐рдЩ рдШрдЯрдирд╛рд╣рд░реВ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН
```

**рд╕рдлрд▓рддрд╛рдХреЛ рдорд╛рдкрджрдгреНрдб**: рддрдкрд╛рдИрдВ рд╕рдмреИ рдкреНрд░рд╢реНрдирд╣рд░реВрдХреЛ рдЙрддреНрддрд░ рджрд┐рди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ рд░ рд╣реНрдпрд╛рдиреНрдбреНрд╕-рдЕрди рдХрдорд╛рдгреНрдбрд╣рд░реВрд╕рдБрдЧ рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

---

## рд▓рд╛рдЧрдд рд╡рд┐рд╢реНрд▓реЗрд╖рдг

### рдЕрдиреБрдорд╛рдирд┐рдд рдорд╛рд╕рд┐рдХ рд▓рд╛рдЧрдд (рдпреЛ 2-рд╕реЗрд╡рд╛ рдЙрджрд╛рд╣рд░рдгрдХреЛ рд▓рд╛рдЧрд┐)

| рд╕реНрд░реЛрдд | рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди | рдЕрдиреБрдорд╛рдирд┐рдд рд▓рд╛рдЧрдд |
|----------|--------------|----------------|
| API Gateway | 2-20 рдкреНрд░рддрд┐рдХреГрддрд┐, 1 vCPU, 2GB RAM | $30-150 |
| Product Service | 1-10 рдкреНрд░рддрд┐рдХреГрддрд┐, 0.5 vCPU, 1GB RAM | $15-75 |
| Container Registry | Basic tier | $5 |
| Application Insights | 1-2 GB/рдорд╣рд┐рдирд╛ | $5-10 |
| Log Analytics | 1 GB/рдорд╣рд┐рдирд╛ | $3 |
| **рдХреБрд▓** | | **$58-243/рдорд╣рд┐рдирд╛** |

### рдкреНрд░рдпреЛрдЧ рдЕрдиреБрд╕рд╛рд░ рд▓рд╛рдЧрдд рдмреНрд░реЗрдХрдбрд╛рдЙрди

**рд╣рд▓реНрдХрд╛ рдЯреНрд░рд╛рдлрд┐рдХ** (рдкрд░реАрдХреНрд╖рдг/рд╕рд┐рдХрд╛рдЗ): ~$60/рдорд╣рд┐рдирд╛
- API Gateway: 2 рдкреНрд░рддрд┐рдХреГрддрд┐ ├Ч 24/7 = $30
- Product Service: 1 рдкреНрд░рддрд┐рдХреГрддрд┐ ├Ч 24/7 = $15
- рдирд┐рдЧрд░рд╛рдиреА + рд░рдЬрд┐рд╕реНрдЯреНрд░реА = $13

**рдордзреНрдпрдо рдЯреНрд░рд╛рдлрд┐рдХ** (рд╕рд╛рдиреЛ рдЙрддреНрдкрд╛рджрди): ~$120/рдорд╣рд┐рдирд╛
- API Gateway: 5 рдФрд╕рдд рдкреНрд░рддрд┐рдХреГрддрд┐ = $75
- Product Service: 3 рдФрд╕рдд рдкреНрд░рддрд┐рдХреГрддрд┐ = $45
- рдирд┐рдЧрд░рд╛рдиреА + рд░рдЬрд┐рд╕реНрдЯреНрд░реА = $13

**рдЙрдЪреНрдЪ рдЯреНрд░рд╛рдлрд┐рдХ** (рд╡реНрдпрд╕реНрдд рд╕рдордп): ~$240/рдорд╣рд┐рдирд╛
- API Gateway: 15 рдФрд╕рдд рдкреНрд░рддрд┐рдХреГрддрд┐ = $225
- Product Service: 8 рдФрд╕рдд рдкреНрд░рддрд┐рдХреГрддрд┐ = $120
- рдирд┐рдЧрд░рд╛рдиреА + рд░рдЬрд┐рд╕реНрдЯреНрд░реА = $13

### рд▓рд╛рдЧрдд рдЕрдиреБрдХреВрд▓рди рд╕реБрдЭрд╛рд╡рд╣рд░реВ

1. **рд╡рд┐рдХрд╛рд╕рдХреЛ рд▓рд╛рдЧрд┐ рд╢реВрдиреНрдпрдорд╛ рд╕реНрдХреЗрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реН**:
   ```bicep
   scale: {
     minReplicas: 0  // Save $30-40/month when not in use
     maxReplicas: 10
   }
   ```

2. **Cosmos DB рдХреЛ рд▓рд╛рдЧрд┐ рдЙрдкрднреЛрдЧ рдпреЛрдЬрдирд╛ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН** (рдЬрдм рддрдкрд╛рдИрдВ рдпрд╕рд▓рд╛рдИ рдердкреНрдиреБрд╣реБрдиреНрдЫ):
   - рддрдкрд╛рдИрдВрд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдХреЛ рдорд╛рддреНрд░ рддрд┐рд░реНрдиреБрд╣реЛрд╕реН
   - рдХреБрдиреИ рдиреНрдпреВрдирддрдо рд╢реБрд▓реНрдХ рдЫреИрди

3. **Application Insights рд╕реНрдпрд╛рдореНрдкрд▓рд┐рдЩ рд╕реЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН**:
   ```javascript
   appInsights.defaultClient.config.samplingPercentage = 50; // рдЕрдиреБрд░реЛрдзрд╣рд░реВрдХреЛ 50% рдирдореВрдирд╛
   ```

4. **рдЖрд╡рд╢реНрдпрдХ рдирднрдПрдХреЛ рдмреЗрд▓рд╛ рд╕рдлрд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН**:
   ```bash
   azd down --force --purge
   ```

### рдирд┐рдГрд╢реБрд▓реНрдХ рд╕реНрддрд░ рд╡рд┐рдХрд▓реНрдкрд╣рд░реВ

рд╕рд┐рдХрд╛рдЗ/рдкрд░реАрдХреНрд╖рдгрдХреЛ рд▓рд╛рдЧрд┐ рд╡рд┐рдЪрд╛рд░ рдЧрд░реНрдиреБрд╣реЛрд╕реН:
- тЬЕ Azure рдирд┐рдГрд╢реБрд▓реНрдХ рдХреНрд░реЗрдбрд┐рдЯ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН ($200 рдкрд╣рд┐рд▓реЛ 30 рджрд┐рдирдХреЛ рд▓рд╛рдЧрд┐ рдирдпрд╛рдБ рдЦрд╛рддрд╛рд╣рд░реВрдорд╛)
- тЬЕ рдиреНрдпреВрдирддрдо рдкреНрд░рддрд┐рдХреГрддрд┐ рд░рд╛рдЦреНрдиреБрд╣реЛрд╕реН (рд▓рдЧрднрдЧ 50% рд▓рд╛рдЧрдд рдмрдЪрдд рдЧрд░реНрдЫ)
- тЬЕ рдкрд░реАрдХреНрд╖рдг рдкрдЫрд┐ рдореЗрдЯрд╛рдЙрдиреБрд╣реЛрд╕реН (рдХреБрдиреИ рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рд╢реБрд▓реНрдХ рдЫреИрди)
- тЬЕ рд╕рд┐рдХрд╛рдЗ рд╕рддреНрд░рд╣рд░реВ рдмреАрдЪ рд╢реВрдиреНрдпрдорд╛ рд╕реНрдХреЗрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реН

**рдЙрджрд╛рд╣рд░рдг**: рдпреЛ рдЙрджрд╛рд╣рд░рдг 2 рдШрдгреНрдЯрд╛/рджрд┐рди ├Ч 30 рджрд┐рди рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН = ~$5/рдорд╣рд┐рдирд╛ $60/рдорд╣рд┐рдирд╛ рд╕рдЯреНрдЯрд╛

---

## рд╕рдорд╕реНрдпрд╛ рд╕рдорд╛рдзрд╛рди рджреНрд░реБрдд рд╕рдиреНрджрд░реНрдн

### рд╕рдорд╕реНрдпрд╛: `azd up` "Subscription not found" рддреНрд░реБрдЯрд┐ рджреЗрдЦрд╛рдЙрдБрдЫ

**рд╕рдорд╛рдзрд╛рди**:
```bash
# рд╕реНрдкрд╖реНрдЯ рд╕рджрд╕реНрдпрддрд╛ рд╕рд╣рд┐рдд рдкреБрди: рд▓рдЧрдЗрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
az account set --subscription <your-subscription-id>
azd env set AZURE_SUBSCRIPTION_ID <your-subscription-id>
azd up
```

### рд╕рдорд╕реНрдпрд╛: API Gateway рд▓реЗ 503 "Product service unavailable" рдлрд░реНрдХрд╛рдЙрдБрдЫ

**рдирд┐рджрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН**:
```bash
# рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рд▓рдЧрд╣рд░реВ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd logs product-service --tail 50

# рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
az containerapp show \
  --name $(azd env get-values | grep PRODUCT_SERVICE | head -1 | cut -d '/' -f5) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --query "properties.runningStatus"
```

**рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░рдгрд╣рд░реВ**:
1. Product service рд╕реБрд░реБ рднрдПрди (Python рддреНрд░реБрдЯрд┐рд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рд▓рдЧрд╣рд░реВ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН)
2. рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдБрдЪ рдЕрд╕рдлрд▓ рднрдпреЛ (`/health` рдЕрдиреНрдд рдмрд┐рдиреНрджреБ рдХрд╛рдо рдЧрд░реНрдЫ рдХрд┐ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН)
3. рдХрдиреНрдЯреЗрдирд░ рдЫрд╡рд┐ рдирд┐рд░реНрдорд╛рдг рдЕрд╕рдлрд▓ рднрдпреЛ (рд░рдЬрд┐рд╕реНрдЯреНрд░реАрдорд╛ рдЫрд╡рд┐ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН)

### рд╕рдорд╕реНрдпрд╛: Autoscaling рдХрд╛рдо рдЧрд░рд┐рд░рд╣реЗрдХреЛ рдЫреИрди

**рдирд┐рджрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН**:
```bash
# рд╡рд░реНрддрдорд╛рди рдкреНрд░рддрд┐рдХреГрддрд┐ рдЧрдгрдирд╛ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
az containerapp revision list \
  --name $(azd env get-values | grep API_GATEWAY | head -1 | cut -d '/' -f5) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --query "[].properties.replicas"

# рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрди рд▓реЛрдб рдЙрддреНрдкрдиреНрди рдЧрд░реНрдиреБрд╣реЛрд╕реН
for i in {1..1000}; do curl $GATEWAY_URL/api/products & done

# рд╕реНрдХреЗрд▓рд┐рдЩ рдШрдЯрдирд╛рд╣рд░реВ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН
azd logs api-gateway --follow | grep -i scale
```

**рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░рдгрд╣рд░реВ**:
1. рд╕реНрдХреЗрд▓ рдирд┐рдпрдо рдЯреНрд░рд┐рдЧрд░ рдЧрд░реНрди рдкрд░реНрдпрд╛рдкреНрдд рд▓реЛрдб рдЫреИрди (50 рднрдиреНрджрд╛ рдмрдвреА рд╕рдорд╡рд░реНрддреА рдЕрдиреБрд░реЛрдз рдЖрд╡рд╢реНрдпрдХ рдЫ)
2. рдЕрдзрд┐рдХрддрдо рдкреНрд░рддрд┐рдХреГрддрд┐ рдкрд╣рд┐рд▓реЗ рдиреИ рдкреБрдЧреЗрдХреЛ рдЫ (Bicep рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН)
3. Bicep рдорд╛ рд╕реНрдХреЗрд▓ рдирд┐рдпрдо рдЧрд▓рдд рдХрдиреНрдлрд┐рдЧрд░ рдЧрд░рд┐рдПрдХреЛ рдЫ (concurrentRequests рдорд╛рди рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН)

### рд╕рдорд╕реНрдпрд╛: Application Insights рд▓рдЧрд╣рд░реВ рджреЗрдЦрд╛рдЗрд░рд╣реЗрдХреЛ рдЫреИрди

**рдирд┐рджрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН**:
```bash
# рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ рд╕реЗрдЯ рдЧрд░рд┐рдПрдХреЛ рдЫ рдХрд┐ рдЫреИрди рдкреБрд╖реНрдЯрд┐ рдЧрд░реНрдиреБрд╣реЛрд╕реН
azd env get-values | grep APPLICATIONINSIGHTS

# рд╕реЗрд╡рд╛рд╣рд░реВ рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реА рдкрдард╛рдЗрд░рд╣реЗрдХрд╛ рдЫрдиреН рдХрд┐ рдЫреИрди рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН
az monitor app-insights component show \
  --app $(azd env get-values | grep APPLICATIONINSIGHTS_NAME | cut -d '=' -f2 | tr -d '"') \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2 | tr -d '"') \
  --query "properties.InstrumentationKey"
```

**рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░рдгрд╣рд░реВ**:
1. рдХрдиреНрдЯреЗрдирд░рдорд╛ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдЩ рдкрд╛рд╕ рдЧрд░рд┐рдПрдХреЛ рдЫреИрди (рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░рд╣рд░реВ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН)
2. Application Insights SDK рдХрдиреНрдлрд┐рдЧрд░ рдЧрд░рд┐рдПрдХреЛ рдЫреИрди (рдХреЛрдбрдорд╛ рдЖрдпрд╛рддрд╣рд░реВ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН)
3. рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реА рдмреНрд▓рдХ рдЧрд░реНрдиреЗ рдлрд╛рдпрд░рд╡рд╛рд▓ (рджреБрд░реНрд▓рдн, рдиреЗрдЯрд╡рд░реНрдХ рдирд┐рдпрдорд╣рд░реВ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБрд╣реЛрд╕реН)

### рд╕рдорд╕реНрдпрд╛: Docker рдирд┐рд░реНрдорд╛рдг рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЕрд╕рдлрд▓ рднрдпреЛ

**рдирд┐рджрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН**:
```bash
# рдПрдкреАрдЖрдИ рдЧреЗрдЯрд╡реЗ рдирд┐рд░реНрдорд╛рдг рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН
cd src/api-gateway
docker build -t test-gateway .

# рдЙрддреНрдкрд╛рджрди рд╕реЗрд╡рд╛ рдирд┐рд░реНрдорд╛рдг рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН
cd ../product-service
docker build -t test-product .
```

**рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░рдгрд╣рд░реВ**:
1. package.json/requirements.txt рдорд╛ рд╣рд░рд╛рдЗрд░рд╣реЗрдХрд╛ рдирд┐рд░реНрднрд░рддрд╛рд╣рд░реВ
2. Dockerfile рд╡рд╛рдХреНрдпрд╡рд┐рдиреНрдпрд╛рд╕ рддреНрд░реБрдЯрд┐рд╣рд░реВ
3. рдирд┐рд░реНрднрд░рддрд╛рд╣рд░реВ рдбрд╛рдЙрдирд▓реЛрдб рдЧрд░реНрдиреЗ рдиреЗрдЯрд╡рд░реНрдХ рд╕рдорд╕реНрдпрд╛

**рдЕрдЭреИ рдЕрдбреНрдХрд┐рдиреБрднрдПрдХреЛ рдЫ?** [рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛ рдорд╛рд░реНрдЧрджрд░реНрд╢рди](../../docs/troubleshooting/common-issues.md) рд╡рд╛ [Azure Container Apps Troubleshooting](https://learn.microsoft.com/azure/container-apps/troubleshooting) рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН

---

## рд╕рдлрд╛рдЗ

рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рд╢реБрд▓реНрдХрд╣рд░реВрдмрд╛рдЯ рдмрдЪреНрди, рд╕рдмреИ рд╕реНрд░реЛрддрд╣рд░реВ рдореЗрдЯрд╛рдЙрдиреБрд╣реЛрд╕реН:

```bash
azd down --force --purge
```

**рдкреБрд╖реНрдЯрд┐рдХрд░рдг рд╕рдВрдХреЗрдд**:
```
? Total resources to delete: 6, are you sure you want to continue? (y/N)
```

`y` рдЯрд╛рдЗрдк рдЧрд░реЗрд░ рдкреБрд╖реНрдЯрд┐ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

**рдХреЗ рдореЗрдЯрд┐рдиреНрдЫ**:
- Container Apps Environment
- рджреБрдмреИ Container Apps (gateway & product service)
- Container Registry
- Application Insights
- Log Analytics Workspace
- Resource Group

**тЬУ рд╕рдлрд╛рдЗ рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН**:
```bash
az group list --query "[?starts_with(name,'rg-microservices')]" --output table
```

рдЦрд╛рд▓реА рдлрд░реНрдХрд╛рдЙрдиреБ рдкрд░реНрдЫред

---

## рд╡рд┐рд╕реНрддрд╛рд░ рдорд╛рд░реНрдЧрджрд░реНрд╢рди: 2 рдмрд╛рдЯ 5+ рд╕реЗрд╡рд╛рд╣рд░реВрдорд╛

рдпреЛ 2-рд╕реЗрд╡рд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рдорд╛ рдорд╣рд╛рд░рдд рд╣рд╛рд╕рд┐рд▓ рдЧрд░реЗрдкрдЫрд┐, рд╡рд┐рд╕реНрддрд╛рд░ рдЧрд░реНрдиреЗ рддрд░рд┐рдХрд╛ рдпрд╣рд╛рдБ рдЫ:

### рдЪрд░рдг 1: рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реНрдерд╛рдпрд┐рддреНрд╡ рдердкреНрдиреБрд╣реЛрд╕реН (рдЕрд░реНрдХреЛ рдЪрд░рдг)

**Product Service рдХреЛ рд▓рд╛рдЧрд┐ Cosmos DB рдердкреНрдиреБрд╣реЛрд╕реН**:

1. `infra/core/cosmos.bicep` рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:
   ```bicep
   resource cosmosAccount 'Microsoft.DocumentDB/databaseAccounts@2023-04-15' = {
     name: name
     location: location
     kind: 'GlobalDocumentDB'
     properties: {
       databaseAccountOfferType: 'Standard'
       consistencyPolicy: { defaultConsistencyLevel: 'Session' }
       locations: [{ locationName: location, failoverPriority: 0 }]
     }
   }
   ```

2. Product Service рд▓рд╛рдИ рдЗрди-рдореЗрдореЛрд░реА рдбреЗрдЯрд╛ рд╕рдЯреНрдЯрд╛ Azure Cosmos DB Python SDK рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рдЕрдкрдбреЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН

3. рдЕрдиреБрдорд╛рдирд┐рдд рдЕрддрд┐рд░рд┐рдХреНрдд рд▓рд╛рдЧрдд: ~$25/рдорд╣рд┐рдирд╛ (рд╕рд░реНрднрд░рд▓реЗрд╕)

### рдЪрд░рдг 2: рддреЗрд╕реНрд░реЛ рд╕реЗрд╡рд╛ рдердкреНрдиреБрд╣реЛрд╕реН (Order Management)

**Order Service рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН**:

1. рдирдпрд╛рдБ рдлреЛрд▓реНрдбрд░: `src/order-service/` (Python/Node.js/C#)
2. рдирдпрд╛рдБ Bicep: `infra/app/order-service.bicep`
3. API Gateway рд▓рд╛рдИ `/api/orders` рдорд╛рд░реНрдЧ рджрд┐рди рдЕрдкрдбреЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН
4. Order рд╕реНрдерд╛рдпрд┐рддреНрд╡рдХреЛ рд▓рд╛рдЧрд┐ Azure SQL Database рдердкреНрдиреБрд╣реЛрд╕реН

**рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдпрд╕реНрддреЛ рд╣реБрдиреНрдЫ**:
```
API Gateway тЖТ Product Service (Cosmos DB)
           тЖТ Order Service (Azure SQL)
```

### рдЪрд░рдг 3: Async рд╕рдВрдЪрд╛рд░ рдердкреНрдиреБрд╣реЛрд╕реН (Service Bus)

**Event-Driven Architecture рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН**:

1. Azure Service Bus рдердкреНрдиреБрд╣реЛрд╕реН: `infra/core/servicebus.bicep`
2. Product Service рд▓реЗ "ProductCreated" рдШрдЯрдирд╛рд╣рд░реВ рдкреНрд░рдХрд╛рд╢рд┐рдд рдЧрд░реНрдЫ
3. Order Service рд▓реЗ рдЙрддреНрдкрд╛рджрди рдШрдЯрдирд╛рд╣рд░реВ рд╕рджрд╕реНрдпрддрд╛ рд▓рд┐рдиреНрдЫ
4. Notification Service рдердкреНрдиреБрд╣реЛрд╕реН рдШрдЯрдирд╛рд╣рд░реВ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░реНрди

**рдврд╛рдБрдЪрд╛**: рдЕрдиреБрд░реЛрдз/рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ (HTTP) + Event-Driven (Service Bus)

### рдЪрд░рдг 4: рдкреНрд░рдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдердкреНрдиреБрд╣реЛрд╕реН

**User Service рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН**:

1. `src/user-service/` рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН (Go/Node.js)
2. Azure AD B2C рд╡рд╛ рдХрд╕реНрдЯрдо JWT рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдердкреНрдиреБрд╣реЛрд╕реН
3. API Gateway рд▓реЗ рдЯреЛрдХрдирд╣рд░реВ рдорд╛рд░реНрдЧ рджрд┐рдиреБ рдЕрдШрд┐ рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрдЫ
4. рд╕реЗрд╡рд╛рд╣рд░реВрд▓реЗ рдкреНрд░рдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрдорддрд┐ рдЬрд╛рдБрдЪ рдЧрд░реНрдЫ

### рдЪрд░рдг 5: рдЙрддреНрдкрд╛рджрди рддрдпрд╛рд░реА

**рдпреА рдШрдЯрдХрд╣рд░реВ рдердкреНрдиреБрд╣реЛрд╕реН**:
- тЬЕ Azure Front Door (рд╡реИрд╢реНрд╡рд┐рдХ рд▓реЛрдб рдмреНрдпрд╛рд▓реЗрдиреНрд╕рд┐рдЩ)
- тЬЕ Azure Key Vault (рдЧреЛрдкреНрдп рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди)
- тЬЕ Azure Monitor Workbooks (рдХрд╕реНрдЯрдо рдбреНрдпрд╛рд╕рдмреЛрд░реНрдбрд╣рд░реВ)
- тЬЕ CI/CD рдкрд╛рдЗрдкрд▓рд╛рдЗрди (GitHub Actions)
- тЬЕ Blue-Green Deployments
- тЬЕ рд╕рдмреИ рд╕реЗрд╡рд╛рд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ Managed Identity

**рдкреВрд░реНрдг рдЙрддреНрдкрд╛рджрди рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рд▓рд╛рдЧрдд**: ~$300-1,400/рдорд╣рд┐рдирд╛

---

## рдердк рдЬрд╛рдиреНрдиреБрд╣реЛрд╕реН

### рд╕рдореНрдмрдиреНрдзрд┐рдд рджрд╕реНрддрд╛рд╡реЗрдЬрд╣рд░реВ
- [Azure Container Apps Documentation](https://learn.microsoft.com/azure/container-apps/)
- [Microservices Architecture Guide](https://learn.microsoft.com/azure/architecture/guide/architecture-styles/microservices)
- [Application Insights for Distributed Tracing](https://learn.microsoft.com/azure/azure-monitor/app/distributed-tracing)
- [Azure Developer CLI Documentation](https://learn.microsoft.com/azure/developer/azure-developer-cli/)

### рдпрд╕ рдкрд╛рдареНрдпрдХреНрд░рдордорд╛ рдЕрд░реНрдХреЛ рдЪрд░рдгрд╣рд░реВ
- тЖР рдЕрдШрд┐рд▓реНрд▓реЛ: [Simple Flask API](../../../../examples/container-app/simple-flask-api) - рд╕реБрд░реБрдХреЛ рдПрдХрд▓-рдХрдиреНрдЯреЗрдирд░ рдЙрджрд╛рд╣рд░рдг
- тЖТ рдЕрд░реНрдХреЛ: [AI Integration Guide](../../../../docs/ai-foundry) - AI рдХреНрд╖рдорддрд╛ рдердкреНрдиреБрд╣реЛрд╕реН
- ЁЯПа [рдкрд╛рдареНрдпрдХреНрд░рдо рдЧреГрд╣](../../README.md)

### рддреБрд▓рдирд╛: рдХрд╣рд┐рд▓реЗ рдХреЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ

| рд╡рд┐рд╢реЗрд╖рддрд╛ | рдПрдХрд▓ рдХрдиреНрдЯреЗрдирд░ | рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕рд╣рд░реВ (рдпреЛ) | Kubernetes (AKS) |
|---------|-----------------|---------------------|------------------|
| **рдкреНрд░рдпреЛрдЧ рдХреЗрд╕** | рд╕рд░рд▓ рдПрдкрд╣рд░реВ | рдЬрдЯрд┐рд▓ рдПрдкрд╣рд░реВ | рдЙрджреНрдпрдо рдПрдкрд╣рд░реВ |
| **рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА** | рдПрдХрд▓ рд╕реЗрд╡рд╛ | рдкреНрд░рддрд┐-рд╕реЗрд╡рд╛ рд╕реНрдХреЗрд▓рд┐рдЩ | рдЕрдзрд┐рдХрддрдо рд▓рдЪрд┐рд▓реЛрдкрди |
| **рдЬрдЯрд┐рд▓рддрд╛** | рдХрдо | рдордзреНрдпрдо | рдЙрдЪреНрдЪ |
| **рдЯреАрдо рдЖрдХрд╛рд░** | 1-3 рд╡рд┐рдХрд╛рд╕рдХрд░реНрддрд╛ | 3-10 рд╡рд┐рдХрд╛рд╕рдХрд░реНрддрд╛ | 10+ рд╡рд┐рдХрд╛рд╕рдХрд░реНрддрд╛ |
| **рд▓рд╛рдЧрдд** | ~$15-50/рдорд╣рд┐рдирд╛ | ~$60-250/рдорд╣рд┐рдирд╛ | ~$150-500/рдорд╣рд┐рдирд╛ |
| **рддреИрдирд╛рддреА рд╕рдордп** | 5-10 рдорд┐рдиреЗрдЯ | 8-12 рдорд┐рдиреЗрдЯ | 15-30 рдорд┐рдиреЗрдЯ |
| **рдЙрдкрдпреБрдХреНрдд рдЫ** | MVPs, рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдкрд╣рд░реВ | рдЙрддреНрдкрд╛рджрди рдПрдкрд╣рд░реВ | рдорд▓реНрдЯрд┐-рдХреНрд▓рд╛рдЙрдб, рдЙрдиреНрдирдд рдиреЗрдЯрд╡рд░реНрдХрд┐рдЩ |

**рд╕рд┐рдлрд╛рд░рд┐рд╕**: Container Apps рдмрд╛рдЯ рд╕реБрд░реБ рдЧрд░реНрдиреБрд╣реЛрд╕реН (рдпреЛ рдЙрджрд╛рд╣рд░рдг), AKS рдорд╛ рдорд╛рддреНрд░ рдЬрд╛рдиреБрд╣реЛрд╕реН рдпрджрд┐ рддрдкрд╛рдИрдВрд▓рд╛рдИ Kubernetes-рд╡рд┐рд╢реЗрд╖ рд╕реБрд╡рд┐рдзрд╛рд╣рд░реВ рдЪрд╛рд╣рд┐рдиреНрдЫ рднрдиреЗред

---

## рдмрд╛рд░рдореНрдмрд╛рд░ рд╕реЛрдзрд┐рдиреЗ рдкреНрд░рд╢реНрдирд╣рд░реВ

**рдкреНрд░рд╢реНрди: рдХрд┐рди рел+ рд╕реЗрд╡рд╛рд╣рд░реВрдХреЛ рд╕рдЯреНрдЯрд╛ рдорд╛рддреНрд░ реи рд╕реЗрд╡рд╛рд╣рд░реВ?**  
рдЙрддреНрддрд░: рд╢реИрдХреНрд╖рд┐рдХ рдкреНрд░рдЧрддрд┐ред рдЬрдЯрд┐рд▓рддрд╛ рдердкреНрдиреБ рдЕрдШрд┐ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдгрдмрд╛рдЯ рдЖрдзрд╛рд░рднреВрдд рдХреБрд░рд╛рд╣рд░реВ (рд╕реЗрд╡рд╛ рд╕рдЮреНрдЪрд╛рд░, рдЕрдиреБрдЧрдорди, рд╕реНрдХреЗрд▓рд┐рдЩ) рд╕рд┐рдХреНрдиреБрд╣реЛрд╕реНред рдпрд╣рд╛рдБ рд╕рд┐рдХреЗрдХрд╛ рдврд╛рдБрдЪрд╛рд╣рд░реВ резрежреж-рд╕реЗрд╡рд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рд╣рд░реВрдорд╛ рдкрдирд┐ рд▓рд╛рдЧреВ рд╣реБрдиреНрдЫрдиреНред

**рдкреНрд░рд╢реНрди: рдХреЗ рдо рдЖрдлреИрдВ рдердк рд╕реЗрд╡рд╛рд╣рд░реВ рдердкреНрди рд╕рдХреНрдЫреБ?**  
рдЙрддреНрддрд░: рдкрдХреНрдХреИ! рдорд╛рдерд┐рдХреЛ рд╡рд┐рд╕реНрддрд╛рд░ рдорд╛рд░реНрдЧрджрд░реНрд╢рди рдЕрдиреБрд╕рд░рдг рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдкреНрд░рддреНрдпреЗрдХ рдирдпрд╛рдБ рд╕реЗрд╡рд╛ рдПрдЙрдЯреИ рдврд╛рдБрдЪрд╛рдорд╛ рдЬрд╛рдиреНрдЫ: src рдлреЛрд▓реНрдбрд░ рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН, Bicep рдлрд╛рдЗрд▓ рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН, azure.yaml рдЕрдкрдбреЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН, рддреИрдирд╛рде рдЧрд░реНрдиреБрд╣реЛрд╕реНред

**рдкреНрд░рд╢реНрди: рдХреЗ рдпреЛ рдЙрддреНрдкрд╛рджрдирдХреЛ рд▓рд╛рдЧрд┐ рддрдпрд╛рд░ рдЫ?**  
рдЙрддреНрддрд░: рдпреЛ рдПрдХ рдмрд▓рд┐рдпреЛ рдЖрдзрд╛рд░ рд╣реЛред рдЙрддреНрдкрд╛рджрдирдХреЛ рд▓рд╛рдЧрд┐, рдердкреНрдиреБрд╣реЛрд╕реН: рдкреНрд░рдмрдиреНрдзрд┐рдд рдкрд╣рд┐рдЪрд╛рди, Key Vault, рд╕реНрдерд╛рдпреА рдбрд╛рдЯрд╛рдмреЗрд╕рд╣рд░реВ, CI/CD рдкрд╛рдЗрдкрд▓рд╛рдЗрди, рдЕрдиреБрдЧрдорди рдЪреЗрддрд╛рд╡рдиреАрд╣рд░реВ, рд░ рдмреНрдпрд╛рдХрдЕрдк рд░рдгрдиреАрддрд┐ред

**рдкреНрд░рд╢реНрди: рдХрд┐рди Dapr рд╡рд╛ рдЕрдиреНрдп рд╕реЗрд╡рд╛ рдореЗрд╖ рдкреНрд░рдпреЛрдЧ рдирдЧрд░реНрдиреЗ?**  
рдЙрддреНрддрд░: рд╕рд┐рдХрд╛рдЗрдХреЛ рд▓рд╛рдЧрд┐ рд╕рд░рд▓ рд░рд╛рдЦреНрдиреБрд╣реЛрд╕реНред рдПрдХ рдкрдЯрдХ рддрдкрд╛рдИрдВрд▓реЗ Container Apps рдХреЛ рдиреЗрдЯрд┐рдн рдиреЗрдЯрд╡рд░реНрдХрд┐рдЩ рдмреБрдЭреНрдиреБрднрдпреЛ рднрдиреЗ, рддрдкрд╛рдИрдВ рдЙрдиреНрдирдд рдкрд░рд┐рджреГрд╢реНрдпрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ (рд░рд╛рдЬреНрдп рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди, pub/sub, рдмрд╛рдЗрдиреНрдбрд┐рдЩ) Dapr рдердкреНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

**рдкреНрд░рд╢реНрди: рдо рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдХрд╕рд░реА рдбрд┐рдмрдЧ рдЧрд░реНрди рд╕рдХреНрдЫреБ?**  
рдЙрддреНрддрд░: Docker рдХреЛ рд╕рд╛рде рд╕реЗрд╡рд╛рд╣рд░реВ рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:  
```bash
cd src/api-gateway
docker build -t local-gateway .
docker run -p 8080:8080 -e PRODUCT_SERVICE_URL=http://localhost:8000 local-gateway
```
  
**рдкреНрд░рд╢реНрди: рдХреЗ рдо рдлрд░рдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдЩ рднрд╛рд╖рд╛рд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдЫреБ?**  
рдЙрддреНрддрд░: рд╣реЛ! рдпреЛ рдЙрджрд╛рд╣рд░рдгрд▓реЗ Node.js (рдЧреЗрдЯрд╡реЗ) + Python (рдкреНрд░реЛрдбрдХреНрдЯ рд╕реЗрд╡рд╛) рджреЗрдЦрд╛рдЙрдБрдЫред рддрдкрд╛рдИрдВ рдХреБрдиреИ рдкрдирд┐ рднрд╛рд╖рд╛рд╣рд░реВ рдорд┐рд╕рд╛рдЙрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ рдЬреБрди рдХрдиреНрдЯреЗрдирд░рд╣рд░реВрдорд╛ рдЪрд▓реНрдЫ: C#, Go, Java, Ruby, PHP, рдЖрджрд┐ред

**рдкреНрд░рд╢реНрди: рдпрджрд┐ рдорд╕рдБрдЧ Azure рдХреНрд░реЗрдбрд┐рдЯ рдЫреИрди рднрдиреЗ рдХреЗ рдЧрд░реНрдиреЗ?**  
рдЙрддреНрддрд░: Azure рдХреЛ рдирд┐рдГрд╢реБрд▓реНрдХ рд╕реНрддрд░ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН (рдирдпрд╛рдБ рдЦрд╛рддрд╛рд╣рд░реВрд▓реЗ рдкрд╣рд┐рд▓реЛ рейреж рджрд┐рдирдорд╛ $реирежреж рдХреНрд░реЗрдбрд┐рдЯ рдкрд╛рдЙрдБрдЫрдиреН) рд╡рд╛ рдЫреЛрдЯреЛ рдкрд░реАрдХреНрд╖рдг рдЕрд╡рдзрд┐рдХрд╛ рд▓рд╛рдЧрд┐ рддреИрдирд╛рде рдЧрд░реНрдиреБрд╣реЛрд╕реН рд░ рддреБрд░реБрдиреНрдд рдореЗрдЯрд╛рдЙрдиреБрд╣реЛрд╕реНред рдпреЛ рдЙрджрд╛рд╣рд░рдгрдХреЛ рд▓рд╛рдЧрдд ~ $реи/рджрд┐рди рдкрд░реНрдЫред

**рдкреНрд░рд╢реНрди: рдпреЛ Azure Kubernetes Service (AKS) рднрдиреНрджрд╛ рдХрд╕рд░реА рдлрд░рдХ рдЫ?**  
рдЙрддреНрддрд░: Container Apps рд╕рд░рд▓ рдЫ (Kubernetes рдХреЛ рдЬреНрдЮрд╛рди рдЖрд╡рд╢реНрдпрдХ рдЫреИрди) рддрд░ рдХрдо рд▓рдЪрд┐рд▓реЛред AKS рд▓реЗ рддрдкрд╛рдИрдВрд▓рд╛рдИ рдкреВрд░реНрдг Kubernetes рдирд┐рдпрдиреНрддреНрд░рдг рджрд┐рдиреНрдЫ рддрд░ рдердк рд╡рд┐рд╢реЗрд╖рдЬреНрдЮрддрд╛ рдЖрд╡рд╢реНрдпрдХ рдЫред Container Apps рдмрд╛рдЯ рд╕реБрд░реБ рдЧрд░реНрдиреБрд╣реЛрд╕реН, рдЖрд╡рд╢реНрдпрдХ рдкрд░реЗ AKS рдорд╛ рдЬрд╛рдиреБрд╣реЛрд╕реНред

**рдкреНрд░рд╢реНрди: рдХреЗ рдо рдпрд╕рд▓рд╛рдИ рд╡рд┐рджреНрдпрдорд╛рди Azure рд╕реЗрд╡рд╛рд╣рд░реВрдХреЛ рд╕рд╛рде рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдЫреБ?**  
рдЙрддреНрддрд░: рд╣реЛ! рддрдкрд╛рдИрдВ рд╡рд┐рджреНрдпрдорд╛рди рдбрд╛рдЯрд╛рдмреЗрд╕рд╣рд░реВ, рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддрд╛, Service Bus, рдЖрджрд┐ рд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдирдпрд╛рдБ рд╕реНрд░реЛрддрд╣рд░реВ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрдХреЛ рд╕рдЯреНрдЯрд╛ рд╡рд┐рджреНрдпрдорд╛рди рд╕реНрд░реЛрддрд╣рд░реВ рд╕рдиреНрджрд░реНрдн рдЧрд░реНрди Bicep рдлрд╛рдЗрд▓рд╣рд░реВ рдЕрдкрдбреЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

---

> **ЁЯОУ рд╕рд┐рдХрд╛рдЗ рдорд╛рд░реНрдЧ рд╕рд╛рд░рд╛рдВрд╢**: рддрдкрд╛рдИрдВрд▓реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╕реНрдХреЗрд▓рд┐рдЩ, рдЖрдиреНрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдЩ, рдХреЗрдиреНрджреНрд░реАрдХреГрдд рдЕрдиреБрдЧрдорди, рд░ рдЙрддреНрдкрд╛рджрди-рддрдпрд╛рд░ рдврд╛рдБрдЪрд╛рд╣рд░реВрдХреЛ рд╕рд╛рде рдмрд╣реБ-рд╕реЗрд╡рд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рддреИрдирд╛рде рдЧрд░реНрди рд╕рд┐рдХреНрдиреБрднрдпреЛред рдпреЛ рдЖрдзрд╛рд░рд▓реЗ рддрдкрд╛рдИрдВрд▓рд╛рдИ рдЬрдЯрд┐рд▓ рд╡рд┐рддрд░рд┐рдд рдкреНрд░рдгрд╛рд▓реАрд╣рд░реВ рд░ рдЙрджреНрдпрдо рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рддрдпрд╛рд░ рдЧрд░реНрджрдЫред

**ЁЯУЪ рдкрд╛рдареНрдпрдХреНрд░рдо рдиреЗрднрд┐рдЧреЗрд╕рди:**
- тЖР рдЕрдШрд┐рд▓реНрд▓реЛ: [Simple Flask API](../../../../examples/container-app/simple-flask-api)
- тЖТ рдЕрд░реНрдХреЛ: [Database Integration Example](../../../../database-app)
- ЁЯПа [рдкрд╛рдареНрдпрдХреНрд░рдо рдЧреГрд╣](../../README.md)
- ЁЯУЦ [Container Apps Best Practices](../../docs/deployment/deployment-guide.md)

---

**тЬи рдмрдзрд╛рдИ рдЫ!** рддрдкрд╛рдИрдВрд▓реЗ рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрднрд┐рд╕ рдЙрджрд╛рд╣рд░рдг рдкреВрд░рд╛ рдЧрд░реНрдиреБрднрдпреЛред рдЕрдм рддрдкрд╛рдИрдВрд▓реЗ Azure Container Apps рдорд╛ рд╡рд┐рддрд░рд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╕рдирд╣рд░реВ рдирд┐рд░реНрдорд╛рдг, рддреИрдирд╛рде, рд░ рдЕрдиреБрдЧрдорди рдЧрд░реНрди рдХрд╕рд░реА рдЧрд░реНрдиреЗ рднрдиреНрдиреЗ рдмреБрдЭреНрдиреБрднрдпреЛред AI рдХреНрд╖рдорддрд╛рд╣рд░реВ рдердкреНрди рддрдпрд╛рд░ рд╣реБрдиреБрд╣реБрдиреНрдЫ? [AI Integration Guide](../../../../docs/ai-foundry) рд╣реЗрд░реНрдиреБрд╣реЛрд╕реН!

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпреЛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЕрдиреБрд╡рд╛рдж рдЧрд░рд┐рдПрдХреЛ рд╣реЛред рд╣рд╛рдореА рд╢реБрджреНрдзрддрд╛рдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫреМрдВ, рддрд░ рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджрд┐рдиреБрд╣реЛрд╕реН рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рджрдорд╛ рддреНрд░реБрдЯрд┐рд╣рд░реВ рд╡рд╛ рдЕрд╢реБрджреНрдзрддрд╛рд╣рд░реВ рд╣реБрди рд╕рдХреНрдЫред рдпрд╕рдХреЛ рдореВрд▓ рднрд╛рд╖рд╛ рдорд╛ рд░рд╣реЗрдХреЛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝рд▓рд╛рдИ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд┐рдиреБрдкрд░реНрдЫред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реАрдХреЛ рд▓рд╛рдЧрд┐, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рд╕рд┐рдлрд╛рд░рд┐рд╕ рдЧрд░рд┐рдиреНрдЫред рдпрд╕ рдЕрдиреБрд╡рд╛рджрдХреЛ рдкреНрд░рдпреЛрдЧрдмрд╛рдЯ рдЙрддреНрдкрдиреНрди рд╣реБрдиреЗ рдХреБрдиреИ рдкрдирд┐ рдЧрд▓рддрдлрд╣рдореА рд╡рд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛рдХреЛ рд▓рд╛рдЧрд┐ рд╣рд╛рдореА рдЬрд┐рдореНрдореЗрд╡рд╛рд░ рд╣реБрдиреЗрдЫреИрдиреМрдВред
<!-- CO-OP TRANSLATOR DISCLAIMER END -->