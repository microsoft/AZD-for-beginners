# –ú–æ–¥–µ–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

‚è±Ô∏è **–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–µ –≤—Ä–µ–º—è**: 60-75 –º–∏–Ω—É—Ç | üí∞ **–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å**: ~$100-300/–º–µ—Å—è—Ü | ‚≠ê **–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è

**üìö –ü—É—Ç—å –æ–±—É—á–µ–Ω–∏—è:**
- ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è: [Capacity Planning](capacity-planning.md) - –ü–æ–¥–±–æ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- üéØ **–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –∑–¥–µ—Å—å**: –ú–æ–¥–µ–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º)
- ‚Üí –î–∞–ª–µ–µ: [SKU Selection](sku-selection.md) - –í—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ Azure
- üè† [Course Home](../../README.md)

---

## –ß–µ–º—É –≤—ã –Ω–∞—É—á–∏—Ç–µ—Å—å

–ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞ –≤—ã:
- –ü–æ–π–º—ë—Ç–µ **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º** –∏ –∫–æ–≥–¥–∞ –∏—Ö –ø—Ä–∏–º–µ–Ω—è—Ç—å
- –†–µ–∞–ª–∏–∑—É–µ—Ç–µ **–ø–∞—Ç—Ç–µ—Ä–Ω—ã –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏** (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è, –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è, –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è)
- –°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ—Ç–µ **—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤** (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è, —Å–æ–±—ã—Ç–∏–π–Ω–∞—è)
- –£–ø—Ä–∞–≤–ª—è–µ—Ç–µ **–æ–±—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º** –º–µ–∂–¥—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏
- –†–∞–∑–≤–µ—Ä–Ω—ë—Ç–µ **–º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã** –≤ Azure —Å –ø–æ–º–æ—â—å—é AZD
- –ü—Ä–∏–º–µ–Ω–∏—Ç–µ **–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã** –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö AI-—Å—Ü–µ–Ω–∞—Ä–∏—è—Ö
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç–µ –∏ –æ—Ç–ª–∞–∂–∏–≤–∞–µ—Ç–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã

## –ü–æ—á–µ–º—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –≤–∞–∂–Ω–∞

### –≠–≤–æ–ª—é—Ü–∏—è: –æ—Ç –æ–¥–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –∫ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ

**–û–¥–∏–Ω –∞–≥–µ–Ω—Ç (–ü—Ä–æ—Å—Ç–æ):**
```
User ‚Üí Agent ‚Üí Response
```
- ‚úÖ –õ–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å
- ‚úÖ –ë—ã—Å—Ç—Ä–æ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á
- ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –æ–¥–Ω–æ–≥–æ –º–æ–¥–µ–ª–∏
- ‚ùå –ù–µ–ª—å–∑—è —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏
- ‚ùå –ù–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è):**
```
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ Orchestrator‚îÇ
           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ         ‚îÇ         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇAgent1‚îÇ  ‚îÇAgent2‚îÇ  ‚îÇAgent3 ‚îÇ
    ‚îÇ(Plan)‚îÇ  ‚îÇ(Code)‚îÇ  ‚îÇ(Review)‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∏ —É–¥–æ–±–Ω–∞—è –≤ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–∏
- ‚úÖ –õ—É—á—à–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ —Å–ª–æ–∂–Ω—ã–º–∏ —Ä–∞–±–æ—á–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏

**–ê–Ω–∞–ª–æ–≥–∏—è**: –û–¥–∏–Ω –∞–≥–µ–Ω—Ç ‚Äî –∫–∞–∫ –æ–¥–∏–Ω —á–µ–ª–æ–≤–µ–∫, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π –≤—Å–µ –∑–∞–¥–∞—á–∏. –ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ ‚Äî –∫–∞–∫ –∫–æ–º–∞–Ω–¥–∞, –≥–¥–µ —É –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ (–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, —Ä–µ—Ü–µ–Ω–∑–µ–Ω—Ç, –ø–∏—Å–∞—Ç–µ–ª—å), –∏ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏

### –ü–∞—Ç—Ç–µ—Ä–Ω 1: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è (–¶–µ–ø–æ—á–∫–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –ó–∞–¥–∞—á–∏ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, –∫–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—ã–≤–æ–¥ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ.

```mermaid
sequenceDiagram
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant Orchestrator as –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
    participant Agent1 as –ê–≥–µ–Ω—Ç-–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å
    participant Agent2 as –ê–≥–µ–Ω—Ç-–ø–∏—Å–∞—Ç–µ–ª—å
    participant Agent3 as –ê–≥–µ–Ω—Ç-—Ä–µ–¥–∞–∫—Ç–æ—Ä
    
    User->>Orchestrator: "–ù–∞–ø–∏—à–∏—Ç–µ —Å—Ç–∞—Ç—å—é –æ–± –ò–ò"
    Orchestrator->>Agent1: –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–µ–º—É
    Agent1-->>Orchestrator: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
    Orchestrator->>Agent2: –ù–∞–ø–∏—Å–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π)
    Agent2-->>Orchestrator: –ß–µ—Ä–Ω–æ–≤–∏–∫ —Å—Ç–∞—Ç—å–∏
    Orchestrator->>Agent3: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–ª—É—á—à–∏—Ç—å
    Agent3-->>Orchestrator: –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç—å—è
    Orchestrator-->>User: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è
    
    Note over User,Agent3: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ: –∫–∞–∂–¥—ã–π —à–∞–≥ –æ–∂–∏–¥–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ
```
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ß—ë—Ç–∫–∏–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –õ–µ–≥–∫–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (–Ω–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞)
- ‚ùå –û–¥–Ω–∞ –æ—à–∏–±–∫–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å—é —Ü–µ–ø–æ—á–∫—É
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º—ã–µ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ –∑–∞–¥–∞—á–∏

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ö–æ–Ω–≤–µ–π–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ ‚Üí –Ω–∞–ø–∏—Å–∞–Ω–∏–µ ‚Üí —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –ø—É–±–ª–∏–∫–∞—Ü–∏—è)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –¥–µ–ø–ª–æ–π)
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤ (—Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö ‚Üí –∞–Ω–∞–ª–∏–∑ ‚Üí –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí —Å–≤–æ–¥–∫–∞)

---

### –ü–∞—Ç—Ç–µ—Ä–Ω 2: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è (Fan-Out/Fan-In)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∑–∞–¥–∞—á–∏ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ.

```mermaid
graph TB
    User[–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    Orchestrator[–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä]
    Agent1[–ê–≥–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∞]
    Agent2[–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–≥–µ–Ω—Ç]
    Agent3[–ê–≥–µ–Ω—Ç –¥–∞–Ω–Ω—ã—Ö]
    Aggregator[–ê–≥—Ä–µ–≥–∞—Ç–æ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤]
    Response[–û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç]
    
    User --> Orchestrator
    Orchestrator --> Agent1
    Orchestrator --> Agent2
    Orchestrator --> Agent3
    Agent1 --> Aggregator
    Agent2 --> Aggregator
    Agent3 --> Aggregator
    Aggregator --> Response
    
    style Orchestrator fill:#2196F3,stroke:#1976D2,stroke-width:3px,color:#fff
    style Aggregator fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
```
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë—ã—Å—Ç—Ä–æ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
- ‚úÖ –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ (–ø—Ä–∏–µ–º–ª–µ–º—ã —á–∞—Å—Ç–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
- ‚úÖ –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- ‚ö†Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–≥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤–Ω–µ –ø–æ—Ä—è–¥–∫–∞
- ‚ö†Ô∏è –ù—É–∂–Ω–∞ –ª–æ–≥–∏–∫–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (APIs + –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö + –≤–µ–±-—Å–∫—Ä–µ–π–ø–∏–Ω–≥)
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Ä–µ—à–µ–Ω–∏—è, –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ª—É—á—à–µ–µ)
- –°–µ—Ä–≤–∏—Å—ã –ø–µ—Ä–µ–≤–æ–¥–∞ (–ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —è–∑—ã–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)

---

### –ü–∞—Ç—Ç–µ—Ä–Ω 3: –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è (–ú–µ–Ω–µ–¥–∂–µ—Ä-–†–∞–±–æ—á–∏–π)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –°–ª–æ–∂–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å –ø–æ–¥–∑–∞–¥–∞—á–∞–º–∏, —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

```mermaid
graph TB
    Master[–ú–∞—Å—Ç–µ—Ä-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä]
    Manager1[–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è–º]
    Manager2[–ö–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä]
    W1[–í–µ–±-—Å–∫—Ä–µ–π–ø–µ—Ä]
    W2[–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞—Ç–µ–π]
    W3[–ê–≤—Ç–æ—Ä]
    W4[–†–µ–¥–∞–∫—Ç–æ—Ä]
    
    Master --> Manager1
    Master --> Manager2
    Manager1 --> W1
    Manager1 --> W2
    Manager2 --> W3
    Manager2 --> W4
    
    style Master fill:#FF9800,stroke:#F57C00,stroke-width:3px,color:#fff
    style Manager1 fill:#2196F3,stroke:#1976D2,stroke-width:2px,color:#fff
    style Manager2 fill:#2196F3,stroke:#1976D2,stroke-width:2px,color:#fff
```
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–æ –∏ —É–¥–æ–±–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- ‚úÖ –ß—ë—Ç–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- ‚ö†Ô∏è –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚ö†Ô∏è –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏)
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–ª–æ–∂–Ω–∞—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Üí –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Üí –∞—Ä—Ö–∏–≤–∞—Ü–∏—è)
- –ú–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–µ –∫–æ–Ω–≤–µ–π–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö (–∏–Ω–≥–µ—Å—Ç ‚Üí –æ—á–∏—Å—Ç–∫–∞ ‚Üí —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è ‚Üí –∞–Ω–∞–ª–∏–∑ ‚Üí –æ—Ç—á—ë—Ç)
- –°–ª–æ–∂–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ ‚Üí –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Üí –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)

---

### –ü–∞—Ç—Ç–µ—Ä–Ω 4: –°–æ–±—ã—Ç–∏–π–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è (Publish-Subscribe)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –ê–≥–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å.

```mermaid
sequenceDiagram
    participant Agent1 as –°–±–æ—Ä—â–∏–∫ –¥–∞–Ω–Ω—ã—Ö
    participant EventBus as –®–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π Azure
    participant Agent2 as –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
    participant Agent3 as –£–≤–µ–¥–æ–º–∏—Ç–µ–ª—å
    participant Agent4 as –ê—Ä—Ö–∏–≤–∞—Ç–æ—Ä
    
    Agent1->>EventBus: –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ "–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã"
    EventBus->>Agent2: –ü–æ–¥–ø–∏—Å–∫–∞: –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
    EventBus->>Agent3: –ü–æ–¥–ø–∏—Å–∫–∞: –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    EventBus->>Agent4: –ü–æ–¥–ø–∏—Å–∫–∞: –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    
    Note over Agent1,Agent4: –í—Å–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
    
    Agent2->>EventBus: –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ "–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω"
    EventBus->>Agent3: –ü–æ–¥–ø–∏—Å–∫–∞: –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á—ë—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞
```
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ (–ø—Ä–æ—Å—Ç–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è)
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- ‚ö†Ô∏è –ö–æ–Ω–µ—á–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –°–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–æ–ø–æ–≤–µ—â–µ–Ω–∏—è, –¥–∞—à–±–æ—Ä–¥—ã, –ª–æ–≥–∏)
- –ú–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (email, SMS, push, Slack)
- –ö–æ–Ω–≤–µ–π–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –¥–∞–Ω–Ω—ã—Ö)

---

### –ü–∞—Ç—Ç–µ—Ä–Ω 5: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞ (–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ/–ö–≤–æ—Ä—É–º)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –ù—É–∂–Ω–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º.

```mermaid
graph TB
    Input[–í—Ö–æ–¥–Ω–∞—è –∑–∞–¥–∞—á–∞]
    Agent1[–ê–≥–µ–Ω—Ç 1: GPT-4]
    Agent2[–ê–≥–µ–Ω—Ç 2: Claude]
    Agent3[–ê–≥–µ–Ω—Ç 3: Gemini]
    Voter[–ì–æ–ª–æ—Å–æ–≤–∞—Ç–µ–ª—å –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞]
    Output[–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç]
    
    Input --> Agent1
    Input --> Agent2
    Input --> Agent3
    Agent1 --> Voter
    Agent2 --> Voter
    Agent3 --> Voter
    Voter --> Output
    
    style Voter fill:#9C27B0,stroke:#7B1FA2,stroke-width:3px,color:#fff
```
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (–Ω–µ—Å–∫–æ–ª—å–∫–æ –º–Ω–µ–Ω–∏–π)
- ‚úÖ –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å (–¥–æ–ø—É—Å—Ç–∏–º—ã –æ—Ç–∫–∞–∑—ã –º–µ–Ω—å—à–∏–Ω—Å—Ç–≤–∞)
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- ‚ùå –î–æ—Ä–æ–≥–æ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã–∑–æ–≤–æ–≤ –º–æ–¥–µ–ª–µ–π)
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (–æ–∂–∏–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤)
- ‚ö†Ô∏è –ù—É–∂–Ω—ã –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∫–æ–Ω—Ç–µ–Ω—Ç)
- –†–µ—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–∏–Ω—Ç–µ—Ä–æ–≤/–∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤)
- –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π –ò–ò, –≤–∞–ª–∏–¥–∞—Ü–∏—è —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏)

---

## –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ü–æ–ª–Ω–∞—è –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤ Azure

```mermaid
graph TB
    User[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/API –∫–ª–∏–µ–Ω—Ç]
    APIM[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API Azure]
    Orchestrator[–°–µ—Ä–≤–∏—Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏<br/>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
    ServiceBus[–®–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π Azure<br/>–°–æ–±—ã—Ç–∏–π–Ω—ã–π —Ö–∞–±]
    
    Agent1[–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–≥–µ–Ω—Ç<br/>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
    Agent2[–ê–≥–µ–Ω—Ç-–ø–∏—Å–∞—Ç–µ–ª—å<br/>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
    Agent3[–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–≥–µ–Ω—Ç<br/>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
    Agent4[–ê–≥–µ–Ω—Ç-—Ä–µ—Ü–µ–Ω–∑–µ–Ω—Ç<br/>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
    
    CosmosDB[(Cosmos DB<br/>–û–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)]
    Storage[–•—Ä–∞–Ω–∏–ª–∏—â–µ Azure<br/>–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã]
    AppInsights[Application Insights<br/>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥]
    
    User --> APIM
    APIM --> Orchestrator
    
    Orchestrator --> ServiceBus
    ServiceBus --> Agent1
    ServiceBus --> Agent2
    ServiceBus --> Agent3
    ServiceBus --> Agent4
    
    Agent1 --> CosmosDB
    Agent2 --> CosmosDB
    Agent3 --> CosmosDB
    Agent4 --> CosmosDB
    
    Agent1 --> Storage
    Agent2 --> Storage
    Agent3 --> Storage
    Agent4 --> Storage
    
    Orchestrator -.-> AppInsights
    Agent1 -.-> AppInsights
    Agent2 -.-> AppInsights
    Agent3 -.-> AppInsights
    Agent4 -.-> AppInsights
    
    style Orchestrator fill:#FF9800,stroke:#F57C00,stroke-width:3px,color:#fff
    style ServiceBus fill:#9C27B0,stroke:#7B1FA2,stroke-width:3px,color:#fff
    style CosmosDB fill:#4CAF50,stroke:#388E3C,stroke-width:3px,color:#fff
```
**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

| Component | Purpose | Azure Service |
|-----------|---------|---------------|
| **API Gateway** | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | API Management |
| **Orchestrator** | –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∞–≥–µ–Ω—Ç–æ–≤ | Container Apps |
| **Message Queue** | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è | Service Bus / Event Hubs |
| **Agents** | –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ AI-—Ä–∞–±–æ—Ç–Ω–∏–∫–∏ | Container Apps / Functions |
| **State Store** | –û–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á | Cosmos DB |
| **Artifact Storage** | –î–æ–∫—É–º–µ–Ω—Ç—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –ª–æ–≥–∏ | Blob Storage |
| **Monitoring** | –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞, –ª–æ–≥–∏ | Application Insights |

---

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –¢—Ä–µ–±—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Azure Developer CLI
azd version
# ‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: azd –≤–µ—Ä—Å–∏–∏ 1.0.0 –∏–ª–∏ –≤—ã—à–µ

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Azure CLI
az --version
# ‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: azure-cli –≤–µ—Ä—Å–∏–∏ 2.50.0 –∏–ª–∏ –≤—ã—à–µ

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Docker (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
docker --version
# ‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: Docker –≤–µ—Ä—Å–∏–∏ 20.10 –∏–ª–∏ –≤—ã—à–µ
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è Azure

- –ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ Azure
- –ü—Ä–∞–≤–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ:
  - Container Apps
  - –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º—ë–Ω Service Bus
  - –ê–∫–∫–∞—É–Ω—Ç–æ–≤ Cosmos DB
  - –£—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è (Storage accounts)
  - Application Insights

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–Ω–∞–Ω–∏—è

–í—ã –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –ø—Ä–æ–π—Ç–∏:
- [Configuration Management](../chapter-03-configuration/configuration.md)
- [Authentication & Security](../chapter-03-configuration/authsecurity.md)
- [Microservices Example](../../../../examples/microservices)

---

## –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
multi-agent-system/
‚îú‚îÄ‚îÄ azure.yaml                    # AZD configuration
‚îú‚îÄ‚îÄ infra/
‚îÇ   ‚îú‚îÄ‚îÄ main.bicep               # Main infrastructure
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ servicebus.bicep     # Message queue
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cosmos.bicep         # State store
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage.bicep        # Artifact storage
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ monitoring.bicep     # Application Insights
‚îÇ   ‚îî‚îÄ‚îÄ app/
‚îÇ       ‚îú‚îÄ‚îÄ orchestrator.bicep   # Orchestrator service
‚îÇ       ‚îî‚îÄ‚îÄ agent.bicep          # Agent template
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ orchestrator/            # Orchestration logic
    ‚îÇ   ‚îú‚îÄ‚îÄ app.py
    ‚îÇ   ‚îú‚îÄ‚îÄ workflows.py
    ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
    ‚îú‚îÄ‚îÄ agents/
    ‚îÇ   ‚îú‚îÄ‚îÄ research/            # Research agent
    ‚îÇ   ‚îú‚îÄ‚îÄ writer/              # Writer agent
    ‚îÇ   ‚îú‚îÄ‚îÄ analyst/             # Analyst agent
    ‚îÇ   ‚îî‚îÄ‚îÄ reviewer/            # Reviewer agent
    ‚îî‚îÄ‚îÄ shared/
        ‚îú‚îÄ‚îÄ state_manager.py     # Shared state logic
        ‚îî‚îÄ‚îÄ message_handler.py   # Message handling
```

---

## –£—Ä–æ–∫ 1: –ü–∞—Ç—Ç–µ—Ä–Ω –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: –ö–æ–Ω–≤–µ–π–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–ü–æ—Å—Ç—Ä–æ–∏–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä: –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ ‚Üí –ù–∞–ø–∏—Å–∞–Ω–∏–µ ‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –ü—É–±–ª–∏–∫–∞—Ü–∏—è

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AZD

**–§–∞–π–ª: `azure.yaml`**

```yaml
name: content-pipeline
metadata:
  template: multi-agent-sequential@1.0.0

services:
  orchestrator:
    project: ./src/orchestrator
    language: python
    host: containerapp
  
  research-agent:
    project: ./src/agents/research
    language: python
    host: containerapp
  
  writer-agent:
    project: ./src/agents/writer
    language: python
    host: containerapp
  
  editor-agent:
    project: ./src/agents/editor
    language: python
    host: containerapp
```

### 2. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: Service Bus –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏

**–§–∞–π–ª: `infra/core/servicebus.bicep`**

```bicep
param name string
param location string
param tags object = {}

resource serviceBusNamespace 'Microsoft.ServiceBus/namespaces@2022-10-01-preview' = {
  name: name
  location: location
  tags: tags
  sku: {
    name: 'Standard'
    tier: 'Standard'
  }
  properties: {
    minimumTlsVersion: '1.2'
  }
}

// Queue for orchestrator ‚Üí research agent
resource researchQueue 'Microsoft.ServiceBus/namespaces/queues@2022-10-01-preview' = {
  parent: serviceBusNamespace
  name: 'research-tasks'
  properties: {
    maxDeliveryCount: 3
    lockDuration: 'PT5M'
    deadLetteringOnMessageExpiration: true
  }
}

// Queue for research agent ‚Üí writer agent
resource writerQueue 'Microsoft.ServiceBus/namespaces/queues@2022-10-01-preview' = {
  parent: serviceBusNamespace
  name: 'writer-tasks'
  properties: {
    maxDeliveryCount: 3
    lockDuration: 'PT5M'
  }
}

// Queue for writer agent ‚Üí editor agent
resource editorQueue 'Microsoft.ServiceBus/namespaces/queues@2022-10-01-preview' = {
  parent: serviceBusNamespace
  name: 'editor-tasks'
  properties: {
    maxDeliveryCount: 3
    lockDuration: 'PT5M'
  }
}

output namespace string = serviceBusNamespace.name
output connectionString string = listKeys('${serviceBusNamespace.id}/AuthorizationRules/RootManageSharedAccessKey', serviceBusNamespace.apiVersion).primaryConnectionString
```

### 3. –ú–µ–Ω–µ–¥–∂–µ—Ä –æ–±—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–§–∞–π–ª: `src/shared/state_manager.py`**

```python
from azure.cosmos import CosmosClient, PartitionKey
from datetime import datetime
import os

class StateManager:
    """Manages shared state across agents using Cosmos DB"""
    
    def __init__(self):
        endpoint = os.environ['COSMOS_ENDPOINT']
        key = os.environ['COSMOS_KEY']
        
        self.client = CosmosClient(endpoint, key)
        self.database = self.client.get_database_client('agent-state')
        self.container = self.database.get_container_client('tasks')
    
    def create_task(self, task_id: str, task_type: str, input_data: dict):
        """Create a new task"""
        task = {
            'id': task_id,
            'type': task_type,
            'status': 'pending',
            'input': input_data,
            'created_at': datetime.utcnow().isoformat(),
            'steps': []
        }
        self.container.create_item(task)
        return task
    
    def update_task_step(self, task_id: str, step_name: str, result: dict):
        """Update task with completed step"""
        task = self.container.read_item(task_id, partition_key=task_id)
        
        task['steps'].append({
            'name': step_name,
            'completed_at': datetime.utcnow().isoformat(),
            'result': result
        })
        
        self.container.replace_item(task_id, task)
        return task
    
    def complete_task(self, task_id: str, final_result: dict):
        """Mark task as complete"""
        task = self.container.read_item(task_id, partition_key=task_id)
        task['status'] = 'completed'
        task['result'] = final_result
        task['completed_at'] = datetime.utcnow().isoformat()
        self.container.replace_item(task_id, task)
        return task
    
    def get_task(self, task_id: str):
        """Retrieve task state"""
        return self.container.read_item(task_id, partition_key=task_id)
```

### 4. –°–µ—Ä–≤–∏—Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏

**–§–∞–π–ª: `src/orchestrator/app.py`**

```python
from flask import Flask, request, jsonify
from azure.servicebus import ServiceBusClient, ServiceBusMessage
import json
import uuid
import os
from shared.state_manager import StateManager

app = Flask(__name__)
state_manager = StateManager()

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Service Bus
servicebus_connection_str = os.environ['SERVICEBUS_CONNECTION_STRING']
servicebus_client = ServiceBusClient.from_connection_string(servicebus_connection_str)

@app.route('/health', methods=['GET'])
def health():
    return jsonify({'status': 'healthy', 'service': 'orchestrator'})

@app.route('/create-content', methods=['POST'])
def create_content():
    """
    Sequential workflow: Research ‚Üí Write ‚Üí Edit ‚Üí Publish
    """
    data = request.json
    topic = data.get('topic')
    
    if not topic:
        return jsonify({'error': 'Topic required'}), 400
    
    # –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
    task_id = str(uuid.uuid4())
    task = state_manager.create_task(
        task_id=task_id,
        task_type='content_creation',
        input_data={'topic': topic}
    )
    
    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É –∞–≥–µ–Ω—Ç—É (–ø–µ—Ä–≤—ã–π —à–∞–≥)
    sender = servicebus_client.get_queue_sender('research-tasks')
    message = ServiceBusMessage(
        body=json.dumps({
            'task_id': task_id,
            'topic': topic,
            'next_queue': 'writer-tasks'  # –ö—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        }),
        content_type='application/json'
    )
    
    with sender:
        sender.send_messages(message)
    
    return jsonify({
        'task_id': task_id,
        'status': 'started',
        'workflow': 'sequential',
        'steps': ['research', 'write', 'edit', 'publish'],
        'message': 'Content creation pipeline initiated'
    }), 202

@app.route('/task/<task_id>', methods=['GET'])
def get_task_status(task_id):
    """Check task status"""
    try:
        task = state_manager.get_task(task_id)
        return jsonify(task)
    except Exception as e:
        return jsonify({'error': str(e)}), 404

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)
```

### 5. –ê–≥–µ–Ω—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª: `src/agents/research/app.py`**

```python
from azure.servicebus import ServiceBusClient, ServiceBusMessage
from openai import AzureOpenAI
import json
import os
import time
from shared.state_manager import StateManager

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤
state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

openai_client = AzureOpenAI(
    api_key=os.environ['AZURE_OPENAI_API_KEY'],
    api_version="2024-02-01",
    azure_endpoint=os.environ['AZURE_OPENAI_ENDPOINT']
)

def process_research_task(message_data):
    """Process research request and pass to writer"""
    task_id = message_data['task_id']
    topic = message_data['topic']
    next_queue = message_data['next_queue']
    
    print(f"üî¨ Researching: {topic}")
    
    # –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Azure OpenAI –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
    response = openai_client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "You are a research assistant. Provide comprehensive research on the given topic."},
            {"role": "user", "content": f"Research this topic thoroughly: {topic}"}
        ],
        max_tokens=1500
    )
    
    research_results = response.choices[0].message.content
    
    # –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    state_manager.update_task_step(
        task_id=task_id,
        step_name='research',
        result={'research': research_results}
    )
    
    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–µ–º—É –∞–≥–µ–Ω—Ç—É (–ø–∏—Å–∞—Ç–µ–ª—é)
    sender = servicebus_client.get_queue_sender(next_queue)
    message = ServiceBusMessage(
        body=json.dumps({
            'task_id': task_id,
            'topic': topic,
            'research': research_results,
            'next_queue': 'editor-tasks'
        }),
        content_type='application/json'
    )
    
    with sender:
        sender.send_messages(message)
    
    print(f"‚úÖ Research complete for task {task_id}")

def main():
    """Listen to research queue"""
    receiver = servicebus_client.get_queue_receiver('research-tasks')
    
    print("üî¨ Research Agent started, listening for tasks...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_research_task(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"‚ùå Error processing message: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

### 6. –ê–≥–µ–Ω—Ç-–ø–∏—Å–∞—Ç–µ–ª—å

**–§–∞–π–ª: `src/agents/writer/app.py`**

```python
from azure.servicebus import ServiceBusClient, ServiceBusMessage
from openai import AzureOpenAI
import json
import os
from shared.state_manager import StateManager

state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

openai_client = AzureOpenAI(
    api_key=os.environ['AZURE_OPENAI_API_KEY'],
    api_version="2024-02-01",
    azure_endpoint=os.environ['AZURE_OPENAI_ENDPOINT']
)

def process_writing_task(message_data):
    """Write article based on research"""
    task_id = message_data['task_id']
    topic = message_data['topic']
    research = message_data['research']
    next_queue = message_data['next_queue']
    
    print(f"‚úçÔ∏è Writing article: {topic}")
    
    # –í—ã–∑–≤–∞—Ç—å Azure OpenAI –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏
    response = openai_client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "You are a professional writer. Write engaging, well-structured articles."},
            {"role": "user", "content": f"Based on this research:\n\n{research}\n\nWrite a comprehensive article about: {topic}"}
        ],
        max_tokens=2000
    )
    
    article_draft = response.choices[0].message.content
    
    # –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    state_manager.update_task_step(
        task_id=task_id,
        step_name='writing',
        result={'draft': article_draft}
    )
    
    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä—É
    sender = servicebus_client.get_queue_sender(next_queue)
    message = ServiceBusMessage(
        body=json.dumps({
            'task_id': task_id,
            'topic': topic,
            'draft': article_draft
        }),
        content_type='application/json'
    )
    
    with sender:
        sender.send_messages(message)
    
    print(f"‚úÖ Article draft complete for task {task_id}")

def main():
    """Listen to writer queue"""
    receiver = servicebus_client.get_queue_receiver('writer-tasks')
    
    print("‚úçÔ∏è Writer Agent started, listening for tasks...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_writing_task(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"‚ùå Error: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

### 7. –ê–≥–µ–Ω—Ç-—Ä–µ–¥–∞–∫—Ç–æ—Ä

**–§–∞–π–ª: `src/agents/editor/app.py`**

```python
from azure.servicebus import ServiceBusClient
from openai import AzureOpenAI
import json
import os
from shared.state_manager import StateManager

state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

openai_client = AzureOpenAI(
    api_key=os.environ['AZURE_OPENAI_API_KEY'],
    api_version="2024-02-01",
    azure_endpoint=os.environ['AZURE_OPENAI_ENDPOINT']
)

def process_editing_task(message_data):
    """Edit and finalize article"""
    task_id = message_data['task_id']
    topic = message_data['topic']
    draft = message_data['draft']
    
    print(f"üìù Editing article: {topic}")
    
    # –í—ã–∑–≤–∞—Ç—å Azure OpenAI –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    response = openai_client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "You are an expert editor. Improve grammar, clarity, and structure."},
            {"role": "user", "content": f"Edit and improve this article:\n\n{draft}"}
        ],
        max_tokens=2000
    )
    
    final_article = response.choices[0].message.content
    
    # –û—Ç–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é
    state_manager.complete_task(
        task_id=task_id,
        final_result={
            'topic': topic,
            'final_article': final_article,
            'word_count': len(final_article.split())
        }
    )
    
    print(f"‚úÖ Article finalized for task {task_id}")

def main():
    """Listen to editor queue"""
    receiver = servicebus_client.get_queue_receiver('editor-tasks')
    
    print("üìù Editor Agent started, listening for tasks...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_editing_task(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"‚ùå Error: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

### 8. –î–µ–ø–ª–æ–π –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å
azd init
azd up

# –ü–æ–ª—É—á–∏—Ç—å URL –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
ORCHESTRATOR_URL=$(azd env get-values | grep ORCHESTRATOR_URL | cut -d '=' -f2 | tr -d '"')

# –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
curl -X POST $ORCHESTRATOR_URL/create-content \
  -H "Content-Type: application/json" \
  -d '{"topic": "The Future of AI in Healthcare"}'
```

**‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```json
{
  "task_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "status": "started",
  "workflow": "sequential",
  "steps": ["research", "write", "edit", "publish"],
  "message": "Content creation pipeline initiated"
}
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–¥–∞—á–∏:**
```bash
TASK_ID="a1b2c3d4-e5f6-7890-abcd-ef1234567890"
curl $ORCHESTRATOR_URL/task/$TASK_ID
```

**‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ (–∑–∞–≤–µ—Ä—à–µ–Ω–æ):**
```json
{
  "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "type": "content_creation",
  "status": "completed",
  "steps": [
    {
      "name": "research",
      "completed_at": "2025-11-19T10:30:00Z",
      "result": {"research": "..."}
    },
    {
      "name": "writing",
      "completed_at": "2025-11-19T10:32:00Z",
      "result": {"draft": "..."}
    }
  ],
  "result": {
    "topic": "The Future of AI in Healthcare",
    "final_article": "...",
    "word_count": 1500
  }
}
```

---

## –£—Ä–æ–∫ 2: –ü–∞—Ç—Ç–µ—Ä–Ω –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π

–ü–æ—Å—Ç—Ä–æ–∏–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä

**–§–∞–π–ª: `src/orchestrator/parallel_workflow.py`**

```python
from flask import Flask, request, jsonify
from azure.servicebus import ServiceBusClient, ServiceBusMessage
import json
import uuid
import os
from shared.state_manager import StateManager

app = Flask(__name__)
state_manager = StateManager()

servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

@app.route('/research-parallel', methods=['POST'])
def research_parallel():
    """
    Parallel workflow: Multiple agents work simultaneously
    """
    data = request.json
    query = data.get('query')
    
    task_id = str(uuid.uuid4())
    task = state_manager.create_task(
        task_id=task_id,
        task_type='parallel_research',
        input_data={
            'query': query,
            'agents': ['web', 'academic', 'news', 'social']
        }
    )
    
    # –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (fan-out): –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º –∞–≥–µ–Ω—Ç–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
    agents = [
        ('web-research-queue', 'web'),
        ('academic-research-queue', 'academic'),
        ('news-research-queue', 'news'),
        ('social-research-queue', 'social')
    ]
    
    for queue_name, agent_type in agents:
        sender = servicebus_client.get_queue_sender(queue_name)
        message = ServiceBusMessage(
            body=json.dumps({
                'task_id': task_id,
                'query': query,
                'agent_type': agent_type,
                'result_queue': 'aggregation-queue'
            }),
            content_type='application/json'
        )
        
        with sender:
            sender.send_messages(message)
    
    return jsonify({
        'task_id': task_id,
        'status': 'started',
        'workflow': 'parallel',
        'agents_dispatched': 4,
        'message': 'Parallel research initiated'
    }), 202

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)
```

### –õ–æ–≥–∏–∫–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏

**–§–∞–π–ª: `src/agents/aggregator/app.py`**

```python
from azure.servicebus import ServiceBusClient
import json
import os
from collections import defaultdict
from shared.state_manager import StateManager

state_manager = StateManager()
servicebus_client = ServiceBusClient.from_connection_string(
    os.environ['SERVICEBUS_CONNECTION_STRING']
)

# –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–µ
task_results = defaultdict(list)
expected_agents = 4  # –≤–µ–±, –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ, –Ω–æ–≤–æ—Å—Ç–∏, —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ

def process_result(message_data):
    """Aggregate results from parallel agents"""
    task_id = message_data['task_id']
    agent_type = message_data['agent_type']
    result = message_data['result']
    
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    task_results[task_id].append({
        'agent': agent_type,
        'data': result
    })
    
    print(f"üìä Received result from {agent_type} agent ({len(task_results[task_id])}/{expected_agents})")
    
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–≤–µ—Ä—à–∏–ª–∏ –ª–∏ –≤—Å–µ –∞–≥–µ–Ω—Ç—ã (fan-in)
    if len(task_results[task_id]) == expected_agents:
        print(f"‚úÖ All agents completed for task {task_id}. Aggregating...")
        
        # –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        aggregated = {
            'query': message_data['query'],
            'sources': task_results[task_id],
            'summary': generate_summary(task_results[task_id])
        }
        
        # –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–µ
        state_manager.complete_task(task_id, aggregated)
        
        # –û—á–∏—Å—Ç–∏—Ç—å
        del task_results[task_id]
        
        print(f"‚úÖ Aggregation complete for task {task_id}")

def generate_summary(results):
    """Generate summary from all sources"""
    summaries = [r['data'].get('summary', '') for r in results]
    return '\n\n'.join(summaries)

def main():
    """Listen to aggregation queue"""
    receiver = servicebus_client.get_queue_receiver('aggregation-queue')
    
    print("üìä Aggregator started, listening for results...")
    
    with receiver:
        while True:
            messages = receiver.receive_messages(max_wait_time=5)
            for message in messages:
                try:
                    message_data = json.loads(str(message))
                    process_result(message_data)
                    receiver.complete_message(message)
                except Exception as e:
                    print(f"‚ùå Error: {e}")
                    receiver.abandon_message(message)

if __name__ == '__main__':
    main()
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:**
- ‚ö° **–í 4 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ** (–∞–≥–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
- üîÑ **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** (–ø—Ä–∏–µ–º–ª–µ–º—ã —á–∞—Å—Ç–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
- üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** (–ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –±–æ–ª—å—à–µ –∞–≥–µ–Ω—Ç–æ–≤)

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–∞–π–º–∞—É—Ç–æ–≤ ‚≠ê‚≠ê (–°—Ä–µ–¥–Ω–∏–π)

**–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Ç–∞–π–º–∞—É—Ç–æ–≤, —á—Ç–æ–±—ã –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–µ –∂–¥–∞–ª –≤–µ—á–Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤.

**–®–∞–≥–∏**:

1. **–î–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞ –≤ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä:**

```python
from datetime import datetime, timedelta

task_timeouts = {}  # task_id -> expiration_time

def process_result(message_data):
    task_id = message_data['task_id']
    
    # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    if task_id not in task_timeouts:
        task_timeouts[task_id] = datetime.utcnow() + timedelta(seconds=30)
    
    task_results[task_id].append({
        'agent': message_data['agent_type'],
        'data': message_data['result']
    })
    
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–≤–µ—Ä—à–µ–Ω–æ –ª–∏ –∏–ª–∏ –∏—Å—Ç–µ–∫–ª–æ –ø–æ —Ç–∞–π–º–∞—É—Ç—É
    if len(task_results[task_id]) == expected_agents or \
       datetime.utcnow() > task_timeouts[task_id]:
        
        print(f"üìä Aggregating with {len(task_results[task_id])}/{expected_agents} results")
        
        aggregated = {
            'query': message_data['query'],
            'sources': task_results[task_id],
            'completed_agents': len(task_results[task_id]),
            'timed_out': len(task_results[task_id]) < expected_agents
        }
        
        state_manager.complete_task(task_id, aggregated)
        
        # –û—á–∏—Å—Ç–∫–∞
        del task_results[task_id]
        del task_timeouts[task_id]
```

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏:**

```python
# –í –æ–¥–Ω–æ–º –∞–≥–µ–Ω—Ç–µ –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫—É, —á—Ç–æ–±—ã —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
import time
time.sleep(35)  # –ü—Ä–µ–≤—ã—à–∞–µ—Ç —Ç–∞–π–º-–∞—É—Ç –≤ 30 —Å–µ–∫—É–Ω–¥
```

3. **–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

```bash
azd deploy aggregator

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ
curl -X POST $ORCHESTRATOR_URL/research-parallel \
  -H "Content-Type: application/json" \
  -d '{"query": "AI safety research"}'

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
curl $ORCHESTRATOR_URL/task/$TASK_ID
```

**‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –ó–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥, –¥–∞–∂–µ –µ—Å–ª–∏ –∞–≥–µ–Ω—Ç—ã –Ω–µ –≤—Å–µ –≤—ã–ø–æ–ª–Ω–∏–ª–∏ —Ä–∞–±–æ—Ç—É
- ‚úÖ –û—Ç–≤–µ—Ç —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —á–∞—Å—Ç–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (`"timed_out": true`)
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (3 –∏–∑ 4 –∞–≥–µ–Ω—Ç–æ–≤)

**–í—Ä–µ–º—è**: 20-25 –º–∏–Ω—É—Ç

---

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–≤—Ç–æ—Ä–æ–≤ (Retry) ‚≠ê‚≠ê‚≠ê (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ)

**–¶–µ–ª—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –Ω–µ—É–¥–∞—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∞–≥–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–¥ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–π —Å–¥–∞—á–µ–π.

**–®–∞–≥–∏**:

1. **–î–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–æ–≤ –≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–µ:**

```python
from dataclasses import dataclass
from typing import Dict

@dataclass
class RetryConfig:
    max_retries: int = 3
    backoff_seconds: int = 5

retry_counts: Dict[str, int] = {}  # —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ message_id -> retry_count

def send_with_retry(queue_name: str, message_data: dict, retry_config: RetryConfig):
    """Send message with retry metadata"""
    message_id = message_data.get('message_id', str(uuid.uuid4()))
    message_data['message_id'] = message_id
    message_data['retry_count'] = retry_counts.get(message_id, 0)
    message_data['max_retries'] = retry_config.max_retries
    
    sender = servicebus_client.get_queue_sender(queue_name)
    message = ServiceBusMessage(
        body=json.dumps(message_data),
        content_type='application/json',
        message_id=message_id
    )
    
    with sender:
        sender.send_messages(message)
```

2. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–≤—Ç–æ—Ä–æ–≤ –≤ –∞–≥–µ–Ω—Ç–∞—Ö:**

```python
def process_with_retry(message, receiver, process_func):
    """Process message with automatic retry on failure"""
    try:
        message_data = json.loads(str(message))
        
        # –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        process_func(message_data)
        
        # –£—Å–ø–µ—à–Ω–æ ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–æ
        receiver.complete_message(message)
        
    except Exception as e:
        message_id = message.message_id
        retry_count = message_data.get('retry_count', 0)
        max_retries = message_data.get('max_retries', 3)
        
        if retry_count < max_retries:
            # –ü–æ–≤—Ç–æ—Ä: –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å —Å–Ω–æ–≤–∞ —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º —Å—á—ë—Ç—á–∏–∫–æ–º –ø–æ–ø—ã—Ç–æ–∫
            print(f"‚ö†Ô∏è Retry {retry_count + 1}/{max_retries} for message {message_id}")
            
            message_data['retry_count'] = retry_count + 1
            
            # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ç—É –∂–µ –æ—á–µ—Ä–µ–¥—å —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
            time.sleep(5 * (retry_count + 1))  # –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏
            send_with_retry(queue_name, message_data, RetryConfig())
            
            receiver.complete_message(message)  # –£–¥–∞–ª–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª
        else:
            # –ü—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–æ–≤ ‚Äî –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å –º—ë—Ä—Ç–≤—ã—Ö –ø–∏—Å–µ–º
            print(f"‚ùå Max retries exceeded for message {message_id}")
            receiver.dead_letter_message(
                message,
                reason="MaxRetriesExceeded",
                error_description=str(e)
            )
```

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –æ—á–µ—Ä–µ–¥—å dead letter:**

```python
def monitor_dead_letters():
    """Check dead letter queue for failed messages"""
    receiver = servicebus_client.get_queue_receiver(
        'research-queue',
        sub_queue='deadletter'
    )
    
    with receiver:
        messages = receiver.receive_messages(max_wait_time=5)
        for message in messages:
            print(f"‚ò†Ô∏è Dead letter: {message.message_id}")
            print(f"Reason: {message.dead_letter_reason}")
            print(f"Description: {message.dead_letter_error_description}")
```

**‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –°–±–æ–∏ –∑–∞–¥–∞—á –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è (–¥–æ 3 —Ä–∞–∑)
- ‚úÖ –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–∞–º–∏ (5s, 10s, 15s)
- ‚úÖ –ü–æ—Å–ª–µ –º–∞–∫—Å–∏–º—É–º–∞ –ø–æ–≤—Ç–æ—Ä–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–¥—É—Ç –≤ dead letter queue
- ‚úÖ Dead letter queue –º–æ–∂–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç—å

**–í—Ä–µ–º—è**: 30-40 –º–∏–Ω—É—Ç

---

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Circuit Breaker ‚≠ê‚≠ê‚≠ê (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ)

**–¶–µ–ª—å**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –∫–∞—Å–∫–∞–¥–Ω—ã–µ –æ—Ç–∫–∞–∑—ã, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è –∑–∞–ø—Ä–æ—Å—ã –∫ –ø–∞–¥–∞—é—â–∏–º –∞–≥–µ–Ω—Ç–∞–º.

**–®–∞–≥–∏**:

1. **–°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å circuit breaker:**

```python
from enum import Enum
from datetime import datetime, timedelta

class CircuitState(Enum):
    CLOSED = "closed"      # –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
    OPEN = "open"          # –û—Ç–∫–∞–∑, –æ—Ç–∫–ª–æ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã
    HALF_OPEN = "half_open"  # –ü—Ä–æ–≤–µ—Ä–∫–∞, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –ª–∏

class CircuitBreaker:
    def __init__(self, failure_threshold=5, timeout_seconds=60):
        self.failure_threshold = failure_threshold
        self.timeout_seconds = timeout_seconds
        self.failure_count = 0
        self.last_failure_time = None
        self.state = CircuitState.CLOSED
    
    def call(self, func):
        """Execute function with circuit breaker protection"""
        if self.state == CircuitState.OPEN:
            # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∏—Å—Ç–µ–∫ –ª–∏ —Ç–∞–π–º–∞—É—Ç
            if datetime.utcnow() - self.last_failure_time > timedelta(seconds=self.timeout_seconds):
                self.state = CircuitState.HALF_OPEN
                print("üîÑ Circuit breaker: HALF_OPEN (testing)")
            else:
                raise Exception(f"Circuit breaker OPEN for agent. Try again in {self.timeout_seconds}s")
        
        try:
            result = func()
            
            # –£—Å–ø–µ—Ö
            if self.state == CircuitState.HALF_OPEN:
                self.state = CircuitState.CLOSED
                self.failure_count = 0
                print("‚úÖ Circuit breaker: CLOSED (recovered)")
            
            return result
            
        except Exception as e:
            self.failure_count += 1
            self.last_failure_time = datetime.utcnow()
            
            if self.failure_count >= self.failure_threshold:
                self.state = CircuitState.OPEN
                print(f"üî¥ Circuit breaker: OPEN (too many failures)")
            
            raise e
```

2. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –≤—ã–∑–æ–≤–∞–º –∞–≥–µ–Ω—Ç–æ–≤:**

```python
# –í –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–µ
agent_circuits = {
    'web': CircuitBreaker(failure_threshold=5, timeout_seconds=60),
    'academic': CircuitBreaker(failure_threshold=5, timeout_seconds=60),
    'news': CircuitBreaker(failure_threshold=5, timeout_seconds=60),
    'social': CircuitBreaker(failure_threshold=5, timeout_seconds=60)
}

def send_to_agent(agent_type, message_data):
    """Send with circuit breaker protection"""
    circuit = agent_circuits[agent_type]
    
    try:
        circuit.call(lambda: send_message(agent_type, message_data))
    except Exception as e:
        print(f"‚ö†Ô∏è Skipping {agent_type} agent: {e}")
        # –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏
```

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å circuit breaker:**

```bash
# –°–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–±–æ–∏ (–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–¥–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞)
az containerapp stop --name web-research-agent --resource-group rg-agents

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤
for i in {1..10}; do
  curl -X POST $ORCHESTRATOR_URL/research-parallel \
    -H "Content-Type: application/json" \
    -d '{"query": "test query '$i'"}'
  sleep 2
done

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ, —á—Ç–æ —Ü–µ–ø—å –æ—Ç–∫—Ä—ã—Ç–∞ –ø–æ—Å–ª–µ 5 —Å–±–æ–µ–≤
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Azure CLI –¥–ª—è –ª–æ–≥–æ–≤ Container App:
az containerapp logs show --name orchestrator --resource-group $RG_NAME --tail 50
```

**‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –ü–æ—Å–ª–µ 5 –æ—Ç–∫–∞–∑–æ–≤ —Ü–µ–ø—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã)
- ‚úÖ –ß–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥ —Ü–µ–ø—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–ª—É–æ—Ç–∫—Ä—ã—Ç–æ–π (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è)
- ‚úÖ –û—Å—Ç–∞–ª—å–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- ‚úÖ –¶–µ–ø—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∞–≥–µ–Ω—Ç–∞

**–í—Ä–µ–º—è**: 40-50 –º–∏–Ω—É—Ç

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Å Application Insights

**–§–∞–π–ª: `src/shared/tracing.py`**

```python
from opencensus.ext.azure.log_exporter import AzureLogHandler
from opencensus.ext.azure.trace_exporter import AzureExporter
from opencensus.trace import config_integration
from opencensus.trace.tracer import Tracer
from opencensus.trace.samplers import AlwaysOnSampler
import logging
import os

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É
config_integration.trace_integrations(['requests', 'logging'])

connection_string = os.environ.get('APPLICATIONINSIGHTS_CONNECTION_STRING')

# –°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–π—Å–µ—Ä
tracer = Tracer(
    exporter=AzureExporter(connection_string=connection_string),
    sampler=AlwaysOnSampler()
)

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logger = logging.getLogger(__name__)
logger.addHandler(AzureLogHandler(connection_string=connection_string))
logger.setLevel(logging.INFO)

def trace_agent_call(agent_name, task_id, operation):
    """Trace agent operations"""
    with tracer.span(name=f'{agent_name}.{operation}') as span:
        span.add_attribute('agent', agent_name)
        span.add_attribute('task_id', task_id)
        span.add_attribute('operation', operation)
        
        try:
            result = operation()
            span.add_attribute('status', 'success')
            return result
        except Exception as e:
            span.add_attribute('status', 'error')
            span.add_attribute('error', str(e))
            raise
```

### –ó–∞–ø—Ä–æ—Å—ã Application Insights

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:**

```kusto
// Trace complete workflow for a task
traces
| where customDimensions.task_id == "a1b2c3d4-..."
| project timestamp, message, customDimensions.agent, customDimensions.operation
| order by timestamp asc
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞–≥–µ–Ω—Ç–æ–≤:**

```kusto
// Compare agent execution times
dependencies
| where name contains "agent"
| summarize 
    avg_duration = avg(duration),
    p95_duration = percentile(duration, 95),
    count = count()
  by agent = tostring(customDimensions.agent)
| order by avg_duration desc
```

**–ê–Ω–∞–ª–∏–∑ —Å–±–æ–µ–≤:**

```kusto
// Find which agents fail most
exceptions
| where customDimensions.agent != ""
| summarize 
    failure_count = count(),
    unique_errors = dcount(outerMessage)
  by agent = tostring(customDimensions.agent)
| order by failure_count desc
```

---

## –ê–Ω–∞–ª–∏–∑ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

### –°—Ç–æ–∏–º–æ—Å—Ç—å –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (–ø–æ–º–µ—Å—è—á–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏)

| Component | Configuration | Cost |
|-----------|--------------|------|
| **Orchestrator** | 1 Container App (1 vCPU, 2GB) | $30-50 |
| **4 Agents** | 4 Container Apps (0.5 vCPU, 1GB each) | $60-120 |
| **Service Bus** | Standard tier, 10M messages | $10-20 |
| **Cosmos DB** | Serverless, 5GB storage, 1M RUs | $25-50 |
| **Blob Storage** | 10GB storage, 100K operations | $5-10 |
| **Application Insights** | 5GB ingestion | $10-15 |
| **Azure OpenAI** | GPT-4, 10M tokens | $100-300 |
| **Total** | | **$240-565/month** |

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞—Ç—Ä–∞—Ç

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ serverless, –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ:**
   ```bicep
   // Cosmos DB serverless (no minimum cost)
   properties: {
     databaseAccountOfferType: 'Standard'
     capabilities: [{ name: 'EnableServerless' }]
   }
   ```

2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–π—Ç–µ –∞–≥–µ–Ω—Ç–æ–≤ –¥–æ –Ω—É–ª—è –≤ –ø—Ä–æ—Å—Ç–æ–µ:**
   ```bicep
   scale: {
     minReplicas: 0  // Scale to zero when no messages
     maxReplicas: 10
   }
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∞—Ç—á–∏–Ω–≥ –¥–ª—è Service Bus:**
   ```python
   # –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–∞–∫–µ—Ç–∞–º–∏ (–¥–µ—à–µ–≤–ª–µ)
   sender.send_messages([message1, message2, message3])
   ```

4. **–ö–µ—à–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   ```python
   # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Azure Cache for Redis
   if cache.exists(query_hash):
       return cache.get(query_hash)
   ```

---

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ –î–ï–õ–ê–¢–¨:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**
   ```python
   # –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
   def process_task(task_id):
       if state_manager.task_exists(task_id):
           print(f"Task {task_id} already processed, skipping")
           return
       # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á–∏...
   ```

2. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ª–æ–≥–∏–Ω–≥**
   ```python
   logger.info(f"Agent: {agent_name}, Task: {task_id}, Action: {action}")
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ correlation IDs**
   ```python
   # –ü–µ—Ä–µ–¥–∞—Ç—å task_id —á–µ—Ä–µ–∑ –≤–µ—Å—å —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å
   message_data = {
       'task_id': task_id,  # –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏
       'timestamp': datetime.utcnow().isoformat()
   }
   ```

4. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ TTL (time-to-live) –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π**
   ```bicep
   properties: {
     defaultMessageTimeToLive: 'PT1H'  // 1 hour max
   }
   ```

5. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –æ—á–µ—Ä–µ–¥–∏ dead letter**
   ```python
   # –†–µ–≥—É–ª—è—Ä–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ—É–¥–∞—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   monitor_dead_letters()
   ```

### ‚ùå –ù–ï –î–ï–õ–ê–¢–¨:

1. **–ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```python
   # ‚ùå –ü–õ–û–•–û: –ê–≥–µ–Ω—Ç A ‚Üí –ê–≥–µ–Ω—Ç B ‚Üí –ê–≥–µ–Ω—Ç A (–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª)
   # ‚úÖ –•–û–†–û–®–û: –ó–∞–¥–∞–π—Ç–µ —á–µ—Ç–∫–∏–π –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –≥—Ä–∞—Ñ (DAG)
   ```

2. **–ù–µ –±–ª–æ–∫–∏—Ä—É–π—Ç–µ –ø–æ—Ç–æ–∫–∏ –∞–≥–µ–Ω—Ç–æ–≤**
   ```python
   # ‚ùå –ü–õ–û–•–û: –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ
   while not task_complete:
       time.sleep(1)
   
   # ‚úÖ –•–û–†–û–®–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—Ä–∞—Ç–Ω—ã–µ –≤—ã–∑–æ–≤—ã –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
   ```

3. **–ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç–∏—á–Ω—ã–µ —Å–±–æ–∏**
   ```python
   # ‚ùå –ü–õ–û–•–û: –ü—Ä–µ–∫—Ä–∞—â–∞—Ç—å –≤–µ—Å—å —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∏–∑‚Äë–∑–∞ –æ—Ç–∫–∞–∑–∞ –æ–¥–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
   # ‚úÖ –•–û–†–û–®–û: –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –æ—à–∏–±–æ–∫
   ```

4. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä—ã**
   ```python
   # ‚ùå –ü–õ–û–•–û: –ø–æ–≤—Ç–æ—Ä—è—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
   # ‚úÖ –•–û–†–û–®–û: max_retries = 3, –∑–∞—Ç–µ–º –≤ –æ—á–µ—Ä–µ–¥—å –º—ë—Ä—Ç–≤—ã—Ö –ø–∏—Å–µ–º
   ```

---
## –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –°–æ–æ–±—â–µ–Ω–∏—è –∑–∞—Å—Ç—Ä—è–ª–∏ –≤ –æ—á–µ—Ä–µ–¥–∏

**–°–∏–º–ø—Ç–æ–º—ã:**
- –°–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏
- –ê–≥–µ–Ω—Ç—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç
- –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ –∑–∞—Å—Ç—Ä—è–ª –Ω–∞ "pending"

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–ª—É–±–∏–Ω—É –æ—á–µ—Ä–µ–¥–∏
az servicebus queue show \
  --namespace-name mybus \
  --name research-tasks \
  --query "countDetails"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∂—É—Ä–Ω–∞–ª—ã –∞–≥–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é Azure CLI
az containerapp logs show --name research-agent --resource-group $RG_NAME --tail 50
```

**–†–µ—à–µ–Ω–∏—è:**

1. **–£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –∞–≥–µ–Ω—Ç–æ–≤:**
   ```bash
   az containerapp update \
     --name research-agent \
     --min-replicas 3 \
     --max-replicas 10
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—á–µ—Ä–µ–¥—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (dead letter queue):**
   ```bash
   az servicebus queue show \
     --namespace-name mybus \
     --name research-tasks \
     --query "countDetails.deadLetterMessageCount"
   ```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –ò—Å—Ç–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–¥–∞—á–∏/–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ –æ—Å—Ç–∞—ë—Ç—Å—è "in_progress"
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∞–≥–µ–Ω—Ç—ã –∑–∞–≤–µ—Ä—à–∞—é—Ç, –¥—Ä—É–≥–∏–µ –Ω–µ—Ç
- –ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–¥–∞—á–∏
curl $ORCHESTRATOR_URL/task/$TASK_ID

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Application Insights
# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å: traces | where customDimensions.task_id == "..."
```

**–†–µ—à–µ–Ω–∏—è:**

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç –≤ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–µ (–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1)**

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–±–æ–∏ –∞–≥–µ–Ω—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é Azure Monitor:**
   ```bash
   # –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∂—É—Ä–Ω–∞–ª—ã —á–µ—Ä–µ–∑ azd monitor
   azd monitor --logs
   
   # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Azure CLI, —á—Ç–æ–±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∂—É—Ä–Ω–∞–ª—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   az containerapp logs show --name <agent-name> --resource-group $RG_NAME --follow | grep "ERROR\|FAIL"
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∞–≥–µ–Ω—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã:**
   ```bash
   az containerapp list \
     --resource-group rg-agents \
     --query "[].{name:name, status:properties.runningStatus}"
   ```

---

## –£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Azure Service Bus](https://learn.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview)
- [Cosmos DB](https://learn.microsoft.com/azure/cosmos-db/introduction)
- [Container Apps DAPR](https://learn.microsoft.com/azure/container-apps/dapr-overview)
- [Multi-Agent Design Patterns](https://learn.microsoft.com/azure/architecture/guide/ai/multi-agent-systems)

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –≤ —ç—Ç–æ–º –∫—É—Ä—Å–µ
- ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–µ–µ: [Capacity Planning](capacity-planning.md)
- ‚Üí –°–ª–µ–¥—É—é—â–µ–µ: [SKU Selection](sku-selection.md)
- üè† [–î–æ–º–∞—à–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫—É—Ä—Å–∞](../../README.md)

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
- [–ü—Ä–∏–º–µ—Ä –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤](../../../../examples/microservices) - –ü–∞—Ç—Ç–µ—Ä–Ω—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- [Azure OpenAI Example](../../../../examples/azure-openai-chat) - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ò–ò

---

## –°–≤–æ–¥–∫–∞

**–í—ã —É–∑–Ω–∞–ª–∏:**
- ‚úÖ –ü—è—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π, –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π, —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –∫–æ–Ω—Å–µ–Ω—Å—É—Å)
- ‚úÖ –ú–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ Azure (Service Bus, Cosmos DB, Container Apps)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–∞—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤, –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –∏ –º–µ—Ö–∞–Ω–∏–∑–º—ã circuit breaker
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- ‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞—Ç—Ä–∞—Ç

**–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã:**
1. **–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω** - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –¥–ª—è —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏, —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏
2. **–¢—â–∞—Ç–µ–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º** - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Cosmos DB –∏–ª–∏ –∞–Ω–∞–ª–æ–≥ –¥–ª—è –æ–±—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
3. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —Å–±–æ–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –¢–∞–π–º–∞—É—Ç—ã, –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏, circuit breakers, –æ—á–µ—Ä–µ–¥–∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –≤—Å—ë** - –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Ç—Ä–∞—Å—Å–∏–Ω–≥ –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
5. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞—Ç—Ä–∞—Ç—ã** - –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ –Ω—É–ª—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ serverless, —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
2. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –º–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è –≤–∞—à–µ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
3. –ò–∑—É—á–∏—Ç–µ [SKU Selection](sku-selection.md) —á—Ç–æ–±—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∑–∞—Ç—Ä–∞—Ç—ã

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**:
–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –±—ã–ª –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä–≤–∏—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞ –±–∞–∑–µ –ò–ò [Co-op Translator](https://github.com/Azure/co-op-translator). –•–æ—Ç—è –º—ã —Å—Ç—Ä–µ–º–∏–º—Å—è –∫ —Ç–æ—á–Ω–æ—Å—Ç–∏, –∏–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–∫–∏ –∏–ª–∏ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–º —è–∑—ã–∫–µ —Å–ª–µ–¥—É–µ—Ç —Å—á–∏—Ç–∞—Ç—å –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º. –î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º—É –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫—É. –ú—ã –Ω–µ –Ω–µ—Å–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ª—é–±—ã–µ –Ω–µ–¥–æ—Ä–∞–∑—É–º–µ–Ω–∏—è –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–µ —Ç–æ–ª–∫–æ–≤–∞–Ω–∏—è, –≤–æ–∑–Ω–∏–∫—à–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->