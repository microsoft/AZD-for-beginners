<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "fc2d5d2f2f572c99876be92d82680e22",
  "translation_date": "2025-11-20T10:16:54+00:00",
  "source_file": "examples/azure-openai-chat/README.md",
  "language_code": "ru"
}
-->
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —á–∞—Ç–∞ Azure OpenAI

**–£—Ä–æ–≤–µ–Ω—å –æ–±—É—á–µ–Ω–∏—è:** –°—Ä–µ–¥–Ω–∏–π ‚≠ê‚≠ê | **–í—Ä–µ–º—è:** 35-45 –º–∏–Ω—É—Ç | **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $50-200/–º–µ—Å—è—Ü

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —á–∞—Ç–∞ Azure OpenAI, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Azure Developer CLI (azd). –≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ GPT-4, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ API –∏ –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞.

## üéØ –ß–µ–º—É –≤—ã –Ω–∞—É—á–∏—Ç–µ—Å—å

- –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å Azure OpenAI Service —Å –º–æ–¥–µ–ª—å—é GPT-4
- –ó–∞—â–∏—Ç–∏—Ç—å –∫–ª—é—á–∏ API OpenAI —Å –ø–æ–º–æ—â—å—é Key Vault
- –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ –Ω–∞ Python
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥—ã
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

## üì¶ –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ

‚úÖ **Azure OpenAI Service** - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ GPT-4  
‚úÖ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —á–∞—Ç–∞ –Ω–∞ Python** - –ü—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Key Vault** - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–π API  
‚úÖ **ARM Templates** - –ü–æ–ª–Ω—ã–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –∫–æ–¥  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞—Å—Ö–æ–¥–æ–≤** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤  
‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏** - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∏—Å—á–µ—Ä–ø–∞–Ω–∏—è –∫–≤–æ—Ç—ã  

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Python Chat Application (Local/Cloud)    ‚îÇ
‚îÇ   - Command-line interface                 ‚îÇ
‚îÇ   - Conversation history                   ‚îÇ
‚îÇ   - Token usage tracking                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ HTTPS (API Key)
                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Azure OpenAI Service                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   ‚îÇ   GPT-4 Model                         ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   - 20K tokens/min capacity           ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   - Multi-region failover (optional)  ‚îÇ ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ   Managed Identity ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Azure Key Vault                           ‚îÇ
‚îÇ   - OpenAI API Key (secret)                 ‚îÇ
‚îÇ   - Endpoint URL (secret)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ

- **Azure Developer CLI (azd)** - [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd)
- **–ü–æ–¥–ø–∏—Å–∫–∞ Azure** —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ OpenAI - [–ó–∞–ø—Ä–æ—Å–∏—Ç—å –¥–æ—Å—Ç—É–ø](https://aka.ms/oai/access)
- **Python 3.9+** - [–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python](https://www.python.org/downloads/)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é azd (–Ω—É–∂–Ω–∞ 1.5.0 –∏–ª–∏ –≤—ã—à–µ)
azd version

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ö–æ–¥ –≤ Azure
azd auth login

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Python
python --version  # –∏–ª–∏ python3 --version

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ OpenAI (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Azure Portal)
az cognitiveservices account list-skus \
  --kind OpenAI \
  --location eastus
```

> **‚ö†Ô∏è –í–∞–∂–Ω–æ:** Azure OpenAI —Ç—Ä–µ–±—É–µ—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏. –ï—Å–ª–∏ –≤—ã –µ—â–µ –Ω–µ –ø–æ–¥–∞–ª–∏ –∑–∞—è–≤–∫—É, –ø–æ—Å–µ—Ç–∏—Ç–µ [aka.ms/oai/access](https://aka.ms/oai/access). –û–¥–æ–±—Ä–µ–Ω–∏–µ –æ–±—ã—á–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç 1-2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è.

## ‚è±Ô∏è –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

| –≠—Ç–∞–ø | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç |
|------|-------------|----------------|
| –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π | 2-3 –º–∏–Ω—É—Ç—ã | –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–≤–æ—Ç—ã OpenAI |
| –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã | 8-12 –º–∏–Ω—É—Ç | –°–æ–∑–¥–∞–Ω–∏–µ OpenAI, Key Vault, —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | 2-3 –º–∏–Ω—É—Ç—ã | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π |
| **–ò—Ç–æ–≥–æ** | **12-18 –º–∏–Ω—É—Ç** | –ì–æ—Ç–æ–≤–æ –∫ –æ–±—â–µ–Ω–∏—é —Å GPT-4 |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–µ—Ä–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ OpenAI –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑-–∑–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –º–æ–¥–µ–ª–∏.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –ø—Ä–∏–º–µ—Ä—É
cd examples/azure-openai-chat

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
azd env new myopenai

# –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –≤—Å–µ (–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
azd up
# –í–∞–º –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ:
# 1. –í—ã–±—Ä–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É Azure
# 2. –í—ã–±—Ä–∞—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é OpenAI (–Ω–∞–ø—Ä–∏–º–µ—Ä, eastus, eastus2, westus)
# 3. –ü–æ–¥–æ–∂–¥–∞—Ç—å 12-18 –º–∏–Ω—É—Ç –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
pip install -r requirements.txt

# –ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ!
python chat.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
ü§ñ Azure OpenAI Chat Application
Connected to: GPT-4 (eastus)
Type your message (or 'quit' to exit)

You: Hello! Tell me about Azure OpenAI.
Assistant: Azure OpenAI Service provides REST API access to OpenAI's powerful language models including GPT-4, GPT-3.5-Turbo, and Embeddings...

[Tokens used: 145 | Estimated cost: $0.0044]
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ Azure

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
azd show

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
# - –°–µ—Ä–≤–∏—Å OpenAI: (–∏–º—è —Ä–µ—Å—É—Ä—Å–∞)
# - Key Vault: (–∏–º—è —Ä–µ—Å—É—Ä—Å–∞)
# - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ: gpt-4
# - –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: eastus (–∏–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞–º–∏ —Ä–µ–≥–∏–æ–Ω)
```

### –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API OpenAI

```bash
# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É OpenAI –∏ –∫–ª—é—á
OPENAI_ENDPOINT=$(azd env get-value AZURE_OPENAI_ENDPOINT)
OPENAI_KEY=$(azd env get-value AZURE_OPENAI_API_KEY)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–∑–æ–≤ API
curl "$OPENAI_ENDPOINT/openai/deployments/gpt-4/chat/completions?api-version=2024-08-01-preview" \
  -H "Content-Type: application/json" \
  -H "api-key: $OPENAI_KEY" \
  -d '{
    "messages": [{"role": "user", "content": "Say hello!"}],
    "max_tokens": 50
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "choices": [
    {
      "message": {
        "role": "assistant",
        "content": "Hello! How can I assist you today?"
      }
    }
  ],
  "usage": {
    "prompt_tokens": 8,
    "completion_tokens": 9,
    "total_tokens": 17
  }
}
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Key Vault

```bash
# –°–ø–∏—Å–æ–∫ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ Key Vault
KV_NAME=$(azd env get-value AZURE_KEY_VAULT_NAME)

az keyvault secret list \
  --vault-name $KV_NAME \
  --query "[].name" \
  --output table
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Å–µ–∫—Ä–µ—Ç—ã:**
- `openai-api-key`
- `openai-endpoint`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –°–µ—Ä–≤–∏—Å OpenAI —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç —Å GPT-4
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –°–µ–∫—Ä–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Key Vault
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
azure-openai-chat/
‚îú‚îÄ‚îÄ README.md                   ‚úÖ This guide
‚îú‚îÄ‚îÄ azure.yaml                  ‚úÖ AZD configuration
‚îú‚îÄ‚îÄ infra/                      ‚úÖ Infrastructure as Code
‚îÇ   ‚îú‚îÄ‚îÄ main.bicep             ‚úÖ Main Bicep template
‚îÇ   ‚îú‚îÄ‚îÄ main.parameters.json   ‚úÖ Parameters
‚îÇ   ‚îî‚îÄ‚îÄ openai.bicep           ‚úÖ OpenAI resource definition
‚îú‚îÄ‚îÄ src/                        ‚úÖ Application code
‚îÇ   ‚îú‚îÄ‚îÄ chat.py                ‚úÖ Chat interface
‚îÇ   ‚îú‚îÄ‚îÄ config.py              ‚úÖ Configuration loader
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt       ‚úÖ Python dependencies
‚îî‚îÄ‚îÄ .gitignore                  ‚úÖ Git ignore rules
```

## –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ (`chat.py`)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —á–∞—Ç–∞ –≤–∫–ª—é—á–∞–µ—Ç:

- **–ò—Å—Ç–æ—Ä–∏—è –æ–±—â–µ–Ω–∏—è** - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- **–ü–æ–¥—Å—á–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–∞—Å—Ö–æ–¥—ã
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –æ—à–∏–±–æ–∫ API
- **–û—Ü–µ–Ω–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤** - –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ—Ç–æ–∫–æ–≤** - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã

### –ö–æ–º–∞–Ω–¥—ã

–í–æ –≤—Ä–µ–º—è –æ–±—â–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- `quit` –∏–ª–∏ `exit` - –ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ–∞–Ω—Å
- `clear` - –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –æ–±—â–µ–Ω–∏—è
- `tokens` - –ü–æ–∫–∞–∑–∞—Ç—å –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
- `cost` - –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ü–µ–Ω–æ—á–Ω—É—é –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config.py`)

–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```python
AZURE_OPENAI_ENDPOINT  # –ò–∑ Key Vault
AZURE_OPENAI_API_KEY   # –ò–∑ Key Vault
AZURE_OPENAI_MODEL     # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: gpt-4
AZURE_OPENAI_MAX_TOKENS # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 800
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π —á–∞—Ç

```bash
python chat.py
```

### –ß–∞—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –º–æ–¥–µ–ª—å—é

```bash
export AZURE_OPENAI_MODEL=gpt-35-turbo
python chat.py
```

### –ß–∞—Ç —Å –ø–æ—Ç–æ–∫–∞–º–∏

```bash
python chat.py --stream
```

### –ü—Ä–∏–º–µ—Ä —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

```
You: Explain Azure OpenAI Service in 3 sentences.
Assistant: Azure OpenAI Service is Microsoft Azure's cloud platform offering 
that provides access to OpenAI's powerful language models. It enables developers 
to integrate capabilities like GPT-4 into their applications with enterprise-grade 
security and compliance. The service includes features for content filtering, 
abuse monitoring, and responsible AI practices.

[Tokens used: 89 | Estimated cost: $0.0027]

You: What models are available?
Assistant: Azure OpenAI Service offers several model families including GPT-4 
(most capable), GPT-3.5-Turbo (faster and cost-effective), and Embeddings models 
for vector search. Each model has different capabilities, pricing, and token limits.

[Tokens used: 67 | Estimated cost: $0.0020]

Total session: 156 tokens | $0.0047
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞–º–∏

### –¶–µ–Ω—ã –Ω–∞ —Ç–æ–∫–µ–Ω—ã (GPT-4)

| –ú–æ–¥–µ–ª—å | –í–≤–æ–¥ (–∑–∞ 1K —Ç–æ–∫–µ–Ω–æ–≤) | –í—ã–≤–æ–¥ (–∑–∞ 1K —Ç–æ–∫–µ–Ω–æ–≤) |
|--------|----------------------|-----------------------|
| GPT-4 | $0.03 | $0.06 |
| GPT-3.5-Turbo | $0.0015 | $0.002 |

### –û—Ü–µ–Ω–æ—á–Ω—ã–µ –º–µ—Å—è—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã

–ù–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

| –£—Ä–æ–≤–µ–Ω—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | –°–æ–æ–±—â–µ–Ω–∏–π/–¥–µ–Ω—å | –¢–æ–∫–µ–Ω–æ–≤/–¥–µ–Ω—å | –ú–µ—Å—è—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å |
|------------------------|----------------|--------------|--------------------|
| **–õ–µ–≥–∫–∏–π** | 20 —Å–æ–æ–±—â–µ–Ω–∏–π | 3,000 —Ç–æ–∫–µ–Ω–æ–≤ | $3-5 |
| **–£–º–µ—Ä–µ–Ω–Ω—ã–π** | 100 —Å–æ–æ–±—â–µ–Ω–∏–π | 15,000 —Ç–æ–∫–µ–Ω–æ–≤ | $15-25 |
| **–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π** | 500 —Å–æ–æ–±—â–µ–Ω–∏–π | 75,000 —Ç–æ–∫–µ–Ω–æ–≤ | $75-125 |

**–ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:** $1-2/–º–µ—Å—è—Ü (Key Vault + –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è)

### –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤

```bash
# 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPT-3.5-Turbo –¥–ª—è –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á (–≤ 20 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ)
export AZURE_OPENAI_MODEL=gpt-35-turbo

# 2. –£–º–µ–Ω—å—à–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤
export AZURE_OPENAI_MAX_TOKENS=400

# 3. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
python chat.py --show-tokens

# 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –æ –±—é–¥–∂–µ—Ç–µ
az consumption budget create \
  --budget-name "openai-budget" \
  --amount 50 \
  --time-grain Monthly
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤

```bash
# –í Azure Portal:
# –†–µ—Å—É—Ä—Å OpenAI ‚Üí –ú–µ—Ç—Ä–∏–∫–∏ ‚Üí –í—ã–±—Ä–∞—Ç—å "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤"

# –ò–ª–∏ —á–µ—Ä–µ–∑ Azure CLI:
az monitor metrics list \
  --resource $(azd env get-value AZURE_OPENAI_RESOURCE_ID) \
  --metric "TokenTransaction" \
  --start-time $(date -u -d '1 hour ago' '+%Y-%m-%dT%H:%M:%S') \
  --interval PT1M
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ API

```bash
# –ü–æ—Ç–æ–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö –∂—É—Ä–Ω–∞–ª–æ–≤
az monitor diagnostic-settings create \
  --resource $(azd env get-value AZURE_OPENAI_RESOURCE_ID) \
  --name openai-logs \
  --logs '[{"category": "Audit", "enabled": true}]' \
  --workspace $(azd env get-value LOG_ANALYTICS_WORKSPACE_ID)

# –ó–∞–ø—Ä–æ—Å –∂—É—Ä–Ω–∞–ª–æ–≤
az monitor log-analytics query \
  --workspace $(azd env get-value LOG_ANALYTICS_WORKSPACE_ID) \
  --analytics-query "AzureDiagnostics | where Category == 'Audit' | top 10 by TimeGenerated"
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ "Access Denied"

**–°–∏–º–ø—Ç–æ–º—ã:** 403 Forbidden –ø—Ä–∏ –≤—ã–∑–æ–≤–µ API

**–†–µ—à–µ–Ω–∏—è:**
```bash
# 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ—Å—Ç—É–ø –∫ OpenAI –æ–¥–æ–±—Ä–µ–Ω
az cognitiveservices account show \
  --name $(azd env get-value AZURE_OPENAI_NAME) \
  --resource-group $(azd env get-value AZURE_RESOURCE_GROUP)

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API-–∫–ª—é—á –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
azd env get-value AZURE_OPENAI_API_KEY

# 3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç URL –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏ –≤–µ—Ä–Ω—ã–π
azd env get-value AZURE_OPENAI_ENDPOINT
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: https://[name].openai.azure.com/
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

**–°–∏–º–ø—Ç–æ–º—ã:** 429 Too Many Requests

**–†–µ—à–µ–Ω–∏—è:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–≤–æ—Ç—É
az cognitiveservices account deployment show \
  --name $(azd env get-value AZURE_OPENAI_NAME) \
  --resource-group $(azd env get-value AZURE_RESOURCE_GROUP) \
  --deployment-name gpt-4

# 2. –ó–∞–ø—Ä–æ—Å–∏—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–≤–æ—Ç—ã (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
# –ü–µ—Ä–µ–π—Ç–∏ –≤ Azure Portal ‚Üí –†–µ—Å—É—Ä—Å OpenAI ‚Üí –ö–≤–æ—Ç—ã ‚Üí –ó–∞–ø—Ä–æ—Å–∏—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ

# 3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (—É–∂–µ –≤ chat.py)
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

**–°–∏–º–ø—Ç–æ–º—ã:** –û—à–∏–±–∫–∞ 404 –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏

**–†–µ—à–µ–Ω–∏—è:**
```bash
# 1. –ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
az cognitiveservices account deployment list \
  --name $(azd env get-value AZURE_OPENAI_NAME) \
  --resource-group $(azd env get-value AZURE_RESOURCE_GROUP)

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º—è –º–æ–¥–µ–ª–∏ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏
echo $AZURE_OPENAI_MODEL

# 3. –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
export AZURE_OPENAI_MODEL=gpt-4  # –∏–ª–∏ gpt-35-turbo
```

### –ü—Ä–æ–±–ª–µ–º–∞: –í—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞

**–°–∏–º–ø—Ç–æ–º—ã:** –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (>5 —Å–µ–∫—É–Ω–¥)

**–†–µ—à–µ–Ω–∏—è:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É
# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤ —Ä–µ–≥–∏–æ–Ω–µ, –±–ª–∏–∂–∞–π—à–µ–º –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

# 2. –£–º–µ–Ω—å—à–∏—Ç—å max_tokens –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
export AZURE_OPENAI_MAX_TOKENS=400

# 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫–æ–≤—É—é –ø–µ—Ä–µ–¥–∞—á—É –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX
python chat.py --stream
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1. –ó–∞—â–∏—Ç–∞ –∫–ª—é—á–µ–π API

```bash
# –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∫–ª—é—á–∏ –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Key Vault (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

# –†–µ–≥—É–ª—è—Ä–Ω–æ –º–µ–Ω—è–π—Ç–µ –∫–ª—é—á–∏
az cognitiveservices account keys regenerate \
  --name $(azd env get-value AZURE_OPENAI_NAME) \
  --resource-group $(azd env get-value AZURE_RESOURCE_GROUP) \
  --key-name key1
```

### 2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```python
# Azure OpenAI –≤–∫–ª—é—á–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ Azure Portal:
# –†–µ—Å—É—Ä—Å OpenAI ‚Üí –§–∏–ª—å—Ç—Ä—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ ‚Üí –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä

# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: –ù–µ–Ω–∞–≤–∏—Å—Ç—å, –°–µ–∫—Å—É–∞–ª—å–Ω—ã–π, –ù–∞—Å–∏–ª–∏–µ, –°–∞–º–æ–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ
# –£—Ä–æ–≤–Ω–∏: –ù–∏–∑–∫–∏–π, –°—Ä–µ–¥–Ω–∏–π, –í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏ (Production)

```bash
# –î–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–∞–≤–ª—è–µ–º—É—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å
# –≤–º–µ—Å—Ç–æ API –∫–ª—é—á–µ–π (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Azure)

# –û–±–Ω–æ–≤–∏—Ç–µ infra/openai.bicep, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å:
# identity: { type: 'SystemAssigned' }
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r src/requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export AZURE_OPENAI_ENDPOINT="https://[name].openai.azure.com/"
export AZURE_OPENAI_API_KEY="your-api-key"
export AZURE_OPENAI_MODEL="gpt-4"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
python src/chat.py
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
pip install pytest pytest-cov

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
pytest tests/ -v

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest tests/ --cov=src --cov-report=html
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏

```bash
# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥—Ä—É–≥—É—é –≤–µ—Ä—Å–∏—é –º–æ–¥–µ–ª–∏
az cognitiveservices account deployment create \
  --name $(azd env get-value AZURE_OPENAI_NAME) \
  --resource-group $(azd env get-value AZURE_RESOURCE_GROUP) \
  --deployment-name gpt-35-turbo \
  --model-name gpt-35-turbo \
  --model-version "0613" \
  --model-format OpenAI \
  --sku-capacity 20 \
  --sku-name "Standard"
```

## –û—á–∏—Å—Ç–∫–∞

```bash
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã Azure
azd down --force --purge

# –≠—Ç–æ —É–¥–∞–ª—è–µ—Ç:
# - –°–µ—Ä–≤–∏—Å OpenAI
# - Key Vault (—Å 90-–¥–Ω–µ–≤–Ω—ã–º –º—è–≥–∫–∏–º —É–¥–∞–ª–µ–Ω–∏–µ–º)
# - –ì—Ä—É–ø–ø—É —Ä–µ—Å—É—Ä—Å–æ–≤
# - –í—Å–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞

1. **–î–æ–±–∞–≤–∏—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –°–æ–∑–¥–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ React/Vue
   ```bash
   # –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –≤ azure.yaml
   # –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤ Azure Static Web Apps
   ```

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å RAG** - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å Azure AI Search
   ```python
   # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Azure Cognitive Search
   # –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ —Å–æ–∑–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π** - –í–∫–ª—é—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
   ```python
   # –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ chat.py
   # –ü–æ–∑–≤–æ–ª—å—Ç–µ GPT-4 –≤—ã–∑—ã–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ API
   ```

4. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π** - –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π
   ```bash
   # –î–æ–±–∞–≤–∏—Ç—å gpt-35-turbo, –º–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
   # –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π
   ```

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã

- **[–†–æ–∑–Ω–∏—á–Ω—ã–π –º—É–ª—å—Ç–∏-–∞–≥–µ–Ω—Ç](../retail-scenario.md)** - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º—É–ª—å—Ç–∏-–∞–≥–µ–Ω—Ç–∞
- **[–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö](../../../../examples/database-app)** - –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **[–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](../../../../examples/container-app)** - –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å

### –†–µ—Å—É—Ä—Å—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

- üìö [–ö—É—Ä—Å –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö AZD](../../README.md) - –û—Å–Ω–æ–≤–Ω–æ–π –∫—É—Ä—Å
- üìö [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Azure OpenAI](https://learn.microsoft.com/azure/ai-services/openai/) - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üìö [–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API OpenAI](https://platform.openai.com/docs/api-reference) - –î–µ—Ç–∞–ª–∏ API
- üìö [–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π AI](https://www.microsoft.com/ai/responsible-ai) - –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[Azure OpenAI Service](https://learn.microsoft.com/azure/ai-services/openai/)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- **[–ú–æ–¥–µ–ª–∏ GPT-4](https://learn.microsoft.com/azure/ai-services/openai/concepts/models)** - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–µ–π
- **[–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞](https://learn.microsoft.com/azure/ai-services/openai/concepts/content-filter)** - –§—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **[Azure Developer CLI](https://learn.microsoft.com/azure/developer/azure-developer-cli/)** - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ azd

### –£—á–µ–±–Ω—ã–µ –ø–æ—Å–æ–±–∏—è
- **[–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç OpenAI](https://learn.microsoft.com/azure/ai-services/openai/quickstart)** - –ü–µ—Ä–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- **[–ß–∞—Ç-–∫–æ–º–ø–ª–µ—Ç—ã](https://learn.microsoft.com/azure/ai-services/openai/how-to/chatgpt)** - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è —á–∞—Ç–∞
- **[–í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π](https://learn.microsoft.com/azure/ai-services/openai/how-to/function-calling)** - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **[Azure OpenAI Studio](https://oai.azure.com/)** - –í–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
- **[–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –ø–æ–¥—Å–∫–∞–∑–æ–∫](https://platform.openai.com/docs/guides/prompt-engineering)** - –°–æ–∑–¥–∞–Ω–∏–µ –ª—É—á—à–∏—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫
- **[–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ç–æ–∫–µ–Ω–æ–≤](https://platform.openai.com/tokenizer)** - –û—Ü–µ–Ω–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤

### –°–æ–æ–±—â–µ—Å—Ç–≤–æ
- **[Discord Azure AI](https://discord.gg/azure)** - –ü–æ–ª—É—á–∏—Ç–µ –ø–æ–º–æ—â—å –æ—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
- **[–û–±—Å—É–∂–¥–µ–Ω–∏—è –Ω–∞ GitHub](https://github.com/Azure-Samples/openai/discussions)** - –§–æ—Ä—É–º –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- **[–ë–ª–æ–≥ Azure](https://azure.microsoft.com/blog/tag/azure-openai-service/)** - –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

---

**üéâ –£—Å–ø–µ—Ö!** –í—ã —Ä–∞–∑–≤–µ—Ä–Ω—É–ª–∏ Azure OpenAI –∏ —Å–æ–∑–¥–∞–ª–∏ —Ä–∞–±–æ—á–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —á–∞—Ç–∞. –ù–∞—á–Ω–∏—Ç–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ GPT-4 –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

**–í–æ–ø—Ä–æ—Å—ã?** [–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–±–ª–µ–º—É](https://github.com/microsoft/AZD-for-beginners/issues) –∏–ª–∏ –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [FAQ](../../resources/faq.md)

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Ä–∞—Å—Ö–æ–¥–∞—Ö:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `azd down` –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ (~$50-100/–º–µ—Å—è—Ü –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏).

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**:  
–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –±—ã–ª –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–µ—Ä–≤–∏—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ [Co-op Translator](https://github.com/Azure/co-op-translator). –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞—à–∏ —É—Å–∏–ª–∏—è –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–∫–∏ –∏–ª–∏ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –µ–≥–æ —Ä–æ–¥–Ω–æ–º —è–∑—ã–∫–µ —Å–ª–µ–¥—É–µ—Ç —Å—á–∏—Ç–∞—Ç—å –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —á–µ–ª–æ–≤–µ–∫–æ–º. –ú—ã –Ω–µ –Ω–µ—Å–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ª—é–±—ã–µ –Ω–µ–¥–æ—Ä–∞–∑—É–º–µ–Ω–∏—è –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏, –≤–æ–∑–Ω–∏–∫—à–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->