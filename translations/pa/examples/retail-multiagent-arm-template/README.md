<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "1a8d383064bdb1ee923677a145de53ea",
  "translation_date": "2025-11-20T20:30:31+00:00",
  "source_file": "examples/retail-multiagent-arm-template/README.md",
  "language_code": "pa"
}
-->
# ри░ри┐риЯрйЗри▓ риори▓риЯрйА-риПриЬрй░риЯ ри╣рй▒ри▓ - риЗрй░рилри░ри╛ри╕риЯри░риХриЪри░ риЯрйИриВрикри▓рйЗриЯ

**риЕризри┐риЖриЗ 5: рикрйНри░рйЛрибриХри╕ри╝рии рибри┐рикри▓рйМриЗриорйИриВриЯ рикрйИриХрйЗриЬ**
- **ЁЯУЪ риХрйЛри░ри╕ ри╣рйЛрио**: [AZD рилри╛ри░ римри┐риЧри┐риири░риЬри╝](../../README.md)
- **ЁЯУЦ ри╕рй░римрй░ризри┐рид риЕризри┐риЖриЗ**: [риЕризри┐риЖриЗ 5: риори▓риЯрйА-риПриЬрй░риЯ AI ри╣рй▒ри▓](../../README.md#-chapter-5-multi-agent-ai-solutions-advanced)
- **ЁЯУЭ ри╕ри┐риирйЗри░рйАриУ риЧри╛риИриб**: [рикрйВри░рйА риЖри░риХрйАриЯрйИриХриЪри░](../retail-scenario.md)
- **ЁЯОп ридрйБри░рй░рид рибри┐рикри▓рйМриЗриорйИриВриЯ**: [риЗрй▒риХ-риХри▓ри┐рй▒риХ рибри┐рикри▓рйМриЗриорйИриВриЯ](../../../../examples/retail-multiagent-arm-template)

> **тЪая╕П ри╕ри┐ри░рилри╝ риЗрй░рилри░ри╛ри╕риЯри░риХриЪри░ риЯрйИриВрикри▓рйЗриЯ**  
> риЗри╣ ARM риЯрйИриВрикри▓рйЗриЯ **Azure ри╕ри░рйЛридри╛риВ** риирйВрй░ риори▓риЯрйА-риПриЬрй░риЯ ри╕ри┐ри╕риЯрио ри▓риИ рибри┐рикри▓рйМриЗ риХри░рижри╛ ри╣рйИред  
>  
> **риХрйА рибри┐рикри▓рйМриЗ ри╣рйБрй░рижри╛ ри╣рйИ (15-25 риори┐рй░риЯ):**
> - тЬЕ Azure OpenAI (GPT-4o, GPT-4o-mini, embeddings ридри┐рй░рии риЦрйЗридри░ри╛риВ ри╡ри┐рй▒риЪ)
> - тЬЕ AI Search ри╕рйЗри╡ри╛ (риЦри╛ри▓рйА, риЗрй░рибрйИриХри╕ римригри╛риЙриг ри▓риИ ридри┐риЖри░)
> - тЬЕ риХрй░риЯрйЗриири░ риРрикри╕ (placeholder images, ридрйБри╣ри╛рибрйЗ риХрйЛриб ри▓риИ ридри┐риЖри░)
> - тЬЕ ри╕риЯрйЛри░рйЗриЬ, Cosmos DB, Key Vault, Application Insights
>  
> **риХрйА ри╕ри╝ри╛риори▓ риири╣рйАриВ ри╣рйИ (ри╡ри┐риХри╛ри╕ рижрйА ри▓рйЛрйЬ ри╣рйИ):**
> - тЭМ риПриЬрй░риЯ риЗрй░рикри▓рйАриорйИриВриЯрйЗри╕ри╝рии риХрйЛриб (Customer Agent, Inventory Agent)
> - тЭМ ри░рйВриЯри┐рй░риЧ ри▓ри╛риЬри┐риХ риЕридрйЗ API endpoints
> - тЭМ рилри░рй░риЯриРриВриб риЪрйИриЯ UI
> - тЭМ Search риЗрй░рибрйИриХри╕ schemas риЕридрйЗ рибри╛риЯри╛ рикри╛риИрикри▓ри╛риИрии
> - тЭМ **риЕриирйБриори╛риири┐рид ри╡ри┐риХри╛ри╕ рижри╛ ри╕риори╛риВ: 80-120 риШрй░риЯрйЗ**
>  
> **риЗри╕ риЯрйИриВрикри▓рйЗриЯ риирйВрй░ ри╡ри░ридрйЛ риЬрйЗ:**
> - тЬЕ ридрйБри╕рйАриВ риори▓риЯрйА-риПриЬрй░риЯ рикрйНри░рйЛриЬрйИриХриЯ ри▓риИ Azure риЗрй░рилри░ри╛ри╕риЯри░риХриЪри░ рикрйНри░рйЛри╡ри┐риЬрии риХри░риири╛ риЪри╛ри╣рйБрй░рижрйЗ ри╣рйЛ
> - тЬЕ ридрйБри╕рйАриВ риПриЬрй░риЯ риЗрй░рикри▓рйАриорйИриВриЯрйЗри╕ри╝рии риирйВрй░ риЕри▓рй▒риЧ ридрйЛриВ ри╡ри┐риХри╕ри┐рид риХри░рии рижрйА рипрйЛриЬриири╛ римригри╛риИ ри╣рйИ
> - тЬЕ ридрйБри╣ри╛риирйВрй░ рикрйНри░рйЛрибриХри╕ри╝рии-ридри┐риЖри░ риЗрй░рилри░ри╛ри╕риЯри░риХриЪри░ римрйЗри╕ри▓ри╛риИрии рижрйА ри▓рйЛрйЬ ри╣рйИ
>  
> **ри╡ри░ридрйЛриВ риири╛ риХри░рйЛ риЬрйЗ:**
> - тЭМ ридрйБри╕рйАриВ ридрйБри░рй░рид риХрй░рио риХри░рии ри╡ри╛ри▓рйЗ риори▓риЯрйА-риПриЬрй░риЯ рибрйИриорйЛ рижрйА риЙриорйАриж риХри░рижрйЗ ри╣рйЛ
> - тЭМ ридрйБри╕рйАриВ рикрйВри░рйЗ риРрикри▓рйАриХрйЗри╕ри╝рии риХрйЛриб риЙрижри╛ри╣ри░риири╛риВ рижрйА ринри╛ри▓ риХри░ ри░ри╣рйЗ ри╣рйЛ

## риЭри▓риХ

риЗри╣ рибри╛риЗри░рйИриХриЯри░рйА **риори▓риЯрйА-риПриЬрй░риЯ риХри╕риЯриори░ ри╕рикрйЛри░риЯ ри╕ри┐ри╕риЯрио** рижрйЗ **риЗрй░рилри░ри╛ри╕риЯри░риХриЪри░ рилри╛риКриВрибрйЗри╕ри╝рии** риирйВрй░ рибри┐рикри▓рйМриЗ риХри░рии ри▓риИ риЗрй▒риХ ри╡ри┐ри╕ридрйНри░ри┐рид Azure Resource Manager (ARM) риЯрйИриВрикри▓рйЗриЯ ри╕ри╝ри╛риори▓ риХри░рижрйА ри╣рйИред риЯрйИриВрикри▓рйЗриЯ ри╕ри╛ри░рйЗ ри▓рйЛрйЬрйАриВрижрйЗ Azure ри╕рйЗри╡ри╛ри╡ри╛риВ риирйВрй░ рикрйНри░рйЛри╡ри┐риЬрии риХри░рижри╛ ри╣рйИ, риЬрйЛ ри╕ри╣рйА ридри░рйАриХрйЗ риири╛ри▓ ри╕рй░ри░риЪри┐рид риЕридрйЗ риЖрикри╕ ри╡ри┐рй▒риЪ риЬрйБрйЬрйЗ ри╣рйЛриП ри╣рии, ридрйБри╣ри╛рибрйЗ риРрикри▓рйАриХрйЗри╕ри╝рии ри╡ри┐риХри╛ри╕ ри▓риИ ридри┐риЖри░ред

**рибри┐рикри▓рйМриЗриорйИриВриЯ ридрйЛриВ римри╛риЕриж ридрйБри╣ри╛рибрйЗ риХрйЛри▓ ри╣рйЛри╡рйЗриЧри╛:** рикрйНри░рйЛрибриХри╕ри╝рии-ридри┐риЖри░ Azure риЗрй░рилри░ри╛ри╕риЯри░риХриЪри░  
**ри╕ри┐ри╕риЯрио риирйВрй░ рикрйВри░ри╛ риХри░рии ри▓риИ ридрйБри╣ри╛риирйВрй░ ри▓рйЛрйЬ ри╣рйИ:** риПриЬрй░риЯ риХрйЛриб, рилри░рй░риЯриРриВриб UI, риЕридрйЗ рибри╛риЯри╛ ри╕рй░ри░риЪриири╛ (ри╡рйЗриЦрйЛ [риЖри░риХрйАриЯрйИриХриЪри░ риЧри╛риИриб](../retail-scenario.md))

## ЁЯОп риХрйА рибри┐рикри▓рйМриЗ ри╣рйБрй░рижри╛ ри╣рйИ

### риХрйЛри░ риЗрй░рилри░ри╛ри╕риЯри░риХриЪри░ (рибри┐рикри▓рйМриЗриорйИриВриЯ ридрйЛриВ римри╛риЕриж ри╕риери┐ридрйА)

тЬЕ **Azure OpenAI ри╕рйЗри╡ри╛ри╡ри╛риВ** (API риХри╛ри▓ри╛риВ ри▓риИ ридри┐риЖри░)
  - рикрйНри░ри╛риЗриори░рйА риЦрйЗридри░: GPT-4o рибри┐рикри▓рйМриЗриорйИриВриЯ (20K TPM ри╕риори░рй▒риери╛)
  - ри╕рйИриХрй░рибри░рйА риЦрйЗридри░: GPT-4o-mini рибри┐рикри▓рйМриЗриорйИриВриЯ (10K TPM ри╕риори░рй▒риери╛)
  - ридрйАриЬри╛ риЦрйЗридри░: риЯрйИриХри╕риЯ embeddings риори╛рибри▓ (30K TPM ри╕риори░рй▒риери╛)
  - риорйБри▓ри╛риВриХриг риЦрйЗридри░: GPT-4o grader риори╛рибри▓ (15K TPM ри╕риори░рй▒риери╛)
  - **ри╕риери┐ридрйА:** рикрйВри░рйА ридри░рйНри╣ри╛риВ риХри╛ри░риЧри░ - ридрйБри░рй░рид API риХри╛ри▓ри╛риВ риХри░ ри╕риХрижрйЗ ри╣рйЛ

тЬЕ **Azure AI Search** (риЦри╛ри▓рйА - ри╕рй░ри░риЪриири╛ ри▓риИ ридри┐риЖри░)
  - ри╡рйИриХриЯри░ риЦрйЛриЬ ри╕риори░рй▒риери╛ риЪри╛ри▓рйВ
  - ри╕риЯрйИриВрибри░риб риЯрйАриЕри░ 1 partition, 1 replica риири╛ри▓
  - **ри╕риери┐ридрйА:** ри╕рйЗри╡ри╛ риЪри╛ри▓рйВ, рикри░ риЗрй░рибрйИриХри╕ римригри╛риЙриг рижрйА ри▓рйЛрйЬ ри╣рйИ
  - **риХри░рио:** риЖрикригрйЗ schema риири╛ри▓ риЦрйЛриЬ риЗрй░рибрйИриХри╕ римригри╛риУ

тЬЕ **Azure Storage Account** (риЦри╛ри▓рйА - риЕрикри▓рйЛриб ри▓риИ ридри┐риЖри░)
  - Blob containers: `documents`, `uploads`
  - ри╕рйБри░рй▒риЦри┐риЕрид ри╕рй░ри░риЪриири╛ (ри╕ри┐ри░рил HTTPS, риХрйЛриИ риЬрииридриХ рикри╣рйБрй░риЪ риири╣рйАриВ)
  - **ри╕риери┐ридрйА:** рилри╛риИри▓ри╛риВ рикрйНри░ри╛рикрид риХри░рии ри▓риИ ридри┐риЖри░
  - **риХри░рио:** риЖрикригрйЗ риЙридрикри╛риж рибри╛риЯри╛ риЕридрйЗ рижри╕ридри╛ри╡рйЗриЬри╝ риЕрикри▓рйЛриб риХри░рйЛ

тЪая╕П **Container Apps Environment** (Placeholder images рибри┐рикри▓рйМриЗ риХрйАридрйЗ)
  - Agent router app (nginx default image)
  - Frontend app (nginx default image)
  - Auto-scaling ри╕рй░ри░риЪри┐рид (0-10 instances)
  - **ри╕риери┐ридрйА:** Placeholder containers риЪри╛ри▓рйВ
  - **риХри░рио:** риЖрикригрйЗ риПриЬрй░риЯ риРрикри▓рйАриХрйЗри╕ри╝рии римригри╛риУ риЕридрйЗ рибри┐рикри▓рйМриЗ риХри░рйЛ

тЬЕ **Azure Cosmos DB** (риЦри╛ри▓рйА - рибри╛риЯри╛ ри▓риИ ридри┐риЖри░)
  - рибри╛риЯри╛римрйЗри╕ риЕридрйЗ риХрй░риЯрйЗриири░ рикри╣ри┐ри▓ри╛риВ ридрйЛриВ ри╕рй░ри░риЪри┐рид
  - риШрй▒риЯ-ри╡ри┐ри▓рй░римрйА риХри╛ри░ри╡ри╛риИриЖриВ ри▓риИ риЕриирйБриХрйВри▓ри┐рид
  - TTL риЪри╛ри▓рйВ ри╕ри╡рйИ-ри╕рилри╛риИ ри▓риИ
  - **ри╕риери┐ридрйА:** риЪрйИриЯ риЗридри┐ри╣ри╛ри╕ ри╕риЯрйЛри░ риХри░рии ри▓риИ ридри┐риЖри░

тЬЕ **Azure Key Vault** (ри╡ри┐риХри▓рикри┐риХ - ри░ри╛риЬри╝ри╛риВ ри▓риИ ридри┐риЖри░)
  - Soft delete риЪри╛ри▓рйВ
  - RBAC ри╕рй░ри░риЪри┐рид риорйИриирйЗриЬриб identities ри▓риИ
  - **ри╕риери┐ридрйА:** API keys риЕридрйЗ connection strings ри╕риЯрйЛри░ риХри░рии ри▓риИ ридри┐риЖри░

тЬЕ **Application Insights** (ри╡ри┐риХри▓рикри┐риХ - риори╛риирйАриЯри░ри┐рй░риЧ риЪри╛ри▓рйВ)
  - Log Analytics workspace риири╛ри▓ риЬрйБрйЬри┐риЖ
  - Custom metrics риЕридрйЗ alerts ри╕рй░ри░риЪри┐рид
  - **ри╕риери┐ридрйА:** ридрйБри╣ри╛рибрйЗ риРрикри╕ ридрйЛриВ риЯрйИри▓рйАриорйИриЯри░рйА рикрйНри░ри╛рикрид риХри░рии ри▓риИ ридри┐риЖри░

тЬЕ **Document Intelligence** (API риХри╛ри▓ри╛риВ ри▓риИ ридри┐риЖри░)
  - S0 tier рикрйНри░рйЛрибриХри╕ри╝рии ри╡ри░риХри▓рйЛриб ри▓риИ
  - **ри╕риери┐ридрйА:** риЕрикри▓рйЛриб риХрйАридрйЗ рижри╕ридри╛ри╡рйЗриЬри╝ рикрйНри░риХри┐ри░ри┐риЖ риХри░рии ри▓риИ ридри┐риЖри░

тЬЕ **Bing Search API** (API риХри╛ри▓ри╛риВ ри▓риИ ридри┐риЖри░)
  - S1 tier ри░рйАриЕри▓-риЯри╛риИрио риЦрйЛриЬри╛риВ ри▓риИ
  - **ри╕риери┐ридрйА:** ри╡рйИрй▒рим риЦрйЛриЬ рикрйБрй▒риЫриЧри┐рй▒риЫ ри▓риИ ридри┐риЖри░

### рибри┐рикри▓рйМриЗриорйИриВриЯ риорйЛриб

| риорйЛриб | OpenAI ри╕риори░рй▒риери╛ | риХрй░риЯрйЗриири░ риЗрй░ри╕риЯрйИриВри╕ | Search Tier | ри╕риЯрйЛри░рйЗриЬ ри░ри┐рибрй░рибрйИриВри╕рйА | римри┐ри╣ридри░ ри▓риИ |
|------|-----------------|---------------------|-------------|-------------------|----------|
| **риори┐риирйАриори▓** | 10K-20K TPM | 0-2 replicas | Basic | LRS (ри╕риери╛риириХ) | Dev/test, ри╕ри┐рй▒риЦригри╛, proof-of-concept |
| **ри╕риЯрйИриВрибри░риб** | 30K-60K TPM | 2-5 replicas | Standard | ZRS (Zone) | рикрйНри░рйЛрибриХри╕ри╝рии, риорйЛрибри░рйЗриЯ риЯрйНри░рйИрилри┐риХ (<10K рипрйВриЬри╝ри░) |
| **рикрйНри░рйАриорйАриЕрио** | 80K-150K TPM | 5-10 replicas, zone-redundant | Premium | GRS (Geo) | Enterprise, high traffic (>10K рипрйВриЬри╝ри░), 99.99% SLA |

**ри▓ри╛риЧрид рикрйНри░ринри╛ри╡:**
- **риори┐риирйАриори▓ тЖТ ри╕риЯрйИриВрибри░риб:** ~4x ри▓ри╛риЧрид ри╡ри╛ризри╛ ($100-370/mo тЖТ $420-1,450/mo)
- **ри╕риЯрйИриВрибри░риб тЖТ рикрйНри░рйАриорйАриЕрио:** ~3x ри▓ри╛риЧрид ри╡ри╛ризри╛ ($420-1,450/mo тЖТ $1,150-3,500/mo)
- **риЪрйЛриг риХри░рйЛ риЖризри╛ри░ ридрйЗ:** риЙриорйАрижри╡ри╛ри░ ри▓рйЛриб, SLA риЬри╝ри░рйВри░ридри╛риВ, римриЬриЯ ри╕рйАриори╛ри╡ри╛риВ

**ри╕риори░рй▒риери╛ рипрйЛриЬриири╛:**
- **TPM (Tokens Per Minute):** ри╕ри╛ри░рйЗ риори╛рибри▓ рибри┐рикри▓рйМриЗриорйИриВриЯри╛риВ ри╡ри┐рй▒риЪ риХрйБрй▒ри▓
- **риХрй░риЯрйЗриири░ риЗрй░ри╕риЯрйИриВри╕:** Auto-scaling ри░рйЗриВриЬ (min-max replicas)
- **Search Tier:** рикрйБрй▒риЫриЧри┐рй▒риЫ рикрйНри░рижри░ри╕ри╝рии риЕридрйЗ риЗрй░рибрйИриХри╕ риЖриХри╛ри░ ри╕рйАриори╛ри╡ри╛риВ риирйВрй░ рикрйНри░ринри╛ри╡ри┐рид риХри░рижри╛ ри╣рйИ

## ЁЯУЛ рикрйВри░ри╡ ри╕ри╝ри░ридри╛риВ

### ри▓рйЛрйЬрйАриВрижрйЗ риЯрйВри▓
1. **Azure CLI** (ри╕рй░ри╕риХри░риг 2.50.0 риЬри╛риВ риЙрй▒риЪри╛)
   ```bash
   az --version  # ри╡ри░риЬрии риЪрйИрй▒риХ риХри░рйЛ
   az login      # рикрйНри░риори╛ригри┐риХридри╛ риХри░рйЛ
   ```

2. **ри╕ри░риЧри░рио Azure ри╕римри╕риХрйНри░ри┐рикри╕ри╝рии** Owner риЬри╛риВ Contributor рикри╣рйБрй░риЪ риири╛ри▓
   ```bash
   az account show  # ри╕римри╕риХрйНри░ри┐рикри╕ри╝рии рижрйА рикрйБри╕ри╝риЯрйА риХри░рйЛ
   ```

### ри▓рйЛрйЬрйАриВрижрйЗ Azure риХрйЛриЯрйЗ

рибри┐рикри▓рйМриЗриорйИриВриЯ ридрйЛриВ рикри╣ри┐ри▓ри╛риВ, риЖрикригрйЗ риЯри╛ри░риЧриЯ риЦрйЗридри░ри╛риВ ри╡ри┐рй▒риЪ риприери╛ри░рие риХрйЛриЯрйЗ рижрйА рикрйБри╕ри╝риЯрйА риХри░рйЛ:

```bash
# риЖрикригрйЗ риЦрйЗридри░ ри╡ри┐рй▒риЪ Azure OpenAI рижрйА риЙрикри▓римризридри╛ рижрйА риЬри╛риВриЪ риХри░рйЛ
az cognitiveservices account list-skus \
  --kind OpenAI \
  --location eastus2

# OpenAI риХрйЛриЯри╛ рижрйА рикрйБри╕ри╝риЯрйА риХри░рйЛ (риЙрижри╛ри╣ри░рии ри▓риИ gpt-4o)
az cognitiveservices usage list \
  --location eastus2 \
  --query "[?name.value=='OpenAI.Standard.gpt-4o']"

# риХрй░риЯрйЗриири░ риРрикри╕ риХрйЛриЯри╛ рижрйА риЬри╛риВриЪ риХри░рйЛ
az provider show \
  --namespace Microsoft.App \
  --query "resourceTypes[?resourceType=='managedEnvironments'].locations"
```

**риШрй▒риЯрйЛ-риШрй▒риЯ ри▓рйЛрйЬрйАриВрижрйЗ риХрйЛриЯрйЗ:**
- **Azure OpenAI:** 3-4 риори╛рибри▓ рибри┐рикри▓рйМриЗриорйИриВриЯри╛риВ риЦрйЗридри░ри╛риВ ри╡ри┐рй▒риЪ
  - GPT-4o: 20K TPM (Tokens Per Minute)
  - GPT-4o-mini: 10K TPM
  - text-embedding-ada-002: 30K TPM
  - **риирйЛриЯ:** GPT-4o риХрйБриЭ риЦрйЗридри░ри╛риВ ри╡ри┐рй▒риЪ ри╡рйЗриЯри▓ри┐ри╕риЯ ри╣рйЛ ри╕риХрижри╛ ри╣рйИ - [риори╛рибри▓ риЙрикри▓римризридри╛](https://learn.microsoft.com/azure/ai-services/openai/concepts/models) риЪрйИрй▒риХ риХри░рйЛ
- **Container Apps:** риорйИриирйЗриЬриб environment + 2-10 container instances
- **AI Search:** ри╕риЯрйИриВрибри░риб риЯрйАриЕри░ (ри╡рйИриХриЯри░ риЦрйЛриЬ ри▓риИ Basic риЕрикри░ри╛рикрид)
- **Cosmos DB:** ри╕риЯрйИриВрибри░риб provisioned throughput

**риЬрйЗ риХрйЛриЯри╛ риЕрикри░ри╛рикрид:**
1. риЬри╛риУ Azure Portal тЖТ Quotas тЖТ Request increase
2. риЬри╛риВ ри╡ри░ридрйЛ Azure CLI:
   ```bash
   az support tickets create \
     --ticket-name "OpenAI-Quota-Increase" \
     --severity "minimal" \
     --description "Request quota increase for Azure OpenAI GPT-4o in eastus2"
   ```
3. риЙрикри▓римризридри╛ ри╡ри╛ри▓рйЗ ри╡ри┐риХри▓рикри┐риХ риЦрйЗридри░ри╛риВ риирйВрй░ ри╡ри┐риЪри╛ри░рйЛ

## ЁЯЪА ридрйБри░рй░рид рибри┐рикри▓рйМриЗриорйИриВриЯ

### ри╡ри┐риХри▓рик 1: Azure CLI ри╡ри░рид риХрйЗ

```bash
# риЯрйИриВрикри▓рйЗриЯ рилри╛риИри▓ри╛риВ риХри▓рйЛрии риЬри╛риВ рибри╛риКриири▓рйЛриб риХри░рйЛ
git clone <repository-url>
cd examples/retail-multiagent-arm-template

# рибри┐рикри▓рйМриЗриорйИриВриЯ ри╕риХрйНри░ри┐рикриЯ риирйВрй░ риРриЧриЬри╝ри┐риХри┐риКриЯрйЗримри▓ римригри╛риУ
chmod +x deploy.sh

# рибри┐рилри╛ри▓риЯ ри╕рйИриЯри┐рй░риЧри╛риВ риири╛ри▓ рибри┐рикри▓рйМриЗ риХри░рйЛ
./deploy.sh -g myResourceGroup

# рикрйНри░рйЛрибриХри╕ри╝рии ри▓риИ рикрйНри░рйАриорйАриЕрио рилрйАриЪри░ри╛риВ риири╛ри▓ рибри┐рикри▓рйМриЗ риХри░рйЛ
./deploy.sh -g myProdRG -e prod -m premium -l eastus2
```

### ри╡ри┐риХри▓рик 2: Azure Portal ри╡ри░рид риХрйЗ

[![Deploy to Azure](https://aka.ms/deploytoazurebutton)](https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmicrosoft%2Fazd-for-beginners%2Fmain%2Fexamples%2Fretail-multiagent-arm-template%2Fazuredeploy.json)

### ри╡ри┐риХри▓рик 3: Azure CLI ри╕ри┐рй▒ризрйЗ ридрйМри░ ридрйЗ

```bash
# ри░ри┐ри╕рйЛри░ри╕ риЧри░рйБрй▒рик римригри╛риУ
az group create --name myResourceGroup --location eastus2

# риЯрйИриВрикри▓рйЗриЯ ридрйИриири╛рид риХри░рйЛ
az deployment group create \
  --resource-group myResourceGroup \
  --template-file azuredeploy.json \
  --parameters azuredeploy.parameters.json
```

## тП▒я╕П рибри┐рикри▓рйМриЗриорйИриВриЯ риЯри╛риИриори▓ри╛риИрии

### риХрйА риЙриорйАриж ри░рй▒риЦригрйА ри╣рйИ

| рилрйЗриЬри╝ | риЕри╡ризрйА | риХрйА ри╣рйБрй░рижри╛ ри╣рйИ |
|-------|----------|--------------||
| **риЯрйИриВрикри▓рйЗриЯ ри╡рйИри▓рйАрибрйЗри╕ри╝рии** | 30-60 ри╕риХри┐рй░риЯ | Azure ARM риЯрйИриВрикри▓рйЗриЯ syntax риЕридрйЗ parameters рижрйА рикрйБри╕ри╝риЯрйА риХри░рижри╛ ри╣рйИ |
| **Resource Group ри╕рйИриЯриЕрй▒рик** | 10-20 ри╕риХри┐рй░риЯ | Resource group римригри╛риЙриВрижри╛ ри╣рйИ (риЬрйЗ ри▓рйЛрйЬ ри╣рйЛри╡рйЗ) |
| **OpenAI Provisioning** | 5-8 риори┐рй░риЯ | 3-4 OpenAI accounts римригри╛риЙриВрижри╛ ри╣рйИ риЕридрйЗ риори╛рибри▓ рибри┐рикри▓рйМриЗ риХри░рижри╛ ри╣рйИ |
| **Container Apps** | 3-5 риори┐рй░риЯ | Environment римригри╛риЙриВрижри╛ ри╣рйИ риЕридрйЗ placeholder containers рибри┐рикри▓рйМриЗ риХри░рижри╛ ри╣рйИ |
| **Search & Storage** | 2-4 риори┐рй░риЯ | AI Search ри╕рйЗри╡ри╛ риЕридрйЗ ри╕риЯрйЛри░рйЗриЬ accounts рикрйНри░рйЛри╡ри┐риЬрии риХри░рижри╛ ри╣рйИ |
| **Cosmos DB** | 2-3 риори┐рй░риЯ | рибри╛риЯри╛римрйЗри╕ римригри╛риЙриВрижри╛ ри╣рйИ риЕридрйЗ риХрй░риЯрйЗриири░ ри╕рй░ри░риЪри┐рид риХри░рижри╛ ри╣рйИ |
| **риори╛риирйАриЯри░ри┐рй░риЧ ри╕рйИриЯриЕрй▒рик** | 2-3 риори┐рй░риЯ | Application Insights риЕридрйЗ Log Analytics ри╕рйИриЯриЕрй▒рик риХри░рижри╛ ри╣рйИ |
| **RBAC ри╕рй░ри░риЪриири╛** | 1-2 риори┐рй░риЯ | риорйИриирйЗриЬриб identities риЕридрйЗ permissions ри╕рй░ри░риЪри┐рид риХри░рижри╛ ри╣рйИ |
| **риХрйБрй▒ри▓ рибри┐рикри▓рйМриЗриорйИриВриЯ** | **15-25 риори┐рй░риЯ** | рикрйВри░рйА риЗрй░рилри░ри╛ри╕риЯри░риХриЪри░ ридри┐риЖри░ |

**рибри┐рикри▓рйМриЗриорйИриВриЯ ридрйЛриВ римри╛риЕриж:**
- тЬЕ **риЗрй░рилри░ри╛ри╕риЯри░риХриЪри░ ридри┐риЖри░:** ри╕ри╛ри░рйЗ Azure ри╕рйЗри╡ри╛ри╡ри╛риВ рикрйНри░рйЛри╡ри┐риЬрии риХрйАридрйАриЖриВ риЕридрйЗ риЪри╛ри▓рйВ
- тП▒я╕П **риРрикри▓рйАриХрйЗри╕ри╝рии ри╡ри┐риХри╛ри╕:** 80-120 риШрй░риЯрйЗ (ридрйБри╣ри╛рибрйА риЬри╝ри┐рй░риорйЗри╡ри╛ри░рйА)
- тП▒я╕П **риЗрй░рибрйИриХри╕ ри╕рй░ри░риЪриири╛:** 15-30 риори┐рй░риЯ (ридрйБри╣ри╛рибрйЗ schema рижрйА ри▓рйЛрйЬ ри╣рйИ)
- тП▒я╕П **рибри╛риЯри╛ риЕрикри▓рйЛриб:** рибри╛риЯри╛ри╕рйИриЯ риЖриХри╛ри░ рижрйЗ риЕриирйБри╕ри╛ри░
- тП▒я╕П **риЯрйИри╕риЯри┐рй░риЧ риЕридрйЗ ри╡рйИри▓рйАрибрйЗри╕ри╝рии:** 2-4 риШрй░риЯрйЗ

---

## тЬЕ рибри┐рикри▓рйМриЗриорйИриВриЯ ри╕рилри▓ридри╛ рижрйА рикрйБри╕ри╝риЯрйА риХри░рйЛ

### риХрижрио 1: Resource Provisioning риЪрйИрй▒риХ риХри░рйЛ (2 риори┐рй░риЯ)

```bash
# ри╕ри╛ри░рйЗ ри╕ри░рйЛрид ри╕рилри▓ридри╛рикрйВри░ри╡риХ ридрйИриири╛рид ри╣рйЛриг рижрйА рикрйБри╕ри╝риЯрйА риХри░рйЛ
az resource list \
  --resource-group myResourceGroup \
  --query "[?provisioningState!='Succeeded'].{Name:name, Status:provisioningState, Type:type}" \
  --output table
```

**риЙриорйАрижри╡ри╛ри░:** риЦри╛ри▓рйА риЯрйЗримри▓ (ри╕ри╛ри░рйЗ ри╕ри░рйЛрид "Succeeded" ри╕риери┐ридрйА рижри┐риЦри╛риЙриВрижрйЗ ри╣рии)

### риХрижрио 2: Azure OpenAI Deployments рижрйА рикрйБри╕ри╝риЯрйА риХри░рйЛ (3 риори┐рй░риЯ)

```bash
# ри╕ри╛ри░рйЗ OpenAI риЦри╛ридри┐риЖриВ рижрйА ри╕рйВриЪрйА римригри╛риУ
az cognitiveservices account list \
  --resource-group myResourceGroup \
  --query "[?kind=='OpenAI'].{Name:name, Location:location, Status:properties.provisioningState}" \
  --output table

# риорйБрй▒риЦ риЦрйЗридри░ ри▓риИ риори╛рибри▓ ридри╛риЗриири╛ридрйАриЖриВ рижрйА риЬри╛риВриЪ риХри░рйЛ
OPENAI_NAME=$(az cognitiveservices account list \
  --resource-group myResourceGroup \
  --query "[?kind=='OpenAI'] | [0].name" -o tsv)

az cognitiveservices account deployment list \
  --name $OPENAI_NAME \
  --resource-group myResourceGroup \
  --output table
```

**риЙриорйАрижри╡ри╛ри░:** 
- 3-4 OpenAI accounts (рикрйНри░ри╛риЗриори░рйА, ри╕рйИриХрй░рибри░рйА, ридрйАриЬри╛, риорйБри▓ри╛риВриХриг риЦрйЗридри░)
- 1-2 риори╛рибри▓ рибри┐рикри▓рйМриЗриорйИриВриЯ рикрйНри░ридрйА account (gpt-4o, gpt-4o-mini, text-embedding-ada-002)

### риХрижрио 3: Infrastructure Endpoints риЯрйИри╕риЯ риХри░рйЛ (5 риори┐рй░риЯ)

```bash
# риХрй░риЯрйЗриири░ риРрик URLs рикрйНри░ри╛рикрид риХри░рйЛ
az containerapp list \
  --resource-group myResourceGroup \
  --query "[].{Name:name, URL:properties.configuration.ingress.fqdn, Status:properties.runningStatus}" \
  --output table

# ри░ри╛риКриЯри░ риРриВрибрикрйМриЗрй░риЯ рижрйА риЬри╛риВриЪ риХри░рйЛ (рикри▓рйЗри╕ри╣рйЛри▓рибри░ риЪри┐рй▒ридри░ риЬри╡ри╛рим рижрйЗри╡рйЗриЧри╛)
ROUTER_URL=$(az containerapp show \
  --name retail-router \
  --resource-group myResourceGroup \
  --query "properties.configuration.ingress.fqdn" -o tsv)

echo "Testing: https://$ROUTER_URL"
curl -I https://$ROUTER_URL || echo "Container running (placeholder image - expected)"
```

**риЙриорйАрижри╡ри╛ри░:** 
- Container Apps "Running" ри╕риери┐ридрйА рижри┐риЦри╛риЙриВрижрйЗ ри╣рии
- Placeholder nginx HTTP 200 риЬри╛риВ 404 риири╛ри▓ риЬри╡ри╛рим рижри┐рй░рижри╛ ри╣рйИ (риХрйЛриИ риРрикри▓рйАриХрйЗри╕ри╝рии риХрйЛриб риири╣рйАриВ)

### риХрижрио 4: Azure OpenAI API Access рижрйА рикрйБри╕ри╝риЯрйА риХри░рйЛ (3 риори┐рй░риЯ)

```bash
# риУрикриириПриЖриИ риРриВрибрикрйМриЗрй░риЯ риЕридрйЗ риХрйБрй░риЬрйА рикрйНри░ри╛рикрид риХри░рйЛ
OPENAI_ENDPOINT=$(az cognitiveservices account show \
  --name $OPENAI_NAME \
  --resource-group myResourceGroup \
  --query "properties.endpoint" -o tsv)

OPENAI_KEY=$(az cognitiveservices account keys list \
  --name $OPENAI_NAME \
  --resource-group myResourceGroup \
  --query "key1" -o tsv)

# GPT-4o рибри┐рикри▓рйМриЗриорйИриВриЯ рижрйА риЬри╛риВриЪ риХри░рйЛ
curl "${OPENAI_ENDPOINT}openai/deployments/gpt-4o/chat/completions?api-version=2024-08-01-preview" \
  -H "Content-Type: application/json" \
  -H "api-key: $OPENAI_KEY" \
  -d '{
    "messages": [{"role": "user", "content": "Say hello"}],
    "max_tokens": 10
  }'
```

**риЙриорйАрижри╡ри╛ри░:** JSON риЬри╡ри╛рим риЪрйИриЯ completion риири╛ри▓ (OpenAI риХри╛ри░риЧри░ ри╣рйЛриг рижрйА рикрйБри╕ри╝риЯрйА риХри░рижри╛ ри╣рйИ)

### риХрйА риЪри╛ри▓рйВ ри╣рйИ риЕридрйЗ риХрйА риири╣рйАриВ

**тЬЕ рибри┐рикри▓рйМриЗриорйИриВриЯ ридрйЛриВ римри╛риЕриж риЪри╛ри▓рйВ:**
- Azure OpenAI риори╛рибри▓ рибри┐рикри▓рйМриЗ риХрйАридрйЗ риЕридрйЗ API риХри╛ри▓ри╛риВ ри╕ри╡рйАриХри╛ри░ риХри░рижрйЗ ри╣рии
- AI Search ри╕рйЗри╡ри╛ риЪри╛ри▓рйВ (риЦри╛ри▓рйА, риХрйЛриИ риЗрй░рибрйИриХри╕ риири╣рйАриВ)
- Container Apps риЪри╛ри▓рйВ (placeholder nginx images)
- ри╕риЯрйЛри░рйЗриЬ accounts рикри╣рйБрй░риЪрипрйЛриЧ риЕридрйЗ риЕрикри▓рйЛриб ри▓риИ ридри┐риЖри░
- Cosmos DB рибри╛риЯри╛ риХри╛ри░ри╡ри╛риИриЖриВ ри▓риИ ридри┐риЖри░
- Application Insights infrastructure риЯрйИри▓рйАриорйИриЯри░рйА риЗриХрй▒риари╛ риХри░ ри░ри┐ри╣ри╛ ри╣рйИ
- Key Vault ри░ри╛риЬри╝ ри╕риЯрйЛри░ риХри░рии ри▓риИ ридри┐риЖри░

**тЭМ риЕриЬрйЗ ридри┐риЖри░ риири╣рйАриВ (ри╡ри┐риХри╛ри╕ рижрйА ри▓рйЛрйЬ ри╣рйИ):**
- риПриЬрй░риЯ endpoints (риХрйЛриИ риРрикри▓рйАриХрйЗри╕ри╝рии риХрйЛриб рибри┐рикри▓рйМриЗ риири╣рйАриВ)
- риЪрйИриЯ риХри╛ри░риЧри░ридри╛ (
> **ЁЯУЭ риори╣рй▒ридри╡рикрйВри░рии:** риври╛риВриЪри╛ ридри┐риЖри░ риХрйАридри╛ риЧри┐риЖ ри╣рйИ, рикри░ ридрйБри╣ри╛риирйВрй░ риРрикри▓рйАриХрйЗри╕ри╝рии риХрйЛриб ри╡ри┐риХри╕ри┐рид риЕридрйЗ ридри┐риЖри░ риХри░риири╛ ри╣рйИред

### рикрйЬри╛риЕ 1: риПриЬрй░риЯ риРрикри▓рйАриХрйЗри╕ри╝рии ри╡ри┐риХри╕ри┐рид риХри░рйЛ (ридрйБри╣ри╛рибрйА риЬри╝ри┐рй░риорйЗри╡ри╛ри░рйА)

ARM риЯрйИриВрикри▓рйЗриЯ **риЦри╛ри▓рйА риХрй░риЯрйЗриири░ риРрикри╕** римригри╛риЙриВрижри╛ ри╣рйИ риЬри┐риирйНри╣ри╛риВ ри╡ри┐рй▒риЪ placeholder nginx риЪри┐рй▒ридри░ ри╣рииред ридрйБри╣ри╛риирйВрй░ риЗри╣ риХри░рии рижрйА ри▓рйЛрйЬ ри╣рйИ:

**ри▓ри╛риЬри╝риорйА ри╡ри┐риХри╛ри╕:**
1. **риПриЬрй░риЯ риЗрй░рикри▓рйАриорйИриВриЯрйЗри╕ри╝рии** (30-40 риШрй░риЯрйЗ)
   - риЧри╛ри╣риХ ри╕рйЗри╡ри╛ риПриЬрй░риЯ GPT-4o риЗрй░риЯрйАриЧрйНри░рйЗри╕ри╝рии риири╛ри▓
   - риЗриири╡рйИриВриЯри░рйА риПриЬрй░риЯ GPT-4o-mini риЗрй░риЯрйАриЧрйНри░рйЗри╕ри╝рии риири╛ри▓
   - риПриЬрй░риЯ ри░рйВриЯри┐рй░риЧ ри▓ри╛риЬри╝ри┐риХ

2. **рилри░рй░риЯриРриВриб ри╡ри┐риХри╛ри╕** (20-30 риШрй░риЯрйЗ)
   - риЪрйИриЯ риЗрй░риЯри░рилрйЗри╕ UI (React/Vue/Angular)
   - рилри╛риИри▓ риЕрикри▓рйЛриб рилрй░риХри╕ри╝риири╛ри▓ри┐риЯрйА
   - риЬри╡ри╛рим ри░рйИриВрибри░ри┐рй░риЧ риЕридрйЗ рилри╛ри░риорйИриЯри┐рй░риЧ

3. **римрйИриХриРриВриб ри╕рйЗри╡ри╛ри╡ри╛риВ** (12-16 риШрй░риЯрйЗ)
   - FastAPI риЬри╛риВ Express ри░ри╛риКриЯри░
   - рикрйНри░риори╛ригри┐риХридри╛ риори┐рибри▓ри╡рйЗриЕри░
   - риЯрйИри▓рйАриорйЗриЯри░рйА риЗрй░риЯрйАриЧрйНри░рйЗри╕ри╝рии

**ри╡рйЗриЦрйЛ:** [риЖри░риХрйАриЯрйИриХриЪри░ риЧри╛риИриб](../retail-scenario.md) ри╡ри┐ри╕риери╛ри░ ри╡ри┐рй▒риЪ риЗрй░рикри▓рйАриорйИриВриЯрйЗри╕ри╝рии рикрйИриЯри░рии риЕридрйЗ риХрйЛриб риЙрижри╛ри╣ри░ригри╛риВ ри▓риИ

### рикрйЬри╛риЕ 2: AI ри╕ри░риЪ риЗрй░рибрйИриХри╕ риХриирилри┐риЧри░ риХри░рйЛ (15-30 риори┐рй░риЯ)

риЖрикригрйЗ рибри╛риЯри╛ риори╛рибри▓ риири╛ри▓ риорйЗри▓ риЦри╛риВрижри╛ риЗрй▒риХ ри╕ри░риЪ риЗрй░рибрйИриХри╕ римригри╛риУ:

```bash
# риЦрйЛриЬ ри╕рйЗри╡ри╛ ри╡рйЗри░ри╡рйЗ рикрйНри░ри╛рикрид риХри░рйЛ
SEARCH_NAME=$(az search service list \
  --resource-group myResourceGroup \
  --query "[0].name" -o tsv)

SEARCH_KEY=$(az search admin-key show \
  --service-name $SEARCH_NAME \
  --resource-group myResourceGroup \
  --query "primaryKey" -o tsv)

# риЖрикригрйЗ ри╕риХрйАриори╛ риири╛ри▓ риЗрй░рибрйИриХри╕ римригри╛риУ (риЙрижри╛ри╣ри░рии)
curl -X POST "https://${SEARCH_NAME}.search.windows.net/indexes?api-version=2023-11-01" \
  -H "Content-Type: application/json" \
  -H "api-key: ${SEARCH_KEY}" \
  -d '{
    "name": "products",
    "fields": [
      {"name": "id", "type": "Edm.String", "key": true},
      {"name": "title", "type": "Edm.String", "searchable": true},
      {"name": "content", "type": "Edm.String", "searchable": true},
      {"name": "category", "type": "Edm.String", "filterable": true},
      {"name": "content_vector", "type": "Collection(Edm.Single)", 
       "searchable": true, "dimensions": 1536, "vectorSearchProfile": "default"}
    ],
    "vectorSearch": {
      "algorithms": [{"name": "default", "kind": "hnsw"}],
      "profiles": [{"name": "default", "algorithm": "default"}]
    }
  }'
```

**ри╕ри░рйЛрид:**
- [AI ри╕ри░риЪ риЗрй░рибрйИриХри╕ ри╕риХрйАриори╛ рибри┐риЬри╝ри╛риИрии](https://learn.microsoft.com/azure/search/search-what-is-an-index)
- [ри╡рйЗриХриЯри░ ри╕ри░риЪ риХриирилри┐риЧри░рйЗри╕ри╝рии](https://learn.microsoft.com/azure/search/vector-search-how-to-create-index)

### рикрйЬри╛риЕ 3: риЖрикригри╛ рибри╛риЯри╛ риЕрикри▓рйЛриб риХри░рйЛ (ри╕риори╛риВ ри╡рй▒риЦ-ри╡рй▒риЦ ри╣рйЛ ри╕риХрижри╛ ри╣рйИ)

риЬрижрйЛриВ ридрйБри╣ри╛рибрйЗ риХрйЛри▓ риЙридрикри╛риж рибри╛риЯри╛ риЕридрйЗ рижри╕ридри╛ри╡рйЗриЬри╝ ри╣рйЛриг:

```bash
# ри╕риЯрйЛри░рйЗриЬ риЕриХри╛риКриВриЯ ри╡рйЗри░ри╡рйЗ рикрйНри░ри╛рикрид риХри░рйЛ
STORAGE_NAME=$(az storage account list \
  --resource-group myResourceGroup \
  --query "[0].name" -o tsv)

STORAGE_KEY=$(az storage account keys list \
  --account-name $STORAGE_NAME \
  --resource-group myResourceGroup \
  --query "[0].value" -o tsv)

# риЖрикригрйЗ рижри╕ридри╛ри╡рйЗриЬри╝ риЕрикри▓рйЛриб риХри░рйЛ
az storage blob upload-batch \
  --destination documents \
  --source /path/to/your/product/docs \
  --account-name $STORAGE_NAME \
  --account-key $STORAGE_KEY

# риЙрижри╛ри╣ри░рии: риЗрй▒риХ рилри╛риИри▓ риЕрикри▓рйЛриб риХри░рйЛ
az storage blob upload \
  --container-name documents \
  --name "product-manual.pdf" \
  --file /path/to/product-manual.pdf \
  --account-name $STORAGE_NAME \
  --account-key $STORAGE_KEY
```

### рикрйЬри╛риЕ 4: риЖрикригрйАриЖриВ риРрикри▓рйАриХрйЗри╕ри╝рии римригри╛риУ риЕридрйЗ ридри┐риЖри░ риХри░рйЛ (8-12 риШрй░риЯрйЗ)

риЬрижрйЛриВ ридрйБри╕рйАриВ риЖрикригри╛ риПриЬрй░риЯ риХрйЛриб ри╡ри┐риХри╕ри┐рид риХри░ ри▓ри╡рйЛ:

```bash
# 1. риРриЬри╝ри░ риХрй░риЯрйЗриири░ ри░риЬри┐ри╕риЯри░рйА римригри╛риУ (риЬрйЗ ри▓рйЛрйЬ ри╣рйЛри╡рйЗ)
az acr create \
  --name myregistry \
  --resource-group myResourceGroup \
  --sku Basic

# 2. риПриЬрй░риЯ ри░ри╛риКриЯри░ риЗриорйЗриЬ римригри╛риУ риЕридрйЗ рикрйБри╕ри╝ риХри░рйЛ
docker build -t myregistry.azurecr.io/agent-router:v1 /path/to/your/router/code
az acr login --name myregistry
docker push myregistry.azurecr.io/agent-router:v1

# 3. рилри░рй░риЯриРриВриб риЗриорйЗриЬ римригри╛риУ риЕридрйЗ рикрйБри╕ри╝ риХри░рйЛ
docker build -t myregistry.azurecr.io/frontend:v1 /path/to/your/frontend/code
docker push myregistry.azurecr.io/frontend:v1

# 4. риЖрикригрйЗ риЗриорйЗриЬри╛риВ риири╛ри▓ риХрй░риЯрйЗриири░ риРрикри╕ риирйВрй░ риЕрй▒рикрибрйЗриЯ риХри░рйЛ
az containerapp update \
  --name retail-router \
  --resource-group myResourceGroup \
  --image myregistry.azurecr.io/agent-router:v1

az containerapp update \
  --name retail-frontend \
  --resource-group myResourceGroup \
  --image myregistry.azurecr.io/frontend:v1

# 5. ри╡ри╛ридри╛ри╡ри░риг ри╡рйИри░рйАриПримри▓риЬри╝ ри╕рй░ри░риЪри┐рид риХри░рйЛ
az containerapp update \
  --name retail-router \
  --resource-group myResourceGroup \
  --set-env-vars \
    OPENAI_ENDPOINT=secretref:openai-endpoint \
    OPENAI_KEY=secretref:openai-key \
    SEARCH_ENDPOINT=secretref:search-endpoint \
    SEARCH_KEY=secretref:search-key
```

### рикрйЬри╛риЕ 5: риЖрикригрйА риРрикри▓рйАриХрйЗри╕ри╝рии рижрйА риЬри╛риВриЪ риХри░рйЛ (2-4 риШрй░риЯрйЗ)

```bash
# риЖрикригрйА риРрикри▓рйАриХрйЗри╕ри╝рии URL рикрйНри░ри╛рикрид риХри░рйЛ
ROUTER_URL=$(az containerapp show \
  --name retail-router \
  --resource-group myResourceGroup \
  --query "properties.configuration.ingress.fqdn" -o tsv)

# риПриЬрй░риЯ риРриВрибрикрйМриЗрй░риЯ рижрйА риЬри╛риВриЪ риХри░рйЛ (риЬрижрйЛриВ ридрйБри╣ри╛рибри╛ риХрйЛриб рибри┐рикри▓рйМриЗ риХрйАридри╛ риЬри╛ри╡рйЗ)
curl -X POST "https://${ROUTER_URL}/chat" \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Hello, I need help with my order",
    "agent": "customer"
  }'

# риРрикри▓рйАриХрйЗри╕ри╝рии ри▓рйМриЧриЬри╝ рижрйА риЬри╛риВриЪ риХри░рйЛ
az containerapp logs show \
  --name retail-router \
  --resource-group myResourceGroup \
  --follow
```

### риЗрй░рикри▓рйАриорйИриВриЯрйЗри╕ри╝рии ри╕ри░рйЛрид

**риЖри░риХрйАриЯрйИриХриЪри░ риЕридрйЗ рибри┐риЬри╝ри╛риИрии:**
- ЁЯУЦ [рикрйВри░рйА риЖри░риХрйАриЯрйИриХриЪри░ риЧри╛риИриб](../retail-scenario.md) - ри╡ри┐ри╕риери╛ри░ ри╡ри┐рй▒риЪ риЗрй░рикри▓рйАриорйИриВриЯрйЗри╕ри╝рии рикрйИриЯри░рии
- ЁЯУЦ [риори▓риЯрйА-риПриЬрй░риЯ рибри┐риЬри╝ри╛риИрии рикрйИриЯри░рии](https://learn.microsoft.com/azure/architecture/ai-ml/guide/multi-agent-systems)

**риХрйЛриб риЙрижри╛ри╣ри░ригри╛риВ:**
- ЁЯФЧ [Azure OpenAI риЪрйИриЯ ри╕рйИриВрикри▓](https://github.com/Azure-Samples/azure-search-openai-demo) - RAG рикрйИриЯри░рии
- ЁЯФЧ [ри╕рйИриорйИриВриЯри┐риХ Kernel](https://github.com/microsoft/semantic-kernel) - риПриЬрй░риЯ рилри░рйЗриори╡ри░риХ (C#)
- ЁЯФЧ [LangChain Azure](https://github.com/langchain-ai/langchain) - риПриЬрй░риЯ риЖри░риХрйЗри╕риЯри░ри╕ри╝рии (Python)
- ЁЯФЧ [AutoGen](https://github.com/microsoft/autogen) - риори▓риЯрйА-риПриЬрй░риЯ риЧрй▒ри▓римри╛ридри╛риВ

**риХрйБрй▒ри▓ риЕрй░рижри╛риЬри╝ри╛ ри╕риори╛риВ:**
- риври╛риВриЪри╛ ридри┐риЖри░ риХри░риири╛: 15-25 риори┐рй░риЯ (тЬЕ рикрйВри░ри╛)
- риРрикри▓рйАриХрйЗри╕ри╝рии ри╡ри┐риХри╛ри╕: 80-120 риШрй░риЯрйЗ (ЁЯФи ридрйБри╣ри╛рибри╛ риХрй░рио)
- риЬри╛риВриЪ риЕридрйЗ риЕриирйБриХрйВри▓ридри╛: 15-25 риШрй░риЯрйЗ (ЁЯФи ридрйБри╣ри╛рибри╛ риХрй░рио)

## ЁЯЫая╕П ри╕риорй▒ри╕ри┐риЖ ри╣рй▒ри▓

### риЖрио ри╕риорй▒ри╕ри┐риЖри╡ри╛риВ

#### 1. Azure OpenAI риХрйЛриЯри╛ риЦридрио ри╣рйЛ риЧри┐риЖ

```bash
# риорйМриЬрйВрижри╛ риХрйЛриЯри╛ ри╡ри░ридрйЛриВ рижрйА риЬри╛риВриЪ риХри░рйЛ
az cognitiveservices usage list --location eastus2

# риХрйЛриЯри╛ ри╡ри╛ризрйЗ рижрйА римрйЗрииридрйА риХри░рйЛ
az support tickets create \
  --ticket-name "OpenAI-Quota-Increase" \
  --severity "minimal" \
  --description "Request quota increase for Azure OpenAI in region X"
```

#### 2. риХрй░риЯрйЗриири░ риРрикри╕ рибри┐рикри▓рйЛриЗриорйИриВриЯ рилрйЗри▓рйНри╣ ри╣рйЛриЗриЖ

```bash
# риХрй░риЯрйЗриири░ риРрик ри▓рйМриЧ риЪрйИрй▒риХ риХри░рйЛ
az containerapp logs show \
  --name retail-router \
  --resource-group myResourceGroup \
  --follow

# риХрй░риЯрйЗриири░ риРрик риирйВрй░ риорйБрйЬ риЪри╛ри▓рйВ риХри░рйЛ
az containerapp revision restart \
  --name retail-router \
  --resource-group myResourceGroup
```

#### 3. ри╕ри░риЪ ри╕рйЗри╡ри╛ ри╕ри╝рйБри░рйВриЖрид

```bash
# риЦрйЛриЬ ри╕рйЗри╡ри╛ рижрйА ри╕риери┐ридрйА рижрйА риЬри╛риВриЪ риХри░рйЛ
az search service show \
  --name <search-service-name> \
  --resource-group myResourceGroup

# риЦрйЛриЬ ри╕рйЗри╡ри╛ риХриирйИриХриЯри┐ри╡ри┐риЯрйА рижрйА риЬри╛риВриЪ риХри░рйЛ
curl -X GET "https://<search-service-name>.search.windows.net/indexes?api-version=2023-11-01" \
  -H "api-key: <search-admin-key>"
```

### рибри┐рикри▓рйЛриЗриорйИриВриЯ ри╡рйИри░рйАрилри┐риХрйЗри╕ри╝рии

```bash
# ри╕ри╛ри░рйЗ ри╕ри░рйЛридри╛риВ рижрйА рикрйБри╕ри╝риЯрйА риХри░рйЛ риХри┐ риЙри╣ римригри╛риП риЧриП ри╣рии
az resource list \
  --resource-group myResourceGroup \
  --output table

# ри╕ри░рйЛрид рижрйА ри╕ри┐ри╣рид рижрйА риЬри╛риВриЪ риХри░рйЛ
az resource list \
  --resource-group myResourceGroup \
  --query "[?provisioningState!='Succeeded'].{Name:name, Status:provisioningState, Type:type}" \
  --output table
```

## ЁЯФР ри╕рйБри░рй▒риЦри┐риЖ ри╡ри┐риЪри╛ри░

### риХрйБрй░риЬрйА рикрйНри░римрй░ризрии
- ри╕ри╛ри░рйЗ ри░ри╛риЬри╝ Azure Key Vault ри╡ри┐рй▒риЪ ри╕риЯрйЛри░ риХрйАридрйЗ риЬри╛риВрижрйЗ ри╣рии (риЬрижрйЛриВ рипрйЛриЧ риХрйАридри╛ риЧри┐риЖ)
- риХрй░риЯрйЗриири░ риРрикри╕ рикрйНри░риори╛ригри┐риХридри╛ ри▓риИ риорйИриирйЗриЬриб риЖриИрибрйИриВриЯри┐риЯрйА ри╡ри░ридрижрйЗ ри╣рии
- ри╕риЯрйЛри░рйЗриЬ риЕриХри╛риКриВриЯ ри╕рйБри░рй▒риЦри┐риЕрид рибри┐рилри╛ри▓риЯри╕ риири╛ри▓ ри╣рии (риХрйЗри╡ри▓ HTTPS, риХрйЛриИ рикримри▓ри┐риХ римри▓ри╛рим риРриХри╕рйИри╕ риири╣рйАриВ)

### риирйИрй▒риЯри╡ри░риХ ри╕рйБри░рй▒риЦри┐риЖ
- риХрй░риЯрйЗриири░ риРрикри╕ ри╕рй░ринри╡ ри╣рйЛриг 'ридрйЗ риЕрй░рижри░рйВриирйА риирйИрй▒риЯри╡ри░риХри┐рй░риЧ ри╡ри░ридрижрйЗ ри╣рии
- ри╕ри░риЪ ри╕рйЗри╡ри╛ рикрйНри░ри╛риИри╡рйЗриЯ риРриВрибрикрйЛриЗрй░риЯри╕ ри╡ри┐риХри▓рик риири╛ри▓ риХриирилри┐риЧри░ риХрйАридрйА риЧриИ ри╣рйИ
- Cosmos DB риШрй▒риЯрйЛ-риШрй▒риЯ ри▓рйЛрйЬрйАриВрижрйЗ риЕризри┐риХри╛ри░ри╛риВ риири╛ри▓ риХриирилри┐риЧри░ риХрйАридрйА риЧриИ ри╣рйИ

### RBAC риХриирилри┐риЧри░рйЗри╕ри╝рии
```bash
# рикрйНри░римрй░ризри┐рид рикри╣ри┐риЪри╛риг ри▓риИ риЬри░рйВри░рйА ринрйВриори┐риХри╛ри╡ри╛риВ ри╕рйМриВрикрйЛ
az role assignment create \
  --assignee <container-app-managed-identity> \
  --role "Cognitive Services OpenAI User" \
  --scope <openai-resource-id>
```

## ЁЯТ░ ри▓ри╛риЧрид риЕриирйБриХрйВри▓ридри╛

### ри▓ри╛риЧрид риЕрй░рижри╛риЬри╝рйЗ (риори╛ри╕ри┐риХ, USD)

| риорйЛриб | OpenAI | риХрй░риЯрйЗриири░ риРрикри╕ | ри╕ри░риЪ | ри╕риЯрйЛри░рйЗриЬ | риХрйБрй▒ри▓ риЕрй░рижри╛риЬри╝ри╛ |
|------|--------|----------------|--------|---------|------------|
| риШрй▒риЯрйЛ-риШрй▒риЯ | $50-200 | $20-50 | $25-100 | $5-20 | $100-370 |
| ри╕ризри╛ри░рии | $200-800 | $100-300 | $100-300 | $20-50 | $420-1450 |
| рикрйНри░рйАриорйАриЕрио | $500-2000 | $300-800 | $300-600 | $50-100 | $1150-3500 |

### ри▓ри╛риЧрид риори╛риирйАриЯри░ри┐рй░риЧ

```bash
# римриЬриЯ риЕри▓ри░риЯ ри╕рйИриЯриЕрй▒рик риХри░рйЛ
az consumption budget create \
  --account-name <subscription-id> \
  --budget-name "retail-budget" \
  --amount 500 \
  --time-grain Monthly \
  --start-date 2024-01-01 \
  --end-date 2024-12-31
```

## ЁЯФД риЕрикрибрйЗриЯри╕ риЕридрйЗ ри░риЦри░риЦри╛риЕ

### риЯрйИриВрикри▓рйЗриЯ риЕрикрибрйЗриЯри╕
- ARM риЯрйИриВрикри▓рйЗриЯ рилри╛риИри▓ри╛риВ риирйВрй░ ри╡ри░риЬрии риХрй░риЯри░рйЛри▓ риХри░рйЛ
- рикри╣ри┐ри▓ри╛риВ ри╡ри┐риХри╛ри╕ ри╡ри╛ридри╛ри╡ри░риг ри╡ри┐рй▒риЪ римрижри▓ри╛риЕ рижрйА риЬри╛риВриЪ риХри░рйЛ
- риЕрикрибрйЗриЯри╕ ри▓риИ риЗрй░риХрйНри░рйАриорйИриВриЯри▓ рибри┐рикри▓рйЛриЗриорйИриВриЯ риорйЛриб ри╡ри░ридрйЛ

### ри╕ри░рйЛрид риЕрикрибрйЗриЯри╕
```bash
# риири╡рйЗриВ рикрйИри░ри╛риорйАриЯри░ри╛риВ риири╛ри▓ риЕрй▒рикрибрйЗриЯ риХри░рйЛ
az deployment group create \
  --resource-group myResourceGroup \
  --template-file azuredeploy.json \
  --parameters azuredeploy.parameters.json \
  --mode Incremental
```

### римрйИриХриЕрй▒рик риЕридрйЗ ри░ри┐риХри╡ри░рйА
- Cosmos DB риЖриЯрйЛриорйИриЯри┐риХ римрйИриХриЕрй▒рик рипрйЛриЧ риХрйАридри╛ риЧри┐риЖ
- Key Vault ри╕ри╛рилриЯ рибри┐ри▓рйАриЯ рипрйЛриЧ риХрйАридри╛ риЧри┐риЖ
- риХрй░риЯрйЗриири░ риРрик ри░ри┐ри╡рйАриЬри╝рии ри░рйЛри▓римрйИриХ ри▓риИ ри░рй▒риЦрйЗ риЧриП

## ЁЯУЮ ри╕ри╣ри╛риЗридри╛

- **риЯрйИриВрикри▓рйЗриЯ ри╕риорй▒ри╕ри┐риЖри╡ри╛риВ:** [GitHub Issues](https://github.com/microsoft/azd-for-beginners/issues)
- **Azure ри╕ри╣ри╛риЗридри╛:** [Azure Support Portal](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade)
- **риХриори┐риКриири┐риЯрйА:** [Azure AI Discord](https://discord.gg/microsoft-azure)

---

**тЪб риЖрикригри╛ риори▓риЯрйА-риПриЬрй░риЯ ри╣рй▒ри▓ ридри┐риЖри░ риХри░рии ри▓риИ ридри┐риЖри░ ри╣рйЛ?**

ри╕ри╝рйБри░рйВ риХри░рйЛ: `./deploy.sh -g myResourceGroup`

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**риЕри╕ри╡рйАриХри░ридрйА**:  
риЗри╣ рижри╕ридри╛ри╡рйЗриЬри╝ AI риЕриирйБри╡ри╛риж ри╕рйЗри╡ри╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рижрйА ри╡ри░ридрйЛриВ риХри░риХрйЗ риЕриирйБри╡ри╛риж риХрйАридри╛ риЧри┐риЖ ри╣рйИред риЬрижрйЛриВ риХри┐ риЕри╕рйАриВ ри╕ри╣рйА ри╣рйЛриг рижри╛ рипридрии риХри░рижрйЗ ри╣ри╛риВ, риХри┐ри░рикри╛ риХри░риХрйЗ ризри┐риЖрии рижри┐риУ риХри┐ ри╕ри╡рйИриЪри╛ри▓ри┐рид риЕриирйБри╡ри╛рижри╛риВ ри╡ри┐рй▒риЪ риЧри▓ридрйАриЖриВ риЬри╛риВ риЕри╕рйБриЪрйАридридри╛ри╡ри╛риВ ри╣рйЛ ри╕риХрижрйАриЖриВ ри╣рииред риЗри╕ рижрйА риорйВри▓ ринри╛ри╕ри╝ри╛ ри╡ри┐рй▒риЪ риорйМриЬрйВриж риорйВри▓ рижри╕ридри╛ри╡рйЗриЬри╝ риирйВрй░ риЕризри┐риХри╛ри░рид ри╕ри░рйЛрид риорй░риири┐риЖ риЬри╛ригри╛ риЪри╛ри╣рйАрижри╛ ри╣рйИред риори╣рй▒ридри╡рикрйВри░рии риЬри╛ригриХри╛ри░рйА ри▓риИ, рикрйЗри╕ри╝рйЗри╡ри░ риориирйБрй▒риЦрйА риЕриирйБри╡ри╛риж рижрйА ри╕ри┐рилри╛ри░ри╕ри╝ риХрйАридрйА риЬри╛риВрижрйА ри╣рйИред риЕри╕рйАриВ риЗри╕ риЕриирйБри╡ри╛риж рижрйА ри╡ри░ридрйЛриВ ридрйЛриВ рикрйИрижри╛ ри╣рйЛриг ри╡ри╛ри▓рйЗ риХри┐ри╕рйЗ ри╡рйА риЧри▓ридрилри╣ри┐риорйА риЬри╛риВ риЧри▓рид ри╡ри┐риЖриЦри┐риЖ ри▓риИ риЬри╝ри┐рй░риорйЗри╡ри╛ри░ риири╣рйАриВ ри╣ри╛риВред
<!-- CO-OP TRANSLATOR DISCLAIMER END -->