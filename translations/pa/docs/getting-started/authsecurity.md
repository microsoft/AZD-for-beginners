<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "e13ff6e1197e0a7462ed0aede7df9f23",
  "translation_date": "2025-11-21T00:37:28+00:00",
  "source_file": "docs/getting-started/authsecurity.md",
  "language_code": "pa"
}
-->
# ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ ‡®™‡©à‡®ü‡®∞‡®® ‡®Ö‡®§‡©á ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä

‚è±Ô∏è **‡®Ö‡®®‡©Å‡®Æ‡®æ‡®®‡®ø‡®§ ‡®∏‡®Æ‡®æ‡®Ç**: 45-60 ‡®Æ‡®ø‡©∞‡®ü | üí∞ **‡®≤‡®æ‡®ó‡®§ ‡®™‡©ç‡®∞‡®≠‡®æ‡®µ**: ‡®Æ‡©Å‡®´‡®º‡®§ (‡®ï‡©ã‡®à ‡®µ‡®æ‡®ß‡©Ç ‡®ñ‡®∞‡®ö ‡®®‡®π‡©Ä‡®Ç) | ‚≠ê **‡®ú‡®ü‡®ø‡®≤‡®§‡®æ**: ‡®¶‡®∞‡®Æ‡®ø‡®Ü‡®®‡®æ

**üìö ‡®∏‡®ø‡©±‡®ñ‡®£ ‡®¶‡®æ ‡®∞‡®æ‡®π**:
- ‚Üê ‡®™‡®ø‡®õ‡®≤‡®æ: [‡®ï‡©∞‡®´‡®ø‡®ó‡®∞‡©á‡®∏‡®º‡®® ‡®Æ‡©à‡®®‡©á‡®ú‡®Æ‡©à‡®Ç‡®ü](configuration.md) - ‡®µ‡®æ‡®§‡®æ‡®µ‡®∞‡®£ ‡®µ‡©à‡®∞‡©Ä‡®è‡®¨‡®≤ ‡®Ö‡®§‡©á ‡®∞‡®æ‡®ú‡®º‡®æ‡®Ç ‡®¶‡®æ ‡®™‡©ç‡®∞‡®¨‡©∞‡®ß‡®®
- üéØ **‡®§‡©Å‡®∏‡©Ä‡®Ç ‡®á‡©±‡®•‡©á ‡®π‡©ã**: ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ ‡®Ö‡®§‡©á ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü (‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä, ‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü, ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ ‡®™‡©à‡®ü‡®∞‡®®)
- ‚Üí ‡®Ö‡®ó‡®≤‡®æ: [‡®™‡®π‡®ø‡®≤‡®æ ‡®™‡©ç‡®∞‡©ã‡®ú‡©à‡®ï‡®ü](first-project.md) - ‡®Ü‡®™‡®£‡®æ ‡®™‡®π‡®ø‡®≤‡®æ AZD ‡®ê‡®™‡®≤‡©Ä‡®ï‡©á‡®∏‡®º‡®® ‡®¨‡®£‡®æ‡®ì
- üè† [‡®ï‡©ã‡®∞‡®∏ ‡®π‡©ã‡®Æ](../../README.md)

---

## ‡®§‡©Å‡®∏‡©Ä‡®Ç ‡®ï‡©Ä ‡®∏‡®ø‡©±‡®ñ‡©ã‡®ó‡©á

‡®á‡®∏ ‡®™‡®æ‡®† ‡®®‡©Ç‡©∞ ‡®™‡©Ç‡®∞‡®æ ‡®ï‡®∞‡®ï‡©á, ‡®§‡©Å‡®∏‡©Ä‡®Ç:
- ‡®ê‡®ú‡®º‡®∞ ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ ‡®™‡©à‡®ü‡®∞‡®® (‡®ï‡©Ä‡®ú‡®º, ‡®ï‡®®‡©à‡®ï‡®∏‡®º‡®® ‡®∏‡®ü‡©ç‡®∞‡®ø‡©∞‡®ó, ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä) ‡®®‡©Ç‡©∞ ‡®∏‡®Æ‡®ù‡©ã‡®ó‡©á
- **‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä** ‡®®‡©Ç‡©∞ ‡®™‡®æ‡®∏‡®µ‡®∞‡®°-‡®∞‡®π‡®ø‡®§ ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ ‡®≤‡®à ‡®≤‡®æ‡®ó‡©Ç ‡®ï‡®∞‡©ã
- **‡®ê‡®ú‡®º‡®∞ ‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü** ‡®á‡©∞‡®ü‡©Ä‡®ó‡©ç‡®∞‡©á‡®∏‡®º‡®® ‡®®‡®æ‡®≤ ‡®∞‡®æ‡®ú‡®º‡®æ‡®Ç ‡®®‡©Ç‡©∞ ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ ‡®ï‡®∞‡©ã
- AZD ‡®°‡®ø‡®™‡®≤‡©å‡®á‡®Æ‡©à‡®Ç‡®ü ‡®≤‡®à **‡®∞‡©ã‡®≤-‡®Ö‡®ß‡®æ‡®∞‡®ø‡®§ ‡®™‡®π‡©Å‡©∞‡®ö ‡®®‡®ø‡®Ø‡©∞‡®§‡®∞‡®£ (RBAC)** ‡®ï‡®®‡®´‡®ø‡®ó‡®∞ ‡®ï‡®∞‡©ã
- ‡®ï‡©∞‡®ü‡©á‡®®‡®∞ ‡®ê‡®™‡®∏ ‡®Ö‡®§‡©á ‡®ê‡®ú‡®º‡®∞ ‡®∏‡©á‡®µ‡®æ‡®µ‡®æ‡®Ç ‡®µ‡®ø‡©±‡®ö ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®¶‡©á ‡®∏‡®∞‡®µ‡©ã‡®§‡®Æ ‡®Ö‡®≠‡®ø‡®Ü‡®∏ ‡®≤‡®æ‡®ó‡©Ç ‡®ï‡®∞‡©ã
- ‡®ï‡©Ä-‡®Ö‡®ß‡®æ‡®∞‡®ø‡®§ ‡®§‡©ã‡®Ç ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä-‡®Ö‡®ß‡®æ‡®∞‡®ø‡®§ ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ ‡®µ‡®ø‡©±‡®ö ‡®Æ‡®æ‡®à‡®ó‡®∞‡©á‡®ü ‡®ï‡®∞‡©ã

## ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®ï‡®ø‡®â‡®Ç ‡®Æ‡®π‡©±‡®§‡®µ‡®™‡©Ç‡®∞‡®® ‡®π‡©à

### ‡®∏‡®Æ‡©±‡®∏‡®ø‡®Ü: ‡®∞‡®µ‡®æ‡®á‡®§‡©Ä ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ

**‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®§‡©ã‡®Ç ‡®™‡®π‡®ø‡®≤‡®æ‡®Ç:**
```javascript
// ‚ùå ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®ñ‡®§‡®∞‡®æ: ‡®ï‡©ã‡®° ‡®µ‡®ø‡©±‡®ö ‡®π‡®æ‡®∞‡®°‡®ï‡©ã‡®° ‡®ï‡©Ä‡®§‡©á ‡®ó‡®è ‡®∞‡®æ‡®ú
const connectionString = "Server=mydb.database.windows.net;User=admin;Password=P@ssw0rd123";
const storageKey = "xK7mN9pQ2wR5tY8uI0oP3aS6dF1gH4jK...";
const cosmosKey = "C2x7B9n4M1p8Q5w3E6r0T2y5U8i1O4p7...";
```

**‡®∏‡®Æ‡©±‡®∏‡®ø‡®Ü‡®µ‡®æ‡®Ç:**
- üî¥ **‡®ï‡©ã‡®°, ‡®ï‡®®‡®´‡®ø‡®ó‡®∞‡©á‡®∏‡®º‡®® ‡®´‡®æ‡®à‡®≤‡®æ‡®Ç, ‡®µ‡®æ‡®§‡®æ‡®µ‡®∞‡®£ ‡®µ‡©à‡®∞‡©Ä‡®è‡®¨‡®≤ ‡®µ‡®ø‡©±‡®ö ‡®∞‡®æ‡®ú‡®º‡®æ‡®Ç ‡®¶‡®æ ‡®™‡®∞‡®¶‡®æ‡®´‡®æ‡®∏‡®º**
- üî¥ **‡®ï‡©ç‡®∞‡©à‡®°‡©à‡®Ç‡®∏‡®º‡®≤ ‡®∞‡©ã‡®ü‡©á‡®∏‡®º‡®®** ‡®≤‡®à ‡®ï‡©ã‡®° ‡®¨‡®¶‡®≤‡®£ ‡®Ö‡®§‡©á ‡®Æ‡©Å‡©ú ‡®°‡®ø‡®™‡®≤‡©å‡®á‡®Æ‡©à‡®Ç‡®ü ‡®¶‡©Ä ‡®≤‡©ã‡©ú
- üî¥ **‡®Ü‡®°‡®ø‡®ü ‡®¶‡©Ä‡®Ü‡®Ç ‡®Æ‡©Å‡®∏‡®º‡®ï‡®≤‡®æ‡®Ç** - ‡®ï‡®ø‡®∏ ‡®®‡©á ‡®ï‡©Ä ‡®™‡®π‡©Å‡©∞‡®ö ‡®ï‡©Ä‡®§‡©Ä, ‡®ï‡®¶‡©ã‡®Ç?
- üî¥ **‡®¨‡©á‡®§‡®∞‡®§‡©Ä‡®¨‡©Ä** - ‡®ï‡®à ‡®∏‡®ø‡®∏‡®ü‡®Æ‡®æ‡®Ç ‡®µ‡®ø‡©±‡®ö ‡®´‡©à‡®≤‡©á ‡®∞‡®æ‡®ú‡®º
- üî¥ **‡®Ö‡®®‡©Å‡®ï‡©Ç‡®≤‡®§‡®æ ‡®ñ‡®§‡®∞‡©á** - ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®Ü‡®°‡®ø‡®ü‡®æ‡®Ç ‡®µ‡®ø‡©±‡®ö ‡®´‡©á‡®≤

### ‡®π‡©±‡®≤: ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä

**‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®¶‡©á ‡®¨‡®æ‡®Ö‡®¶:**
```javascript
// ‚úÖ ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§: ‡®ï‡©ã‡®° ‡®µ‡®ø‡©±‡®ö ‡®ï‡©ã‡®à ‡®∞‡®æ‡®ú ‡®®‡®π‡©Ä‡®Ç
const credential = new DefaultAzureCredential();
const client = new BlobServiceClient(
  "https://mystorageaccount.blob.core.windows.net",
  credential  // ‡®ê‡®ú‡®º‡®∞ ‡®∏‡®µ‡©à‡®ö‡®æ‡®≤‡®ø‡®§ ‡®§‡©å‡®∞ '‡®§‡©á ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ ‡®®‡©Ç‡©∞ ‡®∏‡©∞‡®≠‡®æ‡®≤‡®¶‡®æ ‡®π‡©à
);
```

**‡®´‡®æ‡®á‡®¶‡©á:**
- ‚úÖ **‡®ï‡©ã‡®° ‡®ú‡®æ‡®Ç ‡®ï‡®®‡®´‡®ø‡®ó‡®∞‡©á‡®∏‡®º‡®® ‡®µ‡®ø‡©±‡®ö ‡®ï‡©ã‡®à ‡®∞‡®æ‡®ú‡®º ‡®®‡®π‡©Ä‡®Ç**
- ‚úÖ **‡®Ü‡®ü‡©ã‡®Æ‡©à‡®ü‡®ø‡®ï ‡®∞‡©ã‡®ü‡©á‡®∏‡®º‡®®** - ‡®ê‡®ú‡®º‡®∞ ‡®á‡®∏ ‡®®‡©Ç‡©∞ ‡®∏‡©∞‡®≠‡®æ‡®≤‡®¶‡®æ ‡®π‡©à
- ‚úÖ **‡®™‡©Ç‡®∞‡®æ ‡®Ü‡®°‡®ø‡®ü ‡®ü‡©ç‡®∞‡©á‡®≤** ‡®ê‡®ú‡®º‡®∞ AD ‡®≤‡©å‡®ó ‡®µ‡®ø‡©±‡®ö
- ‚úÖ **‡®ï‡©á‡®Ç‡®¶‡®∞‡©Ä‡®ï‡©ç‡®∞‡®ø‡®§ ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü** - ‡®ê‡®ú‡®º‡®∞ ‡®™‡©ã‡®∞‡®ü‡®≤ ‡®µ‡®ø‡©±‡®ö ‡®™‡©ç‡®∞‡®¨‡©∞‡®ß‡®ø‡®§
- ‚úÖ **‡®Ö‡®®‡©Å‡®ï‡©Ç‡®≤‡®§‡®æ ‡®≤‡®à ‡®§‡®ø‡®Ü‡®∞** - ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®Æ‡®ø‡®Ü‡®∞‡®æ‡®Ç ‡®®‡©Ç‡©∞ ‡®™‡©Ç‡®∞‡®æ ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à

**‡®â‡®¶‡®æ‡®π‡®∞‡®£**: ‡®∞‡®µ‡®æ‡®á‡®§‡©Ä ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ ‡®ï‡®à ‡®¶‡®∞‡®µ‡®æ‡®ú‡®º‡®ø‡®Ü‡®Ç ‡®≤‡®à ‡®ï‡®à ‡®≠‡©å‡®§‡®ø‡®ï ‡®ö‡®æ‡®¨‡©Ä‡®Ü‡®Ç ‡®≤‡®ø‡®ú‡®æ‡®£ ‡®µ‡®∞‡®ó‡®æ ‡®π‡©à‡•§ ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®á‡©±‡®ï ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®¨‡©à‡®ú ‡®µ‡®∞‡®ó‡®æ ‡®π‡©à ‡®ú‡©ã ‡®Ü‡®™‡®£‡©á ‡®Ü‡®™ ‡®™‡®π‡©Å‡©∞‡®ö ‡®¶‡®ø‡©∞‡®¶‡®æ ‡®π‡©à ‡®ï‡®ø ‡®§‡©Å‡®∏‡©Ä‡®Ç ‡®ï‡©å‡®£ ‡®π‡©ã‚Äî‡®ï‡©ã‡®à ‡®ö‡®æ‡®¨‡©Ä‡®Ü‡®Ç ‡®ó‡©Å‡®Ü‡®â‡®£, ‡®ï‡®æ‡®™‡©Ä ‡®ï‡®∞‡®® ‡®ú‡®æ‡®Ç ‡®∞‡©ã‡®ü‡©á‡®ü ‡®ï‡®∞‡®® ‡®¶‡©Ä ‡®≤‡©ã‡©ú ‡®®‡®π‡©Ä‡®Ç‡•§

---

## ‡®Ü‡®∞‡®ï‡©Ä‡®ü‡©à‡®ï‡®ö‡®∞ ‡®ù‡®≤‡®ï

### ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®®‡®æ‡®≤ ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ ‡®¶‡®æ ‡®™‡©ç‡®∞‡®µ‡®æ‡®π

```mermaid
sequenceDiagram
    participant App as ‡®§‡©Å‡®π‡®æ‡®°‡®æ ‡®ê‡®™‡®≤‡©Ä‡®ï‡©á‡®∏‡®º‡®®<br/>(‡®ï‡©∞‡®ü‡©á‡®®‡®∞ ‡®ê‡®™)
    participant MI as ‡®™‡©ç‡®∞‡®¨‡©∞‡®ß‡®ø‡®§ ‡®™‡®π‡®ø‡®ö‡®æ‡®£<br/>(‡®ê‡®ú‡®º‡®∞ AD)
    participant KV as ‡®ï‡©Ä ‡®µ‡®æ‡®≤‡®ü
    participant Storage as ‡®ê‡®ú‡®º‡®∞ ‡®∏‡®ü‡©ã‡®∞‡©á‡®ú
    participant DB as ‡®ê‡®ú‡®º‡®∞ SQL
    
    App->>MI: ‡®ê‡®ï‡®∏‡©à‡®∏ ‡®ü‡©ã‡®ï‡®® ‡®¶‡©Ä ‡®¨‡©á‡®®‡®§‡©Ä<br/>(‡®Ü‡®ü‡©ã‡®Æ‡©à‡®ü‡®ø‡®ï)
    MI->>MI: ‡®™‡®π‡®ø‡®ö‡®æ‡®£ ‡®¶‡©Ä ‡®™‡©Å‡®∏‡®º‡®ü‡©Ä ‡®ï‡®∞‡©ã<br/>(‡®ï‡©ã‡®à ‡®™‡®æ‡®∏‡®µ‡®∞‡®° ‡®¶‡©Ä ‡®≤‡©ã‡©ú ‡®®‡®π‡©Ä‡®Ç)
    MI-->>App: ‡®ü‡©ã‡®ï‡®® ‡®µ‡®æ‡®™‡®∏ ‡®ï‡®∞‡©ã<br/>(1 ‡®ò‡©∞‡®ü‡©á ‡®≤‡®à ‡®µ‡©à‡®ß)
    
    App->>KV: ‡®∏‡®ø‡®ï‡®∞‡®ü ‡®™‡©ç‡®∞‡®æ‡®™‡®§ ‡®ï‡®∞‡©ã<br/>(‡®ü‡©ã‡®ï‡®® ‡®¶‡©Ä ‡®µ‡®∞‡®§‡©ã‡®Ç ‡®ï‡®∞‡®¶‡©á ‡®π‡©ã‡®è)
    KV->>KV: RBAC ‡®Ö‡®ß‡®ø‡®ï‡®æ‡®∞‡®æ‡®Ç ‡®¶‡©Ä ‡®ú‡®æ‡®Ç‡®ö ‡®ï‡®∞‡©ã
    KV-->>App: ‡®∏‡®ø‡®ï‡®∞‡®ü ‡®Æ‡©Å‡©±‡®≤ ‡®µ‡®æ‡®™‡®∏ ‡®ï‡®∞‡©ã
    
    App->>Storage: ‡®¨‡®≤‡©å‡®¨ ‡®Ö‡©±‡®™‡®≤‡©ã‡®° ‡®ï‡®∞‡©ã<br/>(‡®ü‡©ã‡®ï‡®® ‡®¶‡©Ä ‡®µ‡®∞‡®§‡©ã‡®Ç ‡®ï‡®∞‡®¶‡©á ‡®π‡©ã‡®è)
    Storage->>Storage: RBAC ‡®Ö‡®ß‡®ø‡®ï‡®æ‡®∞‡®æ‡®Ç ‡®¶‡©Ä ‡®ú‡®æ‡®Ç‡®ö ‡®ï‡®∞‡©ã
    Storage-->>App: ‡®∏‡®´‡®≤‡®§‡®æ
    
    App->>DB: ‡®°‡®æ‡®ü‡®æ ‡®™‡©Å‡©±‡®õ‡®ó‡®ø‡©±‡®õ ‡®ï‡®∞‡©ã<br/>(‡®ü‡©ã‡®ï‡®® ‡®¶‡©Ä ‡®µ‡®∞‡®§‡©ã‡®Ç ‡®ï‡®∞‡®¶‡©á ‡®π‡©ã‡®è)
    DB->>DB: SQL ‡®Ö‡®ß‡®ø‡®ï‡®æ‡®∞‡®æ‡®Ç ‡®¶‡©Ä ‡®ú‡®æ‡®Ç‡®ö ‡®ï‡®∞‡©ã
    DB-->>App: ‡®®‡®§‡©Ä‡®ú‡©á ‡®µ‡®æ‡®™‡®∏ ‡®ï‡®∞‡©ã
    
    Note over App,DB: ‡®∏‡®æ‡®∞‡©Ä ‡®™‡®π‡®ø‡®ö‡®æ‡®£ ‡®™‡®æ‡®∏‡®µ‡®∞‡®° ‡®∞‡®π‡®ø‡®§!
```
### ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®¶‡©á ‡®ï‡®ø‡®∏‡®Æ‡®æ‡®Ç

```mermaid
graph TB
    MI[‡®™‡©ç‡®∞‡®¨‡©∞‡®ß‡®ø‡®§ ‡®™‡®õ‡®æ‡®£]
    SystemAssigned[‡®∏‡®ø‡®∏‡®ü‡®Æ-‡®Ö‡®∏‡®æ‡®à‡®® ‡®ï‡©Ä‡®§‡©Ä ‡®™‡®õ‡®æ‡®£]
    UserAssigned[‡®Ø‡©Ç‡®ú‡®º‡®∞-‡®Ö‡®∏‡®æ‡®à‡®® ‡®ï‡©Ä‡®§‡©Ä ‡®™‡®õ‡®æ‡®£]
    
    MI --> SystemAssigned
    MI --> UserAssigned
    
    SystemAssigned --> SA1[‡®∏‡®∞‡©ã‡®§ ‡®®‡®æ‡®≤ ‡®ú‡©Å‡©ú‡©Ä ‡®ú‡®º‡®ø‡©∞‡®¶‡®ó‡©Ä]
    SystemAssigned --> SA2[‡®∏‡®µ‡©à‡®ö‡®æ‡®≤‡®ø‡®§ ‡®¨‡®£‡®æ‡®â‡®ü/‡®Æ‡®ø‡®ü‡®æ‡®â‡®ü]
    SystemAssigned --> SA3[‡®á‡©±‡®ï ‡®π‡©Ä ‡®∏‡®∞‡©ã‡®§ ‡®≤‡®à ‡®∏‡®≠ ‡®§‡©ã‡®Ç ‡®µ‡®ß‡©Ä‡®Ü]
    
    UserAssigned --> UA1[‡®∏‡®µ‡®§‡©∞‡®§‡®∞ ‡®ú‡®º‡®ø‡©∞‡®¶‡®ó‡©Ä]
    UserAssigned --> UA2[‡®π‡©±‡®•‡©ã‡®Ç ‡®¨‡®£‡®æ‡®â‡®ü/‡®Æ‡®ø‡®ü‡®æ‡®â‡®ü]
    UserAssigned --> UA3[‡®∏‡®∞‡©ã‡®§‡®æ‡®Ç ‡®µ‡®ø‡©±‡®ö ‡®∏‡®æ‡®Ç‡®ù‡®æ]
    
    style SystemAssigned fill:#2196F3,stroke:#1976D2,stroke-width:2px,color:#fff
    style UserAssigned fill:#4CAF50,stroke:#388E3C,stroke-width:2px,color:#fff
```
| ‡®´‡©Ä‡®ö‡®∞ | ‡®∏‡®ø‡®∏‡®ü‡®Æ-‡®Ö‡®∏‡®æ‡®à‡®®‡®° | ‡®Ø‡©Ç‡®ú‡®º‡®∞-‡®Ö‡®∏‡®æ‡®à‡®®‡®° |
|---------|----------------|---------------|
| **‡®ú‡©Ä‡®µ‡®® ‡®ö‡©±‡®ï‡®∞** | ‡®∏‡®∞‡©ã‡®§ ‡®®‡®æ‡®≤ ‡®ú‡©Å‡©ú‡®ø‡®Ü | ‡®∏‡®µ‡®§‡©∞‡®§‡®∞ |
| **‡®§‡®ø‡®Ü‡®∞‡©Ä** | ‡®∏‡®∞‡©ã‡®§ ‡®®‡®æ‡®≤ ‡®Ü‡®ü‡©ã‡®Æ‡©à‡®ü‡®ø‡®ï | ‡®Æ‡©à‡®®‡©Ç‡®Ö‡®≤ ‡®§‡®ø‡®Ü‡®∞‡©Ä |
| **‡®π‡®ü‡®æ‡®â‡®£‡®æ** | ‡®∏‡®∞‡©ã‡®§ ‡®®‡®æ‡®≤ ‡®π‡®ü‡®æ‡®á‡®Ü ‡®ó‡®ø‡®Ü | ‡®∏‡®∞‡©ã‡®§ ‡®π‡®ü‡®æ‡®â‡®£ ‡®§‡©ã‡®Ç ‡®¨‡®æ‡®Ö‡®¶ ‡®µ‡©Ä ‡®ï‡®æ‡®á‡®Æ |
| **‡®∏‡®æ‡®Ç‡®ù‡®æ ‡®ï‡®∞‡®®‡®æ** | ‡®∏‡®ø‡®∞‡®´ ‡®á‡©±‡®ï ‡®∏‡®∞‡©ã‡®§ | ‡®ï‡®à ‡®∏‡®∞‡©ã‡®§ |
| **‡®µ‡®∞‡®§‡©ã‡®Ç ‡®¶‡®æ ‡®ï‡©á‡®∏** | ‡®∏‡®ß‡®æ‡®∞‡®® ‡®∏‡®•‡®ø‡®§‡©Ä‡®Ü‡®Ç | ‡®ú‡®ü‡®ø‡®≤ ‡®¨‡®π‡©Å-‡®∏‡®∞‡©ã‡®§ ‡®∏‡®•‡®ø‡®§‡©Ä‡®Ü‡®Ç |
| **AZD ‡®°‡®ø‡®´‡®æ‡®≤‡®ü** | ‚úÖ ‡®∏‡®ø‡®´‡®æ‡®∞‡®∏‡®º‡©Ä | ‡®µ‡®ø‡®ï‡®≤‡®™‡®ø‡®ï |

---

## ‡®™‡©Ç‡®∞‡®µ ‡®∏‡®º‡®∞‡®§‡®æ‡®Ç

### ‡®≤‡©ã‡©ú‡©Ä‡®Ç‡®¶‡©á ‡®ü‡©Ç‡®≤

‡®§‡©Å‡®π‡®æ‡®®‡©Ç‡©∞ ‡®™‡®ø‡®õ‡®≤‡©á ‡®™‡®æ‡®†‡®æ‡®Ç ‡®§‡©ã‡®Ç ‡®á‡®π‡®®‡®æ‡®Ç ‡®¶‡©Ä ‡®∏‡®•‡®æ‡®™‡®®‡®æ ‡®π‡©ã‡®£‡©Ä ‡®ö‡®æ‡®π‡©Ä‡®¶‡©Ä ‡®π‡©à:

```bash
# ‡®ê‡®ú‡®º‡®∞ ‡®°‡®ø‡®µ‡©à‡®≤‡®™‡®∞ CLI ‡®¶‡©Ä ‡®™‡©Å‡®∏‡®º‡®ü‡©Ä ‡®ï‡®∞‡©ã
azd version
# ‚úÖ ‡®â‡®Æ‡©Ä‡®¶: azd ‡®µ‡®∞‡®ú‡®® 1.0.0 ‡®ú‡®æ‡®Ç ‡®â‡©±‡®ö‡®æ

# ‡®ê‡®ú‡®º‡®∞ CLI ‡®¶‡©Ä ‡®™‡©Å‡®∏‡®º‡®ü‡©Ä ‡®ï‡®∞‡©ã
az --version
# ‚úÖ ‡®â‡®Æ‡©Ä‡®¶: azure-cli 2.50.0 ‡®ú‡®æ‡®Ç ‡®â‡©±‡®ö‡®æ
```

### ‡®ê‡®ú‡®º‡®∞ ‡®¶‡©Ä‡®Ü‡®Ç ‡®≤‡©ã‡©ú‡®æ‡®Ç

- ‡®∏‡®∞‡®ó‡®∞‡®Æ ‡®ê‡®ú‡®º‡®∞ ‡®∏‡®¨‡®∏‡®ï‡©ç‡®∞‡®ø‡®™‡®∏‡®º‡®®
- ‡®Ö‡®ß‡®ø‡®ï‡®æ‡®∞:
  - ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®¨‡®£‡®æ‡®â‡®£
  - RBAC ‡®∞‡©ã‡®≤ ‡®Ö‡®∏‡®æ‡®à‡®® ‡®ï‡®∞‡©ã
  - ‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü ‡®∏‡®∞‡©ã‡®§ ‡®¨‡®£‡®æ‡®â‡®£
  - ‡®ï‡©∞‡®ü‡©á‡®®‡®∞ ‡®ê‡®™‡®∏ ‡®°‡®ø‡®™‡®≤‡©å‡®á‡®Æ‡©à‡®Ç‡®ü

### ‡®ó‡®ø‡®Ü‡®® ‡®™‡©Ç‡®∞‡®µ ‡®∏‡®º‡®∞‡®§‡®æ‡®Ç

‡®§‡©Å‡®π‡®æ‡®®‡©Ç‡©∞ ‡®™‡©Ç‡®∞‡®æ ‡®ï‡®∞‡®®‡®æ ‡®ö‡®æ‡®π‡©Ä‡®¶‡®æ ‡®π‡©à:
- [‡®á‡©∞‡®∏‡®ü‡®æ‡®≤‡©á‡®∏‡®º‡®® ‡®ó‡®æ‡®à‡®°](installation.md) - AZD ‡®∏‡©à‡®ü‡®Ö‡®™
- [AZD ‡®¨‡©á‡®∏‡®ø‡®ï‡®∏](azd-basics.md) - ‡®Æ‡©Å‡©±‡®ñ ‡®ß‡®æ‡®∞‡®®‡®æ‡®µ‡®æ‡®Ç
- [‡®ï‡©∞‡®´‡®ø‡®ó‡®∞‡©á‡®∏‡®º‡®® ‡®Æ‡©à‡®®‡©á‡®ú‡®Æ‡©à‡®Ç‡®ü](configuration.md) - ‡®µ‡®æ‡®§‡®æ‡®µ‡®∞‡®£ ‡®µ‡©à‡®∞‡©Ä‡®è‡®¨‡®≤

---

## ‡®™‡®æ‡®† 1: ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ ‡®™‡©à‡®ü‡®∞‡®® ‡®®‡©Ç‡©∞ ‡®∏‡®Æ‡®ù‡®£‡®æ

### ‡®™‡©à‡®ü‡®∞‡®® 1: ‡®ï‡®®‡©à‡®ï‡®∏‡®º‡®® ‡®∏‡®ü‡©ç‡®∞‡®ø‡©∞‡®ó (‡®™‡©Å‡®∞‡®æ‡®£‡®æ - ‡®¨‡®ö‡©ã)

**‡®á‡®π ‡®ï‡®ø‡®µ‡©á‡®Ç ‡®ï‡©∞‡®Æ ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à:**
```bash
# ‡®ï‡®®‡©à‡®ï‡®∏‡®º‡®® ‡®∏‡®ü‡©ç‡®∞‡®ø‡©∞‡®ó ‡®µ‡®ø‡©±‡®ö ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£ ‡®™‡©±‡®§‡®∞ ‡®∏‡®º‡®æ‡®Æ‡®≤ ‡®π‡®®
STORAGE_CONNECTION_STRING="DefaultEndpointsProtocol=https;AccountName=myaccount;AccountKey=xK7mN9pQ2wR5..."
COSMOS_CONNECTION_STRING="AccountEndpoint=https://myaccount.documents.azure.com:443/;AccountKey=C2x7..."
SQL_CONNECTION_STRING="Server=myserver.database.windows.net;User=admin;Password=P@ssw0rd..."
```

**‡®∏‡®Æ‡©±‡®∏‡®ø‡®Ü‡®µ‡®æ‡®Ç:**
- ‚ùå ‡®∞‡®æ‡®ú‡®º ‡®µ‡®æ‡®§‡®æ‡®µ‡®∞‡®£ ‡®µ‡©à‡®∞‡©Ä‡®è‡®¨‡®≤ ‡®µ‡®ø‡©±‡®ö ‡®¶‡®ø‡®ñ‡®æ‡®à ‡®¶‡©á ‡®∞‡®π‡©á ‡®π‡®®
- ‚ùå ‡®°‡®ø‡®™‡®≤‡©å‡®á‡®Æ‡©à‡®Ç‡®ü ‡®∏‡®ø‡®∏‡®ü‡®Æ‡®æ‡®Ç ‡®µ‡®ø‡©±‡®ö ‡®≤‡©å‡®ó ‡®ï‡©Ä‡®§‡®æ ‡®ó‡®ø‡®Ü
- ‚ùå ‡®∞‡©ã‡®ü‡©á‡®ü ‡®ï‡®∞‡®®‡®æ ‡®Æ‡©Å‡®∏‡®º‡®ï‡®≤
- ‚ùå ‡®™‡®π‡©Å‡©∞‡®ö ‡®¶‡®æ ‡®ï‡©ã‡®à ‡®Ü‡®°‡®ø‡®ü ‡®ü‡©ç‡®∞‡©á‡®≤ ‡®®‡®π‡©Ä‡®Ç

**‡®ï‡®¶‡©ã‡®Ç ‡®µ‡®∞‡®§‡®£‡®æ ‡®π‡©à:** ‡®∏‡®ø‡®∞‡®´ ‡®∏‡®•‡®æ‡®®‡®ï ‡®µ‡®ø‡®ï‡®æ‡®∏ ‡®≤‡®à, ‡®ï‡®¶‡©á ‡®µ‡©Ä ‡®â‡®§‡®™‡®æ‡®¶‡®® ‡®≤‡®à ‡®®‡®π‡©Ä‡®Ç‡•§

---

### ‡®™‡©à‡®ü‡®∞‡®® 2: ‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü ‡®∞‡®ø‡®´‡®∞‡©à‡®Ç‡®∏ (‡®µ‡®ß‡©Ä‡®Ü)

**‡®á‡®π ‡®ï‡®ø‡®µ‡©á‡®Ç ‡®ï‡©∞‡®Æ ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à:**
```bicep
// Store secret in Key Vault
resource keyVault 'Microsoft.KeyVault/vaults@2023-02-01' = {
  name: 'mykv'
  properties: {
    enableRbacAuthorization: true
  }
}

// Reference in Container App
env: [
  {
    name: 'STORAGE_KEY'
    secretRef: 'storage-key'  // References Key Vault
  }
]
```

**‡®´‡®æ‡®á‡®¶‡©á:**
- ‚úÖ ‡®∞‡®æ‡®ú‡®º ‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü ‡®µ‡®ø‡©±‡®ö ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ ‡®§‡©å‡®∞ '‡®§‡©á ‡®∏‡®ü‡©ã‡®∞ ‡®ï‡©Ä‡®§‡©á
- ‚úÖ ‡®ï‡©á‡®Ç‡®¶‡®∞‡©Ä‡®ï‡©ç‡®∞‡®ø‡®§ ‡®∞‡®æ‡®ú‡®º ‡®™‡©ç‡®∞‡®¨‡©∞‡®ß‡®®
- ‚úÖ ‡®∞‡©ã‡®ü‡©á‡®∏‡®º‡®® ‡®¨‡®ø‡®®‡®æ‡®Ç ‡®ï‡©ã‡®° ‡®¨‡®¶‡®≤‡®£ ‡®¶‡©á

**‡®™‡®æ‡®¨‡©∞‡®¶‡©Ä‡®Ü‡®Ç:**
- ‚ö†Ô∏è ‡®´‡®ø‡®∞ ‡®µ‡©Ä ‡®ï‡©Ä‡®ú‡®º/‡®™‡®æ‡®∏‡®µ‡®∞‡®° ‡®µ‡®∞‡®§ ‡®∞‡®π‡©á ‡®π‡®®
- ‚ö†Ô∏è ‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü ‡®™‡®π‡©Å‡©∞‡®ö ‡®¶‡®æ ‡®™‡©ç‡®∞‡®¨‡©∞‡®ß‡®® ‡®ï‡®∞‡®® ‡®¶‡©Ä ‡®≤‡©ã‡©ú

**‡®ï‡®¶‡©ã‡®Ç ‡®µ‡®∞‡®§‡®£‡®æ ‡®π‡©à:** ‡®ï‡®®‡©à‡®ï‡®∏‡®º‡®® ‡®∏‡®ü‡©ç‡®∞‡®ø‡©∞‡®ó ‡®§‡©ã‡®Ç ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®µ‡©±‡®≤ ‡®ú‡®æ‡®£ ‡®¶‡®æ ‡®Ö‡©∞‡®§‡®∞‡®æ‡®≤ ‡®ï‡®¶‡®Æ‡•§

---

### ‡®™‡©à‡®ü‡®∞‡®® 3: ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä (‡®∏‡®∞‡®µ‡©ã‡®§‡®Æ ‡®Ö‡®≠‡®ø‡®Ü‡®∏)

**‡®á‡®π ‡®ï‡®ø‡®µ‡©á‡®Ç ‡®ï‡©∞‡®Æ ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à:**
```bicep
// Enable managed identity
resource containerApp 'Microsoft.App/containerApps@2023-05-01' = {
  name: 'myapp'
  identity: {
    type: 'SystemAssigned'  // Automatically creates identity
  }
}

// Grant permissions
resource roleAssignment 'Microsoft.Authorization/roleAssignments@2022-04-01' = {
  scope: storageAccount
  properties: {
    roleDefinitionId: storageBlobDataContributorRole
    principalId: containerApp.identity.principalId
  }
}
```

**‡®ê‡®™‡®≤‡©Ä‡®ï‡©á‡®∏‡®º‡®® ‡®ï‡©ã‡®°:**
```javascript
// ‡®ï‡©ã‡®à ‡®∞‡®æ‡®ú‡®º ‡®¶‡©Ä ‡®≤‡©ã‡©ú ‡®®‡®π‡©Ä‡®Ç!
const { DefaultAzureCredential } = require('@azure/identity');
const { BlobServiceClient } = require('@azure/storage-blob');

const credential = new DefaultAzureCredential();
const blobServiceClient = new BlobServiceClient(
  'https://mystorageaccount.blob.core.windows.net',
  credential
);
```

**‡®´‡®æ‡®á‡®¶‡©á:**
- ‚úÖ ‡®ï‡©ã‡®°/‡®ï‡®®‡®´‡®ø‡®ó ‡®µ‡®ø‡©±‡®ö ‡®ï‡©ã‡®à ‡®∞‡®æ‡®ú‡®º ‡®®‡®π‡©Ä‡®Ç
- ‚úÖ ‡®Ü‡®ü‡©ã‡®Æ‡©à‡®ü‡®ø‡®ï ‡®ï‡©ç‡®∞‡©à‡®°‡©à‡®Ç‡®∏‡®º‡®≤ ‡®∞‡©ã‡®ü‡©á‡®∏‡®º‡®®
- ‚úÖ ‡®™‡©Ç‡®∞‡®æ ‡®Ü‡®°‡®ø‡®ü ‡®ü‡©ç‡®∞‡©á‡®≤
- ‚úÖ RBAC-‡®Ö‡®ß‡®æ‡®∞‡®ø‡®§ ‡®Ö‡®ß‡®ø‡®ï‡®æ‡®∞
- ‚úÖ ‡®Ö‡®®‡©Å‡®ï‡©Ç‡®≤‡®§‡®æ ‡®≤‡®à ‡®§‡®ø‡®Ü‡®∞

**‡®ï‡®¶‡©ã‡®Ç ‡®µ‡®∞‡®§‡®£‡®æ ‡®π‡©à:** ‡®π‡®Æ‡©á‡®∏‡®º‡®æ, ‡®â‡®§‡®™‡®æ‡®¶‡®® ‡®ê‡®™‡®≤‡©Ä‡®ï‡©á‡®∏‡®º‡®®‡®æ‡®Ç ‡®≤‡®à‡•§

---

## ‡®™‡®æ‡®† 2: AZD ‡®®‡®æ‡®≤ ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®≤‡®æ‡®ó‡©Ç ‡®ï‡®∞‡®®‡®æ

### ‡®ï‡®¶‡®Æ-‡®¶‡®∞-‡®ï‡®¶‡®Æ ‡®≤‡®æ‡®ó‡©Ç ‡®ï‡®∞‡®®‡®æ

‡®Ü‡®ì ‡®á‡©±‡®ï ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ ‡®ï‡©∞‡®ü‡©á‡®®‡®∞ ‡®ê‡®™ ‡®¨‡®£‡®æ‡®à‡®è ‡®ú‡©ã ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®¶‡©Ä ‡®µ‡®∞‡®§‡©ã‡®Ç ‡®ï‡®∞‡®ï‡©á ‡®ê‡®ú‡®º‡®∞ ‡®∏‡®ü‡©ã‡®∞‡©á‡®ú ‡®Ö‡®§‡©á ‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü ‡®§‡©±‡®ï ‡®™‡®π‡©Å‡©∞‡®ö ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à‡•§

### ‡®™‡©ç‡®∞‡©ã‡®ú‡©à‡®ï‡®ü ‡®∏‡®ü‡©ç‡®∞‡®ï‡®ö‡®∞

```
secure-app/
‚îú‚îÄ‚îÄ azure.yaml                 # AZD configuration
‚îú‚îÄ‚îÄ infra/
‚îÇ   ‚îú‚îÄ‚îÄ main.bicep            # Main infrastructure
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ identity.bicep    # Managed identity setup
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keyvault.bicep    # Key Vault configuration
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage.bicep     # Storage with RBAC
‚îÇ   ‚îî‚îÄ‚îÄ app/
‚îÇ       ‚îî‚îÄ‚îÄ container-app.bicep
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ app.js                # Application code
    ‚îú‚îÄ‚îÄ package.json
    ‚îî‚îÄ‚îÄ Dockerfile
```

### 1. AZD ‡®ï‡®®‡®´‡®ø‡®ó‡®∞ ‡®ï‡®∞‡©ã (azure.yaml)

```yaml
name: secure-app
metadata:
  template: secure-app@1.0.0

services:
  api:
    project: ./src
    language: js
    host: containerapp

# Enable managed identity (AZD handles this automatically)
```

### 2. ‡®á‡©∞‡®´‡®∞‡®æ‡®∏‡®ü‡®∞‡®ï‡®ö‡®∞: ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®®‡©Ç‡©∞ ‡®Ø‡©ã‡®ó ‡®ï‡®∞‡©ã

**‡®´‡®æ‡®à‡®≤: `infra/main.bicep`**

```bicep
targetScope = 'subscription'

param environmentName string
param location string = 'eastus'

var tags = { 'azd-env-name': environmentName }

// Resource group
resource rg 'Microsoft.Resources/resourceGroups@2021-04-01' = {
  name: 'rg-${environmentName}'
  location: location
  tags: tags
}

// Storage Account
module storage './core/storage.bicep' = {
  name: 'storage'
  scope: rg
  params: {
    name: 'st${uniqueString(rg.id)}'
    location: location
    tags: tags
  }
}

// Key Vault
module keyVault './core/keyvault.bicep' = {
  name: 'keyvault'
  scope: rg
  params: {
    name: 'kv-${uniqueString(rg.id)}'
    location: location
    tags: tags
  }
}

// Container App with Managed Identity
module containerApp './app/container-app.bicep' = {
  name: 'container-app'
  scope: rg
  params: {
    name: 'ca-${environmentName}'
    location: location
    tags: tags
    storageAccountName: storage.outputs.name
    keyVaultName: keyVault.outputs.name
  }
}

// Grant Container App access to Storage
module storageRoleAssignment './core/role-assignment.bicep' = {
  name: 'storage-role'
  scope: rg
  params: {
    principalId: containerApp.outputs.identityPrincipalId
    roleDefinitionId: 'ba92f5b4-2d11-453d-a403-e96b0029c9fe'  // Storage Blob Data Contributor
    targetResourceId: storage.outputs.id
  }
}

// Grant Container App access to Key Vault
module kvRoleAssignment './core/role-assignment.bicep' = {
  name: 'kv-role'
  scope: rg
  params: {
    principalId: containerApp.outputs.identityPrincipalId
    roleDefinitionId: '4633458b-17de-408a-b874-0445c86b69e6'  // Key Vault Secrets User
    targetResourceId: keyVault.outputs.id
  }
}

// Outputs
output AZURE_STORAGE_ACCOUNT_NAME string = storage.outputs.name
output AZURE_KEY_VAULT_NAME string = keyVault.outputs.name
output APP_URL string = containerApp.outputs.url
```

### 3. ‡®∏‡®ø‡®∏‡®ü‡®Æ-‡®Ö‡®∏‡®æ‡®à‡®®‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®®‡®æ‡®≤ ‡®ï‡©∞‡®ü‡©á‡®®‡®∞ ‡®ê‡®™

**‡®´‡®æ‡®à‡®≤: `infra/app/container-app.bicep`**

```bicep
param name string
param location string
param tags object = {}
param storageAccountName string
param keyVaultName string

resource containerApp 'Microsoft.App/containerApps@2023-05-01' = {
  name: name
  location: location
  tags: tags
  identity: {
    type: 'SystemAssigned'  // üîë Enable managed identity
  }
  properties: {
    configuration: {
      ingress: {
        external: true
        targetPort: 3000
      }
    }
    template: {
      containers: [
        {
          name: 'api'
          image: 'myregistry.azurecr.io/api:latest'
          resources: {
            cpu: json('0.5')
            memory: '1Gi'
          }
          env: [
            {
              name: 'AZURE_STORAGE_ACCOUNT_NAME'
              value: storageAccountName
            }
            {
              name: 'AZURE_KEY_VAULT_NAME'
              value: keyVaultName
            }
            // üîë No secrets - managed identity handles authentication!
          ]
        }
      ]
    }
  }
}

// Output the identity for RBAC assignments
output identityPrincipalId string = containerApp.identity.principalId
output id string = containerApp.id
output url string = 'https://${containerApp.properties.configuration.ingress.fqdn}'
```

### 4. RBAC ‡®∞‡©ã‡®≤ ‡®Ö‡®∏‡®æ‡®à‡®®‡®Æ‡©à‡®Ç‡®ü ‡®Æ‡©ã‡®°‡®ø‡®ä‡®≤

**‡®´‡®æ‡®à‡®≤: `infra/core/role-assignment.bicep`**

```bicep
param principalId string
param roleDefinitionId string  // Azure built-in role ID
param targetResourceId string

resource roleAssignment 'Microsoft.Authorization/roleAssignments@2022-04-01' = {
  name: guid(principalId, roleDefinitionId, targetResourceId)
  scope: resourceId('Microsoft.Resources/resourceGroups', resourceGroup().name)
  properties: {
    roleDefinitionId: subscriptionResourceId('Microsoft.Authorization/roleDefinitions', roleDefinitionId)
    principalId: principalId
    principalType: 'ServicePrincipal'
  }
}

output id string = roleAssignment.id
```

### 5. ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®®‡®æ‡®≤ ‡®ê‡®™‡®≤‡©Ä‡®ï‡©á‡®∏‡®º‡®® ‡®ï‡©ã‡®°

**‡®´‡®æ‡®à‡®≤: `src/app.js`**

```javascript
const express = require('express');
const { DefaultAzureCredential } = require('@azure/identity');
const { BlobServiceClient } = require('@azure/storage-blob');
const { SecretClient } = require('@azure/keyvault-secrets');

const app = express();
const PORT = process.env.PORT || 3000;

// üîë ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£ ‡®™‡©±‡®§‡®∞ ‡®∏‡®º‡©Å‡®∞‡©Ç ‡®ï‡®∞‡©ã (‡®™‡©ç‡®∞‡®¨‡©∞‡®ß‡®ø‡®§ ‡®™‡®π‡®ø‡®ö‡®æ‡®£ ‡®®‡®æ‡®≤ ‡®∏‡®µ‡©à‡®ö‡®æ‡®≤‡®ø‡®§ ‡®§‡©å‡®∞ '‡®§‡©á ‡®ï‡©∞‡®Æ ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à)
const credential = new DefaultAzureCredential();

// ‡®ê‡®ú‡®º‡®∞ ‡®∏‡®ü‡©ã‡®∞‡©á‡®ú ‡®∏‡©à‡®ü‡®Ö‡©±‡®™
const storageAccountName = process.env.AZURE_STORAGE_ACCOUNT_NAME;
const blobServiceClient = new BlobServiceClient(
  `https://${storageAccountName}.blob.core.windows.net`,
  credential  // ‡®ï‡©ã‡®à ‡®ï‡©Å‡©∞‡®ú‡©Ä‡®Ü‡®Ç ‡®¶‡©Ä ‡®≤‡©ã‡©ú ‡®®‡®π‡©Ä‡®Ç!
);

// ‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü ‡®∏‡©à‡®ü‡®Ö‡©±‡®™
const keyVaultName = process.env.AZURE_KEY_VAULT_NAME;
const secretClient = new SecretClient(
  `https://${keyVaultName}.vault.azure.net`,
  credential  // ‡®ï‡©ã‡®à ‡®ï‡©Å‡©∞‡®ú‡©Ä‡®Ü‡®Ç ‡®¶‡©Ä ‡®≤‡©ã‡©ú ‡®®‡®π‡©Ä‡®Ç!
);

// ‡®∏‡®ø‡®π‡®§ ‡®ú‡®æ‡®Ç‡®ö
app.get('/health', (req, res) => {
  res.json({ status: 'healthy', authentication: 'managed-identity' });
});

// ‡®¨‡®≤‡©å‡®¨ ‡®∏‡®ü‡©ã‡®∞‡©á‡®ú ‡®µ‡®ø‡©±‡®ö ‡®´‡®æ‡®à‡®≤ ‡®Ö‡©±‡®™‡®≤‡©ã‡®° ‡®ï‡®∞‡©ã
app.post('/upload', async (req, res) => {
  try {
    const containerClient = blobServiceClient.getContainerClient('uploads');
    await containerClient.createIfNotExists();
    
    const blobName = `file-${Date.now()}.txt`;
    const blockBlobClient = containerClient.getBlockBlobClient(blobName);
    
    await blockBlobClient.upload('Hello from managed identity!', 30);
    
    res.json({
      success: true,
      blobName: blobName,
      message: 'File uploaded using managed identity!'
    });
  } catch (error) {
    console.error('Upload error:', error);
    res.status(500).json({ error: error.message });
  }
});

// ‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü ‡®§‡©ã‡®Ç ‡®ó‡©Å‡®™‡®§ ‡®™‡©ç‡®∞‡®æ‡®™‡®§ ‡®ï‡®∞‡©ã
app.get('/secret/:name', async (req, res) => {
  try {
    const secretName = req.params.name;
    const secret = await secretClient.getSecret(secretName);
    
    res.json({
      name: secretName,
      value: secret.value,
      message: 'Secret retrieved using managed identity!'
    });
  } catch (error) {
    console.error('Secret error:', error);
    res.status(500).json({ error: error.message });
  }
});

// ‡®¨‡®≤‡©å‡®¨ ‡®ï‡©∞‡®ü‡©á‡®®‡®∞‡®æ‡®Ç ‡®¶‡©Ä ‡®∏‡©Ç‡®ö‡©Ä ‡®¨‡®£‡®æ‡®ì (‡®™‡©ú‡©ç‡®π‡®® ‡®¶‡©Ä ‡®™‡®π‡©Å‡©∞‡®ö ‡®¶‡®ø‡®ñ‡®æ‡®â‡®Ç‡®¶‡®æ ‡®π‡©à)
app.get('/containers', async (req, res) => {
  try {
    const containers = [];
    for await (const container of blobServiceClient.listContainers()) {
      containers.push(container.name);
    }
    
    res.json({
      containers: containers,
      count: containers.length,
      message: 'Containers listed using managed identity!'
    });
  } catch (error) {
    console.error('List error:', error);
    res.status(500).json({ error: error.message });
  }
});

app.listen(PORT, () => {
  console.log(`Secure API listening on port ${PORT}`);
  console.log('Authentication: Managed Identity (passwordless)');
});
```

**‡®´‡®æ‡®à‡®≤: `src/package.json`**

```json
{
  "name": "secure-app",
  "version": "1.0.0",
  "dependencies": {
    "express": "^4.18.2",
    "@azure/identity": "^4.0.0",
    "@azure/storage-blob": "^12.17.0",
    "@azure/keyvault-secrets": "^4.7.0"
  },
  "scripts": {
    "start": "node app.js"
  }
}
```

### 6. ‡®°‡®ø‡®™‡®≤‡©å‡®á‡®Æ‡©à‡®Ç‡®ü ‡®Ö‡®§‡©á ‡®ü‡©à‡®∏‡®ü

```bash
# AZD ‡®µ‡®æ‡®§‡®æ‡®µ‡®∞‡®£ ‡®∏‡®º‡©Å‡®∞‡©Ç ‡®ï‡®∞‡©ã
azd init

# ‡®¢‡®æ‡®Ç‡®ö‡®æ ‡®Ö‡®§‡©á ‡®ê‡®™‡®≤‡©Ä‡®ï‡©á‡®∏‡®º‡®® ‡®§‡©à‡®®‡®æ‡®§ ‡®ï‡®∞‡©ã
azd up

# ‡®ê‡®™ URL ‡®™‡©ç‡®∞‡®æ‡®™‡®§ ‡®ï‡®∞‡©ã
APP_URL=$(azd env get-values | grep APP_URL | cut -d '=' -f2 | tr -d '"')

# ‡®π‡©à‡®≤‡®• ‡®ö‡©à‡©±‡®ï ‡®¶‡©Ä ‡®ú‡®æ‡®Ç‡®ö ‡®ï‡®∞‡©ã
curl $APP_URL/health
```

**‚úÖ ‡®â‡®Æ‡©Ä‡®¶‡®µ‡®æ‡®∞ ‡®®‡®§‡©Ä‡®ú‡®æ:**
```json
{
  "status": "healthy",
  "authentication": "managed-identity"
}
```

**‡®¨‡®≤‡©å‡®¨ ‡®Ö‡®™‡®≤‡©ã‡®° ‡®ü‡©à‡®∏‡®ü ‡®ï‡®∞‡©ã:**
```bash
curl -X POST $APP_URL/upload
```

**‚úÖ ‡®â‡®Æ‡©Ä‡®¶‡®µ‡®æ‡®∞ ‡®®‡®§‡©Ä‡®ú‡®æ:**
```json
{
  "success": true,
  "blobName": "file-1700404800000.txt",
  "message": "File uploaded using managed identity!"
}
```

**‡®ï‡©∞‡®ü‡©á‡®®‡®∞ ‡®≤‡®ø‡®∏‡®ü‡®ø‡©∞‡®ó ‡®ü‡©à‡®∏‡®ü ‡®ï‡®∞‡©ã:**
```bash
curl $APP_URL/containers
```

**‚úÖ ‡®â‡®Æ‡©Ä‡®¶‡®µ‡®æ‡®∞ ‡®®‡®§‡©Ä‡®ú‡®æ:**
```json
{
  "containers": ["uploads"],
  "count": 1,
  "message": "Containers listed using managed identity!"
}
```

---

## ‡®Ü‡®Æ ‡®ê‡®ú‡®º‡®∞ RBAC ‡®∞‡©ã‡®≤

### ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®≤‡®à ‡®¨‡®ø‡®≤‡®ü-‡®á‡®® ‡®∞‡©ã‡®≤ ID

| ‡®∏‡©á‡®µ‡®æ | ‡®∞‡©ã‡®≤ ‡®¶‡®æ ‡®®‡®æ‡®Æ | ‡®∞‡©ã‡®≤ ID | ‡®Ö‡®ß‡®ø‡®ï‡®æ‡®∞ |
|---------|-----------|---------|-------------|
| **‡®∏‡®ü‡©ã‡®∞‡©á‡®ú** | ‡®∏‡®ü‡©ã‡®∞‡©á‡®ú ‡®¨‡®≤‡©å‡®¨ ‡®°‡®æ‡®ü‡®æ ‡®∞‡©Ä‡®°‡®∞ | `2a2b9908-6b94-4a3d-8e5a-a7d8f8cc8a12` | ‡®¨‡®≤‡©å‡®¨ ‡®Ö‡®§‡©á ‡®ï‡©∞‡®ü‡©á‡®®‡®∞ ‡®™‡©ú‡©ç‡®π‡©ã |
| **‡®∏‡®ü‡©ã‡®∞‡©á‡®ú** | ‡®∏‡®ü‡©ã‡®∞‡©á‡®ú ‡®¨‡®≤‡©å‡®¨ ‡®°‡®æ‡®ü‡®æ ‡®ï‡©∞‡®ü‡©ç‡®∞‡®ø‡®¨‡®ø‡®ä‡®ü‡®∞ | `ba92f5b4-2d11-453d-a403-e96b0029c9fe` | ‡®™‡©ú‡©ç‡®π‡©ã, ‡®≤‡®ø‡®ñ‡©ã, ‡®¨‡®≤‡©å‡®¨ ‡®Æ‡®ø‡®ü‡®æ‡®ì |
| **‡®∏‡®ü‡©ã‡®∞‡©á‡®ú** | ‡®∏‡®ü‡©ã‡®∞‡©á‡®ú ‡®ï‡®ø‡®ä ‡®°‡®æ‡®ü‡®æ ‡®ï‡©∞‡®ü‡©ç‡®∞‡®ø‡®¨‡®ø‡®ä‡®ü‡®∞ | `974c5e8b-45b9-4653-ba55-5f855dd0fb88` | ‡®ï‡®ø‡®ä ‡®∏‡©Å‡®®‡©á‡®π‡©á ‡®™‡©ú‡©ç‡®π‡©ã, ‡®≤‡®ø‡®ñ‡©ã, ‡®Æ‡®ø‡®ü‡®æ‡®ì |
| **‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü** | ‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü ‡®∏‡®ø‡®ï‡©ç‡®∞‡©á‡®ü‡®∏ ‡®Ø‡©Ç‡®ú‡®º‡®∞ | `4633458b-17de-408a-b874-0445c86b69e6` | ‡®∞‡®æ‡®ú‡®º ‡®™‡©ú‡©ç‡®π‡©ã |
| **‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü** | ‡®ï‡©Ä ‡®µ‡©å‡®≤‡®ü ‡®∏‡®ø‡®ï‡©ç‡®∞‡©á‡®ü‡®∏ ‡®Ö‡®´‡®∏‡®∞ | `b86a8fe4-44ce-4948-aee5-eccb2c155cd7` | ‡®∞‡®æ‡®ú‡®º ‡®™‡©ú‡©ç‡®π‡©ã, ‡®≤‡®ø‡®ñ‡©ã, ‡®Æ‡®ø‡®ü‡®æ‡®ì |
| **‡®ï‡©å‡®∏‡®Æ‡©ã‡®∏ DB** | ‡®ï‡©å‡®∏‡®Æ‡©ã‡®∏ DB ‡®¨‡®ø‡®≤‡®ü-‡®á‡®® ‡®°‡®æ‡®ü‡®æ ‡®∞‡©Ä‡®°‡®∞ | `00000000-0000-0000-0000-000000000001` | ‡®ï‡©å‡®∏‡®Æ‡©ã‡®∏ DB ‡®°‡®æ‡®ü‡®æ ‡®™‡©ú‡©ç‡®π‡©ã |
| **‡®ï‡©å‡®∏‡®Æ‡©ã‡®∏ DB** | ‡®ï‡©å‡®∏‡®Æ‡©ã‡®∏ DB ‡®¨‡®ø‡®≤‡®ü-‡®á‡®® ‡®°‡®æ‡®ü‡®æ ‡®ï‡©∞‡®ü‡©ç‡®∞‡®ø‡®¨‡®ø‡®ä‡®ü‡®∞ | `00000000-0000-0000-0000-000000000002` | ‡®ï‡©å‡®∏‡®Æ‡©ã‡®∏ DB ‡®°‡®æ‡®ü‡®æ ‡®™‡©ú‡©ç‡®π‡©ã, ‡®≤‡®ø‡®ñ‡©ã |
| **SQL ‡®°‡®æ‡®ü‡®æ‡®¨‡©á‡®∏** | SQL DB ‡®ï‡©∞‡®ü‡©ç‡®∞‡®ø‡®¨‡®ø‡®ä‡®ü‡®∞ | `9b7fa17d-e63e-47b0-bb0a-15c516ac86ec` | SQL ‡®°‡®æ‡®ü‡®æ‡®¨‡©á‡®∏ ‡®™‡©ç‡®∞‡®¨‡©∞‡®ß‡®® |
| **‡®∏‡®∞‡®µ‡®ø‡®∏ ‡®¨‡©±‡®∏** | ‡®ê‡®ú‡®º‡®∞ ‡®∏‡®∞‡®µ‡®ø‡®∏ ‡®¨‡©±‡®∏ ‡®°‡®æ‡®ü‡®æ ‡®ì‡®®‡®∞ | `090c5cfd-751d-490a-894a-3ce6f1109419` | ‡®∏‡©Å‡®®‡©á‡®π‡©á ‡®≠‡©á‡®ú‡©ã, ‡®™‡©ç‡®∞‡®æ‡®™‡®§ ‡®ï‡®∞‡©ã, ‡®™‡©ç‡®∞‡®¨‡©∞‡®ß‡®® ‡®ï‡®∞‡©ã |

### ‡®∞‡©ã‡®≤ ID ‡®ï‡®ø‡®µ‡©á‡®Ç ‡®≤‡©±‡®≠‡©ã

```bash
# ‡®∏‡®æ‡®∞‡©á ‡®¨‡®ø‡®≤‡®ü-‡®á‡®® ‡®∞‡©ã‡®≤‡®æ‡®Ç ‡®¶‡©Ä ‡®∏‡©Ç‡®ö‡©Ä ‡®¨‡®£‡®æ‡®ì
az role definition list --query "[].{Name:roleName, ID:name}" --output table

# ‡®ñ‡®æ‡®∏ ‡®∞‡©ã‡®≤ ‡®¶‡©Ä ‡®ñ‡©ã‡®ú ‡®ï‡®∞‡©ã
az role definition list --query "[?contains(roleName, 'Storage Blob')].{Name:roleName, ID:name}" --output table

# ‡®∞‡©ã‡®≤ ‡®µ‡©á‡®∞‡®µ‡©á ‡®™‡©ç‡®∞‡®æ‡®™‡®§ ‡®ï‡®∞‡©ã
az role definition list --name "Storage Blob Data Contributor"
```

---

## ‡®µ‡®ø‡®π‡®æ‡®∞‡®ï ‡®Ö‡®≠‡®ø‡®Ü‡®∏

### ‡®Ö‡®≠‡®ø‡®Ü‡®∏ 1: ‡®Æ‡©å‡®ú‡©Ç‡®¶‡®æ ‡®ê‡®™ ‡®≤‡®à ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®Ø‡©ã‡®ó ‡®ï‡®∞‡©ã ‚≠ê‚≠ê (‡®¶‡®∞‡®Æ‡®ø‡®Ü‡®®‡®æ)

**‡®≤‡®ï‡®∏‡®º**: ‡®Æ‡©å‡®ú‡©Ç‡®¶‡®æ ‡®ï‡©∞‡®ü‡©á‡®®‡®∞ ‡®ê‡®™ ‡®°‡®ø‡®™‡®≤‡©å‡®á‡®Æ‡©à‡®Ç‡®ü ‡®µ‡®ø‡©±‡®ö ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®∏‡®º‡®æ‡®Æ‡®≤ ‡®ï‡®∞‡©ã

**‡®∏‡®•‡®ø‡®§‡©Ä**: ‡®§‡©Å‡®π‡®æ‡®°‡©á ‡®ï‡©ã‡®≤ ‡®á‡©±‡®ï ‡®ï‡©∞‡®ü‡©á‡®®‡®∞ ‡®ê‡®™ ‡®π‡©à ‡®ú‡©ã ‡®ï‡®®‡©à‡®ï‡®∏‡®º‡®® ‡®∏‡®ü‡©ç‡®∞‡®ø‡©∞‡®ó ‡®µ‡®∞‡®§‡®¶‡®æ ‡®π‡©à‡•§ ‡®á‡®∏‡®®‡©Ç‡©∞ ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®µ‡®ø‡©±‡®ö ‡®¨‡®¶‡®≤‡©ã‡•§

**‡®∏‡®º‡©Å‡®∞‡©Ç‡®Ü‡®§‡©Ä ‡®¨‡®ø‡©∞‡®¶‡©Ç**: ‡®ï‡©∞‡®ü‡©á‡®®‡®∞ ‡®ê‡®™ ‡®á‡®∏ ‡®ï‡®®‡®´‡®ø‡®ó‡®∞‡©á‡®∏‡®º‡®® ‡®®‡®æ‡®≤:

```bicep
// ‚ùå Current: Using connection string
env: [
  {
    name: 'STORAGE_CONNECTION_STRING'
    secretRef: 'storage-connection'
  }
]
```

**‡®ï‡®¶‡®Æ**:

1. **Bicep ‡®µ‡®ø‡©±‡®ö ‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®Ø‡©ã‡®ó ‡®ï‡®∞‡©ã:**

```bicep
resource containerApp 'Microsoft.App/containerApps@2023-05-01' = {
  name: 'myapp'
  identity: {
    type: 'SystemAssigned'  // Add this
  }
  // ... rest of configuration
}
```

2. **‡®∏‡®ü‡©ã‡®∞‡©á‡®ú ‡®™‡®π‡©Å‡©∞‡®ö ‡®¶‡®ø‡®ì:**

```bicep
// Get storage account reference
resource storageAccount 'Microsoft.Storage/storageAccounts@2023-01-01' existing = {
  name: storageAccountName
}

// Assign role
resource roleAssignment 'Microsoft.Authorization/roleAssignments@2022-04-01' = {
  name: guid(containerApp.id, 'ba92f5b4-2d11-453d-a403-e96b0029c9fe', storageAccount.id)
  scope: storageAccount
  properties: {
    roleDefinitionId: subscriptionResourceId('Microsoft.Authorization/roleDefinitions', 'ba92f5b4-2d11-453d-a403-e96b0029c9fe')
    principalId: containerApp.identity.principalId
    principalType: 'ServicePrincipal'
  }
}
```

3. **‡®ê‡®™‡®≤‡©Ä‡®ï‡©á‡®∏‡®º‡®® ‡®ï‡©ã‡®° ‡®Ö‡®™‡®°‡©á‡®ü ‡®ï‡®∞‡©ã:**

**‡®™‡®π‡®ø‡®≤‡®æ‡®Ç (‡®ï‡®®‡©à‡®ï‡®∏‡®º‡®® ‡®∏‡®ü‡©ç‡®∞‡®ø‡©∞‡®ó):**
```javascript
const { BlobServiceClient } = require('@azure/storage-blob');

const blobServiceClient = BlobServiceClient.fromConnectionString(
  process.env.STORAGE_CONNECTION_STRING
);
```

**‡®¨‡®æ‡®Ö‡®¶ (‡®Æ‡©à‡®®‡©á‡®ú‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä):**
```javascript
const { DefaultAzureCredential } = require('@azure/identity');
const { BlobServiceClient } = require('@azure/storage-blob');

const credential = new DefaultAzureCredential();
const blobServiceClient = new BlobServiceClient(
  `https://${process.env.STORAGE_ACCOUNT_NAME}.blob.core.windows.net`,
  credential
);
```

4. **‡®µ‡®æ‡®§‡®æ‡®µ‡®∞‡®£ ‡®µ‡©à‡®∞‡©Ä‡®è‡®¨‡®≤ ‡®Ö‡®™‡®°‡©á‡®ü ‡®ï‡®∞‡©ã:**

```bicep
env: [
  {
    name: 'STORAGE_ACCOUNT_NAME'
    value: storageAccountName  // Just the name, no secrets!
  }
  // Remove STORAGE_CONNECTION_STRING
]
```

5. **‡®°‡®ø‡®™‡®≤‡©å‡®á‡®Æ‡©à‡®Ç‡®ü ‡®Ö‡®§‡©á ‡®ü‡©à‡®∏‡®ü:**

```bash
# ‡®Æ‡©Å‡©ú ‡®§‡©à‡®®‡®æ‡®§ ‡®ï‡®∞‡©ã
azd up

# ‡®ü‡©à‡®∏‡®ü ‡®ï‡®∞‡©ã ‡®ï‡®ø ‡®á‡®π ‡®Ö‡®ú‡©á ‡®µ‡©Ä ‡®ï‡©∞‡®Æ ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à
curl https://myapp.azurecontainerapps.io/upload
```

**‚úÖ ‡®∏‡®´‡®≤‡®§‡®æ ‡®Æ‡®æ‡®™‡®¶‡©∞‡®°:**
- ‚úÖ ‡®ê‡®™‡®≤‡©Ä‡®ï‡©á‡®∏‡®º‡®® ‡®¨‡®ø‡®®‡®æ‡®Ç ‡®ó‡®≤‡®§‡©Ä‡®Ü‡®Ç ‡®¶‡©á ‡®°‡®ø‡®™‡®≤‡©å‡®á‡®Æ‡©à‡®Ç‡®ü ‡®π‡©Å‡©∞‡®¶‡©Ä ‡®π‡©à
- ‚úÖ ‡®∏‡®ü‡©ã‡®∞‡©á‡®ú ‡®ï‡®æ‡®∞‡®µ‡®æ‡®à‡®Ü‡®Ç ‡®ï‡©∞‡®Æ ‡®ï‡®∞‡®¶‡©Ä‡®Ü‡®Ç ‡®π‡®® (‡®Ö‡®™‡®≤‡©ã‡®°, ‡®≤‡®ø‡®∏‡®ü, ‡®°‡®æ‡®ä‡®®‡®≤‡©ã‡®°)
- ‚úÖ ‡®µ‡®æ‡®§‡®æ‡®µ‡®∞‡®£ ‡®µ‡©à‡®∞‡©Ä‡®è‡®¨‡®≤ ‡®µ‡®ø‡©±‡®ö ‡®ï‡©ã‡®à ‡®ï‡®®‡©à‡®ï‡®∏‡®º‡®® ‡®∏‡®ü‡©ç‡®∞‡®ø‡©∞‡®ó ‡®®‡®π‡©Ä‡®Ç
- ‚úÖ ‡®ê‡®ú‡®º‡®∞ ‡®™‡©ã‡®∞‡®ü‡®≤ ‡®µ‡®ø‡©±‡®ö "‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä" ‡®¨‡®≤‡©á‡®° ‡®¶‡©á ‡®§‡®π‡®ø‡®§ ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®¶‡®ø‡®ñ‡®æ‡®à ‡®¶‡®ø‡©∞‡®¶‡©Ä ‡®π‡©à

**‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ:**

```bash
# ‡®™‡©ç‡®∞‡®¨‡©∞‡®ß‡®ø‡®§ ‡®™‡®π‡®ø‡®ö‡®æ‡®£ ‡®ö‡®æ‡®≤‡©Ç ‡®π‡©à ‡®ú‡®æ‡®Ç ‡®®‡®π‡©Ä‡®Ç ‡®ú‡®æ‡®Ç‡®ö‡©ã
az containerapp show \
  --name myapp \
  --resource-group rg-myapp \
  --query "identity.type"
# ‚úÖ ‡®â‡®Æ‡©Ä‡®¶: "SystemAssigned"

# ‡®≠‡©Ç‡®Æ‡®ø‡®ï‡®æ ‡®Ö‡®∏‡®æ‡®à‡®®‡®Æ‡©à‡®Ç‡®ü ‡®ú‡®æ‡®Ç‡®ö‡©ã
az role assignment list \
  --assignee $(az containerapp show --name myapp --resource-group rg-myapp --query "identity.principalId" -o tsv) \
  --scope /subscriptions/{sub-id}/resourceGroups/rg-myapp/providers/Microsoft.Storage/storageAccounts/mystorageaccount
# ‚úÖ ‡®â‡®Æ‡©Ä‡®¶: "Storage Blob Data Contributor" ‡®≠‡©Ç‡®Æ‡®ø‡®ï‡®æ ‡®¶‡®ø‡®ñ‡®æ‡®à ‡®¶‡®ø‡©∞‡®¶‡©Ä ‡®π‡©à
```

**‡®∏‡®Æ‡®æ‡®Ç**: 20-30 ‡®Æ‡®ø‡©∞‡®ü

---

### ‡®Ö‡®≠‡®ø‡®Ü‡®∏ 2: ‡®Ø‡©Ç‡®ú‡®º‡®∞-‡®Ö‡®∏‡®æ‡®à‡®®‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®®‡®æ‡®≤ ‡®¨‡®π‡©Å-‡®∏‡©á‡®µ‡®æ ‡®™‡®π‡©Å‡©∞‡®ö ‚≠ê‚≠ê‚≠ê (‡®ú‡®ü‡®ø‡®≤)

**‡®≤‡®ï‡®∏‡®º**: ‡®ï‡®à ‡®ï‡©∞‡®ü‡©á‡®®‡®∞ ‡®ê‡®™‡®∏ ‡®µ‡®ø‡©±‡®ö ‡®∏‡®æ‡®Ç‡®ù‡®æ ‡®ï‡©Ä‡®§‡©Ä ‡®ó‡®à ‡®Ø‡©Ç‡®ú‡®º‡®∞-‡®Ö‡®∏‡®æ‡®à‡®®‡®° ‡®Ü‡®à‡®°‡©à‡®Ç‡®ü‡®ø‡®ü‡©Ä ‡®¨‡®£‡®æ‡®ì

**‡®∏‡®•‡®ø‡®§‡©Ä**: ‡®§‡©Å‡®π‡®æ‡®°‡©á ‡®ï‡©ã‡®≤ 3 ‡®Æ‡®æ‡®à‡®ï‡©ç‡®∞‡©ã‡®∏‡©á‡®µ‡®æ‡®µ‡®æ‡®Ç ‡®π‡®® ‡®ú‡©ã ‡®∏‡®æ‡®∞‡©á ‡®á‡©±‡®ï‡©ã ‡®∏‡®ü‡©ã‡®∞‡©á
- [ ] **Q1**: Key Vault ‡®≤‡®à RBAC ‡®®‡©Ç‡©∞ access policies ‡®¶‡©Ä ‡®•‡®æ‡®Ç ‡®ï‡®ø‡®µ‡©á‡®Ç ‡®ö‡®æ‡®≤‡©Ç ‡®ï‡®∞‡®¶‡©á ‡®π‡©ã?
  - **A**: Bicep ‡®µ‡®ø‡©±‡®ö `enableRbacAuthorization: true` ‡®∏‡©à‡®ü ‡®ï‡®∞‡©ã

- [ ] **Q2**: ‡®ï‡®ø‡®π‡©ú‡©Ä Azure SDK ‡®≤‡®æ‡®á‡®¨‡©ç‡®∞‡©á‡®∞‡©Ä managed identity authentication ‡®®‡©Ç‡©∞ ‡®π‡©à‡®Ç‡®°‡®≤ ‡®ï‡®∞‡®¶‡©Ä ‡®π‡©à?
  - **A**: `@azure/identity` ‡®®‡®æ‡®≤ `DefaultAzureCredential` ‡®ï‡®≤‡®æ‡®∏

- [ ] **Q3**: Key Vault ‡®¶‡©á secrets ‡®ï‡®ø‡©∞‡®®‡©á ‡®∏‡®Æ‡©á‡®Ç ‡®≤‡®à cache ‡®µ‡®ø‡©±‡®ö ‡®∞‡®π‡®ø‡©∞‡®¶‡©á ‡®π‡®®?
  - **A**: ‡®ê‡®™‡®≤‡©Ä‡®ï‡©á‡®∏‡®º‡®®-‡®®‡®ø‡®∞‡®≠‡®∞; ‡®Ü‡®™‡®£‡©Ä caching strategy ‡®≤‡®æ‡®ó‡©Ç ‡®ï‡®∞‡©ã

**‡®π‡©±‡®•-‡®Ö‡®ú‡®Æ‡®æ‡®á‡®∏‡®º ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ:**
```bash
# ‡®ü‡©à‡®∏‡®ü ‡®ï‡©Ä ‡®µ‡®æ‡®≤‡®ü ‡®ê‡®ï‡®∏‡©à‡®∏
az keyvault secret show \
  --vault-name $KV_NAME \
  --name "OpenAI-ApiKey" \
  --query "value"

# ‡®ú‡®æ‡®Ç‡®ö‡©ã ‡®ï‡®ø RBAC ‡®ö‡®æ‡®≤‡©Ç ‡®π‡©à
az keyvault show \
  --name $KV_NAME \
  --query "properties.enableRbacAuthorization"
# ‚úÖ ‡®â‡®Æ‡©Ä‡®¶: ‡®∏‡®π‡©Ä
```

---

## ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®≤‡®à ‡®µ‡®ß‡©Ä‡®Ü ‡®§‡®∞‡©Ä‡®ï‡©á

### ‚úÖ ‡®ï‡®∞‡®®‡®æ ‡®ö‡®æ‡®π‡©Ä‡®¶‡®æ ‡®π‡©à:

1. **‡®π‡®Æ‡©á‡®∏‡®º‡®æ production ‡®µ‡®ø‡©±‡®ö managed identity ‡®µ‡®∞‡®§‡©ã**
   ```bicep
   identity: {
     type: 'SystemAssigned'
   }
   ```

2. **‡®ò‡©±‡®ü-‡®∏‡®∞‡©ã‡®§ RBAC roles ‡®µ‡®∞‡®§‡©ã**
   - ‡®ú‡®ø‡©±‡®•‡©á ‡®∏‡©∞‡®≠‡®µ ‡®π‡©ã‡®µ‡©á "Reader" roles ‡®µ‡®∞‡®§‡©ã
   - "Owner" ‡®ú‡®æ‡®Ç "Contributor" ‡®§‡©ã‡®Ç ‡®¨‡®ö‡©ã ‡®ú‡®¶‡©ã‡®Ç ‡®§‡©±‡®ï ‡®ú‡®º‡®∞‡©Ç‡®∞‡©Ä ‡®®‡®æ ‡®π‡©ã‡®µ‡©á

3. **‡®§‡©ç‡®∞‡®ø‡®™‡©±‡®ñ‡©Ä keys ‡®®‡©Ç‡©∞ Key Vault ‡®µ‡®ø‡©±‡®ö ‡®∏‡®ü‡©ã‡®∞ ‡®ï‡®∞‡©ã**
   ```javascript
   const apiKey = await secretClient.getSecret('ThirdPartyApiKey');
   ```

4. **Audit logging ‡®ö‡®æ‡®≤‡©Ç ‡®ï‡®∞‡©ã**
   ```bicep
   diagnosticSettings: {
     logs: [{ category: 'AuditEvent', enabled: true }]
   }
   ```

5. **dev/staging/prod ‡®≤‡®à ‡®µ‡©±‡®ñ-‡®µ‡©±‡®ñ identities ‡®µ‡®∞‡®§‡©ã**
   ```bash
   azd env new dev
   azd env new staging
   azd env new prod
   ```

6. **Secrets ‡®®‡©Ç‡©∞ ‡®®‡®ø‡®Ø‡®Æ‡®ø‡®§ ‡®§‡©å‡®∞ '‡®§‡©á ‡®ò‡©Å‡©∞‡®Æ‡®æ‡®ì**
   - Key Vault secrets '‡®§‡©á expiration dates ‡®∏‡©à‡®ü ‡®ï‡®∞‡©ã
   - Azure Functions ‡®®‡®æ‡®≤ rotation ‡®®‡©Ç‡©∞ automate ‡®ï‡®∞‡©ã

### ‚ùå ‡®®‡®π‡©Ä‡®Ç ‡®ï‡®∞‡®®‡®æ ‡®ö‡®æ‡®π‡©Ä‡®¶‡®æ:

1. **‡®ï‡®¶‡©á ‡®µ‡©Ä secrets ‡®®‡©Ç‡©∞ hardcode ‡®®‡®æ ‡®ï‡®∞‡©ã**
   ```javascript
   // ‚ùå ‡®ñ‡®∞‡®æ‡®¨
   const apiKey = "sk-proj-xxxxxxxxxxxxx";
   ```

2. **Production ‡®µ‡®ø‡©±‡®ö connection strings ‡®®‡®æ ‡®µ‡®∞‡®§‡©ã**
   ```javascript
   // ‚ùå ‡®ñ‡®∞‡®æ‡®¨
   BlobServiceClient.fromConnectionString(process.env.STORAGE_CONNECTION_STRING)
   ```

3. **‡®µ‡®ß‡©á‡®∞‡©á permissions ‡®®‡®æ ‡®¶‡®ø‡®ì**
   ```bicep
   // ‚ùå BAD - too much access
   roleDefinitionId: 'Owner'
   
   // ‚úÖ GOOD - least privilege
   roleDefinitionId: 'Storage Blob Data Reader'
   ```

4. **Secrets ‡®®‡©Ç‡©∞ log ‡®®‡®æ ‡®ï‡®∞‡©ã**
   ```javascript
   // ‚ùå ‡®ñ‡®∞‡®æ‡®¨
   console.log('API Key:', apiKey);
   
   // ‚úÖ ‡®ö‡©∞‡®ó‡®æ
   console.log('API Key retrieved successfully');
   ```

5. **Production identities ‡®®‡©Ç‡©∞ ‡®µ‡©±‡®ñ-‡®µ‡©±‡®ñ environments ‡®µ‡®ø‡©±‡®ö share ‡®®‡®æ ‡®ï‡®∞‡©ã**
   ```bicep
   // ‚ùå BAD - same identity for dev and prod
   // ‚úÖ GOOD - separate identities per environment
   ```

---

## Troubleshooting Guide

### ‡®∏‡®Æ‡©±‡®∏‡®ø‡®Ü: "Unauthorized" ‡®ú‡®¶‡©ã‡®Ç Azure Storage ‡®®‡©Ç‡©∞ access ‡®ï‡®∞‡®¶‡©á ‡®π‡©ã

**‡®≤‡©±‡®õ‡®£:**
```
Error: Unauthorized (403)
AuthorizationPermissionMismatch: This request is not authorized to perform this operation
```

**‡®ú‡®æ‡®Ç‡®ö:**

```bash
# ‡®ú‡®æ‡®Ç‡®ö‡©ã ‡®ï‡®ø ‡®Æ‡©à‡®®‡©á‡®ú ‡®ï‡©Ä‡®§‡©Ä ‡®ó‡®à ‡®™‡®π‡®ø‡®ö‡®æ‡®£ ‡®ö‡®æ‡®≤‡©Ç ‡®π‡©à
az containerapp show \
  --name myapp \
  --resource-group rg-myapp \
  --query "identity.type"
# ‚úÖ ‡®â‡®Æ‡©Ä‡®¶: "SystemAssigned" ‡®ú‡®æ‡®Ç "UserAssigned"

# ‡®≠‡©Ç‡®Æ‡®ø‡®ï‡®æ ‡®Ö‡®∏‡®æ‡®à‡®®‡®Æ‡©à‡®Ç‡®ü ‡®¶‡©Ä ‡®ú‡®æ‡®Ç‡®ö ‡®ï‡®∞‡©ã
PRINCIPAL_ID=$(az containerapp show --name myapp --resource-group rg-myapp --query "identity.principalId" -o tsv)
az role assignment list --assignee $PRINCIPAL_ID

# ‡®â‡®Æ‡©Ä‡®¶: "Storage Blob Data Contributor" ‡®ú‡®æ‡®Ç ‡®á‡®∏‡©á ‡®§‡®∞‡©ç‡®π‡®æ‡®Ç ‡®¶‡©Ä ‡®≠‡©Ç‡®Æ‡®ø‡®ï‡®æ ‡®¶‡©á‡®ñ‡®£‡©Ä ‡®ö‡®æ‡®π‡©Ä‡®¶‡©Ä ‡®π‡©à
```

**‡®π‡©±‡®≤:**

1. **‡®∏‡®π‡©Ä RBAC role ‡®¶‡®ø‡®ì:**
```bash
STORAGE_ID=$(az storage account show --name mystorageaccount --resource-group rg-myapp --query "id" -o tsv)
az role assignment create \
  --assignee $PRINCIPAL_ID \
  --role "Storage Blob Data Contributor" \
  --scope $STORAGE_ID
```

2. **Propagation ‡®≤‡®à ‡®â‡®°‡©Ä‡®ï ‡®ï‡®∞‡©ã (5-10 ‡®Æ‡®ø‡©∞‡®ü ‡®≤‡©±‡®ó ‡®∏‡®ï‡®¶‡©á ‡®π‡®®):**
```bash
# ‡®∞‡©ã‡®≤ ‡®Ö‡®∏‡®æ‡®à‡®®‡®Æ‡©à‡®Ç‡®ü ‡®∏‡®•‡®ø‡®§‡©Ä ‡®¶‡©Ä ‡®ú‡®æ‡®Ç‡®ö ‡®ï‡®∞‡©ã
az role assignment list --assignee $PRINCIPAL_ID --scope $STORAGE_ID
```

3. **‡®™‡©±‡®ï‡®æ ‡®ï‡®∞‡©ã ‡®ï‡®ø ‡®ê‡®™‡®≤‡©Ä‡®ï‡©á‡®∏‡®º‡®® ‡®ï‡©ã‡®° ‡®∏‡®π‡©Ä credential ‡®µ‡®∞‡®§‡®¶‡®æ ‡®π‡©à:**
```javascript
// ‡®Ø‡®ï‡©Ä‡®®‡©Ä ‡®¨‡®£‡®æ‡®ì ‡®ï‡®ø ‡®§‡©Å‡®∏‡©Ä‡®Ç DefaultAzureCredential ‡®µ‡®∞‡®§ ‡®∞‡®π‡©á ‡®π‡©ã
const credential = new DefaultAzureCredential();
```

---

### ‡®∏‡®Æ‡©±‡®∏‡®ø‡®Ü: Key Vault access denied

**‡®≤‡©±‡®õ‡®£:**
```
Error: Forbidden (403)
The user, group or application does not have secrets get permission
```

**‡®ú‡®æ‡®Ç‡®ö:**

```bash
# ‡®ï‡©Ä-‡®µ‡®æ‡®≤‡®ü RBAC ‡®ö‡®æ‡®≤‡©Ç ‡®π‡©à ‡®ú‡®æ‡®Ç ‡®®‡®π‡©Ä‡®Ç ‡®ú‡®æ‡®Ç‡®ö‡©ã
az keyvault show \
  --name $KV_NAME \
  --query "properties.enableRbacAuthorization"
# ‚úÖ ‡®â‡®Æ‡©Ä‡®¶: ‡®∏‡©±‡®ö

# ‡®∞‡©ã‡®≤ ‡®Ö‡®∏‡®æ‡®à‡®®‡®Æ‡©à‡®Ç‡®ü ‡®ú‡®æ‡®Ç‡®ö‡©ã
az role assignment list \
  --assignee $PRINCIPAL_ID \
  --scope /subscriptions/{sub-id}/resourceGroups/rg-myapp/providers/Microsoft.KeyVault/vaults/$KV_NAME
```

**‡®π‡©±‡®≤:**

1. **Key Vault '‡®§‡©á RBAC ‡®ö‡®æ‡®≤‡©Ç ‡®ï‡®∞‡©ã:**
```bash
az keyvault update \
  --name $KV_NAME \
  --enable-rbac-authorization true
```

2. **Key Vault Secrets User role ‡®¶‡®ø‡®ì:**
```bash
KV_ID=$(az keyvault show --name $KV_NAME --query "id" -o tsv)
az role assignment create \
  --assignee $PRINCIPAL_ID \
  --role "Key Vault Secrets User" \
  --scope $KV_ID
```

---

### ‡®∏‡®Æ‡©±‡®∏‡®ø‡®Ü: DefaultAzureCredential ‡®∏‡®•‡®æ‡®®‡®ï ‡®§‡©å‡®∞ '‡®§‡©á ‡®´‡©á‡®≤‡©ç‡®π ‡®π‡©ã ‡®ú‡®æ‡®Ç‡®¶‡®æ ‡®π‡©à

**‡®≤‡©±‡®õ‡®£:**
```
Error: DefaultAzureCredential failed to retrieve a token
CredentialUnavailableError: No credential available
```

**‡®ú‡®æ‡®Ç‡®ö:**

```bash
# ‡®ú‡®æ‡®Ç‡®ö‡©ã ‡®ï‡®ø ‡®§‡©Å‡®∏‡©Ä‡®Ç ‡®≤‡©å‡®ó‡®á‡®® ‡®π‡©ã
az account show

# Azure CLI ‡®™‡©ç‡®∞‡®Æ‡®æ‡®£‡®ø‡®ï‡®§‡®æ ‡®¶‡©Ä ‡®ú‡®æ‡®Ç‡®ö ‡®ï‡®∞‡©ã
az ad signed-in-user show
```

**‡®π‡©±‡®≤:**

1. **Azure CLI ‡®µ‡®ø‡©±‡®ö login ‡®ï‡®∞‡©ã:**
```bash
az login
```

2. **Azure subscription ‡®∏‡©à‡®ü ‡®ï‡®∞‡©ã:**
```bash
az account set --subscription "Your Subscription Name"
```

3. **‡®∏‡®•‡®æ‡®®‡®ï ‡®µ‡®ø‡®ï‡®æ‡®∏ ‡®≤‡®à, environment variables ‡®µ‡®∞‡®§‡©ã:**
```bash
export AZURE_TENANT_ID="your-tenant-id"
export AZURE_CLIENT_ID="your-client-id"
export AZURE_CLIENT_SECRET="your-client-secret"
```

4. **‡®ú‡®æ‡®Ç ‡®∏‡®•‡®æ‡®®‡®ï ‡®§‡©å‡®∞ '‡®§‡©á ‡®µ‡©±‡®ñ credential ‡®µ‡®∞‡®§‡©ã:**
```javascript
const { DefaultAzureCredential, AzureCliCredential } = require('@azure/identity');

// ‡®∏‡®•‡®æ‡®®‡®ï ‡®µ‡®ø‡®ï‡®æ‡®∏ ‡®≤‡®à AzureCliCredential ‡®µ‡®∞‡®§‡©ã
const credential = process.env.NODE_ENV === 'production' 
  ? new DefaultAzureCredential()
  : new AzureCliCredential();
```

---

### ‡®∏‡®Æ‡©±‡®∏‡®ø‡®Ü: Role assignment ‡®®‡©Ç‡©∞ propagate ‡®π‡©ã‡®£ ‡®µ‡®ø‡©±‡®ö ‡®¨‡®π‡©Å‡®§ ‡®∏‡®Æ‡®æ‡®Ç ‡®≤‡©±‡®ó‡®¶‡®æ ‡®π‡©à

**‡®≤‡©±‡®õ‡®£:**
- Role ‡®∏‡®´‡®≤‡®§‡®æ‡®™‡©Ç‡®∞‡®µ‡®ï assign ‡®ï‡©Ä‡®§‡®æ ‡®ó‡®ø‡®Ü
- ‡®´‡®ø‡®∞ ‡®µ‡©Ä 403 errors ‡®Ü ‡®∞‡®π‡©á ‡®π‡®®
- Intermittent access (‡®ï‡®¶‡©á ‡®ï‡©∞‡®Æ ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à, ‡®ï‡®¶‡©á ‡®®‡®π‡©Ä‡®Ç)

**‡®µ‡®ø‡®Ü‡®ñ‡®ø‡®Ü:**
Azure RBAC ‡®¨‡®¶‡®≤‡®æ‡®Ö ‡®®‡©Ç‡©∞ ‡®µ‡®ø‡®∏‡®º‡®µ ‡®™‡©±‡®ß‡®∞ '‡®§‡©á propagate ‡®π‡©ã‡®£ ‡®µ‡®ø‡©±‡®ö 5-10 ‡®Æ‡®ø‡©∞‡®ü ‡®≤‡©±‡®ó ‡®∏‡®ï‡®¶‡©á ‡®π‡®®‡•§

**‡®π‡©±‡®≤:**

```bash
# ‡®â‡®°‡©Ä‡®ï ‡®ï‡®∞‡©ã ‡®Ö‡®§‡©á ‡®¶‡©Å‡®¨‡®æ‡®∞‡®æ ‡®ï‡©ã‡®∏‡®º‡®ø‡®∏‡®º ‡®ï‡®∞‡©ã
echo "Waiting for RBAC propagation..."
sleep 300  # 5 ‡®Æ‡®ø‡©∞‡®ü ‡®â‡®°‡©Ä‡®ï ‡®ï‡®∞‡©ã

# ‡®™‡®π‡©Å‡©∞‡®ö ‡®¶‡©Ä ‡®ú‡®æ‡®Ç‡®ö ‡®ï‡®∞‡©ã
curl https://myapp.azurecontainerapps.io/upload

# ‡®ú‡©á ‡®Ö‡®ú‡©á ‡®µ‡©Ä ‡®´‡©á‡®≤ ‡®π‡©ã ‡®∞‡®ø‡®π‡®æ ‡®π‡©à, ‡®ê‡®™ ‡®®‡©Ç‡©∞ ‡®∞‡©Ä‡®∏‡®ü‡®æ‡®∞‡®ü ‡®ï‡®∞‡©ã
az containerapp revision restart \
  --name myapp \
  --resource-group rg-myapp
```

---

## ‡®≤‡®æ‡®ó‡®§ ‡®¶‡©á ‡®µ‡®ø‡®ö‡®æ‡®∞

### Managed Identity Costs

| Resource | ‡®≤‡®æ‡®ó‡®§ |
|----------|------|
| **Managed Identity** | üÜì **‡®Æ‡©Å‡®´‡®º‡®§** - ‡®ï‡©ã‡®à ‡®ö‡®æ‡®∞‡®ú ‡®®‡®π‡©Ä‡®Ç |
| **RBAC Role Assignments** | üÜì **‡®Æ‡©Å‡®´‡®º‡®§** - ‡®ï‡©ã‡®à ‡®ö‡®æ‡®∞‡®ú ‡®®‡®π‡©Ä‡®Ç |
| **Azure AD Token Requests** | üÜì **‡®Æ‡©Å‡®´‡®º‡®§** - ‡®∏‡®º‡®æ‡®Æ‡®≤ |
| **Key Vault Operations** | $0.03 ‡®™‡©ç‡®∞‡®§‡©Ä 10,000 operations |
| **Key Vault Storage** | $0.024 ‡®™‡©ç‡®∞‡®§‡©Ä secret ‡®™‡©ç‡®∞‡®§‡©Ä ‡®Æ‡®π‡©Ä‡®®‡®æ |

**Managed identity ‡®™‡©à‡®∏‡®æ ‡®¨‡®ö‡®æ‡®â‡®Ç‡®¶‡®æ ‡®π‡©à:**
- ‚úÖ Service-to-service authentication ‡®≤‡®à Key Vault operations ‡®®‡©Ç‡©∞ ‡®ñ‡®§‡®Æ ‡®ï‡®∞‡®®‡®æ
- ‚úÖ ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®ò‡®ü‡®®‡®æ ‡®®‡©Ç‡©∞ ‡®ò‡®ü‡®æ‡®â‡®£‡®æ (‡®ï‡©ã‡®à leaked credentials ‡®®‡®π‡©Ä‡®Ç)
- ‚úÖ Operational overhead ‡®®‡©Ç‡©∞ ‡®ò‡®ü‡®æ‡®â‡®£‡®æ (‡®ï‡©ã‡®à manual rotation ‡®®‡®π‡©Ä‡®Ç)

**‡®Æ‡®π‡©Ä‡®®‡®æ‡®µ‡®æ‡®∞ ‡®≤‡®æ‡®ó‡®§ ‡®¶‡©Ä ‡®§‡©Å‡®≤‡®®‡®æ ‡®¶‡®æ ‡®â‡®¶‡®æ‡®π‡®∞‡®®:**

| Scenario | Connection Strings | Managed Identity | ‡®¨‡®ö‡®§ |
|----------|-------------------|-----------------|---------|
| ‡®õ‡©ã‡®ü‡®æ ‡®ê‡®™ (1M requests) | ~$50 (Key Vault + ops) | ~$0 | $50/month |
| ‡®Æ‡©±‡®ß‡®Æ ‡®ê‡®™ (10M requests) | ~$200 | ~$0 | $200/month |
| ‡®µ‡©±‡®°‡®æ ‡®ê‡®™ (100M requests) | ~$1,500 | ~$0 | $1,500/month |

---

## ‡®π‡©ã‡®∞ ‡®∏‡®ø‡©±‡®ñ‡©ã

### Official Documentation
- [Azure Managed Identity](https://learn.microsoft.com/entra/identity/managed-identities-azure-resources/overview)
- [Azure RBAC](https://learn.microsoft.com/azure/role-based-access-control/overview)
- [Azure Key Vault](https://learn.microsoft.com/azure/key-vault/general/overview)
- [DefaultAzureCredential](https://learn.microsoft.com/dotnet/api/azure.identity.defaultazurecredential)

### SDK Documentation
- [@azure/identity (Node.js)](https://www.npmjs.com/package/@azure/identity)
- [Azure.Identity (C#)](https://www.nuget.org/packages/Azure.Identity/)
- [azure-identity (Python)](https://pypi.org/project/azure-identity/)

### Next Steps in This Course
- ‚Üê ‡®™‡®ø‡®õ‡®≤‡®æ: [Configuration Management](configuration.md)
- ‚Üí ‡®Ö‡®ó‡®≤‡®æ: [First Project](first-project.md)
- üè† [Course Home](../../README.md)

### ‡®∏‡©∞‡®¨‡©∞‡®ß‡®ø‡®§ ‡®â‡®¶‡®æ‡®π‡®∞‡®®
- [Azure OpenAI Chat Example](../../../../examples/azure-openai-chat) - Azure OpenAI ‡®≤‡®à managed identity ‡®µ‡®∞‡®§‡®¶‡®æ ‡®π‡©à
- [Microservices Example](../../../../examples/microservices) - Multi-service authentication patterns

---

## Summary

**‡®§‡©Å‡®π‡®æ‡®®‡©Ç‡©∞ ‡®∏‡®ø‡©±‡®ñ‡®ø‡®Ü:**
- ‚úÖ ‡®§‡®ø‡©∞‡®® authentication patterns (connection strings, Key Vault, managed identity)
- ‚úÖ AZD ‡®µ‡®ø‡©±‡®ö managed identity ‡®®‡©Ç‡©∞ enable ‡®Ö‡®§‡©á configure ‡®ï‡®ø‡®µ‡©á‡®Ç ‡®ï‡®∞‡®®‡®æ ‡®π‡©à
- ‚úÖ Azure services ‡®≤‡®à RBAC role assignments
- ‚úÖ ‡®§‡©ç‡®∞‡®ø‡®™‡©±‡®ñ‡©Ä secrets ‡®≤‡®à Key Vault integration
- ‚úÖ User-assigned ‡®Ö‡®§‡©á system-assigned identities
- ‚úÖ ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®≤‡®à ‡®µ‡®ß‡©Ä‡®Ü ‡®§‡®∞‡©Ä‡®ï‡©á ‡®Ö‡®§‡©á troubleshooting

**‡®Æ‡©Å‡©±‡®ñ ‡®∏‡®ø‡©±‡®ü‡®æ:**
1. **‡®π‡®Æ‡©á‡®∏‡®º‡®æ production ‡®µ‡®ø‡©±‡®ö managed identity ‡®µ‡®∞‡®§‡©ã** - Zero secrets, automatic rotation
2. **‡®ò‡©±‡®ü-‡®∏‡®∞‡©ã‡®§ RBAC roles ‡®µ‡®∞‡®§‡©ã** - ‡®∏‡®ø‡®∞‡®´‡®º ‡®ú‡®º‡®∞‡©Ç‡®∞‡©Ä permissions ‡®¶‡®ø‡®ì
3. **‡®§‡©ç‡®∞‡®ø‡®™‡©±‡®ñ‡©Ä keys ‡®®‡©Ç‡©∞ Key Vault ‡®µ‡®ø‡©±‡®ö ‡®∏‡®ü‡©ã‡®∞ ‡®ï‡®∞‡©ã** - Centralized secret management
4. **‡®µ‡©±‡®ñ-‡®µ‡©±‡®ñ environments ‡®≤‡®à ‡®µ‡©±‡®ñ identities** - Dev, staging, prod isolation
5. **Audit logging ‡®ö‡®æ‡®≤‡©Ç ‡®ï‡®∞‡©ã** - Track ‡®ï‡®∞‡©ã ‡®ï‡®ø ‡®ï‡®ø‡®∏ ‡®®‡©á ‡®ï‡©Ä access ‡®ï‡©Ä‡®§‡®æ

**‡®Ö‡®ó‡®≤‡©á ‡®ï‡®¶‡®Æ:**
1. ‡®â‡®™‡®∞‡©ã‡®ï‡®§ practical exercises ‡®™‡©Ç‡®∞‡©á ‡®ï‡®∞‡©ã
2. Connection strings ‡®§‡©ã‡®Ç managed identity ‡®µ‡®ø‡©±‡®ö ‡®Æ‡©å‡®ú‡©Ç‡®¶‡®æ ‡®ê‡®™ ‡®®‡©Ç‡©∞ migrate ‡®ï‡®∞‡©ã
3. ‡®™‡®π‡®ø‡®≤‡®æ AZD project ‡®¨‡®£‡®æ‡®ì ‡®ú‡®ø‡®∏ ‡®µ‡®ø‡©±‡®ö ‡®™‡®π‡®ø‡®≤‡©á ‡®¶‡®ø‡®® ‡®§‡©ã‡®Ç ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®π‡©ã‡®µ‡©á: [First Project](first-project.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**‡®Ö‡®∏‡®µ‡©Ä‡®ï‡®∞‡®§‡©Ä**:  
‡®á‡®π ‡®¶‡®∏‡®§‡®æ‡®µ‡©á‡®ú‡®º AI ‡®Ö‡®®‡©Å‡®µ‡®æ‡®¶ ‡®∏‡©á‡®µ‡®æ [Co-op Translator](https://github.com/Azure/co-op-translator) ‡®¶‡©Ä ‡®µ‡®∞‡®§‡©ã‡®Ç ‡®ï‡®∞‡®ï‡©á ‡®Ö‡®®‡©Å‡®µ‡®æ‡®¶ ‡®ï‡©Ä‡®§‡®æ ‡®ó‡®ø‡®Ü ‡®π‡©à‡•§ ‡®ú‡®¶‡©ã‡®Ç ‡®ï‡®ø ‡®Ö‡®∏‡©Ä‡®Ç ‡®∏‡®π‡©Ä ‡®π‡©ã‡®£ ‡®¶‡®æ ‡®Ø‡®§‡®® ‡®ï‡®∞‡®¶‡©á ‡®π‡®æ‡®Ç, ‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®ß‡®ø‡®Ü‡®® ‡®¶‡®ø‡®ì ‡®ï‡®ø ‡®∏‡®µ‡©à‡®ö‡®æ‡®≤‡®ø‡®§ ‡®Ö‡®®‡©Å‡®µ‡®æ‡®¶‡®æ‡®Ç ‡®µ‡®ø‡©±‡®ö ‡®ó‡®≤‡®§‡©Ä‡®Ü‡®Ç ‡®ú‡®æ‡®Ç ‡®Ö‡®∏‡©Å‡©±‡®§‡©Ä‡®Ü‡®Ç ‡®π‡©ã ‡®∏‡®ï‡®¶‡©Ä‡®Ü‡®Ç ‡®π‡®®‡•§ ‡®á‡®∏ ‡®¶‡©Ä ‡®Æ‡©Ç‡®≤ ‡®≠‡®æ‡®∏‡®º‡®æ ‡®µ‡®ø‡©±‡®ö ‡®Æ‡©Ç‡®≤ ‡®¶‡®∏‡®§‡®æ‡®µ‡©á‡®ú‡®º ‡®®‡©Ç‡©∞ ‡®Ö‡®ß‡®ø‡®ï‡®æ‡®∞‡®§ ‡®∏‡®∞‡©ã‡®§ ‡®Æ‡©∞‡®®‡®ø‡®Ü ‡®ú‡®æ‡®£‡®æ ‡®ö‡®æ‡®π‡©Ä‡®¶‡®æ ‡®π‡©à‡•§ ‡®Æ‡®π‡©±‡®§‡®µ‡®™‡©Ç‡®∞‡®® ‡®ú‡®æ‡®£‡®ï‡®æ‡®∞‡©Ä ‡®≤‡®à, ‡®™‡©á‡®∏‡®º‡©á‡®µ‡®∞ ‡®Æ‡®®‡©Å‡©±‡®ñ‡©Ä ‡®Ö‡®®‡©Å‡®µ‡®æ‡®¶ ‡®¶‡©Ä ‡®∏‡®ø‡®´‡®æ‡®∞‡®∏‡®º ‡®ï‡©Ä‡®§‡©Ä ‡®ú‡®æ‡®Ç‡®¶‡©Ä ‡®π‡©à‡•§ ‡®á‡®∏ ‡®Ö‡®®‡©Å‡®µ‡®æ‡®¶ ‡®¶‡©Ä ‡®µ‡®∞‡®§‡©ã‡®Ç ‡®§‡©ã‡®Ç ‡®™‡©à‡®¶‡®æ ‡®π‡©ã‡®£ ‡®µ‡®æ‡®≤‡©á ‡®ï‡®ø‡®∏‡©á ‡®µ‡©Ä ‡®ó‡®≤‡®§‡®´‡®π‡®ø‡®Æ‡©Ä ‡®ú‡®æ‡®Ç ‡®ó‡®≤‡®§ ‡®µ‡®ø‡®Ü‡®ñ‡®ø‡®Ü ‡®≤‡®à ‡®Ö‡®∏‡©Ä‡®Ç ‡®ú‡®º‡®ø‡©∞‡®Æ‡©á‡®µ‡®æ‡®∞ ‡®®‡®π‡©Ä‡®Ç ‡®π‡®æ‡®Ç‡•§
<!-- CO-OP TRANSLATOR DISCLAIMER END -->