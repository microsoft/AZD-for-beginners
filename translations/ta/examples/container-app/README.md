<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d9a2ec55ebb3688baf26e691b1703e76",
  "translation_date": "2025-11-24T13:59:38+00:00",
  "source_file": "examples/container-app/README.md",
  "language_code": "ta"
}
-->
# AZD роорпВро▓роорпН роХройрпНроЯрпЖропрпНройро░рпН роЖрокрпН роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБроХро│рпН

роЗроирпНрод роЕроЯрпИро╡рпБ, Azure Developer CLI (AZD) рокропройрпНрокроЯрпБродрпНродро┐ Azure Container Apps-роХрпНроХрпБ роХройрпНроЯрпЖропрпНройро░рпН роЪрпЖропрпНропрокрпНрокроЯрпНроЯ рокропройрпНрокро╛роЯрпБроХро│рпИ роЯро┐рокрпНро│ро╛ропрпН роЪрпЖропрпНроп ро╡ро┐ро░ро┐ро╡ро╛рой роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБроХро│рпИ роХрпКрогрпНроЯрпБро│рпНро│родрпБ. роЗро╡рпИ роиро┐роЬ ро╡ро╛ро┤рпНроХрпНроХрпИ роорпБро▒рпИроорпИроХро│рпН, роЪро┐ро▒роирпНрод роироЯрпИроорпБро▒рпИроХро│рпН рооро▒рпНро▒рпБроорпН родропро╛ро░ро┐рокрпНрокрпБ-родропро╛ро░рпН роЙро│рпНро│роорпИрокрпНрокрпБроХро│рпИ ро╡ро┐ро│роХрпНроХрпБроХро┐ройрпНро▒рой.

## ЁЯУЪ роЙро│рпНро│роЯроХрпНроХ роЕроЯрпНроЯро╡рогрпИ

- [роорпЗро▓рпЛроЯрпНроЯроорпН](../../../../examples/container-app)
- [роорпБройрпН родрпЗро╡рпИроХро│рпН](../../../../examples/container-app)
- [ро╡ро┐ро░рпИро╡ро╛рой родрпКроЯроХрпНроХ роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБроХро│рпН](../../../../examples/container-app)
- [родропро╛ро░ро┐рокрпНрокрпБ роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБроХро│рпН](../../../../examples/container-app)
- [роорпЗроорпНрокроЯрпНроЯ роорпБро▒рпИроорпИроХро│рпН](../../../../examples/container-app)
- [роЪро┐ро▒роирпНрод роироЯрпИроорпБро▒рпИроХро│рпН](../../../../examples/container-app)

## роорпЗро▓рпЛроЯрпНроЯроорпН

Azure Container Apps роОройрпНрокродрпБ роорпБро┤рпБроорпИропро╛роХ роиро┐ро░рпНро╡роХро┐роХрпНроХрокрпНрокроЯрпБроорпН роЪро░рпНро╡ро░рпНро▓рпЖро╕рпН роХройрпНроЯрпЖропрпНройро░рпН родро│роорпН роЖроХрпБроорпН, роЗродрпБ роЙроЩрпНроХро│рпБроХрпНроХрпБ роорпИроХрпНро░рпЛроЪро░рпНро╡рпАроЪрпБроХро│рпН рооро▒рпНро▒рпБроорпН роХройрпНроЯрпЖропрпНройро░рпН роЪрпЖропрпНропрокрпНрокроЯрпНроЯ рокропройрпНрокро╛роЯрпБроХро│рпИ роЙро│рпНроХроЯрпНроЯроорпИрокрпНрокрпИ роиро┐ро░рпНро╡роХро┐роХрпНроХро╛рооро▓рпН роЗропроХрпНроХ роЕройрпБроородро┐роХрпНроХро┐ро▒родрпБ. AZD роЙроЯройрпН роЗрогрпИроирпНродро╛ро▓рпН, роирпАроЩрпНроХро│рпН рокрпЖро▒рпБро╡рпАро░рпНроХро│рпН:

- **роОро│ро┐роп роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН**: роТро░рпЗ роХроЯрпНроЯро│рпИропро┐ро▓рпН роХройрпНроЯрпЖропрпНройро░рпНроХро│рпИ роЙро│рпНроХроЯрпНроЯроорпИрокрпНрокрпБроЯройрпН роЯро┐рокрпНро│ро╛ропрпН роЪрпЖропрпНропро▓ро╛роорпН
- **родро╛ройро┐ропроЩрпНроХро┐ роЕро│ро╡рпАроЯрпБ**: HTTP роЯро┐ро░ро╛роГрокро┐роХрпН роЕро▓рпНро▓родрпБ роиро┐роХро┤рпНро╡рпБроХро│ро┐ройрпН роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН 0 роорпБродро▓рпН роЕродро┐роХ роЕро│ро╡рпБроХрпНроХрпБ роЕро│ро╡рпАроЯрпБ роЪрпЖропрпНропро▓ро╛роорпН
- **роЗрогрпИроирпНрод роирпЖроЯрпНро╡рпКро░рпНроХрпНроХро┐роЩрпН**: роЙро│рпНро│роорпИроХрпНроХрокрпНрокроЯрпНроЯ роЪрпЗро╡рпИ роХрогрпНроЯро▒ро┐родро▓рпН рооро▒рпНро▒рпБроорпН роЯро┐ро░ро╛роГрокро┐роХрпН рокро┐ро│ро╡ро┐роЩрпН
- **роорпЗройрпЗроЬрпНроЯрпБ роРроЯрпЖройрпНроЯро┐роЯрпНроЯро┐**: Azure ро╡ро│роЩрпНроХро│рпБроХрпНроХрпБ рокро╛родрпБроХро╛рокрпНрокро╛рой роЕроЩрпНроХрпАроХро╛ро░роорпН
- **роЪрпЖро▓ро╡рпБроХрпН роХрпБро▒рпИрокрпНрокрпБ**: роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНродрпБроорпН ро╡ро│роЩрпНроХро│рпБроХрпНроХрпБ роороЯрпНроЯрпБроорпЗ рокрогроорпН роЪрпЖро▓рпБродрпНродрпБроЩрпНроХро│рпН

## роорпБройрпН родрпЗро╡рпИроХро│рпН

родрпКроЯроЩрпНроХрпБро╡родро▒рпНроХрпБ роорпБройрпН, роЙроЩрпНроХро│ро┐роЯроорпН рокро┐ройрпНро╡ро░рпБроорпН роЗро░рпБрокрпНрокродрпИ роЙро▒рпБродро┐роЪрпЖропрпНропро╡рпБроорпН:

```bash
# AZD роиро┐ро▒рпБро╡ро▓рпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН
azd version

# Azure CLI роР роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН
az version

# Docker роР роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН (родройро┐рокрпНрокропройрпН рокроЯроЩрпНроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХ)
docker --version

# Azure роЗро▓рпН роЙро│рпНроирпБро┤рпИроХ
azd auth login
az login
```

**родрпЗро╡рпИропро╛рой Azure ро╡ро│роЩрпНроХро│рпН:**
- роЪрпЖропро▓ро┐ро▓рпН роЙро│рпНро│ Azure роЪроирпНродро╛
- Resource group роЙро░рпБро╡ро╛роХрпНроХ роЕройрпБроородро┐роХро│рпН
- Container Apps роЪрпВро┤ро▓рпН роЕрогрпБроХро▓рпН

## ро╡ро┐ро░рпИро╡ро╛рой родрпКроЯроХрпНроХ роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБроХро│рпН

### 1. роОро│ро┐роп ро╡ро▓рпИ API (Python Flask)

Azure Container Apps роЙроЯройрпН роТро░рпБ роЕроЯро┐рокрпНрокроЯрпИ REST API роР роЯро┐рокрпНро│ро╛ропрпН роЪрпЖропрпНропро╡рпБроорпН.

**роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБ: Python Flask API**

```yaml
# azure.yaml
name: flask-api-demo
metadata:
  template: flask-api-demo@0.0.1-beta
services:
  api:
    project: ./src/api
    language: python
    host: containerapp
```

**роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН рокроЯро┐роХро│рпН:**

```bash
# роЯрпЖроорпНрокрпНро│рпЗроЯрпНроЯро┐ро▓рпН роЗро░рпБроирпНродрпБ родрпКроЯроЩрпНроХро╡рпБроорпН
azd init --template todo-python-mongo

# роЙро│рпНроХроЯрпНроЯроорпИрокрпНрокрпИ ро╡ро┤роЩрпНроХро┐, рокро┐ро░ропрпЛроХро┐роХрпНроХро╡рпБроорпН
azd up

# рокро┐ро░ропрпЛроХродрпНродрпИ роЪрпЛродро┐роХрпНроХро╡рпБроорпН
azd show
curl $(azd show --output json | jq -r '.services.api.endpoint')/health
```

**роорпБроХрпНроХро┐роп роЕроорпНроЪроЩрпНроХро│рпН:**
- 0 роорпБродро▓рпН 10 ро░рпЖрокрпНро│ро┐роХро╛роХрпНроХро│рпН ро╡ро░рпИ родро╛ройро┐ропроЩрпНроХро┐ роЕро│ро╡рпАроЯрпБ
- роЖро░рпЛроХрпНроХро┐роп роЪрпЛродройрпИроХро│рпН рооро▒рпНро▒рпБроорпН ро▓рпИро╡рпНройрпЖро╕рпН роЪрпЛродройрпИроХро│рпН
- роЪрпВро┤ро▓рпН рооро╛ро▒ро┐ роЪрпЖро░рпБроХро▓рпН
- Application Insights роТро░рпБроЩрпНроХро┐рогрпИрокрпНрокрпБ

### 2. Node.js Express API

MongoDB роТро░рпБроЩрпНроХро┐рогрпИрокрпНрокрпБроЯройрпН роТро░рпБ Node.js рокро┐ройрпНрокрпБро▒родрпНродрпИ роЯро┐рокрпНро│ро╛ропрпН роЪрпЖропрпНропро╡рпБроорпН.

```bash
# Node.js API роЯрпЖроорпНрокрпНро│рпЗроЯрпНроЯрпИ родрпКроЯроЩрпНроХро╡рпБроорпН
azd init --template todo-nodejs-mongo

# роЪрпВро┤ро▓рпН рооро╛ро▒ро┐роХро│рпН роЕроорпИроХрпНроХро╡рпБроорпН
azd env set DATABASE_NAME todosdb
azd env set COLLECTION_NAME todos

# рокро┐ро░роЪрпБро░ро┐роХрпНроХро╡рпБроорпН
azd up

# рокродро┐ро╡рпБроХро│рпИ рокро╛ро░рпНроХрпНроХро╡рпБроорпН
azd logs api
```

**роЙро│рпНроХроЯрпНроЯроорпИрокрпНрокрпБ роорпБроХрпНроХро┐роп роЕроорпНроЪроЩрпНроХро│рпН:**
```bicep
// Bicep snippet from infra/main.bicep
resource containerApp 'Microsoft.App/containerApps@2023-05-01' = {
  name: 'api-${resourceToken}'
  location: location
  properties: {
    managedEnvironmentId: containerEnv.id
    configuration: {
      ingress: {
        external: true
        targetPort: 3000
        transport: 'auto'
      }
      secrets: [
        {
          name: 'mongodb-connection'
          value: mongoConnection
        }
      ]
    }
    template: {
      containers: [
        {
          name: 'api'
          image: containerImage
          env: [
            {
              name: 'DATABASE_URL'
              secretRef: 'mongodb-connection'
            }
          ]
        }
      ]
      scale: {
        minReplicas: 0
        maxReplicas: 10
      }
    }
  }
}
```

### 3. Static Frontend + API Backend

React роорпБройрпНройрогро┐ рооро▒рпНро▒рпБроорпН API рокро┐ройрпНрокрпБро▒родрпНродрпБроЯройрпН роТро░рпБ роорпБро┤рпБ ро╕рпНроЯро╛роХрпН рокропройрпНрокро╛роЯрпНроЯрпИ роЯро┐рокрпНро│ро╛ропрпН роЪрпЖропрпНропро╡рпБроорпН.

```bash
# роорпБро┤рпБроорпИропро╛рой ро╕рпНроЯро╛роХрпН роЯрпЖроорпНрокрпНро│рпЗроЯрпНроЯрпИ родрпКроЯроЩрпНроХро╡рпБроорпН
azd init --template todo-csharp-sql-swa-func

# роХроЯрпНроЯроорпИрокрпНрокрпИ роородро┐рокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНропро╡рпБроорпН
cat azure.yaml

# роЗро░рпБ роЪрпЗро╡рпИроХро│рпИропрпБроорпН рокро┐ро░роЪрпБро░ро┐роХрпНроХро╡рпБроорпН
azd up

# рокропройрпНрокро╛роЯрпНроЯрпИ родро┐ро▒роХрпНроХро╡рпБроорпН
azd show --output json | jq -r '.services.web.endpoint' | xargs start
```

## родропро╛ро░ро┐рокрпНрокрпБ роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБроХро│рпН

### роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБ 1: роорпИроХрпНро░рпЛроЪро░рпНро╡рпАроЪро╕рпН роХроЯрпНроЯроорпИрокрпНрокрпБ

**родро┐ро░рпБрокрпНрокроорпН**: рокро▓ роорпИроХрпНро░рпЛроЪро░рпНро╡рпАроЪрпБроХро│рпБроЯройрпН роТро░рпБ роЗ-роХро╛рооро░рпНро╕рпН рокропройрпНрокро╛роЯрпБ

**роЕроЯрпИро╡рпБ роЕроорпИрокрпНрокрпБ:**
```
microservices-demo/
тФЬтФАтФА azure.yaml
тФЬтФАтФА infra/
тФВ   тФЬтФАтФА main.bicep
тФВ   тФЬтФАтФА app/
тФВ   тФВ   тФЬтФАтФА container-env.bicep
тФВ   тФВ   тФЬтФАтФА product-service.bicep
тФВ   тФВ   тФЬтФАтФА order-service.bicep
тФВ   тФВ   тФФтФАтФА payment-service.bicep
тФВ   тФФтФАтФА core/
тФВ       тФЬтФАтФА storage.bicep
тФВ       тФФтФАтФА database.bicep
тФФтФАтФА src/
    тФЬтФАтФА product-service/
    тФЬтФАтФА order-service/
    тФФтФАтФА payment-service/
```

**azure.yaml роЙро│рпНро│роорпИрокрпНрокрпБ:**
```yaml
name: microservices-ecommerce
services:
  product-service:
    project: ./src/product-service
    language: python
    host: containerapp
    
  order-service:
    project: ./src/order-service
    language: csharp
    host: containerapp
    
  payment-service:
    project: ./src/payment-service
    language: nodejs
    host: containerapp
```

**роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН:**
```bash
# родро┐роЯрпНроЯродрпНродрпИ родрпКроЯроЩрпНроХро╡рпБроорпН
azd init

# роЙро▒рпНрокродрпНродро┐ роЪрпВро┤ро▓рпИ роЕроорпИроХрпНроХро╡рпБроорпН
azd env new production

# роЙро▒рпНрокродрпНродро┐ роЕроорпИрокрпНрокрпБроХро│рпИ роЙро│рпНро│роорпИроХрпНроХро╡рпБроорпН
azd env set ENVIRONMENT production
azd env set MIN_REPLICAS 2
azd env set MAX_REPLICAS 50

# роЕройрпИродрпНродрпБ роЪрпЗро╡рпИроХро│рпИропрпБроорпН рокро┐ро░роЪро╛ро░рооро╛роХрпНроХро╡рпБроорпН
azd up

# рокро┐ро░роЪро╛ро░родрпНродрпИ роХрогрпНроХро╛рогро┐роХрпНроХро╡рпБроорпН
azd monitor --overview
```

### роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБ 2: AI-роЖродро╛ро░роорпБро│рпНро│ роХройрпНроЯрпЖропрпНройро░рпН роЖрокрпН

**родро┐ро░рпБрокрпНрокроорпН**: Azure OpenAI роТро░рпБроЩрпНроХро┐рогрпИрокрпНрокрпБроЯройрпН AI роЙро░рпИропро╛роЯро▓рпН рокропройрпНрокро╛роЯрпБ

**роХрпЛрокрпНрокрпБ: src/ai-chat/app.py**
```python
from flask import Flask, request, jsonify
from azure.identity import DefaultAzureCredential
from azure.keyvault.secrets import SecretClient
import openai

app = Flask(__name__)

# рокро╛родрпБроХро╛рокрпНрокро╛рой роЕрогрпБроХро▓рпБроХрпНроХро╛роХ роорпЗро▓ро╛рогрпНроорпИ роЕроЯрпИропро╛ро│родрпНродрпИ рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН
credential = DefaultAzureCredential()
vault_url = "https://{vault-name}.vault.azure.net"
client = SecretClient(vault_url=vault_url, credential=credential)

@app.route('/api/chat', methods=['POST'])
def chat():
    user_message = request.json.get('message')
    
    # роХрпА ро╡ро╛ро▓рпНроЯро┐ро▓ро┐ро░рпБроирпНродрпБ OpenAI роХрпАропрпИ рокрпЖро▒ро╡рпБроорпН
    openai_key = client.get_secret("openai-api-key").value
    openai.api_key = openai_key
    
    response = openai.ChatCompletion.create(
        model="gpt-4",
        messages=[{"role": "user", "content": user_message}]
    )
    
    return jsonify({"response": response.choices[0].message.content})

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8000)
```

**роХрпЛрокрпНрокрпБ: azure.yaml**
```yaml
name: ai-chat-app
services:
  api:
    project: ./src/ai-chat
    language: python
    host: containerapp
```

**роХрпЛрокрпНрокрпБ: infra/main.bicep**
```bicep
param location string = resourceGroup().location
param environmentName string

var resourceToken = uniqueString(subscription().id, environmentName, location)

// Container Apps Environment
module containerEnv './app/container-env.bicep' = {
  name: 'container-env-${resourceToken}'
  params: {
    location: location
    environmentName: environmentName
  }
}

// Key Vault for secrets
resource keyVault 'Microsoft.KeyVault/vaults@2023-02-01' = {
  name: 'kv-${resourceToken}'
  location: location
  properties: {
    sku: {
      family: 'A'
      name: 'standard'
    }
    tenantId: subscription().tenantId
    enableRbacAuthorization: true
  }
}

// Container App with Managed Identity
module aiChatApp './app/container-app.bicep' = {
  name: 'ai-chat-app-${resourceToken}'
  params: {
    location: location
    environmentId: containerEnv.outputs.environmentId
    containerImage: 'your-registry.azurecr.io/ai-chat:latest'
    keyVaultName: keyVault.name
  }
}
```

**роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН роХроЯрпНроЯро│рпИроХро│рпН:**
```bash
# роЪрпВро┤ро▓рпИ роЕроорпИроХрпНроХро╡рпБроорпН
azd init --template ai-chat-app
azd env new dev

# OpenAI роР роЙро│рпНро│роорпИроХрпНроХро╡рпБроорпН
azd env set AZURE_OPENAI_ENDPOINT "https://your-openai.openai.azure.com/"
azd env set AZURE_OPENAI_DEPLOYMENT "gpt-4"

# рокро┐ро░ропрпЛроХро┐роХрпНроХро╡рпБроорпН
azd up

# API роР роЪрпЛродро┐роХрпНроХро╡рпБроорпН
curl -X POST $(azd show --output json | jq -r '.services.api.endpoint')/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Hello, how are you?"}'
```

### роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБ 3: рокро┐ройрпНрокрпБро▒ рокрогро┐ропро╛ро│ро░рпН рооро▒рпНро▒рпБроорпН ро╡ро░ро┐роЪрпИ роЪрпЖропро▓ро╛роХрпНроХроорпН

**родро┐ро░рпБрокрпНрокроорпН**: роЪрпЖропрпНродро┐ ро╡ро░ро┐роЪрпИропрпБроЯройрпН роЖро░рпНроЯро░рпН роЪрпЖропро▓ро╛роХрпНроХ роЕроорпИрокрпНрокрпБ

**роЕроЯрпИро╡рпБ роЕроорпИрокрпНрокрпБ:**
```
queue-worker/
тФЬтФАтФА azure.yaml
тФЬтФАтФА infra/
тФВ   тФЬтФАтФА main.bicep
тФВ   тФЬтФАтФА app/
тФВ   тФВ   тФЬтФАтФА api.bicep
тФВ   тФВ   тФФтФАтФА worker.bicep
тФВ   тФФтФАтФА core/
тФВ       тФЬтФАтФА storage-queue.bicep
тФВ       тФФтФАтФА servicebus.bicep
тФФтФАтФА src/
    тФЬтФАтФА api/
    тФФтФАтФА worker/
```

**роХрпЛрокрпНрокрпБ: src/worker/processor.py**
```python
import os
from azure.storage.queue import QueueClient
from azure.identity import DefaultAzureCredential

def process_orders():
    credential = DefaultAzureCredential()
    queue_url = os.getenv('AZURE_QUEUE_URL')
    
    queue_client = QueueClient.from_queue_url(
        queue_url=queue_url,
        credential=credential
    )
    
    while True:
        messages = queue_client.receive_messages(max_messages=10)
        for message in messages:
            # роЖро░рпНроЯро░рпН роЪрпЖропро▓рпНрокроЯрпБродрпНродрпБ
            print(f"Processing order: {message.content}")
            
            # роЪрпЖропрпНродро┐ропрпИ роорпБроЯро┐роХрпНроХро╡рпБроорпН
            queue_client.delete_message(message)

if __name__ == '__main__':
    process_orders()
```

**роХрпЛрокрпНрокрпБ: azure.yaml**
```yaml
name: order-processing
services:
  api:
    project: ./src/api
    language: python
    host: containerapp
    
  worker:
    project: ./src/worker
    language: python
    host: containerapp
```

**роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН:**
```bash
# родрпКроЯроЩрпНроХро╡рпБроорпН
azd init

# ро╡ро░ро┐роЪрпИ роХроЯрпНроЯроорпИрокрпНрокрпБроЯройрпН рокро┐ро░роЪрпБро░ро┐роХрпНроХро╡рпБроорпН
azd up

# ро╡ро░ро┐роЪрпИ роирпАро│родрпНродро┐ройрпН роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН ро╡рпЗро▓рпИроХро╛ро░ро░рпИ роЕро│ро╡ро┐роЯро╡рпБроорпН
az containerapp update \
  --name worker \
  --resource-group rg-order-processing \
  --scale-rule-name queue-scaling \
  --scale-rule-type azure-queue \
  --scale-rule-metadata queueName=orders accountName=storageaccount
```

## роорпЗроорпНрокроЯрпНроЯ роорпБро▒рпИроорпИроХро│рпН

### роорпБро▒рпИроорпИ 1: рокрпНро│рпВ-роХро┐ро░рпАройрпН роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН

```bash
# рокрпБродро┐роп родро┐ро░рпБродрпНродродрпНродрпИ рокрпЛроХрпНроХрпБро╡ро░родрпНродрпБ роЗро▓рпНро▓ро╛рооро▓рпН роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН
azd deploy api --revision-suffix blue --no-traffic

# рокрпБродро┐роп родро┐ро░рпБродрпНродродрпНродрпИ роЪрпЛродро┐роХрпНроХро╡рпБроорпН
curl https://api--blue.nicegrass-12345.eastus.azurecontainerapps.io/health

# рокрпЛроХрпНроХрпБро╡ро░родрпНродрпИ рокро┐ро░ро┐роХрпНроХро╡рпБроорпН (20% роирпАро▓родрпНродро┐ро▒рпНроХрпБ, 80% родро▒рпНрокрпЛродрпИропродрпНродро┐ро▒рпНроХрпБ)
az containerapp ingress traffic set \
  --name api \
  --resource-group rg-myapp \
  --revision-weight latest=80 blue=20

# роорпБро┤рпБроорпИропро╛рой рооро╛ро▒рпНро▒роорпН роирпАро▓родрпНродро┐ро▒рпНроХрпБ
az containerapp ingress traffic set \
  --name api \
  --resource-group rg-myapp \
  --revision-weight blue=100
```

### роорпБро▒рпИроорпИ 2: AZD роЙроЯройрпН роХройро░ро┐ роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН

**роХрпЛрокрпНрокрпБ: .azure/dev/config.json**
```json
{
  "deploymentStrategy": "canary",
  "canary": {
    "initialTrafficPercentage": 10,
    "incrementPercentage": 10,
    "intervalMinutes": 5
  }
}
```

**роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН ро╕рпНроХро┐ро░ро┐рокрпНроЯрпН:**
```bash
#!/bin/bash
# deploy-canary.sh

# рокрпБродро┐роп родро┐ро░рпБродрпНродродрпНродрпИ 10% рокрпЛроХрпНроХрпБро╡ро░родрпНродрпБроЯройрпН рокро┐ро░роЪро╛ро░роорпН роЪрпЖропрпНропро╡рпБроорпН
azd deploy api --revision-mode multiple

# роЕро│ро╡рпБроХрпЛро▓рпНроХро│рпИ роХрогрпНроХро╛рогро┐роХрпНроХро╡рпБроорпН
azd monitor --service api --duration 5m

# рокрпЛроХрпНроХрпБро╡ро░родрпНродрпИ ╪к╪п╪▒┘К╪мрооро╛роХ роЕродро┐роХро░ро┐роХрпНроХро╡рпБроорпН
for i in {20..100..10}; do
  echo "Increasing traffic to $i%"
  az containerapp revision set-traffic \
    --name api \
    --resource-group rg-myapp \
    --revision-weight latest=$i
  
  sleep 300  # 5 роиро┐рооро┐роЯроЩрпНроХро│рпН роХро╛родрпНродро┐ро░рпБроХрпНроХро╡рпБроорпН
done
```

### роорпБро▒рпИроорпИ 3: рокро▓ рокро┐ро░ро╛роирпНродро┐роп роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН

**роХрпЛрокрпНрокрпБ: azure.yaml**
```yaml
name: global-app
services:
  api:
    project: ./src/api
    language: python
    host: containerapp
    regions:
      - eastus
      - westeurope
      - southeastasia
```

**роХрпЛрокрпНрокрпБ: infra/multi-region.bicep**
```bicep
param regions array = ['eastus', 'westeurope', 'southeastasia']

module containerApps './app/container-app.bicep' = [for region in regions: {
  name: 'app-${region}'
  params: {
    location: region
    environmentName: environmentName
  }
}]

// Traffic Manager for global load balancing
resource trafficManager 'Microsoft.Network/trafficManagerProfiles@2022-04-01' = {
  name: 'tm-global-app'
  location: 'global'
  properties: {
    trafficRoutingMethod: 'Performance'
    endpoints: [for i in range(0, length(regions)): {
      name: 'endpoint-${regions[i]}'
      type: 'Microsoft.Network/trafficManagerProfiles/externalEndpoints'
      properties: {
        target: containerApps[i].outputs.fqdn
        endpointStatus: 'Enabled'
      }
    }]
  }
}
```

**роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН:**
```bash
# роЕройрпИродрпНродрпБ рокроХрпБродро┐роХро│ро┐ро▓рпБроорпН рокро┐ро░роЪрпБро░ро┐роХрпНроХро╡рпБроорпН
azd up

# роЗро▒рпБродро┐рокрпНрокрпБро│рпНро│ро┐роХро│рпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН
azd show --output json | jq '.services.api.endpoints'
```

### роорпБро▒рпИроорпИ 4: Dapr роТро░рпБроЩрпНроХро┐рогрпИрокрпНрокрпБ

**роХрпЛрокрпНрокрпБ: infra/app/dapr-enabled.bicep**
```bicep
resource containerApp 'Microsoft.App/containerApps@2023-05-01' = {
  name: 'dapr-app'
  properties: {
    configuration: {
      dapr: {
        enabled: true
        appId: 'order-service'
        appPort: 8000
        appProtocol: 'http'
      }
    }
    template: {
      containers: [
        {
          name: 'app'
          image: containerImage
        }
      ]
    }
  }
}
```

**Dapr роЙроЯройрпН рокропройрпНрокро╛роЯрпНроЯрпБ роХрпБро▒ро┐ропрпАроЯрпБ:**
```python
from flask import Flask
from dapr.clients import DaprClient

app = Flask(__name__)

@app.route('/orders', methods=['POST'])
def create_order():
    with DaprClient() as client:
        # роиро┐ро▓рпИропрпИ роЪрпЗрооро┐роХрпНроХро╡рпБроорпН
        client.save_state(
            store_name='statestore',
            key='order-123',
            value={'status': 'pending'}
        )
        
        # роиро┐роХро┤рпНро╡рпИ ро╡рпЖро│ро┐ропро┐роЯро╡рпБроорпН
        client.publish_event(
            pubsub_name='pubsub',
            topic_name='orders',
            data={'orderId': '123'}
        )
    
    return {'status': 'created'}
```

## роЪро┐ро▒роирпНрод роироЯрпИроорпБро▒рпИроХро│рпН

### 1. ро╡ро│ роЕроорпИрокрпНрокрпБ

```bash
# роТро░рпЗ рооро╛родро┐ро░ро┐ропро╛рой рокрпЖропро░ро┐роЯрпБроорпН рооро░рокрпБроХро│рпИ рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН
azd env set AZURE_ENV_NAME "myapp-prod"
azd env set AZURE_LOCATION "eastus"

# роЪрпЖро▓ро╡рпБроХрпН роХрогрпНроХро╛рогро┐рокрпНрокрпБроХрпНроХро╛рой ро╡ро│роЩрпНроХро│рпИ роХрпБро▒ро┐роХрпНроХро╡рпБроорпН
azd env set AZURE_TAGS "Environment=Production,CostCenter=Engineering"
```

### 2. рокро╛родрпБроХро╛рокрпНрокрпБ роЪро┐ро▒роирпНрод роироЯрпИроорпБро▒рпИроХро│рпН

```bicep
// Always use managed identity
resource containerApp 'Microsoft.App/containerApps@2023-05-01' = {
  identity: {
    type: 'SystemAssigned'
  }
}

// Store secrets in Key Vault
resource keyVault 'Microsoft.KeyVault/vaults@2023-02-01' = {
  properties: {
    enableRbacAuthorization: true
    networkAcls: {
      defaultAction: 'Deny'
      bypass: 'AzureServices'
    }
  }
}

// Use private endpoints
resource privateEndpoint 'Microsoft.Network/privateEndpoints@2023-04-01' = {
  properties: {
    subnet: {
      id: subnetId
    }
    privateLinkServiceConnections: [
      {
        name: 'containerapp-connection'
        properties: {
          privateLinkServiceId: containerApp.id
        }
      }
    ]
  }
}
```

### 3. роЪрпЖропро▓рпНродро┐ро▒ройрпН роорпЗроорпНрокро╛роЯрпБ

```yaml
# azure.yaml with performance settings
services:
  api:
    project: ./src/api
    host: containerapp
    resources:
      cpu: 1.0
      memory: 2Gi
    scale:
      minReplicas: 2
      maxReplicas: 20
      rules:
        - name: http-rule
          http:
            concurrent: 100
```

### 4. роХрогрпНроХро╛рогро┐рокрпНрокрпБ рооро▒рпНро▒рпБроорпН рокро╛ро░рпНро╡рпИропро┐роЯро▓рпН

```bash
# рокропройрпНрокро╛роЯрпНроЯрпБ роЙро│рпНро│рпБрогро░рпНро╡рпБроХро│рпИ роЗропроХрпНроХро╡рпБроорпН
azd env set APPLICATIONINSIGHTS_CONNECTION_STRING "InstrumentationKey=..."

# рокродро┐ро╡рпБроХро│рпИ роирпЗро░роЯро┐ропро╛роХ роХро╛рогро╡рпБроорпН
azd logs api --follow

# роЕро│ро╡рпБроХрпЛро▓рпНроХро│рпИ роХрогрпНроХро╛рогро┐роХрпНроХро╡рпБроорпН
azd monitor --service api

# роОроЪрпНроЪро░ро┐роХрпНроХрпИроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН
az monitor metrics alert create \
  --name high-cpu-alert \
  --resource-group rg-myapp \
  --scopes $(azd show --output json | jq -r '.services.api.resourceId') \
  --condition "avg CPU > 80" \
  --description "Alert when CPU exceeds 80%"
```

### 5. роЪрпЖро▓ро╡рпБроХрпН роХрпБро▒рпИрокрпНрокрпБ

```bash
# рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯро╛род рокрпЛродрпБ рокрпВроЬрпНропрооро╛роХ роЕро│ро╡ро┐роЯро╡рпБроорпН
az containerapp update \
  --name api \
  --resource-group rg-myapp \
  --min-replicas 0

# роорпЗроорпНрокро╛роЯрпНроЯрпБ роЪрпВро┤ро▓рпНроХро│рпБроХрпНроХрпБ ро╕рпНрокро╛роЯрпН роЗройрпНро╕рпНроЯройрпНро╕рпНроХро│рпИ рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН
azd env set CONTAINER_APP_REPLICA_TYPE "Spot"

# рокроЯрпНроЬрпЖроЯрпН роОроЪрпНроЪро░ро┐роХрпНроХрпИроХро│рпИ роЕроорпИроХрпНроХро╡рпБроорпН
az consumption budget create \
  --budget-name myapp-budget \
  --amount 100 \
  --time-grain Monthly \
  --threshold 80
```

### 6. CI/CD роТро░рпБроЩрпНроХро┐рогрпИрокрпНрокрпБ

**GitHub Actions роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБ:**
```yaml
name: Deploy to Azure Container Apps

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup AZD
        uses: Azure/setup-azd@v1
      
      - name: Login to Azure
        run: |
          azd auth login --client-id ${{ secrets.AZURE_CLIENT_ID }} \
            --client-secret ${{ secrets.AZURE_CLIENT_SECRET }} \
            --tenant-id ${{ secrets.AZURE_TENANT_ID }}
      
      - name: Deploy
        run: azd up --no-prompt
        env:
          AZURE_ENV_NAME: ${{ secrets.AZURE_ENV_NAME }}
          AZURE_LOCATION: ${{ secrets.AZURE_LOCATION }}
```

## рокрпКродрпБро╡ро╛рой роХроЯрпНроЯро│рпИроХро│рпН роХрпБро▒ро┐рокрпНрокрпБ

```bash
# рокрпБродро┐роп роХройрпНроЯрпЖропрпНройро░рпН рокропройрпНрокро╛роЯрпНроЯрпБ родро┐роЯрпНроЯродрпНродрпИ родрпКроЯроЩрпНроХро╡рпБроорпН
azd init --template <template-name>

# роЙро│рпНроХроЯрпНроЯроорпИрокрпНрокрпБ рооро▒рпНро▒рпБроорпН рокропройрпНрокро╛роЯрпНроЯрпИ рокро┐ро░роЪрпБро░ро┐роХрпНроХро╡рпБроорпН
azd up

# рокропройрпНрокро╛роЯрпНроЯрпБ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роороЯрпНроЯрпБроорпН рокро┐ро░роЪрпБро░ро┐роХрпНроХро╡рпБроорпН (роЙро│рпНроХроЯрпНроЯроорпИрокрпНрокрпИ родро╡ро┐ро░рпНроХрпНроХро╡рпБроорпН)
azd deploy

# роЙро│рпНроХроЯрпНроЯроорпИрокрпНрокрпИ роороЯрпНроЯрпБроорпН ро╡ро┤роЩрпНроХро╡рпБроорпН
azd provision

# рокро┐ро░роЪрпБро░ро┐роХрпНроХрокрпНрокроЯрпНроЯ ро╡ро│роЩрпНроХро│рпИ рокро╛ро░рпНроХрпНроХро╡рпБроорпН
azd show

# рокродро┐ро╡рпБ рокродро┐ро╡рпБроХро│рпИ ро╕рпНроЯрпНро░рпАроорпН роЪрпЖропрпНропро╡рпБроорпН
azd logs <service-name> --follow

# рокропройрпНрокро╛роЯрпНроЯрпИ роХрогрпНроХро╛рогро┐роХрпНроХро╡рпБроорпН
azd monitor --overview

# ро╡ро│роЩрпНроХро│рпИ роЪрпБродрпНродроорпН роЪрпЖропрпНропро╡рпБроорпН
azd down --force --purge
```

## рокро┐ро┤рпИродрпНродро┐ро░рпБродрпНродроорпН

### рокро┐ро░роЪрпНроЪро┐ройрпИ: роХройрпНроЯрпЖропрпНройро░рпН родрпКроЯроЩрпНроХ роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ

```bash
# рокродро┐ро╡рпБроХро│рпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН
azd logs api --tail 100

# роХрогрпНроЯрпЖропрпНройро░рпН роиро┐роХро┤рпНро╡рпБроХро│рпИ рокро╛ро░рпНроХрпНроХро╡рпБроорпН
az containerapp revision show \
  --name api \
  --resource-group rg-myapp \
  --revision latest

# роЙро│рпНро│рпВро░ро┐ро▓рпН роЪрпЛродро┐роХрпНроХро╡рпБроорпН
docker build -t api:local ./src/api
docker run -p 8000:8000 api:local
```

### рокро┐ро░роЪрпНроЪро┐ройрпИ: роХройрпНроЯрпЖропрпНройро░рпН роЖрокрпН роОрогрпНроЯрпНрокро╛ропро┐рогрпНроЯрпИ роЕрогрпБроХ роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ

```bash
# роирпБро┤рпИро╡рпБ роХроЯрпНроЯроорпИрокрпНрокрпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН
az containerapp show \
  --name api \
  --resource-group rg-myapp \
  --query properties.configuration.ingress

# роЙро│рпНроиро╛роЯрпНроЯрпБ роирпБро┤рпИро╡рпБ роЗропроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родро╛ роОройрпНрокродрпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН
az containerapp ingress update \
  --name api \
  --resource-group rg-myapp \
  --external true
```

### рокро┐ро░роЪрпНроЪро┐ройрпИ: роЪрпЖропро▓рпНродро┐ро▒ройрпН роЪро┐роХрпНроХро▓рпНроХро│рпН

```bash
# ро╡ро│роЩрпНроХро│ро┐ройрпН рокропройрпНрокро╛роЯрпНроЯрпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН
az monitor metrics list \
  --resource $(azd show --output json | jq -r '.services.api.resourceId') \
  --metric "CPUPercentage,MemoryPercentage"

# ро╡ро│роЩрпНроХро│рпИ роЕродро┐роХро░ро┐роХрпНроХро╡рпБроорпН
az containerapp update \
  --name api \
  --resource-group rg-myapp \
  --cpu 2.0 \
  --memory 4Gi
```

## роХрпВроЯрпБродро▓рпН ро╡ро│роЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБроХро│рпН
- [роорпИроХрпНро░рпЛроЪро░рпНро╡рпАроЪро╕рпН роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБ](./microservices/README.md)
- [роОро│ро┐роп Flash API роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБ](./simple-flask-api/README.md)
- [Azure Container Apps роЖро╡рогроЩрпНроХро│рпН](https://learn.microsoft.com/azure/container-apps/)
- [AZD роЯрпЖроорпНрокрпНро│рпЗроЯрпНроХро│рпН роХрпЗро▓ро░ро┐](https://azure.github.io/awesome-azd/)
- [Container Apps роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБроХро│рпН](https://github.com/Azure-Samples/container-apps-samples)
- [Bicep роЯрпЖроорпНрокрпНро│рпЗроЯрпНроХро│рпН](https://learn.microsoft.com/azure/azure-resource-manager/bicep/)

## рокроЩрпНроХро│ро┐рокрпНрокрпБ

рокрпБродро┐роп роХройрпНроЯрпЖропрпНройро░рпН роЖрокрпН роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБроХро│рпИ рокроЩрпНроХро│ро┐роХрпНроХ:

1. роЙроЩрпНроХро│рпН роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБроЯройрпН роТро░рпБ рокрпБродро┐роп родрпБрогрпИ роЕроЯрпИро╡рпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН
2. роорпБро┤рпБроорпИропро╛рой `azure.yaml`, `infra/`, рооро▒рпНро▒рпБроорпН `src/` роХрпЛрокрпНрокрпБроХро│рпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН
3. роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпН ро╡ро┤ро┐роорпБро▒рпИроХро│рпБроЯройрпН ро╡ро┐ро░ро┐ро╡ро╛рой README роЪрпЗро░рпНроХрпНроХро╡рпБроорпН
4. `azd up` роорпВро▓роорпН роЯро┐рокрпНро│ро╛ропрпНроорпЖройрпНроЯрпИ роЪрпЛродро┐роХрпНроХро╡рпБроорпН
5. роТро░рпБ рокрпБро▓рпН роХрпЛро░ро┐роХрпНроХрпИропрпИ роЪрооро░рпНрокрпНрокро┐роХрпНроХро╡рпБроорпН

---

**роЙродро╡ро┐ родрпЗро╡рпИродро╛?** роЖродро░ро╡рпБ рооро▒рпНро▒рпБроорпН роХрпЗро│рпНро╡ро┐роХро│рпБроХрпНроХрпБ [Microsoft Foundry Discord](https://discord.gg/microsoft-azure) роЪроорпВроХродрпНродро┐ро▓рпН роЪрпЗро░ро╡рпБроорпН.

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**роХрпБро▒ро┐рокрпНрокрпБ**:  
роЗроирпНрод роЖро╡рогроорпН AI роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ роЪрпЗро╡рпИ [Co-op Translator](https://github.com/Azure/co-op-translator) рокропройрпНрокроЯрпБродрпНродро┐ роорпКро┤ро┐рокрпЖропро░рпНроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ. роиро╛роЩрпНроХро│рпН родрпБро▓рпНро▓ро┐ропродрпНродро┐ро▒рпНроХро╛роХ роорпБропро▒рпНроЪро┐роХрпНроХро┐ро▒рпЛроорпН, роЖройро╛ро▓рпН родро╛ройро┐ропроЩрпНроХро┐ роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБроХро│ро┐ро▓рпН рокро┐ро┤рпИроХро│рпН роЕро▓рпНро▓родрпБ родро╡ро▒рпБроХро│рпН роЗро░рпБроХрпНроХроХрпНроХрпВроЯрпБроорпН роОройрпНрокродрпИ роХро╡ройродрпНродро┐ро▓рпН роХрпКро│рпНро│ро╡рпБроорпН. роЕродройрпН родро╛ропрпНроорпКро┤ро┐ропро┐ро▓рпН роЙро│рпНро│ роорпВро▓ роЖро╡рогроорпН роЕродро┐роХро╛ро░рокрпНрокрпВро░рпНро╡ роЖродро╛ро░рооро╛роХ роХро░рпБродрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН. роорпБроХрпНроХро┐ропрооро╛рой родроХро╡ро▓рпНроХро│рпБроХрпНроХрпБ, родрпКро┤ро┐ро▓рпНроорпБро▒рпИ рооройро┐род роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ. роЗроирпНрод роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родро╛ро▓рпН роПро▒рпНрокроЯрпБроорпН роОроирпНрод родро╡ро▒ро╛рой рокрпБро░ро┐родро▓рпНроХро│рпН роЕро▓рпНро▓родрпБ родро╡ро▒ро╛рой ро╡ро┐ро│роХрпНроХроЩрпНроХро│рпБроХрпНроХрпБ роиро╛роЩрпНроХро│рпН рокрпКро▒рпБрокрпНрокро▓рпНро▓.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->