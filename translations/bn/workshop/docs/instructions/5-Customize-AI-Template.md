# рзл. ржПржХржЯрж┐ ржЯрзЗржоржкрзНрж▓рзЗржЯ ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рзБржи

!!! tip "ржПржЗ ржоржбрж┐ржЙрж▓ рж╢рзЗрж╖рзЗ ржЖржкржирж┐ рж╕ржХрзНрж╖ржо рж╣ржмрзЗржи"

    - [ ] ржбрж┐ржлрж▓рзНржЯ AI ржПржЬрзЗржирзНржЯрзЗрж░ ржХрзНрж╖ржорждрж╛ржЧрзБрж▓рж┐ ржЕржирзНржмрзЗрж╖ржг ржХрж░рзЗржЫрзЗржи
    - [ ] ржЖржкржирж╛рж░ ржирж┐ржЬрж╕рзНржм ржЗржиржбрзЗржХрзНрж╕ рж╕рж╣ AI рж╕рж╛рж░рзНржЪ ржпрзЛржЧ ржХрж░рзЗржЫрзЗржи
    - [ ] ржЯрзНрж░рзЗрж╕рж┐ржВ ржорзЗржЯрзНрж░рж┐ржХрж╕ рж╕ржХрзНрж░рж┐ржпрж╝ ржПржмржВ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзЗржЫрзЗржи
    - [ ] ржПржХржЯрж┐ ржорзВрж▓рзНржпрж╛ржпрж╝ржи рж░рж╛ржи рж╕ржорзНржкржирзНржи ржХрж░рзЗржЫрзЗржи
    - [ ] ржПржХржЯрж┐ рж░рзЗржб-ржЯрж┐ржорж┐ржВ рж╕рзНржХрзНржпрж╛ржи рж╕ржорзНржкржирзНржи ржХрж░рзЗржЫрзЗржи
    - [ ] **рж▓рзНржпрж╛ржм рзл: ржПржХржЯрж┐ ржХрж╛рж╕рзНржЯржорж╛ржЗржЬрзЗрж╢ржи ржкрж░рж┐ржХрж▓рзНржкржирж╛ рждрзИрж░рж┐ ржХрж░рзЗржЫрзЗржи** 

---

## рзл.рзз AI ржПржЬрзЗржирзНржЯрзЗрж░ ржХрзНрж╖ржорждрж╛рж╕ржорзВрж╣

!!! success "ржЖржорж░рж╛ ржПржЯрж┐ рж▓рзНржпрж╛ржм рзжрзз-ржП рж╕ржорзНржкржирзНржи ржХрж░рзЗржЫрж┐"

- **ржлрж╛ржЗрж▓ рж╕рж╛рж░рзНржЪ**: OpenAI-ржПрж░ ржЕржирзНрждрж░рзНржирж┐рж░рзНржорж┐ржд ржлрж╛ржЗрж▓ рж╕рж╛рж░рзНржЪ ржЬрзНржЮрж╛ржи ржкрзБржирж░рзБржжрзНржзрж╛рж░рзЗрж░ ржЬржирзНржп
- **ржЙржжрзНржзрзГрждрж┐**: ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ржЧрзБрж▓рж┐рждрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЙрзОрж╕ ржЙрж▓рзНрж▓рзЗржЦ
- **ржХрж╛рж╕рзНржЯржорж╛ржЗржЬржпрзЛржЧрзНржп ржирж┐рж░рзНржжрзЗрж╢рж╛ржмрж▓рзА**: ржПржЬрзЗржирзНржЯрзЗрж░ ржЖржЪрж░ржг ржПржмржВ ржмрзНржпржХрзНрждрж┐рждрзНржм ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи
- **ржЯрзБрж▓ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи**: ржХрж╛рж╕рзНржЯржо ржХрзНрж╖ржорждрж╛рж░ ржЬржирзНржп рж╕ржорзНржкрзНрж░рж╕рж╛рж░ржгржпрзЛржЧрзНржп ржЯрзБрж▓ рж╕рж┐рж╕рзНржЯрзЗржо

---

## рзл.рзи ржЬрзНржЮрж╛ржи ржкрзБржирж░рзБржжрзНржзрж╛рж░рзЗрж░ ржмрж┐ржХрж▓рзНржкрж╕ржорзВрж╣

!!! task "ржПржЯрж┐ рж╕ржорзНржкржирзНржи ржХрж░рждрзЗ ржЖржорж╛ржжрзЗрж░ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ рж╣ржмрзЗ ржПржмржВ ржкрзБржирж░рж╛ржпрж╝ ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рждрзЗ рж╣ржмрзЗ"    
    
    ```bash title=""
    # ржкрж░рж┐ржмрзЗрж╢ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ рж╕рзЗржЯ ржХрж░рзБржи
    azd env set USE_AZURE_AI_SEARCH_SERVICE true
    azd env set AZURE_AI_EMBED_MODEL_NAME "text-embedding-3-large"
    azd env set AZURE_AI_EMBED_DEPLOYMENT_NAME "embeddings-large"
    azd env set AZURE_AI_EMBED_DEPLOYMENT_CAPACITY 75
    azd env set AZURE_AI_SEARCH_INDEX_NAME "retail-products"

    # ржбрзЗржЯрж╛ ржЖржкрж▓рзЛржб ржХрж░рзБржи ржПржмржВ ржЖржорж╛рж░ ржЗржиржбрзЗржХрзНрж╕ рждрзИрж░рж┐ ржХрж░рзБржи

    ```

---

**OpenAI ржлрж╛ржЗрж▓ рж╕рж╛рж░рзНржЪ (ржбрж┐ржлрж▓рзНржЯ):**

- Azure AI ржПржЬрзЗржирзНржЯ ржкрж░рж┐рж╖рзЗржмрж╛рждрзЗ ржЕржирзНрждрж░рзНржнрзБржХрзНржд
- рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржбржХрзБржорзЗржирзНржЯ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ ржПржмржВ ржЗржиржбрзЗржХрзНрж╕рж┐ржВ
- ржЕрждрж┐рж░рж┐ржХрзНржд ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржкрзНрж░ржпрж╝рзЛржЬржи ржирзЗржЗ

**Azure AI рж╕рж╛рж░рзНржЪ (ржРржЪрзНржЫрж┐ржХ):**

- рж╣рж╛ржЗржмрзНрж░рж┐ржб рж╕рзЗржорж╛ржирзНржЯрж┐ржХ ржПржмржВ ржнрзЗржХрзНржЯрж░ рж╕рж╛рж░рзНржЪ
- ржХрж╛рж╕рзНржЯржо ржЗржиржбрзЗржХрзНрж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
- ржЙржирзНржиржд рж╕рж╛рж░рзНржЪ ржХрзНрж╖ржорждрж╛
- `USE_AZURE_AI_SEARCH_SERVICE=true` ржкрзНрж░ржпрж╝рзЛржЬржи

---

## рзл.рзй [ржЯрзНрж░рзЗрж╕рж┐ржВ ржПржмржВ ржоржирж┐ржЯрж░рж┐ржВ](https://github.com/Azure-Samples/get-started-with-ai-agents/blob/main/docs/other_features.md#tracing-and-monitoring)

!!! task "ржПржЯрж┐ рж╕ржорзНржкржирзНржи ржХрж░рждрзЗ ржЖржорж╛ржжрзЗрж░ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ рж╣ржмрзЗ ржПржмржВ ржкрзБржирж░рж╛ржпрж╝ ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рждрзЗ рж╣ржмрзЗ"    
    
    ```bash title=""
    azd env set ENABLE_AZURE_MONITOR_TRACING true
    azd deploy
    ```

**ржЯрзНрж░рзЗрж╕рж┐ржВ:**

- OpenTelemetry ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи
- ржЕржирзБрж░рзЛржз/ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
- ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржорзЗржЯрзНрж░рж┐ржХрж╕
- AI Foundry ржкрзЛрж░рзНржЯрж╛рж▓рзЗ ржЙржкрж▓ржмрзНржз

**рж▓ржЧрж┐ржВ:**

- Container Apps-ржП ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж▓ржЧ
- рж╕ржорзНржкрж░рзНржХрж┐ржд ржЖржЗржбрж┐ рж╕рж╣ ржХрж╛ржарж╛ржорзЛржЧржд рж▓ржЧрж┐ржВ
- рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржПржмржВ ржРрждрж┐рж╣рж╛рж╕рж┐ржХ рж▓ржЧ ржжрзЗржЦрж╛рж░ рж╕рзБржмрж┐ржзрж╛

---

## рзл.рзк [ржПржЬрзЗржирзНржЯ ржорзВрж▓рзНржпрж╛ржпрж╝ржи](https://github.com/Azure-Samples/get-started-with-ai-agents/blob/main/docs/other_features.md#agent-evaluation)

**рж▓рзЛржХрж╛рж▓ ржорзВрж▓рзНржпрж╛ржпрж╝ржи:**

- ржЧрзБржгржорж╛ржи ржорзВрж▓рзНржпрж╛ржпрж╝ржирзЗрж░ ржЬржирзНржп ржЕржирзНрждрж░рзНржирж┐рж░рзНржорж┐ржд ржЗржнрзНржпрж╛рж▓рзБржпрж╝рзЗржЯрж░
- ржХрж╛рж╕рзНржЯржо ржорзВрж▓рзНржпрж╛ржпрж╝ржи рж╕рзНржХрзНрж░рж┐ржкрзНржЯ
- ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржмрзЗржЮрзНржЪржорж╛рж░рзНржХрж┐ржВ

**ржирж┐рж░ржмржЪрзНржЫрж┐ржирзНржи ржоржирж┐ржЯрж░рж┐ржВ:**

- рж▓рж╛ржЗржн ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрж╢ржирзЗрж░ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржорзВрж▓рзНржпрж╛ржпрж╝ржи
- ржЧрзБржгржорж╛ржи ржорзЗржЯрзНрж░рж┐ржХрж╕ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
- ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ рж░рж┐ржЧрзНрж░рзЗрж╢ржи рж╕ржирж╛ржХрзНрждржХрж░ржг

**CI/CD ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи:**

- GitHub Actions ржУржпрж╝рж╛рж░рзНржХржлрзНрж▓рзЛ
- рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЯрзЗрж╕рзНржЯрж┐ржВ ржПржмржВ ржорзВрж▓рзНржпрж╛ржпрж╝ржи
- ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржиржЧржд рждрзБрж▓ржирж╛ ржкрж░рзАржХрзНрж╖рж╛

---

## рзл.рзл [AI рж░рзЗржб ржЯрж┐ржорж┐ржВ ржПржЬрзЗржирзНржЯ](https://github.com/Azure-Samples/get-started-with-ai-agents/blob/main/docs/other_features.md#ai-red-teaming-agent)

**AI рж░рзЗржб ржЯрж┐ржорж┐ржВ:**

- рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржирж┐рж░рж╛ржкрждрзНрждрж╛ рж╕рзНржХрзНржпрж╛ржирж┐ржВ
- AI рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржЬржирзНржп ржЭрзБржБржХрж┐ ржорзВрж▓рзНржпрж╛ржпрж╝ржи
- ржПржХрж╛ржзрж┐ржХ ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐рждрзЗ ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржорзВрж▓рзНржпрж╛ржпрж╝ржи

**ржкрзНрж░ржорж╛ржгрзАржХрж░ржг:**

- Azure ржкрж░рж┐рж╖рзЗржмрж╛рж░ ржЬржирзНржп ржорзНржпрж╛ржирзЗржЬржб ржЖржЗржбрзЗржирзНржЯрж┐ржЯрж┐
- ржРржЪрзНржЫрж┐ржХ Azure App Service ржкрзНрж░ржорж╛ржгрзАржХрж░ржг
- ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗрж░ ржЬржирзНржп ржмрзЗрж╕рж┐ржХ ржЕржеFallback

!!! quote "ржПржЗ рж▓рзНржпрж╛ржм рж╢рзЗрж╖рзЗ ржЖржкржирж╛рж░ ржпрж╛ рж╕ржорзНржкржирзНржи рж╣ржмрзЗ"
    - [ ] ржЖржкржирж╛рж░ ржжрзГрж╢рзНржпржкржЯрзЗрж░ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝рждрж╛ рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржХрж░рзЗржЫрзЗржи
    - [ ] ржкрж░рж┐ржмрзЗрж╢ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рзЗржЫрзЗржи (ржХржиржлрж┐ржЧ)
    - [ ] ржПржЬрзЗржирзНржЯ ржирж┐рж░рзНржжрзЗрж╢рж╛ржмрж▓рзА ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рзЗржЫрзЗржи (ржЯрж╛рж╕рзНржХ)
    - [ ] ржХрж╛рж╕рзНржЯржорж╛ржЗржЬржб ржЯрзЗржоржкрзНрж▓рзЗржЯ ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рзЗржЫрзЗржи (ржЕрзНржпрж╛ржк)
    - [ ] ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯ-ржкрж░ржмрж░рзНрждрзА ржХрж╛ржЬ рж╕ржорзНржкржирзНржи ржХрж░рзЗржЫрзЗржи (ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓)
    - [ ] ржПржХржЯрж┐ ржЯрзЗрж╕рзНржЯ ржорзВрж▓рзНржпрж╛ржпрж╝ржи ржЪрж╛рж▓рж┐ржпрж╝рзЗржЫрзЗржи

ржПржЗ ржЙржжрж╛рж╣рж░ржгржЯрж┐ ржПржХржЯрж┐ ржПржирзНржЯрж╛рж░ржкрзНрж░рж╛ржЗржЬ рж░рж┐ржЯрзЗржЗрж▓ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржжрзБржЯрж┐ ржмрж┐рж╢рзЗрж╖рж╛ржпрж╝рж┐ржд ржПржЬрзЗржирзНржЯ ржПржмржВ ржПржХрж╛ржзрж┐ржХ ржоржбрзЗрж▓ ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯ рж╕рж╣ ржЯрзЗржоржкрзНрж▓рзЗржЯ ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рж╛рж░ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗред

---

## рзл.рзм ржПржЯрж┐ ржЖржкржирж╛рж░ ржЬржирзНржп ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рзБржи!

### рзл.рзм.рзз. ржжрзГрж╢рзНржпржкржЯрзЗрж░ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝рждрж╛

#### **ржПржЬрзЗржирзНржЯ ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯрж╕:** 

   - рж╢ржкрж╛рж░ ржПржЬрзЗржирзНржЯ: ржЧрзНрж░рж╛рж╣ржХржжрзЗрж░ ржкржгрзНржп ржЦрзБржБржЬрзЗ ржкрзЗрждрзЗ ржПржмржВ рждрзБрж▓ржирж╛ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ
   - рж▓ржпрж╝рзНржпрж╛рж▓ржЯрж┐ ржПржЬрзЗржирзНржЯ: ржЧрзНрж░рж╛рж╣ржХрзЗрж░ ржкрзБрж░рж╕рзНржХрж╛рж░ ржПржмржВ ржкрзНрж░ржЪрж╛рж░ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рзЗ

#### **ржоржбрзЗрж▓ ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯрж╕:**

   - `gpt-4.1`: ржкрзНрж░рж╛ржержорж┐ржХ ржЪрзНржпрж╛ржЯ ржоржбрзЗрж▓
   - `o3`: ржЬржЯрж┐рж▓ ржкрзНрж░рж╢рзНржирзЗрж░ ржЬржирзНржп рж░рж┐ржЬржирж┐ржВ ржоржбрзЗрж▓
   - `gpt-4.1-nano`: рж╕рж╛ржзрж╛рж░ржг ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрж╢ржирзЗрж░ ржЬржирзНржп рж╣рж╛рж▓ржХрж╛ ржоржбрзЗрж▓
   - `text-embedding-3-large`: рж╕рж╛рж░рзНржЪрзЗрж░ ржЬржирзНржп ржЙржЪрзНржЪ-ржЧрзБржгржорж╛ржирзЗрж░ ржПржоржмрзЗржбрж┐ржВ

#### **ржмрзИрж╢рж┐рж╖рзНржЯрзНржпрж╕ржорзВрж╣:**

   - ржЯрзНрж░рзЗрж╕рж┐ржВ ржПржмржВ ржоржирж┐ржЯрж░рж┐ржВ рж╕ржХрзНрж░рж┐ржпрж╝
   - ржкржгрзНржп ржХрзНржпрж╛ржЯрж╛рж▓ржЧрзЗрж░ ржЬржирзНржп AI рж╕рж╛рж░рзНржЪ
   - ржЧрзБржгржорж╛ржи ржирж┐рж╢рзНржЪрж┐рждржХрж░ржгрзЗрж░ ржЬржирзНржп ржорзВрж▓рзНржпрж╛ржпрж╝ржи ржХрж╛ржарж╛ржорзЛ
   - ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржпрж╛ржЪрж╛ржЗржпрж╝рзЗрж░ ржЬржирзНржп рж░рзЗржб ржЯрж┐ржорж┐ржВ

---

### рзл.рзм.рзи ржжрзГрж╢рзНржпржкржЯ ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржи

#### рзл.рзм.рзи.рзз. ржкрзНрж░рж┐-ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯ ржХржиржлрж┐ржЧ

`setup-retail.sh` ржирж╛ржорзЗ ржПржХржЯрж┐ рж╕рзЗржЯржЖржк рж╕рзНржХрзНрж░рж┐ржкрзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи

```bash title="" linenums="0"
#!/bin/bash

# Set environment name
azd env set AZURE_ENV_NAME "retail-ai-agents"

# Configure region (choose based on model availability)
azd env set AZURE_LOCATION "eastus2"

# Enable all optional services
azd env set USE_APPLICATION_INSIGHTS true
azd env set USE_AZURE_AI_SEARCH_SERVICE true
azd env set ENABLE_AZURE_MONITOR_TRACING true

# Configure primary chat model (gpt-4o as closest available to gpt-4.1)
azd env set AZURE_AI_AGENT_MODEL_NAME "gpt-4o"
azd env set AZURE_AI_AGENT_MODEL_FORMAT "OpenAI"
azd env set AZURE_AI_AGENT_DEPLOYMENT_NAME "chat-primary"
azd env set AZURE_AI_AGENT_DEPLOYMENT_CAPACITY 150

# Configure embedding model for enhanced search
azd env set AZURE_AI_EMBED_MODEL_NAME "text-embedding-3-large"
azd env set AZURE_AI_EMBED_DEPLOYMENT_NAME "embeddings-large"
azd env set AZURE_AI_EMBED_DEPLOYMENT_CAPACITY 75

# Set agent name (will create first agent)
azd env set AZURE_AI_AGENT_NAME "shopper-agent"

# Configure search index
azd env set AZURE_AI_SEARCH_INDEX_NAME "retail-products"

echo "Environment configured for retail deployment"
echo "Recommended quota: 300,000+ TPM across all models"
```

---

#### рзл.рзм.рзи.рзи: ржПржЬрзЗржирзНржЯ ржирж┐рж░рзНржжрзЗрж╢рж╛ржмрж▓рзА

`custom-agents/shopper-agent-instructions.md` рждрзИрж░рж┐ ржХрж░рзБржи:

```markdown
# Shopper Agent Instructions

You are a helpful shopping assistant for an enterprise retail company. Your role is to:

1. **Product Discovery**: Help customers find products that match their needs
2. **Comparison**: Provide detailed product comparisons with pros/cons
3. **Recommendations**: Suggest complementary products and alternatives
4. **Inventory**: Check product availability and delivery options

## Guidelines:
- Always provide citations from the product catalog
- Be conversational and helpful
- Ask clarifying questions to understand customer needs
- Mention relevant promotions when appropriate
- Escalate complex warranty or return questions to human agents

## Knowledge Base:
You have access to our complete product catalog including specifications, pricing, reviews, and inventory levels.
```

`custom-agents/loyalty-agent-instructions.md` рждрзИрж░рж┐ ржХрж░рзБржи:

```markdown
# Loyalty Agent Instructions

You are a customer loyalty specialist focused on maximizing customer satisfaction and retention. Your responsibilities include:

1. **Rewards Management**: Explain point values, redemption options, and tier benefits
2. **Promotions**: Identify applicable discounts and special offers
3. **Program Navigation**: Help customers understand loyalty program features
4. **Account Support**: Assist with account-related questions and updates

## Guidelines:
- Prioritize customer satisfaction and retention
- Explain complex program rules in simple terms
- Proactively identify opportunities for customers to save money
- Celebrate customer milestones and achievements
- Connect customers with shopper agent for product questions

## Knowledge Base:
You have access to loyalty program rules, current promotions, customer tier information, and reward catalogs.
```

---

#### рзл.рзм.рзи.рзй: ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ

`deploy-retail.sh` рждрзИрж░рж┐ ржХрж░рзБржи:

```bash title="" linenums="0"
#!/bin/bash
set -e

echo "ЁЯЪА Starting Enterprise Retail AI Agents deployment..."

# Validate prerequisites
echo "ЁЯУЛ Validating prerequisites..."
if ! command -v azd &> /dev/null; then
    echo "тЭМ Azure Developer CLI (azd) is required"
    exit 1
fi

if ! az account show &> /dev/null; then
    echo "тЭМ Please login to Azure CLI: az login"
    exit 1
fi

# Set up environment
echo "ЁЯФз Configuring deployment environment..."
chmod +x setup-retail.sh
./setup-retail.sh

# Check quota in selected region
echo "ЁЯУК Checking quota availability..."
LOCATION=$(azd env get-values | grep AZURE_LOCATION | cut -d'=' -f2 | tr -d '"')
echo "Deploying to region: $LOCATION"
echo "тЪая╕П  Please verify you have 300,000+ TPM quota for:"
echo "   - gpt-4o: 150,000 TPM"
echo "   - text-embedding-3-large: 75,000 TPM"
echo "   - Additional models: 75,000+ TPM"

read -p "Continue with deployment? (y/N): " -n 1 -r
echo
if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    echo "Deployment cancelled"
    exit 1
fi

# Deploy infrastructure and application
echo "ЁЯПЧя╕П  Deploying Azure infrastructure..."
azd up

# Capture deployment outputs
echo "ЁЯУЭ Capturing deployment information..."
azd show > deployment-info.txt

# Get the web app URL
APP_URL=$(azd show --output json | jq -r '.services.api_and_frontend.project.target.url // empty')

if [ ! -z "$APP_URL" ]; then
    echo "тЬЕ Deployment completed successfully!"
    echo "ЁЯМР Web Application: $APP_URL"
    echo "ЁЯФН Azure Portal: Run 'azd show' for resource group link"
    echo "ЁЯУК AI Foundry Portal: https://ai.azure.com"
else
    echo "тЪая╕П  Deployment completed but unable to retrieve URL"
    echo "Run 'azd show' for deployment details"
fi

echo "ЁЯУЪ Next steps:"
echo "1. Create second agent (Loyalty Agent) in AI Foundry portal"
echo "2. Upload product catalog to search index"
echo "3. Configure custom agent instructions"
echo "4. Test both agents with sample queries"
```

---

#### рзл.рзм.рзи.рзк: ржкрзЛрж╕рзНржЯ-ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯ ржХржиржлрж┐ржЧ

`configure-retail-agents.sh` рждрзИрж░рж┐ ржХрж░рзБржи:

```bash title="" linenums="0"
#!/bin/bash

echo "ЁЯФз Configuring retail agents..."

# Get deployment information
PROJECT_ENDPOINT=$(azd env get-values | grep AZURE_EXISTING_AIPROJECT_ENDPOINT | cut -d'=' -f2 | tr -d '"')
AGENT_ID=$(azd env get-values | grep AZURE_EXISTING_AGENT_ID | cut -d'=' -f2 | tr -d '"')

echo "Project Endpoint: $PROJECT_ENDPOINT"
echo "Primary Agent ID: $AGENT_ID"

# Instructions for manual configuration
echo "
ЁЯдЦ Agent Configuration:

1. **Update Shopper Agent Instructions:**
   - Go to AI Foundry portal: https://ai.azure.com
   - Navigate to your project
   - Select Agents tab
   - Edit the existing agent
   - Update instructions with content from custom-agents/shopper-agent-instructions.md

2. **Create Loyalty Agent:**
   - In Agents tab, click 'Create Agent'
   - Name: 'loyalty-agent'
   - Model: Use same deployment as shopper agent
   - Instructions: Use content from custom-agents/loyalty-agent-instructions.md
   - Enable file search tool
   - Save and note the Agent ID

3. **Upload Knowledge Base:**
   - Prepare product catalog files (JSON/CSV format)
   - Upload to both agents' file search
   - Or configure Azure AI Search index

4. **Test Configuration:**
   - Test shopper agent with product queries
   - Test loyalty agent with rewards questions
   - Verify citations and search functionality

ЁЯУК Monitoring Setup:
- Tracing: Available in AI Foundry > Tracing tab
- Logs: Azure Portal > Container Apps > Monitoring > Log Stream
- Evaluation: Run python evals/evaluate.py

ЁЯФТ Security Validation:
- Run red teaming: python airedteaming/ai_redteaming.py
- Review security recommendations
- Configure authentication if needed
"
```

### рзл.рзм.рзй: ржЯрзЗрж╕рзНржЯрж┐ржВ ржПржмржВ ржпрж╛ржЪрж╛ржЗ

`test-retail-deployment.sh` рждрзИрж░рж┐ ржХрж░рзБржи:

```bash title="" linenums="0"
#!/bin/bash

echo "ЁЯзк Testing retail deployment..."

# Verify environment variables are set
echo "ЁЯУЛ Checking environment configuration..."
azd env get-values | grep -E "(AZURE_AI_|USE_|ENABLE_)"

# Test web application availability
APP_URL=$(azd show --output json | jq -r '.services.api_and_frontend.project.target.url // empty')
if [ ! -z "$APP_URL" ]; then
    echo "ЁЯМР Testing web application at: $APP_URL"
    HTTP_STATUS=$(curl -s -o /dev/null -w "%{http_code}" "$APP_URL")
    if [ "$HTTP_STATUS" = "200" ]; then
        echo "тЬЕ Web application is responding"
    else
        echo "тЭМ Web application returned status: $HTTP_STATUS"
    fi
else
    echo "тЭМ Could not retrieve web application URL"
fi

# Run evaluation if configured
if [ -f "evals/evaluate.py" ]; then
    echo "ЁЯУК Running agent evaluation..."
    cd evals
    python -m pip install -r ../src/requirements.txt
    python -m pip install azure-ai-evaluation
    python evaluate.py
    cd ..
fi

echo "
ЁЯОп Deployment validation complete!

Next steps:
1. Access the web application and test basic functionality
2. Create the second agent (Loyalty Agent) in AI Foundry portal
3. Upload your product catalog and loyalty program data
4. Configure agent instructions for your specific use case
5. Run comprehensive testing with your retail scenarios
"
```

---

### рзл.рзм.рзк ржкрзНрж░рждрзНржпрж╛рж╢рж┐ржд ржлрж▓рж╛ржлрж▓

ржПржЗ ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржи ржирж┐рж░рзНржжрзЗрж╢рж┐ржХрж╛ ржЕржирзБрж╕рж░ржг ржХрж░рж╛рж░ ржкрж░рзЗ, ржЖржкржирж╛рж░ ржерж╛ржХржмрзЗ:

1. **ржбрж┐ржкрзНрж▓ржпрж╝ржб ржЕржмржХрж╛ржарж╛ржорзЛ:**

      - ржоржбрзЗрж▓ ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯ рж╕рж╣ AI Foundry ржкрзНрж░ржХрж▓рзНржк
      - ржУржпрж╝рзЗржм ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╣рзЛрж╕рзНржЯ ржХрж░рж╛рж░ ржЬржирзНржп Container Apps
      - ржкржгрзНржп ржХрзНржпрж╛ржЯрж╛рж▓ржЧрзЗрж░ ржЬржирзНржп AI рж╕рж╛рж░рзНржЪ ржкрж░рж┐рж╖рзЗржмрж╛
      - ржоржирж┐ржЯрж░рж┐ржВржпрж╝рзЗрж░ ржЬржирзНржп Application Insights

2. **ржкрзНрж░рж╛ржержорж┐ржХ ржПржЬрзЗржирзНржЯ:**

      - рж╢ржкрж╛рж░ ржПржЬрзЗржирзНржЯ ржкрзНрж░рж╛ржержорж┐ржХ ржирж┐рж░рзНржжрзЗрж╢рж╛ржмрж▓рзА рж╕рж╣ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛
      - ржлрж╛ржЗрж▓ рж╕рж╛рж░рзНржЪ ржХрзНрж╖ржорждрж╛ рж╕ржХрзНрж░рж┐ржпрж╝
      - ржЯрзНрж░рзЗрж╕рж┐ржВ ржПржмржВ ржоржирж┐ржЯрж░рж┐ржВ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛

3. **ржХрж╛рж╕рзНржЯржорж╛ржЗржЬрзЗрж╢ржирзЗрж░ ржЬржирзНржп ржкрзНрж░рж╕рзНрждрзБржд:**

      - рж▓ржпрж╝рзНржпрж╛рж▓ржЯрж┐ ржПржЬрзЗржирзНржЯ ржпрзЛржЧ ржХрж░рж╛рж░ ржХрж╛ржарж╛ржорзЛ
      - ржХрж╛рж╕рзНржЯржо ржирж┐рж░рзНржжрзЗрж╢рж╛ржмрж▓рзАрж░ ржЯрзЗржоржкрзНрж▓рзЗржЯ
      - ржЯрзЗрж╕рзНржЯрж┐ржВ ржПржмржВ ржпрж╛ржЪрж╛ржЗ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ
      - ржоржирж┐ржЯрж░рж┐ржВ ржПржмржВ ржорзВрж▓рзНржпрж╛ржпрж╝ржи рж╕рзЗржЯржЖржк

4. **ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржкрзНрж░рж╕рзНрждрзБрждрж┐:**

      - рж░рзЗржб ржЯрж┐ржорж┐ржВ рж╕рж╣ ржирж┐рж░рж╛ржкрждрзНрждрж╛ рж╕рзНржХрзНржпрж╛ржирж┐ржВ
      - ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржоржирж┐ржЯрж░рж┐ржВ
      - ржЧрзБржгржорж╛ржи ржорзВрж▓рзНржпрж╛ржпрж╝ржи ржХрж╛ржарж╛ржорзЛ
      - рж╕рзНржХрзЗрж▓ржпрзЛржЧрзНржп ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░

ржПржЗ ржЙржжрж╛рж╣рж░ржгржЯрж┐ ржжрзЗржЦрж╛ржпрж╝ ржХрж┐ржнрж╛ржмрзЗ AZD ржЯрзЗржоржкрзНрж▓рзЗржЯ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржирзНржЯрж╛рж░ржкрзНрж░рж╛ржЗржЬ ржжрзГрж╢рзНржпржкржЯрзЗрж░ ржЬржирзНржп ржкрзНрж░рж╕рж╛рж░рж┐ржд ржПржмржВ ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рж╛ ржпрж╛ржпрж╝, ржирж┐рж░рж╛ржкрждрзНрждрж╛, ржоржирж┐ржЯрж░рж┐ржВ ржПржмржВ рж╕рзНржХрзЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐рж░ ржЬржирзНржп рж╕рзЗрж░рж╛ ржЕржирзБрж╢рзАрж▓ржи ржмржЬрж╛ржпрж╝ рж░рзЗржЦрзЗред

---

