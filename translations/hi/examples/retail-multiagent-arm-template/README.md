# рд░рд┐рдЯреЗрд▓ рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ рд╕рдорд╛рдзрд╛рди - рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ

**рдЕрдзреНрдпрд╛рдп 5: рдкреНрд░реЛрдбрдХреНрд╢рди рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдкреИрдХреЗрдЬ**
- **ЁЯУЪ рдХреЛрд░реНрд╕ рд╣реЛрдо**: [AZD рдлреЙрд░ рдмрд┐рдЧрд┐рдирд░реНрд╕](../../README.md)
- **ЁЯУЦ рд╕рдВрдмрдВрдзрд┐рдд рдЕрдзреНрдпрд╛рдп**: [рдЕрдзреНрдпрд╛рдп 5: рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ AI рд╕рдорд╛рдзрд╛рди](../../README.md#-chapter-5-multi-agent-ai-solutions-advanced)
- **ЁЯУЭ рдкрд░рд┐рджреГрд╢реНрдп рдЧрд╛рдЗрдб**: [рдкреВрд░реНрдг рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░](../retail-scenario.md)
- **ЁЯОп рддреНрд╡рд░рд┐рдд рдбрд┐рдкреНрд▓реЙрдп**: [рд╡рди-рдХреНрд▓рд┐рдХ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ](../../../../examples/retail-multiagent-arm-template)

> **тЪая╕П рдХреЗрд╡рд▓ рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ**  
> рдпрд╣ ARM рдЯреЗрдореНрдкрд▓реЗрдЯ **Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ** рдХреЛ рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд▓рд┐рдП рдбрд┐рдкреНрд▓реЙрдп рдХрд░рддрд╛ рд╣реИред  
>  
> **рдХреНрдпрд╛ рдбрд┐рдкреНрд▓реЙрдп рд╣реЛрддрд╛ рд╣реИ (15-25 рдорд┐рдирдЯ):**
> - тЬЕ Azure OpenAI (GPT-4o, GPT-4o-mini, рддреАрди рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ рдПрдореНрдмреЗрдбрд┐рдВрдЧ)
> - тЬЕ AI рд╕рд░реНрдЪ рд╕реЗрд╡рд╛ (рдЦрд╛рд▓реА, рдЗрдВрдбреЗрдХреНрд╕ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░)
> - тЬЕ рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ (рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рдЗрдореЗрдЬ, рдЖрдкрдХреЗ рдХреЛрдб рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░)
> - тЬЕ рд╕реНрдЯреЛрд░реЗрдЬ, Cosmos DB, Key Vault, Application Insights
>  
> **рдХреНрдпрд╛ рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ рд╣реИ (рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ):**
> - тЭМ рдПрдЬреЗрдВрдЯ рдЗрдореНрдкреНрд▓реАрдореЗрдВрдЯреЗрд╢рди рдХреЛрдб (рдХрд╕реНрдЯрдорд░ рдПрдЬреЗрдВрдЯ, рдЗрдиреНрд╡реЗрдВрдЯрд░реА рдПрдЬреЗрдВрдЯ)
> - тЭМ рд░реВрдЯрд┐рдВрдЧ рд▓реЙрдЬрд┐рдХ рдФрд░ API рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕
> - тЭМ рдлреНрд░рдВрдЯрдПрдВрдб рдЪреИрдЯ UI
> - тЭМ рд╕рд░реНрдЪ рдЗрдВрдбреЗрдХреНрд╕ рд╕реНрдХреАрдорд╛ рдФрд░ рдбреЗрдЯрд╛ рдкрд╛рдЗрдкрд▓рд╛рдЗрдиреНрд╕
> - тЭМ **рдЕрдиреБрдорд╛рдирд┐рдд рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдкреНрд░рдпрд╛рд╕: 80-120 рдШрдВрдЯреЗ**
>  
> **рдЗрд╕ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдпрджрд┐:**
> - тЬЕ рдЖрдк рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП Azure рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдкреНрд░реЛрд╡рд┐рдЬрди рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ
> - тЬЕ рдЖрдк рдПрдЬреЗрдВрдЯ рдЗрдореНрдкреНрд▓реАрдореЗрдВрдЯреЗрд╢рди рдХреЛ рдЕрд▓рдЧ рд╕реЗ рдбреЗрд╡рд▓рдк рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ
> - тЬЕ рдЖрдкрдХреЛ рдкреНрд░реЛрдбрдХреНрд╢рди-рд░реЗрдбреА рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдмреЗрд╕рд▓рд╛рдЗрди рдЪрд╛рд╣рд┐рдП
>  
> **рдЙрдкрдпреЛрдЧ рди рдХрд░реЗрдВ рдпрджрд┐:**
> - тЭМ рдЖрдк рддреБрд░рдВрдд рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ рдбреЗрдореЛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ
> - тЭМ рдЖрдк рдкреВрд░реНрдг рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рдЙрджрд╛рд╣рд░рдг рдЪрд╛рд╣рддреЗ рд╣реИрдВ

## рдЕрд╡рд▓реЛрдХрди

рдпрд╣ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ рдХрд╕реНрдЯрдорд░ рд╕рдкреЛрд░реНрдЯ рд╕рд┐рд╕реНрдЯрдо рдХреЗ **рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдлрд╛рдЙрдВрдбреЗрд╢рди** рдХреЛ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реНрдпрд╛рдкрдХ Azure Resource Manager (ARM) рдЯреЗрдореНрдкрд▓реЗрдЯ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИред рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдкреНрд░реЛрд╡рд┐рдЬрди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдФрд░ рдЗрдВрдЯрд░рдХрдиреЗрдХреНрдЯреЗрдб рд╣реИрдВ, рдЖрдкрдХреА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВред

**рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреЗ рдмрд╛рдж рдЖрдкрдХреЗ рдкрд╛рд╕ рд╣реЛрдЧрд╛:** рдкреНрд░реЛрдбрдХреНрд╢рди-рд░реЗрдбреА Azure рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░  
**рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЪрд╛рд╣рд┐рдП:** рдПрдЬреЗрдВрдЯ рдХреЛрдб, рдлреНрд░рдВрдЯрдПрдВрдб UI, рдФрд░ рдбреЗрдЯрд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди (рджреЗрдЦреЗрдВ [рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдЧрд╛рдЗрдб](../retail-scenario.md))

## ЁЯОп рдХреНрдпрд╛ рдбрд┐рдкреНрд▓реЙрдп рд╣реЛрддрд╛ рд╣реИ

### рдХреЛрд░ рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ (рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреЗ рдмрд╛рдж рдХреА рд╕реНрдерд┐рддрд┐)

тЬЕ **Azure OpenAI рд╕реЗрд╡рд╛рдПрдВ** (API рдХреЙрд▓реНрд╕ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░)
  - рдкреНрд░рд╛рдердорд┐рдХ рдХреНрд╖реЗрддреНрд░: GPT-4o рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ (20K TPM рдХреНрд╖рдорддрд╛)
  - рджреНрд╡рд┐рддреАрдпрдХ рдХреНрд╖реЗрддреНрд░: GPT-4o-mini рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ (10K TPM рдХреНрд╖рдорддрд╛)
  - рддреГрддреАрдпрдХ рдХреНрд╖реЗрддреНрд░: рдЯреЗрдХреНрд╕реНрдЯ рдПрдореНрдмреЗрдбрд┐рдВрдЧ рдореЙрдбрд▓ (30K TPM рдХреНрд╖рдорддрд╛)
  - рдореВрд▓реНрдпрд╛рдВрдХрди рдХреНрд╖реЗрддреНрд░: GPT-4o рдЧреНрд░реЗрдбрд░ рдореЙрдбрд▓ (15K TPM рдХреНрд╖рдорддрд╛)
  - **рд╕реНрдерд┐рддрд┐:** рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд╛рд░реНрдпрд╛рддреНрдордХ - рддреБрд░рдВрдд API рдХреЙрд▓реНрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ

тЬЕ **Azure AI рд╕рд░реНрдЪ** (рдЦрд╛рд▓реА - рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░)
  - рд╡реЗрдХреНрдЯрд░ рд╕рд░реНрдЪ рдХреНрд╖рдорддрд╛рдПрдВ рд╕рдХреНрд╖рдо
  - рд╕реНрдЯреИрдВрдбрд░реНрдб рдЯрд┐рдпрд░ 1 рдкрд╛рд░реНрдЯрд┐рд╢рди, 1 рд░реЗрдкреНрд▓рд┐рдХрд╛ рдХреЗ рд╕рд╛рде
  - **рд╕реНрдерд┐рддрд┐:** рд╕реЗрд╡рд╛ рдЪрд╛рд▓реВ, рд▓реЗрдХрд┐рди рдЗрдВрдбреЗрдХреНрд╕ рдирд┐рд░реНрдорд╛рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ
  - **рдЖрд╡рд╢реНрдпрдХ рдХрд╛рд░реНрд░рд╡рд╛рдИ:** рдЕрдкрдиреЗ рд╕реНрдХреАрдорд╛ рдХреЗ рд╕рд╛рде рд╕рд░реНрдЪ рдЗрдВрдбреЗрдХреНрд╕ рдмрдирд╛рдПрдВ

тЬЕ **Azure рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ** (рдЦрд╛рд▓реА - рдЕрдкрд▓реЛрдб рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░)
  - рдмреНрд▓реЙрдм рдХрдВрдЯреЗрдирд░: `documents`, `uploads`
  - рд╕реБрд░рдХреНрд╖рд┐рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди (рдХреЗрд╡рд▓ HTTPS, рдХреЛрдИ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдПрдХреНрд╕реЗрд╕ рдирд╣реАрдВ)
  - **рд╕реНрдерд┐рддрд┐:** рдлрд╛рдЗрд▓реНрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░
  - **рдЖрд╡рд╢реНрдпрдХ рдХрд╛рд░реНрд░рд╡рд╛рдИ:** рдЕрдкрдиреЗ рдкреНрд░реЛрдбрдХреНрдЯ рдбреЗрдЯрд╛ рдФрд░ рдбреЙрдХреНрдпреВрдореЗрдВрдЯреНрд╕ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ

тЪая╕П **рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ** (рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рдЗрдореЗрдЬ рдбрд┐рдкреНрд▓реЙрдп рдХреА рдЧрдИ)
  - рдПрдЬреЗрдВрдЯ рд░рд╛рдЙрдЯрд░ рдРрдк (nginx рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЗрдореЗрдЬ)
  - рдлреНрд░рдВрдЯрдПрдВрдб рдРрдк (nginx рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЗрдореЗрдЬ)
  - рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ (0-10 рдЗрдВрд╕реНрдЯреЗрдВрд╕)
  - **рд╕реНрдерд┐рддрд┐:** рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рдХрдВрдЯреЗрдирд░ рдЪрд╛рд▓реВ
  - **рдЖрд╡рд╢реНрдпрдХ рдХрд╛рд░реНрд░рд╡рд╛рдИ:** рдЕрдкрдиреЗ рдПрдЬреЗрдВрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдПрдВ рдФрд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░реЗрдВ

тЬЕ **Azure Cosmos DB** (рдЦрд╛рд▓реА - рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░)
  - рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рдХрдВрдЯреЗрдирд░ рдкреНрд░реА-рдХреЙрдиреНрдлрд╝рд┐рдЧрд░
  - рд▓реЛ-рд▓реЗрдЯреЗрдВрд╕реА рдСрдкрд░реЗрд╢рдВрд╕ рдХреЗ рд▓рд┐рдП рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝
  - TTL рд╕рдХреНрд╖рдо рдСрдЯреЛрдореИрдЯрд┐рдХ рдХреНрд▓реАрдирдЕрдк рдХреЗ рд▓рд┐рдП
  - **рд╕реНрдерд┐рддрд┐:** рдЪреИрдЯ рд╣рд┐рд╕реНрдЯреНрд░реА рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░

тЬЕ **Azure Key Vault** (рд╡реИрдХрд▓реНрдкрд┐рдХ - рд╕реАрдХреНрд░реЗрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░)
  - рд╕реЙрдлреНрдЯ рдбрд┐рд▓реАрдЯ рд╕рдХреНрд╖рдо
  - RBAC рдкреНрд░рдмрдВрдзрд┐рдд рдкрд╣рдЪрд╛рди рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░
  - **рд╕реНрдерд┐рддрд┐:** API рдХреАрдЬрд╝ рдФрд░ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░

тЬЕ **рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕** (рд╡реИрдХрд▓реНрдкрд┐рдХ - рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рд╕рдХреНрд░рд┐рдп)
  - рд▓реЙрдЧ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рд╡рд░реНрдХрд╕реНрдкреЗрд╕ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ
  - рдХрд╕реНрдЯрдо рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдФрд░ рдЕрд▓рд░реНрдЯреНрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░
  - **рд╕реНрдерд┐рддрд┐:** рдЖрдкрдХреЗ рдРрдкреНрд╕ рд╕реЗ рдЯреЗрд▓реАрдореЗрдЯреНрд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░

тЬЕ **рдбреЙрдХреНрдпреВрдореЗрдВрдЯ рдЗрдВрдЯреЗрд▓рд┐рдЬреЗрдВрд╕** (API рдХреЙрд▓реНрд╕ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░)
  - S0 рдЯрд┐рдпрд░ рдкреНрд░реЛрдбрдХреНрд╢рди рд╡рд░реНрдХрд▓реЛрдбреНрд╕ рдХреЗ рд▓рд┐рдП
  - **рд╕реНрдерд┐рддрд┐:** рдЕрдкрд▓реЛрдб рдХрд┐рдП рдЧрдП рдбреЙрдХреНрдпреВрдореЗрдВрдЯреНрд╕ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░

тЬЕ **Bing рд╕рд░реНрдЪ API** (API рдХреЙрд▓реНрд╕ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░)
  - S1 рдЯрд┐рдпрд░ рд░рд┐рдпрд▓-рдЯрд╛рдЗрдо рд╕рд░реНрдЪ рдХреЗ рд▓рд┐рдП
  - **рд╕реНрдерд┐рддрд┐:** рд╡реЗрдм рд╕рд░реНрдЪ рдХреНрд╡реЗрд░реА рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░

### рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдореЛрдбреНрд╕

| рдореЛрдб | OpenAI рдХреНрд╖рдорддрд╛ | рдХрдВрдЯреЗрдирд░ рдЗрдВрд╕реНрдЯреЗрдВрд╕ | рд╕рд░реНрдЪ рдЯрд┐рдпрд░ | рд╕реНрдЯреЛрд░реЗрдЬ рд░реЗрдбрдВрдбреЗрдВрд╕реА | рд╕рд░реНрд╡рд╢реНрд░реЗрд╖реНрда рдЙрдкрдпреЛрдЧ |
|------|-----------------|---------------------|-------------|-------------------|----------|
| **рдорд┐рдирд┐рдорд▓** | 10K-20K TPM | 0-2 рд░реЗрдкреНрд▓рд┐рдХрд╛ | рдмреЗрд╕рд┐рдХ | LRS (рд▓реЛрдХрд▓) | рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ/рдЯреЗрд╕реНрдЯ, рд▓рд░реНрдирд┐рдВрдЧ, рдкреНрд░реВрдл-рдСрдл-рдХреЙрдиреНрд╕реЗрдкреНрдЯ |
| **рд╕реНрдЯреИрдВрдбрд░реНрдб** | 30K-60K TPM | 2-5 рд░реЗрдкреНрд▓рд┐рдХрд╛ | рд╕реНрдЯреИрдВрдбрд░реНрдб | ZRS (рдЬреЛрди) | рдкреНрд░реЛрдбрдХреНрд╢рди, рдордзреНрдпрдо рдЯреНрд░реИрдлрд┐рдХ (<10K рдпреВрдЬрд░реНрд╕) |
| **рдкреНрд░реАрдорд┐рдпрдо** | 80K-150K TPM | 5-10 рд░реЗрдкреНрд▓рд┐рдХрд╛, рдЬреЛрди-рд░реЗрдбрдВрдбреЗрдВрдЯ | рдкреНрд░реАрдорд┐рдпрдо | GRS (рдЬрд┐рдпреЛ) | рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬ, рдЙрдЪреНрдЪ рдЯреНрд░реИрдлрд┐рдХ (>10K рдпреВрдЬрд░реНрд╕), 99.99% SLA |

**рд▓рд╛рдЧрдд рдкреНрд░рднрд╛рд╡:**
- **рдорд┐рдирд┐рдорд▓ тЖТ рд╕реНрдЯреИрдВрдбрд░реНрдб:** ~4x рд▓рд╛рдЧрдд рд╡реГрджреНрдзрд┐ ($100-370/рдорд╛рд╣ тЖТ $420-1,450/рдорд╛рд╣)
- **рд╕реНрдЯреИрдВрдбрд░реНрдб тЖТ рдкреНрд░реАрдорд┐рдпрдо:** ~3x рд▓рд╛рдЧрдд рд╡реГрджреНрдзрд┐ ($420-1,450/рдорд╛рд╣ тЖТ $1,150-3,500/рдорд╛рд╣)
- **рдЪреБрдиреЗрдВ рдЖрдзрд╛рд░ рдкрд░:** рдЕрдкреЗрдХреНрд╖рд┐рдд рд▓реЛрдб, SLA рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ, рдмрдЬрдЯ рд╕реАрдорд╛рдПрдВ

**рдХреНрд╖рдорддрд╛ рдпреЛрдЬрдирд╛:**
- **TPM (рдЯреЛрдХрдиреНрд╕ рдкреНрд░рддрд┐ рдорд┐рдирдЯ):** рд╕рднреА рдореЙрдбрд▓ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯреНрд╕ рдХреЗ рдХреБрд▓
- **рдХрдВрдЯреЗрдирд░ рдЗрдВрд╕реНрдЯреЗрдВрд╕:** рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ рд░реЗрдВрдЬ (рдорд┐рдирд┐рдордо-рдореИрдХреНрд╕рд┐рдордо рд░реЗрдкреНрд▓рд┐рдХрд╛)
- **рд╕рд░реНрдЪ рдЯрд┐рдпрд░:** рдХреНрд╡реЗрд░реА рдкреНрд░рджрд░реНрд╢рди рдФрд░ рдЗрдВрдбреЗрдХреНрд╕ рд╕рд╛рдЗрдЬ рд╕реАрдорд╛рдУрдВ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИ

## ЁЯУЛ рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ

### рдЖрд╡рд╢реНрдпрдХ рдЯреВрд▓реНрд╕
1. **Azure CLI** (рд╕рдВрд╕реНрдХрд░рдг 2.50.0 рдпрд╛ рдЙрдЪреНрдЪрддрд░)
   ```bash
   az --version  # рд╕рдВрд╕реНрдХрд░рдг рдЬрд╛рдВрдЪреЗрдВ
   az login      # рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд░реЗрдВ
   ```

2. **рд╕рдХреНрд░рд┐рдп Azure рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди** рдЬрд┐рд╕рдореЗрдВ Owner рдпрд╛ Contributor рдПрдХреНрд╕реЗрд╕ рд╣реЛ
   ```bash
   az account show  # рд╕рджрд╕реНрдпрддрд╛ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВ
   ```

### рдЖрд╡рд╢реНрдпрдХ Azure рдХреЛрдЯрд╛

рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд╕реЗ рдкрд╣рд▓реЗ, рдЕрдкрдиреЗ рд▓рдХреНрд╖рд┐рдд рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд рдХреЛрдЯрд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ:

```bash
# рдЕрдкрдиреЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ Azure OpenAI рдХреА рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ
az cognitiveservices account list-skus \
  --kind OpenAI \
  --location eastus2

# OpenAI рдХреЛрдЯрд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП gpt-4o)
az cognitiveservices usage list \
  --location eastus2 \
  --query "[?name.value=='OpenAI.Standard.gpt-4o']"

# рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ рдХреЛрдЯрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ
az provider show \
  --namespace Microsoft.App \
  --query "resourceTypes[?resourceType=='managedEnvironments'].locations"
```

**рдиреНрдпреВрдирддрдо рдЖрд╡рд╢реНрдпрдХ рдХреЛрдЯрд╛:**
- **Azure OpenAI:** 3-4 рдореЙрдбрд▓ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯреНрд╕ рд╡рд┐рднрд┐рдиреНрди рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ
  - GPT-4o: 20K TPM (рдЯреЛрдХрдиреНрд╕ рдкреНрд░рддрд┐ рдорд┐рдирдЯ)
  - GPT-4o-mini: 10K TPM
  - text-embedding-ada-002: 30K TPM
  - **рдиреЛрдЯ:** GPT-4o рдХреБрдЫ рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ рд╡реЗрдЯрд▓рд┐рд╕реНрдЯ рдкрд░ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ - [рдореЙрдбрд▓ рдЙрдкрд▓рдмреНрдзрддрд╛](https://learn.microsoft.com/azure/ai-services/openai/concepts/models) рдЬрд╛рдВрдЪреЗрдВ
- **рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕:** рдкреНрд░рдмрдВрдзрд┐рдд рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ + 2-10 рдХрдВрдЯреЗрдирд░ рдЗрдВрд╕реНрдЯреЗрдВрд╕
- **AI рд╕рд░реНрдЪ:** рд╕реНрдЯреИрдВрдбрд░реНрдб рдЯрд┐рдпрд░ (рд╡реЗрдХреНрдЯрд░ рд╕рд░реНрдЪ рдХреЗ рд▓рд┐рдП рдмреЗрд╕рд┐рдХ рдЕрдкрд░реНрдпрд╛рдкреНрдд)
- **Cosmos DB:** рд╕реНрдЯреИрдВрдбрд░реНрдб рдкреНрд░реЛрд╡рд┐рдЬрдиреНрдб рдереНрд░реВрдкреБрдЯ

**рдпрджрд┐ рдХреЛрдЯрд╛ рдЕрдкрд░реНрдпрд╛рдкреНрдд рд╣реИ:**
1. Azure рдкреЛрд░реНрдЯрд▓ тЖТ рдХреЛрдЯрд╛ тЖТ рд╡реГрджреНрдзрд┐ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВ
2. рдпрд╛ Azure CLI рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:
   ```bash
   az support tickets create \
     --ticket-name "OpenAI-Quota-Increase" \
     --severity "minimal" \
     --description "Request quota increase for Azure OpenAI GPT-4o in eastus2"
   ```
3. рдЙрдкрд▓рдмреНрдзрддрд╛ рд╡рд╛рд▓реЗ рд╡реИрдХрд▓реНрдкрд┐рдХ рдХреНрд╖реЗрддреНрд░реЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ

## ЁЯЪА рддреНрд╡рд░рд┐рдд рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ

### рд╡рд┐рдХрд▓реНрдк 1: Azure CLI рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

```bash
# рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рдХреНрд▓реЛрди рдХрд░реЗрдВ рдпрд╛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ
git clone <repository-url>
cd examples/retail-multiagent-arm-template

# рдкрд░рд┐рдирд┐рдпреЛрдЬрди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдмрдирд╛рдПрдВ
chmod +x deploy.sh

# рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рд╛рде рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХрд░реЗрдВ
./deploy.sh -g myResourceGroup

# рдкреНрд░реАрдорд┐рдпрдо рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЗ рд╕рд╛рде рдЙрддреНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХрд░реЗрдВ
./deploy.sh -g myProdRG -e prod -m premium -l eastus2
```

### рд╡рд┐рдХрд▓реНрдк 2: Azure рдкреЛрд░реНрдЯрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

[![Azure рдкрд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░реЗрдВ](https://aka.ms/deploytoazurebutton)](https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmicrosoft%2Fazd-for-beginners%2Fmain%2Fexamples%2Fretail-multiagent-arm-template%2Fazuredeploy.json)

### рд╡рд┐рдХрд▓реНрдк 3: рд╕реАрдзреЗ Azure CLI рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛

```bash
# рд╕рдВрд╕рд╛рдзрди рд╕рдореВрд╣ рдмрдирд╛рдПрдВ
az group create --name myResourceGroup --location eastus2

# рдЯреЗрдореНрдкрд▓реЗрдЯ рдкрд░рд┐рдирд┐рдпреЛрдЬрд┐рдд рдХрд░реЗрдВ
az deployment group create \
  --resource-group myResourceGroup \
  --template-file azuredeploy.json \
  --parameters azuredeploy.parameters.json
```

## тП▒я╕П рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдЯрд╛рдЗрдорд▓рд╛рдЗрди

### рдХреНрдпрд╛ рдЙрдореНрдореАрдж рдХрд░реЗрдВ

| рдЪрд░рдг | рдЕрд╡рдзрд┐ | рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ |
|-------|----------|--------------||
| **рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕рддреНрдпрд╛рдкрди** | 30-60 рд╕реЗрдХрдВрдб | Azure ARM рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕рд┐рдВрдЯреИрдХреНрд╕ рдФрд░ рдкреИрд░рд╛рдореАрдЯрд░реНрд╕ рдХреЛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИ |
| **рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк рд╕реЗрдЯрдЕрдк** | 10-20 рд╕реЗрдХрдВрдб | рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк рдмрдирд╛рддрд╛ рд╣реИ (рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ) |
| **OpenAI рдкреНрд░реЛрд╡рд┐рдЬрд╝рдирд┐рдВрдЧ** | 5-8 рдорд┐рдирдЯ | 3-4 OpenAI рдЕрдХрд╛рдЙрдВрдЯреНрд╕ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдореЙрдбрд▓ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рддрд╛ рд╣реИ |
| **рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕** | 3-5 рдорд┐рдирдЯ | рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рдХрдВрдЯреЗрдирд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рддрд╛ рд╣реИ |
| **рд╕рд░реНрдЪ рдФрд░ рд╕реНрдЯреЛрд░реЗрдЬ** | 2-4 рдорд┐рдирдЯ | AI рд╕рд░реНрдЪ рд╕реЗрд╡рд╛ рдФрд░ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯреНрд╕ рдкреНрд░реЛрд╡рд┐рдЬрд╝рди рдХрд░рддрд╛ рд╣реИ |
| **Cosmos DB** | 2-3 рдорд┐рдирдЯ | рдбреЗрдЯрд╛рдмреЗрд╕ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдХрдВрдЯреЗрдирд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ |
| **рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рд╕реЗрдЯрдЕрдк** | 2-3 рдорд┐рдирдЯ | рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕ рдФрд░ рд▓реЙрдЧ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ |
| **RBAC рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди** | 1-2 рдорд┐рдирдЯ | рдкреНрд░рдмрдВрдзрд┐рдд рдкрд╣рдЪрд╛рди рдФрд░ рдЕрдиреБрдорддрд┐рдпрд╛рдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ |
| **рдХреБрд▓ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ** | **15-25 рдорд┐рдирдЯ** | рдкреВрд░реА рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рддреИрдпрд╛рд░ |

**рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреЗ рдмрд╛рдж:**
- тЬЕ **рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рддреИрдпрд╛рд░:** рд╕рднреА Azure рд╕реЗрд╡рд╛рдПрдВ рдкреНрд░реЛрд╡рд┐рдЬрд╝рди рдФрд░ рдЪрд╛рд▓реВ
- тП▒я╕П **рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ:** 80-120 рдШрдВрдЯреЗ (рдЖрдкрдХреА рдЬрд┐рдореНрдореЗрджрд╛рд░реА)
- тП▒я╕П **рдЗрдВрдбреЗрдХреНрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди:** 15-30 рдорд┐рдирдЯ (рдЖрдкрдХреЗ рд╕реНрдХреАрдорд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ)
- тП▒я╕П **рдбреЗрдЯрд╛ рдЕрдкрд▓реЛрдб:** рдбреЗрдЯрд╛ рд╕реЗрдЯ рд╕рд╛рдЗрдЬ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рднрд┐рдиреНрди
- тП▒я╕П **рдЯреЗрд╕реНрдЯрд┐рдВрдЧ рдФрд░ рд╕рддреНрдпрд╛рдкрди:** 2-4 рдШрдВрдЯреЗ

---

## тЬЕ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд╕рдлрд▓рддрд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ

### рдЪрд░рдг 1: рд░рд┐рд╕реЛрд░реНрд╕ рдкреНрд░реЛрд╡рд┐рдЬрд╝рдирд┐рдВрдЧ рдЬрд╛рдВрдЪреЗрдВ (2 рдорд┐рдирдЯ)

```bash
# рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╕рднреА рд╕рдВрд╕рд╛рдзрди рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рддреИрдирд╛рдд рд╣реБрдП рд╣реИрдВ
az resource list \
  --resource-group myResourceGroup \
  --query "[?provisioningState!='Succeeded'].{Name:name, Status:provisioningState, Type:type}" \
  --output table
```

**рдЕрдкреЗрдХреНрд╖рд┐рдд:** рдЦрд╛рд▓реА рдЯреЗрдмрд▓ (рд╕рднреА рд░рд┐рд╕реЛрд░реНрд╕ "Succeeded" рд╕реНрдерд┐рддрд┐ рджрд┐рдЦрд╛рддреЗ рд╣реИрдВ)

### рдЪрд░рдг 2: Azure OpenAI рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯреНрд╕ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ (3 рдорд┐рдирдЯ)

```bash
# рд╕рднреА OpenAI рдЦрд╛рддреЛрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рдПрдВ
az cognitiveservices account list \
  --resource-group myResourceGroup \
  --query "[?kind=='OpenAI'].{Name:name, Location:location, Status:properties.provisioningState}" \
  --output table

# рдкреНрд░рд╛рдердорд┐рдХ рдХреНрд╖реЗрддреНрд░ рдХреЗ рд▓рд┐рдП рдореЙрдбрд▓ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ
OPENAI_NAME=$(az cognitiveservices account list \
  --resource-group myResourceGroup \
  --query "[?kind=='OpenAI'] | [0].name" -o tsv)

az cognitiveservices account deployment list \
  --name $OPENAI_NAME \
  --resource-group myResourceGroup \
  --output table
```

**рдЕрдкреЗрдХреНрд╖рд┐рдд:** 
- 3-4 OpenAI рдЕрдХрд╛рдЙрдВрдЯреНрд╕ (рдкреНрд░рд╛рдердорд┐рдХ, рджреНрд╡рд┐рддреАрдпрдХ, рддреГрддреАрдпрдХ, рдореВрд▓реНрдпрд╛рдВрдХрди рдХреНрд╖реЗрддреНрд░)
- рдкреНрд░рддреНрдпреЗрдХ рдЕрдХрд╛рдЙрдВрдЯ рдореЗрдВ 1-2 рдореЙрдбрд▓ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯреНрд╕ (gpt-4o, gpt-4o-mini, text-embedding-ada-002)

### рдЪрд░рдг 3: рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдЯреЗрд╕реНрдЯ рдХрд░реЗрдВ (5 рдорд┐рдирдЯ)

```bash
# рдХрдВрдЯреЗрдирд░ рдРрдк URLs рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
az containerapp list \
  --resource-group myResourceGroup \
  --query "[].{Name:name, URL:properties.configuration.ingress.fqdn, Status:properties.runningStatus}" \
  --output table

# рд░рд╛рдЙрдЯрд░ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ (рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рдЫрд╡рд┐ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрдЧреА)
ROUTER_URL=$(az containerapp show \
  --name retail-router \
  --resource-group myResourceGroup \
  --query "properties.configuration.ingress.fqdn" -o tsv)

echo "Testing: https://$ROUTER_URL"
curl -I https://$ROUTER_URL || echo "Container running (placeholder image - expected)"
```

**рдЕрдкреЗрдХреНрд╖рд┐рдд:** 
- рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ "Running" рд╕реНрдерд┐рддрд┐ рджрд┐рдЦрд╛рддреЗ рд╣реИрдВ
- рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ nginx HTTP 200 рдпрд╛ 404 рдХреЗ рд╕рд╛рде рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрддрд╛ рд╣реИ (рдХреЛрдИ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рдирд╣реАрдВ)

### рдЪрд░рдг 4: Azure OpenAI API рдПрдХреНрд╕реЗрд╕ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ (3 рдорд┐рдирдЯ)

```bash
# OpenAI рдПрдВрдбрдкреЙрдЗрдВрдЯ рдФрд░ рдХреБрдВрдЬреА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
OPENAI_ENDPOINT=$(az cognitiveservices account show \
  --name $OPENAI_NAME \
  --resource-group myResourceGroup \
  --query "properties.endpoint" -o tsv)

OPENAI_KEY=$(az cognitiveservices account keys list \
  --name $OPENAI_NAME \
  --resource-group myResourceGroup \
  --query "key1" -o tsv)

# GPT-4o рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ
curl "${OPENAI_ENDPOINT}openai/deployments/gpt-4o/chat/completions?api-version=2024-08-01-preview" \
  -H "Content-Type: application/json" \
  -H "api-key: $OPENAI_KEY" \
  -d '{
    "messages": [{"role": "user", "content": "Say hello"}],
    "max_tokens": 10
  }'
```

**рдЕрдкреЗрдХреНрд╖рд┐рдд:** JSON рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдЪреИрдЯ рдХрдВрдкреНрд▓реАрд╢рди рдХреЗ рд╕рд╛рде (OpenAI рдХрд╛рд░реНрдпрд╛рддреНрдордХ рд╣реЛрдиреЗ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рддрд╛ рд╣реИ)

### рдХреНрдпрд╛ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ рдФрд░ рдХреНрдпрд╛ рдирд╣реАрдВ

**тЬЕ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреЗ рдмрд╛рдж рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ:**
- Azure OpenAI рдореЙрдбрд▓ рдбрд┐рдкреНрд▓реЙрдп рдФрд░ API рдХреЙрд▓реНрд╕ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рд░рд╣реЗ рд╣реИрдВ
- AI рд╕рд░реНрдЪ рд╕реЗрд╡рд╛ рдЪрд╛рд▓реВ (рдЦрд╛рд▓реА, рдХреЛрдИ рдЗрдВрдбреЗрдХреНрд╕ рдирд╣реАрдВ)
- рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ рдЪрд╛рд▓реВ (рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ nginx рдЗрдореЗрдЬ)
- рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯреНрд╕ рдПрдХреНрд╕реЗрд╕рд┐рдмрд▓ рдФрд░ рдЕрдкрд▓реЛрдб рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░
- Cosmos DB рдбреЗрдЯрд╛ рдСрдкрд░реЗрд╢рдВрд╕ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░
- рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕ рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдЯреЗрд▓реАрдореЗрдЯреНрд░реА рдПрдХрддреНрд░ рдХрд░ рд░рд╣рд╛ рд╣реИ
- Key Vault рд╕реАрдХреНрд░реЗрдЯ рд╕реНрдЯреЛрд░реЗрдЬ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░

**тЭМ рдЕрднреА рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ (рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ):**
- рдПрдЬреЗрдВрдЯ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ (рдХреЛрдИ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рдбрд┐рдкреНрд▓реЙрдп рдирд╣реАрдВ)
- рдЪреИрдЯ рдлрдВрдХреНрд╢рдиреИрд▓рд┐рдЯреА (рдлреНрд░рдВрдЯрдПрдВрдб + рдмреИрдХрдПрдВрдб рдЗрдореНрдкреНрд▓реАрдореЗрдВрдЯреЗрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ)
- рд╕рд░реНрдЪ рдХреНрд╡реЗрд░реА (рдХреЛрдИ рд╕рд░реНрдЪ рдЗрдВрдбреЗрдХреНрд╕ рдирд╣реАрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛)
- рдбреЙрдХреНрдпреВрдореЗрдВрдЯ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдкрд╛рдЗрдкрд▓рд╛рдЗрди (рдХреЛрдИ рдбреЗрдЯрд╛ рдЕрдкрд▓реЛрдб рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛)
- рдХрд╕реНрдЯрдо рдЯреЗрд▓реАрдореЗрдЯреНрд░реА (рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдВрд╕реНрдЯреНрд░реВрдореЗрдВрдЯреЗрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ)

**рдЕрдЧрд▓реЗ рдЪрд░рдг:** рджреЗрдЦреЗрдВ [рдкреЛрд╕реНрдЯ-рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди](../../../../examples/retail-multiagent-arm-template) рдЕрдкрдиреА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреЗрд╡рд▓рдк рдФрд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП

---

## тЪЩя╕П рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╡рд┐рдХрд▓реНрдк

### рдЯреЗрдореНрдкрд▓реЗрдЯ рдкреИрд░рд╛рдореАрдЯрд░реНрд╕

| рдкреИрд░рд╛рдореАрдЯрд░ | рдкреНрд░рдХрд╛рд░ | рдбрд┐рдлрд╝реЙрд▓реНрдЯ | рд╡рд┐рд╡рд░рдг |
|-----------|------|---------|-------------|
| `projectName` | string | "retail" | рд╕рднреА рд░рд┐рд╕реЛрд░реНрд╕ рдирд╛рдореЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░реАрдлрд┐рдХреНрд╕ |
| `location` | string | рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк рд▓реЛрдХреЗрд╢рди | рдкреНрд░рд╛рдердорд┐рдХ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреНрд╖реЗрддреНрд░ |
| `secondaryLocation` | string | "westus2" | рдорд▓реНрдЯреА-рд░реАрдЬрди рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреЗ рд▓рд┐рдП рджреНрд╡рд┐рддреАрдпрдХ рдХреНрд╖реЗрддреНрд░ |
| `tertiaryLocation` | string | "francecentral" | рдПрдореНрдмреЗрдбрд┐рдВрдЧ рдореЙрдбрд▓ рдХреЗ рд▓рд┐рдП рдХреНрд╖реЗрддреНрд░ |
| `environmentName` | string | "dev" | рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдбрд┐рдЬрд╝рд┐рдЧреНрдиреЗрд╢рди (dev/staging/prod) |
| `deploymentMode` | string | "standard" | рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди (minimal/standard/premium) |
| `enableMultiRegion` | bool | true | рдорд▓реНрдЯреА-рд░реАрдЬрди рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ |
| `enableMonitoring` | bool | true | рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕ рдФрд░ рд▓реЙрдЧрд┐рдВрдЧ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ |
| `enableSecurity` | bool | true | Key Vault рдФрд░ рдЙрдиреНрдирдд рд╕реБрд░рдХреНрд╖рд╛ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ |

### рдкреИрд░рд╛рдореАрдЯрд░реНрд╕ рдХрд╕реНрдЯрдорд╛рдЗрдЬрд╝ рдХрд░рдирд╛

`azuredeploy.parameters.json` рд╕рдВрдкрд╛рджрд┐рдд рдХрд░реЗрдВ:

```json
{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "projectName": {
      "value": "mycompany"
    },
    "environmentName": {
      "value": "prod"
    },
    "deploymentMode": {
      "value": "premium"
    },
    "location": {
      "value": "eastus2"
    }
  }
}
```

## ЁЯПЧя╕П рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдЕрд╡рд▓реЛрдХрди

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ   Frontend      тФВ    тФВ  Agent Router   тФВ    тФВ     Agents      тФВ
тФВ (Container App) тФВтФАтФАтФАтЦ╢тФВ (Container App) тФВтФАтФАтФАтЦ╢тФВ Customer + Inv  тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                тФВ                        тФВ
                                тЦ╝                        тЦ╝
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ   AI Search     тФВ    тФВ  Azure OpenAI   тФВ    тФВ    Storage      тФВ
тФВ   (Vector DB)   тФВ    тФВ (Multi-region)  тФВ    тФВ   (Documents)   тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                тФВ                        тФВ
                                тЦ╝                        тЦ╝
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ  Cosmos DB      тФВ    тФВ App Insights    тФВ    тФВ   Key Vault     тФВ
тФВ (Chat History)  тФВ    тФВ  (Monitoring)   тФВ    тФВ   (Secrets)     тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

## ЁЯУЦ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЙрдкрдпреЛрдЧ

`deploy.sh` рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдПрдХ рдЗрдВрдЯрд░рдПрдХреНрдЯрд┐рд╡ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдЕрдиреБрднрд╡ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ:

```bash
# рд╕рд╣рд╛рдпрддрд╛ рджрд┐рдЦрд╛рдПрдВ
./deploy.sh --help

# рдмреБрдирд┐рдпрд╛рджреА рдкрд░рд┐рдирд┐рдпреЛрдЬрди
./deploy.sh -g myResourceGroup

# рдХрд╕реНрдЯрдо рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рд╛рде рдЙрдиреНрдирдд рдкрд░рд┐рдирд┐рдпреЛрдЬрди
./deploy.sh \
  -g myProductionRG \
  -p companyname \
  -e prod \
  -m premium \
  -l eastus2

# рдмрд╣реБ-рдХреНрд╖реЗрддреНрд░ рдХреЗ рдмрд┐рдирд╛ рд╡рд┐рдХрд╛рд╕ рдкрд░рд┐рдирд┐рдпреЛрдЬрди
./deploy.sh \
  -g myDevRG \
  -e dev \
  -m minimal \
  --no-multi-region \
  --no-security
```

### рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдлреАрдЪрд░реНрд╕

- тЬЕ **рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреА рд╕рддреНрдпрд╛рдкрди** (Azure CLI, рд▓реЙрдЧрд┐рди рд╕реНрдерд┐рддрд┐, рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдлрд╛рдЗрд▓реНрд╕)
- тЬЕ **рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк рдкреНрд░рдмрдВрдзрди** (рдпрджрд┐ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ рддреЛ рдмрдирд╛рддрд╛ рд╣реИ)
- тЬЕ **рдЯреЗрдореНрдкреНрд▓реЗрдЯ рд╕рддреНрдпрд╛рдкрди** рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд╕реЗ рдкрд╣рд▓реЗ
- тЬЕ **рдкреНрд░рдЧрддрд┐ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ** рд░рдВрдЧреАрди рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рд╕рд╛рде
- тЬЕ **рдбрд┐рдк
> **ЁЯУЭ рдорд╣рддреНрд╡рдкреВрд░реНрдг:** рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рддреИрдирд╛рдд рд╣реЛ рдЪреБрдХрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдкрдХреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рд╡рд┐рдХрд╕рд┐рдд рдФрд░ рддреИрдирд╛рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред

### рдЪрд░рдг 1: рдПрдЬреЗрдВрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдХрд╕рд┐рдд рдХрд░реЗрдВ (рдЖрдкрдХреА рдЬрд┐рдореНрдореЗрджрд╛рд░реА)

ARM рдЯреЗрдореНрдкрд▓реЗрдЯ **рдЦрд╛рд▓реА рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕** рдмрдирд╛рддрд╛ рд╣реИ рдЬрд┐рдирдореЗрдВ рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ nginx рдЗрдореЗрдЬ рд╣реЛрддреА рд╣реИрдВред рдЖрдкрдХреЛ рдХрд░рдирд╛ рд╣реЛрдЧрд╛:

**рдЖрд╡рд╢реНрдпрдХ рд╡рд┐рдХрд╛рд╕:**
1. **рдПрдЬреЗрдВрдЯ рдЗрдореНрдкреНрд▓реАрдореЗрдВрдЯреЗрд╢рди** (30-40 рдШрдВрдЯреЗ)
   - GPT-4o рдЗрдВрдЯреАрдЧреНрд░реЗрд╢рди рдХреЗ рд╕рд╛рде рдХрд╕реНрдЯрдорд░ рд╕рд░реНрд╡рд┐рд╕ рдПрдЬреЗрдВрдЯ
   - GPT-4o-mini рдЗрдВрдЯреАрдЧреНрд░реЗрд╢рди рдХреЗ рд╕рд╛рде рдЗрдиреНрд╡реЗрдВрдЯрд░реА рдПрдЬреЗрдВрдЯ
   - рдПрдЬреЗрдВрдЯ рд░реВрдЯрд┐рдВрдЧ рд▓реЙрдЬрд┐рдХ

2. **рдлреНрд░рдВрдЯрдПрдВрдб рд╡рд┐рдХрд╛рд╕** (20-30 рдШрдВрдЯреЗ)
   - рдЪреИрдЯ рдЗрдВрдЯрд░рдлреЗрд╕ UI (React/Vue/Angular)
   - рдлрд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдлрдВрдХреНрд╢рдирд▓рд┐рдЯреА
   - рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд░реЗрдВрдбрд░рд┐рдВрдЧ рдФрд░ рдлреЙрд░реНрдореЗрдЯрд┐рдВрдЧ

3. **рдмреИрдХрдПрдВрдб рд╕реЗрд╡рд╛рдПрдВ** (12-16 рдШрдВрдЯреЗ)
   - FastAPI рдпрд╛ Express рд░рд╛рдЙрдЯрд░
   - рдСрдереЗрдВрдЯрд┐рдХреЗрд╢рди рдорд┐рдбрд▓рд╡реЗрдпрд░
   - рдЯреЗрд▓реАрдореЗрдЯреНрд░реА рдЗрдВрдЯреАрдЧреНрд░реЗрд╢рди

**рджреЗрдЦреЗрдВ:** [рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдЧрд╛рдЗрдб](../retail-scenario.md) рд╡рд┐рд╕реНрддреГрдд рдЗрдореНрдкреНрд▓реАрдореЗрдВрдЯреЗрд╢рди рдкреИрдЯрд░реНрди рдФрд░ рдХреЛрдб рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП

### рдЪрд░рдг 2: AI рд╕рд░реНрдЪ рдЗрдВрдбреЗрдХреНрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ (15-30 рдорд┐рдирдЯ)

рдЕрдкрдиреЗ рдбреЗрдЯрд╛ рдореЙрдбрд▓ рд╕реЗ рдореЗрд▓ рдЦрд╛рдиреЗ рд╡рд╛рд▓рд╛ рд╕рд░реНрдЪ рдЗрдВрдбреЗрдХреНрд╕ рдмрдирд╛рдПрдВ:

```bash
# рдЦреЛрдЬ рд╕реЗрд╡рд╛ рд╡рд┐рд╡рд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
SEARCH_NAME=$(az search service list \
  --resource-group myResourceGroup \
  --query "[0].name" -o tsv)

SEARCH_KEY=$(az search admin-key show \
  --service-name $SEARCH_NAME \
  --resource-group myResourceGroup \
  --query "primaryKey" -o tsv)

# рдЕрдкрдиреА рд╕реНрдХреАрдорд╛ рдХреЗ рд╕рд╛рде рдЗрдВрдбреЗрдХреНрд╕ рдмрдирд╛рдПрдВ (рдЙрджрд╛рд╣рд░рдг)
curl -X POST "https://${SEARCH_NAME}.search.windows.net/indexes?api-version=2023-11-01" \
  -H "Content-Type: application/json" \
  -H "api-key: ${SEARCH_KEY}" \
  -d '{
    "name": "products",
    "fields": [
      {"name": "id", "type": "Edm.String", "key": true},
      {"name": "title", "type": "Edm.String", "searchable": true},
      {"name": "content", "type": "Edm.String", "searchable": true},
      {"name": "category", "type": "Edm.String", "filterable": true},
      {"name": "content_vector", "type": "Collection(Edm.Single)", 
       "searchable": true, "dimensions": 1536, "vectorSearchProfile": "default"}
    ],
    "vectorSearch": {
      "algorithms": [{"name": "default", "kind": "hnsw"}],
      "profiles": [{"name": "default", "algorithm": "default"}]
    }
  }'
```

**рд╕рдВрд╕рд╛рдзрди:**
- [AI рд╕рд░реНрдЪ рдЗрдВрдбреЗрдХреНрд╕ рд╕реНрдХреАрдорд╛ рдбрд┐рдЬрд╝рд╛рдЗрди](https://learn.microsoft.com/azure/search/search-what-is-an-index)
- [рд╡реЗрдХреНрдЯрд░ рд╕рд░реНрдЪ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди](https://learn.microsoft.com/azure/search/vector-search-how-to-create-index)

### рдЪрд░рдг 3: рдЕрдкрдирд╛ рдбреЗрдЯрд╛ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ (рд╕рдордп рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ)

рдЬрдм рдЖрдкрдХреЗ рдкрд╛рд╕ рдкреНрд░реЛрдбрдХреНрдЯ рдбреЗрдЯрд╛ рдФрд░ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╣реЛрдВ:

```bash
# рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддрд╛ рд╡рд┐рд╡рд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
STORAGE_NAME=$(az storage account list \
  --resource-group myResourceGroup \
  --query "[0].name" -o tsv)

STORAGE_KEY=$(az storage account keys list \
  --account-name $STORAGE_NAME \
  --resource-group myResourceGroup \
  --query "[0].value" -o tsv)

# рдЕрдкрдиреЗ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ
az storage blob upload-batch \
  --destination documents \
  --source /path/to/your/product/docs \
  --account-name $STORAGE_NAME \
  --account-key $STORAGE_KEY

# рдЙрджрд╛рд╣рд░рдг: рдПрдХрд▓ рдлрд╝рд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ
az storage blob upload \
  --container-name documents \
  --name "product-manual.pdf" \
  --file /path/to/product-manual.pdf \
  --account-name $STORAGE_NAME \
  --account-key $STORAGE_KEY
```

### рдЪрд░рдг 4: рдЕрдкрдиреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдПрдВ рдФрд░ рддреИрдирд╛рдд рдХрд░реЗрдВ (8-12 рдШрдВрдЯреЗ)

рдЬрдм рдЖрдкрдиреЗ рдЕрдкрдирд╛ рдПрдЬреЗрдВрдЯ рдХреЛрдб рд╡рд┐рдХрд╕рд┐рдд рдХрд░ рд▓рд┐рдпрд╛ рд╣реЛ:

```bash
# 1. Azure рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА рдмрдирд╛рдПрдВ (рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ)
az acr create \
  --name myregistry \
  --resource-group myResourceGroup \
  --sku Basic

# 2. рдПрдЬреЗрдВрдЯ рд░рд╛рдЙрдЯрд░ рдЗрдореЗрдЬ рдмрдирд╛рдПрдВ рдФрд░ рдкреБрд╢ рдХрд░реЗрдВ
docker build -t myregistry.azurecr.io/agent-router:v1 /path/to/your/router/code
az acr login --name myregistry
docker push myregistry.azurecr.io/agent-router:v1

# 3. рдлреНрд░рдВрдЯрдПрдВрдб рдЗрдореЗрдЬ рдмрдирд╛рдПрдВ рдФрд░ рдкреБрд╢ рдХрд░реЗрдВ
docker build -t myregistry.azurecr.io/frontend:v1 /path/to/your/frontend/code
docker push myregistry.azurecr.io/frontend:v1

# 4. рдЕрдкрдиреЗ рдЗрдореЗрдЬ рдХреЗ рд╕рд╛рде рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ
az containerapp update \
  --name retail-router \
  --resource-group myResourceGroup \
  --image myregistry.azurecr.io/agent-router:v1

az containerapp update \
  --name retail-frontend \
  --resource-group myResourceGroup \
  --image myregistry.azurecr.io/frontend:v1

# 5. рдкрд░реНрдпрд╛рд╡рд░рдг рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ
az containerapp update \
  --name retail-router \
  --resource-group myResourceGroup \
  --set-env-vars \
    OPENAI_ENDPOINT=secretref:openai-endpoint \
    OPENAI_KEY=secretref:openai-key \
    SEARCH_ENDPOINT=secretref:search-endpoint \
    SEARCH_KEY=secretref:search-key
```

### рдЪрд░рдг 5: рдЕрдкрдиреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ (2-4 рдШрдВрдЯреЗ)

```bash
# рдЕрдкрдирд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди URL рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
ROUTER_URL=$(az containerapp show \
  --name retail-router \
  --resource-group myResourceGroup \
  --query "properties.configuration.ingress.fqdn" -o tsv)

# рдПрдЬреЗрдВрдЯ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ (рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдкрдХрд╛ рдХреЛрдб рддреИрдирд╛рдд рд╣реЛ рдЬрд╛рдП)
curl -X POST "https://${ROUTER_URL}/chat" \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Hello, I need help with my order",
    "agent": "customer"
  }'

# рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЙрдЧреНрд╕ рдЬрд╛рдВрдЪреЗрдВ
az containerapp logs show \
  --name retail-router \
  --resource-group myResourceGroup \
  --follow
```

### рдЗрдореНрдкреНрд▓реАрдореЗрдВрдЯреЗрд╢рди рд╕рдВрд╕рд╛рдзрди

**рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдФрд░ рдбрд┐рдЬрд╝рд╛рдЗрди:**
- ЁЯУЦ [рдкреВрд░реНрдг рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдЧрд╛рдЗрдб](../retail-scenario.md) - рд╡рд┐рд╕реНрддреГрдд рдЗрдореНрдкреНрд▓реАрдореЗрдВрдЯреЗрд╢рди рдкреИрдЯрд░реНрди
- ЁЯУЦ [рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ рдбрд┐рдЬрд╝рд╛рдЗрди рдкреИрдЯрд░реНрди](https://learn.microsoft.com/azure/architecture/ai-ml/guide/multi-agent-systems)

**рдХреЛрдб рдЙрджрд╛рд╣рд░рдг:**
- ЁЯФЧ [Azure OpenAI рдЪреИрдЯ рд╕реИрдВрдкрд▓](https://github.com/Azure-Samples/azure-search-openai-demo) - RAG рдкреИрдЯрд░реНрди
- ЁЯФЧ [Semantic Kernel](https://github.com/microsoft/semantic-kernel) - рдПрдЬреЗрдВрдЯ рдлреНрд░реЗрдорд╡рд░реНрдХ (C#)
- ЁЯФЧ [LangChain Azure](https://github.com/langchain-ai/langchain) - рдПрдЬреЗрдВрдЯ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди (Python)
- ЁЯФЧ [AutoGen](https://github.com/microsoft/autogen) - рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ рдмрд╛рддрдЪреАрдд

**рдЕрдиреБрдорд╛рдирд┐рдд рдХреБрд▓ рдкреНрд░рдпрд╛рд╕:**
- рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рддреИрдирд╛рддреА: 15-25 рдорд┐рдирдЯ (тЬЕ рдкреВрд░реНрдг)
- рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдХрд╛рд╕: 80-120 рдШрдВрдЯреЗ (ЁЯФи рдЖрдкрдХрд╛ рдХрд╛рдо)
- рдкрд░реАрдХреНрд╖рдг рдФрд░ рдЕрдиреБрдХреВрд▓рди: 15-25 рдШрдВрдЯреЗ (ЁЯФи рдЖрдкрдХрд╛ рдХрд╛рдо)

## ЁЯЫая╕П рд╕рдорд╕реНрдпрд╛ рдирд┐рд╡рд╛рд░рдг

### рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛рдПрдВ

#### 1. Azure OpenAI рдХреЛрдЯрд╛ рд╕рдорд╛рдкреНрдд

```bash
# рд╡рд░реНрддрдорд╛рди рдХреЛрдЯрд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ
az cognitiveservices usage list --location eastus2

# рдХреЛрдЯрд╛ рд╡реГрджреНрдзрд┐ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВ
az support tickets create \
  --ticket-name "OpenAI-Quota-Increase" \
  --severity "minimal" \
  --description "Request quota increase for Azure OpenAI in region X"
```

#### 2. рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ рддреИрдирд╛рддреА рд╡рд┐рдлрд▓

```bash
# рдХрдВрдЯреЗрдирд░ рдРрдк рд▓реЙрдЧреНрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ
az containerapp logs show \
  --name retail-router \
  --resource-group myResourceGroup \
  --follow

# рдХрдВрдЯреЗрдирд░ рдРрдк рдХреЛ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВ
az containerapp revision restart \
  --name retail-router \
  --resource-group myResourceGroup
```

#### 3. рд╕рд░реНрдЪ рд╕реЗрд╡рд╛ рдкреНрд░рд╛рд░рдВрднрд┐рдХрдХрд░рдг

```bash
# рдЦреЛрдЬ рд╕реЗрд╡рд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВ
az search service show \
  --name <search-service-name> \
  --resource-group myResourceGroup

# рдЦреЛрдЬ рд╕реЗрд╡рд╛ рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ
curl -X GET "https://<search-service-name>.search.windows.net/indexes?api-version=2023-11-01" \
  -H "api-key: <search-admin-key>"
```

### рддреИрдирд╛рддреА рд╕рддреНрдпрд╛рдкрди

```bash
# рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╕рднреА рд╕рдВрд╕рд╛рдзрди рдмрдирд╛рдП рдЧрдП рд╣реИрдВ
az resource list \
  --resource-group myResourceGroup \
  --output table

# рд╕рдВрд╕рд╛рдзрди рдХреА рд╕реНрдерд┐рддрд┐ рдЬрд╛рдВрдЪреЗрдВ
az resource list \
  --resource-group myResourceGroup \
  --query "[?provisioningState!='Succeeded'].{Name:name, Status:provisioningState, Type:type}" \
  --output table
```

## ЁЯФР рд╕реБрд░рдХреНрд╖рд╛ рд╡рд┐рдЪрд╛рд░

### рдХреБрдВрдЬреА рдкреНрд░рдмрдВрдзрди
- рд╕рднреА рд╕реАрдХреНрд░реЗрдЯреНрд╕ Azure Key Vault рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИрдВ (рдЬрдм рд╕рдХреНрд╖рдо рд╣реЛ)
- рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ рдСрдереЗрдВрдЯрд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП рдореИрдиреЗрдЬреНрдб рдЖрдЗрдбреЗрдВрдЯрд┐рдЯреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ
- рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯреНрд╕ рдореЗрдВ рд╕реБрд░рдХреНрд╖рд┐рдд рдбрд┐рдлреЙрд▓реНрдЯреНрд╕ рд╣реИрдВ (рдХреЗрд╡рд▓ HTTPS, рдХреЛрдИ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдмреНрд▓реЙрдм рдПрдХреНрд╕реЗрд╕ рдирд╣реАрдВ)

### рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛
- рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ рдЬрд╣рд╛рдВ рд╕рдВрднрд╡ рд╣реЛ рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ
- рд╕рд░реНрдЪ рд╕реЗрд╡рд╛ рдирд┐рдЬреА рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИ рд╣реИ
- Cosmos DB рдиреНрдпреВрдирддрдо рдЖрд╡рд╢реНрдпрдХ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИ рд╣реИ

### RBAC рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди
```bash
# рдкреНрд░рдмрдВрдзрд┐рдд рдкрд╣рдЪрд╛рди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рднреВрдорд┐рдХрд╛рдПрдБ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВ
az role assignment create \
  --assignee <container-app-managed-identity> \
  --role "Cognitive Services OpenAI User" \
  --scope <openai-resource-id>
```

## ЁЯТ░ рд▓рд╛рдЧрдд рдЕрдиреБрдХреВрд▓рди

### рд▓рд╛рдЧрдд рдЕрдиреБрдорд╛рди (рдорд╛рд╕рд┐рдХ, USD)

| рдореЛрдб | OpenAI | рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ | рд╕рд░реНрдЪ | рд╕реНрдЯреЛрд░реЗрдЬ | рдХреБрд▓ рдЕрдиреБрдорд╛рдирд┐рдд |
|------|--------|----------------|--------|---------|------------|
| рдиреНрдпреВрдирддрдо | $50-200 | $20-50 | $25-100 | $5-20 | $100-370 |
| рдорд╛рдирдХ | $200-800 | $100-300 | $100-300 | $20-50 | $420-1450 |
| рдкреНрд░реАрдорд┐рдпрдо | $500-2000 | $300-800 | $300-600 | $50-100 | $1150-3500 |

### рд▓рд╛рдЧрдд рдирд┐рдЧрд░рд╛рдиреА

```bash
# рдмрдЬрдЯ рдЕрд▓рд░реНрдЯ рд╕реЗрдЯ рдХрд░реЗрдВ
az consumption budget create \
  --account-name <subscription-id> \
  --budget-name "retail-budget" \
  --amount 500 \
  --time-grain Monthly \
  --start-date 2024-01-01 \
  --end-date 2024-12-31
```

## ЁЯФД рдЕрдкрдбреЗрдЯ рдФрд░ рд░рдЦрд░рдЦрд╛рд╡

### рдЯреЗрдореНрдкрд▓реЗрдЯ рдЕрдкрдбреЗрдЯреНрд╕
- ARM рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╛рдЗрд▓реНрд╕ рдХрд╛ рд╡рд░реНрд╢рди рдХрдВрдЯреНрд░реЛрд▓ рдХрд░реЗрдВ
- рдкрд╣рд▓реЗ рд╡рд┐рдХрд╛рд╕ рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдмрджрд▓рд╛рд╡реЛрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ
- рдЕрдкрдбреЗрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдЗрдВрдХреНрд░реАрдореЗрдВрдЯрд▓ рддреИрдирд╛рддреА рдореЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ

### рд╕рдВрд╕рд╛рдзрди рдЕрдкрдбреЗрдЯреНрд╕
```bash
# рдирдП рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд╕рд╛рде рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ
az deployment group create \
  --resource-group myResourceGroup \
  --template-file azuredeploy.json \
  --parameters azuredeploy.parameters.json \
  --mode Incremental
```

### рдмреИрдХрдЕрдк рдФрд░ рд░рд┐рдХрд╡рд░реА
- Cosmos DB рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдмреИрдХрдЕрдк рд╕рдХреНрд╖рдо рд╣реИ
- Key Vault рд╕реЙрдлреНрдЯ рдбрд┐рд▓реАрдЯ рд╕рдХреНрд╖рдо рд╣реИ
- рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ рд░рд┐рд╡реАрдЬрди рд░реЛрд▓рдмреИрдХ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдП рд░рдЦреЗ рдЧрдП рд╣реИрдВ

## ЁЯУЮ рд╕рд╣рд╛рдпрддрд╛

- **рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕рдорд╕реНрдпрд╛рдПрдВ:** [GitHub Issues](https://github.com/microsoft/azd-for-beginners/issues)
- **Azure рд╕рд╣рд╛рдпрддрд╛:** [Azure Support Portal](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade)
- **рд╕рдореБрджрд╛рдп:** [Azure AI Discord](https://discord.gg/microsoft-azure)

---

**тЪб рдХреНрдпрд╛ рдЖрдк рдЕрдкрдирд╛ рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ рд╕рдорд╛рдзрд╛рди рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВ?**

рд╢реБрд░реВ рдХрд░реЗрдВ: `./deploy.sh -g myResourceGroup`

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпрд╣ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЬрдмрдХрд┐ рд╣рдо рд╕рдЯреАрдХрддрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рдж рдореЗрдВ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдпрд╛ рдЕрд╢реБрджреНрдзрд┐рдпрд╛рдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред рдореВрд▓ рднрд╛рд╖рд╛ рдореЗрдВ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдкреНрд░рд╛рдорд╛рдгрд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рдкреЗрд╢реЗрд╡рд░ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред рдЗрд╕ рдЕрдиреБрд╡рд╛рдж рдХреЗ рдЙрдкрдпреЛрдЧ рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд┐рд╕реА рднреА рдЧрд▓рддрдлрд╣рдореА рдпрд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреЗ рд▓рд┐рдП рд╣рдо рдЙрддреНрддрд░рджрд╛рдпреА рдирд╣реАрдВ рд╣реИрдВред
<!-- CO-OP TRANSLATOR DISCLAIMER END -->