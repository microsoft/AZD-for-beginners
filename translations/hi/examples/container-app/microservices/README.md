# рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ - рдХрдВрдЯреЗрдирд░ рдРрдк рдЙрджрд╛рд╣рд░рдг

тП▒я╕П **рдЕрдиреБрдорд╛рдирд┐рдд рд╕рдордп**: 25-35 рдорд┐рдирдЯ | ЁЯТ░ **рдЕрдиреБрдорд╛рдирд┐рдд рд▓рд╛рдЧрдд**: ~$50-100/рдорд╛рд╣ | тнР **рдЬрдЯрд┐рд▓рддрд╛**: рдЙрдиреНрдирдд

рдПрдХ **рд╕рд░рд▓ рд▓реЗрдХрд┐рди рдХрд╛рд░реНрдпрд╛рддреНрдордХ** рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░, рдЬрд┐рд╕реЗ AZD CLI рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ Azure Container Apps рдкрд░ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдпрд╣ рдЙрджрд╛рд╣рд░рдг рд╕реЗрд╡рд╛-рд╕реЗ-рд╕реЗрд╡рд╛ рд╕рдВрдЪрд╛рд░, рдХрдВрдЯреЗрдирд░ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди рдФрд░ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдХреЛ рдПрдХ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ 2-рд╕реЗрд╡рд╛ рд╕реЗрдЯрдЕрдк рдХреЗ рд╕рд╛рде рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред

> **ЁЯУЪ рд╕реАрдЦрдиреЗ рдХрд╛ рджреГрд╖реНрдЯрд┐рдХреЛрдг**: рдпрд╣ рдЙрджрд╛рд╣рд░рдг рдПрдХ рдиреНрдпреВрдирддрдо 2-рд╕реЗрд╡рд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ (API рдЧреЗрдЯрд╡реЗ + рдмреИрдХрдПрдВрдб рд╕реЗрд╡рд╛) рд╕реЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рддреИрдирд╛рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╕реАрдЦ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕ рдиреАрдВрд╡ рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдЖрдкрдХреЛ рдПрдХ рдкреВрд░реНрдг рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рдЗрдХреЛрд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рд░реНрдЧрджрд░реНрд╢рди рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред

## рдЖрдк рдХреНрдпрд╛ рд╕реАрдЦреЗрдВрдЧреЗ

рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдХреЛ рдкреВрд░рд╛ рдХрд░рдХреЗ, рдЖрдк:
- Azure Container Apps рдкрд░ рдХрдИ рдХрдВрдЯреЗрдирд░ рддреИрдирд╛рдд рдХрд░реЗрдВрдЧреЗ
- рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреЗ рд╕рд╛рде рд╕реЗрд╡рд╛-рд╕реЗ-рд╕реЗрд╡рд╛ рд╕рдВрдЪрд╛рд░ рд▓рд╛рдЧреВ рдХрд░реЗрдВрдЧреЗ
- рдкрд░реНрдпрд╛рд╡рд░рдг-рдЖрдзрд╛рд░рд┐рдд рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдФрд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВрдЧреЗ
- Application Insights рдХреЗ рд╕рд╛рде рд╡рд┐рддрд░рд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░реЗрдВрдЧреЗ
- рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рддреИрдирд╛рддреА рдкреИрдЯрд░реНрди рдФрд░ рд╕рд░реНрд╡реЛрддреНрддрдо рдкреНрд░рдерд╛рдУрдВ рдХреЛ рд╕рдордЭреЗрдВрдЧреЗ
- рд╕рд░рд▓ рд╕реЗ рдЬрдЯрд┐рд▓ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рддрдХ рдкреНрд░рдЧрддрд┐рд╢реАрд▓ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реАрдЦреЗрдВрдЧреЗ

## рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░

### рдЪрд░рдг 1: рд╣рдо рдХреНрдпрд╛ рдмрдирд╛ рд░рд╣реЗ рд╣реИрдВ (рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рд╢рд╛рдорд┐рд▓)

```
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ         Internet            тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                   тФВ
                                   тФВ HTTPS
                                   тФВ
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ      API Gateway            тФВ
                    тФВ   (Node.js Container)       тФВ
                    тФВ   - Routes requests         тФВ
                    тФВ   - Health checks           тФВ
                    тФВ   - Request logging         тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                   тФВ
                                   тФВ HTTP (internal)
                                   тФВ
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ    Product Service          тФВ
                    тФВ   (Python Container)        тФВ
                    тФВ   - Product CRUD            тФВ
                    тФВ   - In-memory data store    тФВ
                    тФВ   - REST API                тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                   тФВ
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ   Application Insights      тФВ
                    тФВ   (Monitoring & Logs)       тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

**рд╕рд░рд▓ рд╢реБрд░реБрдЖрдд рдХреНрдпреЛрдВ?**
- тЬЕ рдЬрд▓реНрджреА рддреИрдирд╛рдд рдХрд░реЗрдВ рдФрд░ рд╕рдордЭреЗрдВ (25-35 рдорд┐рдирдЯ)
- тЬЕ рдЬрдЯрд┐рд▓рддрд╛ рдХреЗ рдмрд┐рдирд╛ рдореБрдЦреНрдп рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рдкреИрдЯрд░реНрди рд╕реАрдЦреЗрдВ
- тЬЕ рдХрд╛рд░реНрдпрд╢реАрд▓ рдХреЛрдб рдЬрд┐рд╕реЗ рдЖрдк рд╕рдВрд╢реЛрдзрд┐рдд рдФрд░ рдкреНрд░рдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ
- тЬЕ рд╕реАрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрдо рд▓рд╛рдЧрдд (~$50-100/рдорд╛рд╣ рдмрдирд╛рдо $300-1400/рдорд╛рд╣)
- тЬЕ рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рд╕рдВрджреЗрд╢ рдХрддрд╛рд░реЗрдВ рдЬреЛрдбрд╝рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЖрддреНрдорд╡рд┐рд╢реНрд╡рд╛рд╕ рдмрдирд╛рдПрдВ

**рдЙрдкрдорд╛**: рдЗрд╕реЗ рдбреНрд░рд╛рдЗрд╡рд┐рдВрдЧ рд╕реАрдЦрдиреЗ рдЬреИрд╕рд╛ рд╕рдордЭреЗрдВред рдЖрдк рдПрдХ рдЦрд╛рд▓реА рдкрд╛рд░реНрдХрд┐рдВрдЧ рд╕реНрдерд▓ (2 рд╕реЗрд╡рд╛рдПрдВ) рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдореВрд▓ рдмрд╛рддреЗрдВ рд╕реАрдЦрддреЗ рд╣реИрдВ, рдлрд┐рд░ рд╢рд╣рд░ рдХреЗ рдЯреНрд░реИрдлрд┐рдХ (5+ рд╕реЗрд╡рд╛рдПрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рд╛рде) рдХреА рдУрд░ рдмрдврд╝рддреЗ рд╣реИрдВред

### рдЪрд░рдг 2: рднрд╡рд┐рд╖реНрдп рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ (рд╕рдВрджрд░реНрдн рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░)

рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдк 2-рд╕реЗрд╡рд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдореЗрдВ рдорд╣рд╛рд░рдд рд╣рд╛рд╕рд┐рд▓ рдХрд░ рд▓реЗрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

```
Full Architecture (Not Included - For Reference)
тФЬтФАтФА API Gateway (тЬЕ Included)
тФЬтФАтФА Product Service (тЬЕ Included)
тФЬтФАтФА Order Service (ЁЯФЬ Add next)
тФЬтФАтФА User Service (ЁЯФЬ Add next)
тФЬтФАтФА Notification Service (ЁЯФЬ Add last)
тФЬтФАтФА Azure Service Bus (ЁЯФЬ For async communication)
тФЬтФАтФА Cosmos DB (ЁЯФЬ For product persistence)
тФЬтФАтФА Azure SQL (ЁЯФЬ For order management)
тФФтФАтФА Azure Storage (ЁЯФЬ For file storage)
```

"рд╡рд┐рд╕реНрддрд╛рд░ рдЧрд╛рдЗрдб" рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдЪрд░рдг-рджрд░-рдЪрд░рдг рдирд┐рд░реНрджреЗрд╢ рджреЗрдЦреЗрдВред

## рд╢рд╛рдорд┐рд▓ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ

тЬЕ **рд╕реЗрд╡рд╛ рдЦреЛрдЬ**: рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЗ рдмреАрдЪ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд DNS-рдЖрдзрд╛рд░рд┐рдд рдЦреЛрдЬ  
тЬЕ **рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ**: рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХреЗ рдмреАрдЪ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ  
тЬЕ **рдСрдЯреЛ-рд╕реНрдХреЗрд▓рд┐рдВрдЧ**: HTTP рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдкреНрд░рддрд┐ рд╕реЗрд╡рд╛ рд╕реНрд╡рддрдВрддреНрд░ рд╕реНрдХреЗрд▓рд┐рдВрдЧ  
тЬЕ **рд╕реНрд╡рд╛рд╕реНрдереНрдп рдирд┐рдЧрд░рд╛рдиреА**: рджреЛрдиреЛрдВ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд▓рд┐рд╡рдиреЗрд╕ рдФрд░ рд░реЗрдбреАрдиреЗрд╕ рдЬрд╛рдВрдЪ  
тЬЕ **рд╡рд┐рддрд░рд┐рдд рд▓реЙрдЧрд┐рдВрдЧ**: Application Insights рдХреЗ рд╕рд╛рде рдХреЗрдВрджреНрд░реАрдХреГрдд рд▓реЙрдЧрд┐рдВрдЧ  
тЬЕ **рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ**: рд╕реБрд░рдХреНрд╖рд┐рдд рд╕реЗрд╡рд╛-рд╕реЗ-рд╕реЗрд╡рд╛ рд╕рдВрдЪрд╛рд░  
тЬЕ **рдХрдВрдЯреЗрдирд░ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди**: рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рддреИрдирд╛рддреА рдФрд░ рд╕реНрдХреЗрд▓рд┐рдВрдЧ  
тЬЕ **рд╢реВрдиреНрдп-рдбрд╛рдЙрдирдЯрд╛рдЗрдо рдЕрдкрдбреЗрдЯ**: рд╕рдВрд╢реЛрдзрди рдкреНрд░рдмрдВрдзрди рдХреЗ рд╕рд╛рде рд░реЛрд▓рд┐рдВрдЧ рдЕрдкрдбреЗрдЯ  

## рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдБ

### рдЖрд╡рд╢реНрдпрдХ рдЙрдкрдХрд░рдг

рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдпреЗ рдЙрдкрдХрд░рдг рд╕реНрдерд╛рдкрд┐рдд рд╣реИрдВ:

1. **[Azure Developer CLI (azd)](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd)** (рд╕рдВрд╕реНрдХрд░рдг 1.0.0 рдпрд╛ рдЙрдЪреНрдЪрддрд░)
   ```bash
   azd version
   # рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ: azd рд╕рдВрд╕реНрдХрд░рдг 1.0.0 рдпрд╛ рдЙрд╕рд╕реЗ рдЕрдзрд┐рдХ
   ```

2. **[Azure CLI](https://learn.microsoft.com/cli/azure/install-azure-cli)** (рд╕рдВрд╕реНрдХрд░рдг 2.50.0 рдпрд╛ рдЙрдЪреНрдЪрддрд░)
   ```bash
   az --version
   # рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ: azure-cli 2.50.0 рдпрд╛ рдЙрдЪреНрдЪ рд╕рдВрд╕реНрдХрд░рдг
   ```

3. **[Docker](https://www.docker.com/get-started)** (рд╕реНрдерд╛рдиреАрдп рд╡рд┐рдХрд╛рд╕/рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП - рд╡реИрдХрд▓реНрдкрд┐рдХ)
   ```bash
   docker --version
   # рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ: Docker рд╕рдВрд╕реНрдХрд░рдг 20.10 рдпрд╛ рдЙрд╕рд╕реЗ рдЕрдзрд┐рдХ
   ```

### Azure рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдБ

- рдПрдХ рд╕рдХреНрд░рд┐рдп **Azure рд╕рджрд╕реНрдпрддрд╛** ([рдореБрдлреНрдд рдЦрд╛рддрд╛ рдмрдирд╛рдПрдВ](https://azure.microsoft.com/free/))
- рдЖрдкрдХреА рд╕рджрд╕реНрдпрддрд╛ рдореЗрдВ рд╕рдВрд╕рд╛рдзрди рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐
- рд╕рджрд╕реНрдпрддрд╛ рдпрд╛ рд╕рдВрд╕рд╛рдзрди рд╕рдореВрд╣ рдкрд░ **Contributor** рднреВрдорд┐рдХрд╛

### рдЬреНрдЮрд╛рди рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдБ

рдпрд╣ рдПрдХ **рдЙрдиреНрдирдд-рд╕реНрддрд░реАрдп** рдЙрджрд╛рд╣рд░рдг рд╣реИред рдЖрдкрдХреЛ:
- [Simple Flask API example](../../../../../examples/container-app/simple-flask-api) рдкреВрд░рд╛ рдХрд┐рдпрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП
- рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреА рдмреБрдирд┐рдпрд╛рджреА рд╕рдордЭ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП
- REST APIs рдФрд░ HTTP рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП
- рдХрдВрдЯреЗрдирд░ рдЕрд╡рдзрд╛рд░рдгрд╛рдУрдВ рдХреА рд╕рдордЭ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП

**Container Apps рдореЗрдВ рдирдП рд╣реИрдВ?** рдкрд╣рд▓реЗ [Simple Flask API example](../../../../../examples/container-app/simple-flask-api) рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдореВрд▓ рдмрд╛рддреЗрдВ рд╕реАрдЦ рд╕рдХреЗрдВред

## рддреНрд╡рд░рд┐рдд рд╢реБрд░реБрдЖрдд (рдЪрд░рдг-рджрд░-рдЪрд░рдг)

### рдЪрд░рдг 1: рдХреНрд▓реЛрди рдХрд░реЗрдВ рдФрд░ рдиреЗрд╡рд┐рдЧреЗрдЯ рдХрд░реЗрдВ

```bash
git clone https://github.com/microsoft/AZD-for-beginners.git
cd AZD-for-beginners/examples/container-app/microservices
```

**тЬУ рд╕рдлрд▓рддрд╛ рдЬрд╛рдВрдЪ**: рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдк `azure.yaml` рджреЗрдЦреЗрдВ:
```bash
ls
# рдЕрдкреЗрдХреНрд╖рд┐рдд: README.md, azure.yaml, infra/, src/
```

### рдЪрд░рдг 2: Azure рдХреЗ рд╕рд╛рде рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░реЗрдВ

```bash
azd auth login
```

рдпрд╣ рдЖрдкрдХреЗ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреЛ Azure рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рдЦреЛрд▓рддрд╛ рд╣реИред рдЕрдкрдиреЗ Azure рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЗ рд╕рд╛рде рд╕рд╛рдЗрди рдЗрди рдХрд░реЗрдВред

**тЬУ рд╕рдлрд▓рддрд╛ рдЬрд╛рдВрдЪ**: рдЖрдкрдХреЛ рдпрд╣ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП:
```
Logged in to Azure.
```

### рдЪрд░рдг 3: рдкрд░реНрдпрд╛рд╡рд░рдг рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВ

```bash
azd init
```

**рдкреНрд░реЙрдореНрдкреНрдЯреНрд╕ рдЬреЛ рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ**:
- **рдкрд░реНрдпрд╛рд╡рд░рдг рдирд╛рдо**: рдПрдХ рдЫреЛрдЯрд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ (рдЬреИрд╕реЗ, `microservices-dev`)
- **Azure рд╕рджрд╕реНрдпрддрд╛**: рдЕрдкрдиреА рд╕рджрд╕реНрдпрддрд╛ рдЪреБрдиреЗрдВ
- **Azure рд╕реНрдерд╛рди**: рдПрдХ рдХреНрд╖реЗрддреНрд░ рдЪреБрдиреЗрдВ (рдЬреИрд╕реЗ, `eastus`, `westeurope`)

**тЬУ рд╕рдлрд▓рддрд╛ рдЬрд╛рдВрдЪ**: рдЖрдкрдХреЛ рдпрд╣ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП:
```
SUCCESS: New project initialized!
```

### рдЪрд░рдг 4: рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдФрд░ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рддреИрдирд╛рдд рдХрд░реЗрдВ

```bash
azd up
```

**рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ** (8-12 рдорд┐рдирдЯ рд▓рдЧрддреЗ рд╣реИрдВ):
1. Container Apps рдкрд░реНрдпрд╛рд╡рд░рдг рдмрдирд╛рддрд╛ рд╣реИ
2. рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП Application Insights рдмрдирд╛рддрд╛ рд╣реИ
3. API Gateway рдХрдВрдЯреЗрдирд░ (Node.js) рдмрдирд╛рддрд╛ рд╣реИ
4. Product Service рдХрдВрдЯреЗрдирд░ (Python) рдмрдирд╛рддрд╛ рд╣реИ
5. рджреЛрдиреЛрдВ рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЛ Azure рдкрд░ рддреИрдирд╛рдд рдХрд░рддрд╛ рд╣реИ
6. рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдФрд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ
7. рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдФрд░ рд▓реЙрдЧрд┐рдВрдЧ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ

**тЬУ рд╕рдлрд▓рддрд╛ рдЬрд╛рдВрдЪ**: рдЖрдкрдХреЛ рдпрд╣ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП:
```
SUCCESS: Your application was deployed to Azure in X minutes Y seconds.
Endpoint: https://api-gateway-<unique-id>.azurecontainerapps.io
```

**тП▒я╕П рд╕рдордп**: 8-12 рдорд┐рдирдЯ

### рдЪрд░рдг 5: рддреИрдирд╛рддреА рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ

```bash
# рдЧреЗрдЯрд╡реЗ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
GATEWAY_URL=$(azd env get-values | grep API_GATEWAY_URL | cut -d '=' -f2 | tr -d '"')

# рдПрдкреАрдЖрдИ рдЧреЗрдЯрд╡реЗ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ
curl $GATEWAY_URL/health

# рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ:
# {"status":"рд╕реНрд╡рд╕реНрде","service":"api-gateway","timestamp":"2025-11-19T10:30:00Z"}
```

**рдЧреЗрдЯрд╡реЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрддреНрдкрд╛рдж рд╕реЗрд╡рд╛ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ**:
```bash
# рдЙрддреНрдкрд╛рджреЛрдВ рдХреА рд╕реВрдЪреА
curl $GATEWAY_URL/api/products

# рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ:
# [
#   {"id":1,"name":"рд▓реИрдкрдЯреЙрдк","price":999.99,"stock":50},
#   {"id":2,"name":"рдорд╛рдЙрд╕","price":29.99,"stock":200},
#   {"id":3,"name":"рдХреАрдмреЛрд░реНрдб","price":79.99,"stock":150}
# ]
```

**тЬУ рд╕рдлрд▓рддрд╛ рдЬрд╛рдВрдЪ**: рджреЛрдиреЛрдВ рдПрдВрдбрдкреЙрдЗрдВрдЯ JSON рдбреЗрдЯрд╛ рдХреЛ рдмрд┐рдирд╛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рд▓реМрдЯрд╛рддреЗ рд╣реИрдВред

---

**ЁЯОЙ рдмрдзрд╛рдИ рд╣реЛ!** рдЖрдкрдиреЗ Azure рдкрд░ рдПрдХ рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рд╣реИ!

## рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕рдВрд░рдЪрдирд╛

рд╕рднреА рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдлрд╛рдЗрд▓реЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВтАФрдпрд╣ рдПрдХ рдкреВрд░реНрдг, рдХрд╛рд░реНрдпрд╢реАрд▓ рдЙрджрд╛рд╣рд░рдг рд╣реИ:

```
microservices/
тФВ
тФЬтФАтФА README.md                         # This file
тФЬтФАтФА azure.yaml                        # AZD configuration
тФЬтФАтФА .gitignore                        # Git ignore patterns
тФВ
тФЬтФАтФА infra/                           # Infrastructure as Code (Bicep)
тФВ   тФЬтФАтФА main.bicep                   # Main orchestration
тФВ   тФЬтФАтФА abbreviations.json           # Naming conventions
тФВ   тФЬтФАтФА core/                        # Shared infrastructure
тФВ   тФВ   тФЬтФАтФА container-apps-environment.bicep  # Container environment + registry
тФВ   тФВ   тФФтФАтФА monitor.bicep            # Application Insights + Log Analytics
тФВ   тФФтФАтФА app/                         # Service definitions
тФВ       тФЬтФАтФА api-gateway.bicep        # API Gateway container app
тФВ       тФФтФАтФА product-service.bicep    # Product Service container app
тФВ
тФФтФАтФА src/                             # Application source code
    тФЬтФАтФА api-gateway/                 # Node.js API Gateway
    тФВ   тФЬтФАтФА app.js                   # Express server with routing
    тФВ   тФЬтФАтФА package.json             # Node dependencies
    тФВ   тФФтФАтФА Dockerfile               # Container definition
    тФФтФАтФА product-service/             # Python Product Service
        тФЬтФАтФА main.py                  # Flask API with product data
        тФЬтФАтФА requirements.txt         # Python dependencies
        тФФтФАтФА Dockerfile               # Container definition
```

**рдкреНрд░рддреНрдпреЗрдХ рдШрдЯрдХ рдХреНрдпрд╛ рдХрд░рддрд╛ рд╣реИ:**

**рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ (infra/)**:
- `main.bicep`: рд╕рднреА Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдФрд░ рдЙрдирдХреА рдирд┐рд░реНрднрд░рддрд╛рдУрдВ рдХреЛ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯ рдХрд░рддрд╛ рд╣реИ
- `core/container-apps-environment.bicep`: Container Apps рдкрд░реНрдпрд╛рд╡рд░рдг рдФрд░ Azure Container Registry рдмрдирд╛рддрд╛ рд╣реИ
- `core/monitor.bicep`: рд╡рд┐рддрд░рд┐рдд рд▓реЙрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП Application Insights рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ
- `app/*.bicep`: рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдФрд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ рдХреЗ рд╕рд╛рде рд╡реНрдпрдХреНрддрд┐рдЧрдд рдХрдВрдЯреЗрдирд░ рдРрдк рдкрд░рд┐рднрд╛рд╖рд╛рдПрдБ

**API Gateway (src/api-gateway/)**:
- рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ-рд╕рд╛рдордирд╛ рдХрд░рдиреЗ рд╡рд╛рд▓реА рд╕реЗрд╡рд╛ рдЬреЛ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдмреИрдХрдПрдВрдб рд╕реЗрд╡рд╛рдУрдВ рддрдХ рд░реВрдЯ рдХрд░рддреА рд╣реИ
- рд▓реЙрдЧрд┐рдВрдЧ, рддреНрд░реБрдЯрд┐ рд╣реИрдВрдбрд▓рд┐рдВрдЧ, рдФрд░ рдЕрдиреБрд░реЛрдз рдЕрдЧреНрд░реЗрд╖рдг рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ
- рд╕реЗрд╡рд╛-рд╕реЗ-рд╕реЗрд╡рд╛ HTTP рд╕рдВрдЪрд╛рд░ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд░рддрд╛ рд╣реИ

**Product Service (src/product-service/)**:
- рдЙрддреНрдкрд╛рдж рдХреИрдЯрд▓реЙрдЧ рдХреЗ рд╕рд╛рде рдЖрдВрддрд░рд┐рдХ рд╕реЗрд╡рд╛ (рд╕рд░рд▓рддрд╛ рдХреЗ рд▓рд┐рдП рдЗрди-рдореЗрдореЛрд░реА)
- рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ рдХреЗ рд╕рд╛рде REST API
- рдмреИрдХрдПрдВрдб рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕ рдкреИрдЯрд░реНрди рдХрд╛ рдЙрджрд╛рд╣рд░рдг

## рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рдЕрд╡рд▓реЛрдХрди

### API Gateway (Node.js/Express)

**рдкреЛрд░реНрдЯ**: 8080  
**рдкрд╣реБрдВрдЪ**: рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ (рдмрд╛рд╣рд░реА рдЗрдирдЧреНрд░реЗрд╕)  
**рдЙрджреНрджреЗрд╢реНрдп**: рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдЙрдкрдпреБрдХреНрдд рдмреИрдХрдПрдВрдб рд╕реЗрд╡рд╛рдУрдВ рддрдХ рд░реВрдЯ рдХрд░рддрд╛ рд╣реИ  

**рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕**:
- `GET /` - рд╕реЗрд╡рд╛ рдЬрд╛рдирдХрд╛рд░реА
- `GET /health` - рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ рдПрдВрдбрдкреЙрдЗрдВрдЯ
- `GET /api/products` - рдЙрддреНрдкрд╛рдж рд╕реЗрд╡рд╛ рдкрд░ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░реЗрдВ (рд╕рднреА рд╕реВрдЪреАрдмрджреНрдз рдХрд░реЗрдВ)
- `GET /api/products/:id` - рдЙрддреНрдкрд╛рдж рд╕реЗрд╡рд╛ рдкрд░ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░реЗрдВ (ID рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ)

**рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ**:
- axios рдХреЗ рд╕рд╛рде рдЕрдиреБрд░реЛрдз рд░реВрдЯрд┐рдВрдЧ
- рдХреЗрдВрджреНрд░реАрдХреГрдд рд▓реЙрдЧрд┐рдВрдЧ
- рддреНрд░реБрдЯрд┐ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдФрд░ рдЯрд╛рдЗрдордЖрдЙрдЯ рдкреНрд░рдмрдВрдзрди
- рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реЗрд╡рд╛ рдЦреЛрдЬ
- Application Insights рдПрдХреАрдХрд░рдг

**рдХреЛрдб рд╣рд╛рдЗрд▓рд╛рдЗрдЯ** (`src/api-gateway/app.js`):
```javascript
// рдЖрдВрддрд░рд┐рдХ рд╕реЗрд╡рд╛ рд╕рдВрдЪрд╛рд░
app.get('/api/products', async (req, res) => {
  const response = await axios.get(`${PRODUCT_SERVICE_URL}/products`);
  res.json(response.data);
});
```

### Product Service (Python/Flask)

**рдкреЛрд░реНрдЯ**: 8000  
**рдкрд╣реБрдВрдЪ**: рдХреЗрд╡рд▓ рдЖрдВрддрд░рд┐рдХ (рдХреЛрдИ рдмрд╛рд╣рд░реА рдЗрдирдЧреНрд░реЗрд╕ рдирд╣реАрдВ)  
**рдЙрджреНрджреЗрд╢реНрдп**: рдЗрди-рдореЗрдореЛрд░реА рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдЙрддреНрдкрд╛рдж рдХреИрдЯрд▓реЙрдЧ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рддрд╛ рд╣реИ  

**рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕**:
- `GET /` - рд╕реЗрд╡рд╛ рдЬрд╛рдирдХрд╛рд░реА
- `GET /health` - рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ рдПрдВрдбрдкреЙрдЗрдВрдЯ
- `GET /products` - рд╕рднреА рдЙрддреНрдкрд╛рдж рд╕реВрдЪреАрдмрджреНрдз рдХрд░реЗрдВ
- `GET /products/<id>` - ID рджреНрд╡рд╛рд░рд╛ рдЙрддреНрдкрд╛рдж рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ

**рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ**:
- Flask рдХреЗ рд╕рд╛рде RESTful API
- рдЗрди-рдореЗрдореЛрд░реА рдЙрддреНрдкрд╛рдж рд╕реНрдЯреЛрд░ (рд╕рд░рд▓, рдХреЛрдИ рдбреЗрдЯрд╛рдмреЗрд╕ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ)
- рдЬрд╛рдВрдЪ рдХреЗ рд╕рд╛рде рд╕реНрд╡рд╛рд╕реНрдереНрдп рдирд┐рдЧрд░рд╛рдиреА
- рд╕рдВрд░рдЪрд┐рдд рд▓реЙрдЧрд┐рдВрдЧ
- Application Insights рдПрдХреАрдХрд░рдг

**рдбреЗрдЯрд╛ рдореЙрдбрд▓**:
```python
{
  "id": 1,
  "name": "Laptop",
  "description": "High-performance laptop",
  "price": 999.99,
  "stock": 50
}
```

**рдХреЗрд╡рд▓ рдЖрдВрддрд░рд┐рдХ рдХреНрдпреЛрдВ?**
Product Service рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд░реВрдк рд╕реЗ рдЙрдЬрд╛рдЧрд░ рдирд╣реАрдВ рд╣реИред рд╕рднреА рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ API Gateway рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬреЛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ:
- рд╕реБрд░рдХреНрд╖рд╛: рдирд┐рдпрдВрддреНрд░рд┐рдд рдкрд╣реБрдВрдЪ рдмрд┐рдВрджреБ
- рд▓рдЪреАрд▓рд╛рдкрди: рдХреНрд▓рд╛рдЗрдВрдЯреНрд╕ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд┐рдП рдмрд┐рдирд╛ рдмреИрдХрдПрдВрдб рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ
- рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ: рдХреЗрдВрджреНрд░реАрдХреГрдд рдЕрдиреБрд░реЛрдз рд▓реЙрдЧрд┐рдВрдЧ

## рд╕реЗрд╡рд╛ рд╕рдВрдЪрд╛рд░ рдХреЛ рд╕рдордЭрдирд╛

### рд╕реЗрд╡рд╛рдПрдВ рдПрдХ-рджреВрд╕рд░реЗ рд╕реЗ рдХреИрд╕реЗ рдмрд╛рдд рдХрд░рддреА рд╣реИрдВ

рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, API Gateway Product Service рдХреЗ рд╕рд╛рде **рдЖрдВрддрд░рд┐рдХ HTTP рдХреЙрд▓реНрд╕** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдВрдЪрд╛рд░ рдХрд░рддрд╛ рд╣реИ:

```javascript
// рдПрдкреАрдЖрдИ рдЧреЗрдЯрд╡реЗ (src/api-gateway/app.js)
const PRODUCT_SERVICE_URL = process.env.PRODUCT_SERVICE_URL;

// рдЖрдВрддрд░рд┐рдХ HTTP рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВ
const response = await axios.get(`${PRODUCT_SERVICE_URL}/products`);
```

**рдореБрдЦреНрдп рдмрд┐рдВрджреБ**:

1. **DNS-рдЖрдзрд╛рд░рд┐рдд рдЦреЛрдЬ**: Container Apps рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЖрдВрддрд░рд┐рдХ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП DNS рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ
   - Product Service FQDN: `product-service.internal.<environment>.azurecontainerapps.io`
   - рд╕рд░рд▓ рд░реВрдк рдореЗрдВ: `http://product-service` (Container Apps рдЗрд╕реЗ рд╣рд▓ рдХрд░рддрд╛ рд╣реИ)

2. **рдХреЛрдИ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдПрдХреНрд╕рдкреЛрдЬрд░ рдирд╣реАрдВ**: Product Service рдореЗрдВ Bicep рдореЗрдВ `external: false` рд╣реИ
   - рдХреЗрд╡рд▓ Container Apps рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЗ рднреАрддрд░ рд╕реБрд▓рдн
   - рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдирд╣реАрдВ рдкрд╣реБрдВрдЪрд╛ рдЬрд╛ рд╕рдХрддрд╛

3. **рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░**: рд╕реЗрд╡рд╛ URL рддреИрдирд╛рддреА рд╕рдордп рдкрд░ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ
   - Bicep рдЖрдВрддрд░рд┐рдХ FQDN рдХреЛ рдЧреЗрдЯрд╡реЗ рддрдХ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ
   - рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рдореЗрдВ рдХреЛрдИ рд╣рд╛рд░реНрдбрдХреЛрдбреЗрдб URL рдирд╣реАрдВ

**рдЙрдкрдорд╛**: рдЗрд╕реЗ рдХрд╛рд░реНрдпрд╛рд▓рдп рдХреЗ рдХрдорд░реЛрдВ рдЬреИрд╕рд╛ рд╕рдордЭреЗрдВред API Gateway рд░рд┐рд╕реЗрдкреНрд╢рди рдбреЗрд╕реНрдХ рд╣реИ (рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ-рд╕рд╛рдордирд╛), рдФрд░ Product Service рдПрдХ рдХрд╛рд░реНрдпрд╛рд▓рдп рдХрдорд░рд╛ рд╣реИ (рдХреЗрд╡рд▓ рдЖрдВрддрд░рд┐рдХ)ред рдЖрдЧрдВрддреБрдХреЛрдВ рдХреЛ рдХрд┐рд╕реА рднреА рдХрд╛рд░реНрдпрд╛рд▓рдп рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рд░рд┐рд╕реЗрдкреНрд╢рди рд╕реЗ рдЧреБрдЬрд░рдирд╛ рд╣реЛрдЧрд╛ред

## рддреИрдирд╛рддреА рд╡рд┐рдХрд▓реНрдк

### рдкреВрд░реНрдг рддреИрдирд╛рддреА (рдЕрдиреБрд╢рдВрд╕рд┐рдд)

```bash
# рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдФрд░ рджреЛрдиреЛрдВ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рддреИрдирд╛рдд рдХрд░реЗрдВ
azd up
```

рдпрд╣ рддреИрдирд╛рдд рдХрд░рддрд╛ рд╣реИ:
1. Container Apps рдкрд░реНрдпрд╛рд╡рд░рдг
2. Application Insights
3. Container Registry
4. API Gateway рдХрдВрдЯреЗрдирд░
5. Product Service рдХрдВрдЯреЗрдирд░

**рд╕рдордп**: 8-12 рдорд┐рдирдЯ

### рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕реЗрд╡рд╛ рддреИрдирд╛рдд рдХрд░реЗрдВ

```bash
# рдХреЗрд╡рд▓ рдПрдХ рд╕реЗрд╡рд╛ рддреИрдирд╛рдд рдХрд░реЗрдВ (рдкреНрд░рд╛рд░рдВрднрд┐рдХ azd up рдХреЗ рдмрд╛рдж)
azd deploy api-gateway

# рдпрд╛ рдЙрддреНрдкрд╛рдж рд╕реЗрд╡рд╛ рддреИрдирд╛рдд рдХрд░реЗрдВ
azd deploy product-service
```

**рдЙрдкрдпреЛрдЧ рдХрд╛ рдорд╛рдорд▓рд╛**: рдЬрдм рдЖрдкрдиреЗ рдПрдХ рд╕реЗрд╡рд╛ рдореЗрдВ рдХреЛрдб рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рд╣реИ рдФрд░ рдХреЗрд╡рд▓ рдЙрд╕ рд╕реЗрд╡рд╛ рдХреЛ рдкреБрдирдГ рддреИрдирд╛рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред

### рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ

```bash
# рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдкреИрд░рд╛рдореАрдЯрд░ рдмрджрд▓реЗрдВ
azd env set GATEWAY_MAX_REPLICAS 30

# рдирдИ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде рдкреБрдирдГ рдкрд░рд┐рдирд┐рдпреЛрдЬрд┐рдд рдХрд░реЗрдВ
azd up
```

## рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди

### рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди

рджреЛрдиреЛрдВ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдЙрдирдХреЗ Bicep рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ HTTP-рдЖрдзрд╛рд░рд┐рдд рдСрдЯреЛрд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:

**API Gateway**:
- рдиреНрдпреВрдирддрдо рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ: 2 (рд╣рдореЗрд╢рд╛ рдХрдо рд╕реЗ рдХрдо 2 рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреЗ рд▓рд┐рдП)
- рдЕрдзрд┐рдХрддрдо рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ: 20
- рд╕реНрдХреЗрд▓ рдЯреНрд░рд┐рдЧрд░: рдкреНрд░рддрд┐ рдкреНрд░рддрд┐рдХреГрддрд┐ 50 рд╕рдорд╡рд░реНрддреА рдЕрдиреБрд░реЛрдз

**Product Service**:
- рдиреНрдпреВрдирддрдо рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ: 1 (рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдиреЗ рдкрд░ рд╢реВрдиреНрдп рддрдХ рд╕реНрдХреЗрд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИ)
- рдЕрдзрд┐рдХрддрдо рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ: 10
- рд╕реНрдХреЗрд▓ рдЯреНрд░рд┐рдЧрд░: рдкреНрд░рддрд┐ рдкреНрд░рддрд┐рдХреГрддрд┐ 100 рд╕рдорд╡рд░реНрддреА рдЕрдиреБрд░реЛрдз

**рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░реЗрдВ** (`infra/app/*.bicep` рдореЗрдВ):
```bicep
scale: {
  minReplicas: 1
  maxReplicas: 10
  rules: [
    {
      name: 'http-scale-rule'
      http: {
        metadata: {
          concurrentRequests: '100'  // Adjust this
        }
      }
    }
  ]
}
```

### рд╕рдВрд╕рд╛рдзрди рдЖрд╡рдВрдЯрди

**API Gateway**:
- CPU: 1.0 vCPU
- рдореЗрдореЛрд░реА: 2 GiB
- рдХрд╛рд░рдг: рд╕рднреА рдмрд╛рд╣рд░реА рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИ

**Product Service**:
- CPU: 0.5 vCPU
- рдореЗрдореЛрд░реА: 1 GiB
- рдХрд╛рд░рдг: рд╣рд▓реНрдХреЗ рдЗрди-рдореЗрдореЛрд░реА рд╕рдВрдЪрд╛рд▓рди

### рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ

рджреЛрдиреЛрдВ рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рд▓рд┐рд╡рдиреЗрд╕ рдФрд░ рд░реЗрдбреАрдиреЗрд╕ рдЬрд╛рдВрдЪ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:

```bicep
probes: [
  {
    type: 'Liveness'
    httpGet: {
      path: '/health'
      port: 8080
    }
    initialDelaySeconds: 10
    periodSeconds: 30
  }
  {
    type: 'Readiness'
    httpGet: {
      path: '/health'
      port: 8080
    }
    initialDelaySeconds: 5
    periodSeconds: 10
  }
]
```

**рдЗрд╕рдХрд╛ рдХреНрдпрд╛ рдорддрд▓рдм рд╣реИ**:
- **рд▓рд┐рд╡рдиреЗрд╕**: рдпрджрд┐ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ рд╡рд┐рдлрд▓ рд╣реЛрддреА рд╣реИ, рддреЛ Container Apps рдХрдВрдЯреЗрдирд░ рдХреЛ рдкреБрдирдГ рдЖрд░рдВрдн рдХрд░рддрд╛ рд╣реИ
- **рд░реЗрдбреАрдиреЗрд╕**: рдпрджрд┐ рддреИрдпрд╛рд░ рдирд╣реАрдВ рд╣реИ, рддреЛ Container Apps рдЙрд╕ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЛ рдЯреНрд░реИрдлрд┐рдХ рд░реВрдЯ рдХрд░рдирд╛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реИ

## рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдФрд░ рдЕрд╡рд▓реЛрдХрди

### рд╕реЗрд╡рд╛ рд▓реЙрдЧ рджреЗрдЦреЗрдВ

```bash
# рдПрдкреАрдЖрдИ рдЧреЗрдЯрд╡реЗ рд╕реЗ рд▓реЙрдЧреНрд╕ рд╕реНрдЯреНрд░реАрдо рдХрд░реЗрдВ
azd logs api-gateway --follow

# рд╣рд╛рд▓ рдХреЗ рдЙрддреНрдкрд╛рдж рд╕реЗрд╡рд╛ рд▓реЙрдЧреНрд╕ рджреЗрдЦреЗрдВ
azd logs product-service --tail 100

# рджреЛрдиреЛрдВ рд╕реЗрд╡рд╛рдУрдВ рд╕реЗ рд╕рднреА рд▓реЙрдЧреНрд╕ рджреЗрдЦреЗрдВ
azd logs --follow
```

**рдЕрдкреЗрдХреНрд╖рд┐рдд рдЖрдЙрдЯрдкреБрдЯ**:
```
[api-gateway] API Gateway listening on port 8080
[api-gateway] Product Service URL: http://product-service
[api-gateway] GET /api/products 200 - 45ms
[product-service] Retrieved 5 products
```

### Application Insights рдХреНрд╡реЗрд░реА

Azure Portal рдореЗрдВ Application Insights рддрдХ рдкрд╣реБрдВрдЪреЗрдВ, рдлрд┐рд░ рдпреЗ рдХреНрд╡реЗрд░реА рдЪрд▓рд╛рдПрдВ:

**рдзреАрдореЗ рдЕрдиреБрд░реЛрдз рдЦреЛрдЬреЗрдВ**:
```kusto
requests
| where timestamp > ago(1h)
| where duration > 1000  // Requests taking >1 second
| summarize count() by name, cloud_RoleName
| order by count_ desc
```

**рд╕реЗрд╡рд╛-рд╕реЗ-рд╕реЗрд╡рд╛ рдХреЙрд▓ рдЯреНрд░реИрдХ рдХрд░реЗрдВ**:
```kusto
dependencies
| where timestamp > ago(1h)
| where type == "Http"
| project timestamp, name, target, duration, success
| order by timestamp desc
```

**рд╕реЗрд╡рд╛ рджреНрд╡рд╛рд░рд╛ рддреНрд░реБрдЯрд┐ рджрд░**:
```kusto
exceptions
| where timestamp > ago(24h)
| summarize errorCount = count() by cloud_RoleName, type
| order by errorCount desc
```

**рд╕рдордп рдХреЗ рд╕рд╛рде рдЕрдиреБрд░реЛрдз рдорд╛рддреНрд░рд╛**:
```kusto
requests
| where timestamp > ago(1h)
| summarize requestCount = count() by bin(timestamp, 5m), cloud_RoleName
| render timechart
```

### рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдбреИрд╢рдмреЛрд░реНрдб рддрдХ рдкрд╣реБрдВрдЪреЗрдВ

```bash
# рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕ рд╡рд┐рд╡рд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
azd env get-values | grep APPLICATIONINSIGHTS

# Azure рдкреЛрд░реНрдЯрд▓ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдЦреЛрд▓реЗрдВ
az monitor app-insights component show \
  --app $(azd env get-values | grep APPLICATIONINSIGHTS_CONNECTION_STRING | cut -d '=' -f2) \
  --resource-group $(azd env get-values | grep AZURE_RESOURCE_GROUP | cut -d '=' -f2) \
  --query "appId" -o tsv
```

### рд▓рд╛рдЗрд╡ рдореЗрдЯреНрд░рд┐рдХреНрд╕

1. Azure Portal рдореЗрдВ Application Insights рдкрд░ рдЬрд╛рдПрдВ
2. "рд▓рд╛рдЗрд╡ рдореЗрдЯреНрд░рд┐рдХреНрд╕" рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ
3. рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдЕрдиреБрд░реЛрдз, рд╡рд┐рдлрд▓рддрд╛рдПрдВ, рдФрд░ рдкреНрд░рджрд░реНрд╢рди рджреЗрдЦреЗрдВ
4. рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ: `curl $(azd env get-values | grep API_GATEWAY_URL | cut -d '=' -f2 | tr -d '"')/api/products`

## рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЕрднреНрдпрд╛рд╕

[рдиреЛрдЯ: "рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЕрднреНрдпрд╛рд╕" рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдКрдкрд░ рд╡рд┐рд╕реНрддреГрдд рдЪрд░рдг-рджрд░-рдЪрд░рдг рдЕрднреНрдпрд╛рд╕ рджреЗрдЦреЗрдВ, рдЬрд┐рд╕рдореЗрдВ рддреИрдирд╛рддреА рд╕рддреНрдпрд╛рдкрди, рдбреЗрдЯрд╛ рд╕рдВрд╢реЛрдзрди, рдСрдЯреЛрд╕реНрдХреЗрд▓рд┐рдВрдЧ рдкрд░реАрдХреНрд╖рдг, рддреНрд░реБрдЯрд┐ рд╣реИрдВрдбрд▓рд┐рдВрдЧ, рдФрд░ рддреАрд╕рд░реА рд╕реЗрд╡рд╛ рдЬреЛрдбрд╝рдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реИред]

## рд▓рд╛рдЧрдд рд╡рд┐рд╢реНрд▓реЗрд╖рдг

### рдЕрдиреБрдорд╛рдирд┐рдд рдорд╛рд╕рд┐рдХ рд▓рд╛рдЧрдд (рдЗрд╕ 2-рд╕реЗрд╡рд╛ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП)

| рд╕рдВрд╕рд╛рдзрди | рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди | рдЕрдиреБрдорд╛рдирд┐рдд рд▓рд╛рдЧрдд |
|----------|--------------|----------------|
| API Gateway | 2-20 рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ, 1 vCPU, 2GB RAM | $30-150 |
| Product Service | 1-10 рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ, 0.5 vCPU, 1GB RAM | $15-75 |
| Container Registry | рдмреЗрд╕рд┐рдХ рдЯрд┐рдпрд░ | $5 |
| Application Insights | 1-2 GB/рдорд╛рд╣ | $5-10 |
| Log Analytics | 1 GB/рдорд╛рд╣ | $3 |
| **рдХреБрд▓** | | **$58-243/рдорд╛рд╣** |

**рдЙрдкрдпреЛрдЧ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд▓рд╛рдЧрдд рд╡рд┐рднрд╛рдЬрди**:
- **рд╣рд▓реНрдХрд╛ рдЯреНрд░реИрдлрд┐рдХ** (рдкрд░реАрдХреНрд╖рдг/рд╕реАрдЦрдирд╛): ~$60/рдорд╛рд╣
- **рдордзреНрдпрдо рдЯреНрд░реИрдлрд┐рдХ** (рдЫреЛрдЯрд╛ рдЙрддреНрдкрд╛рджрди): ~$120/рдорд╛рд╣
- **рдЙрдЪреНрдЪ рдЯреНрд░реИрдлрд┐рдХ** (рд╡реНрдпрд╕реНрдд рдЕрд╡рдзрд┐): ~$240/рдорд╛рд╣

### рд▓рд╛рдЧрдд рдЕрдиреБрдХреВрд▓рди рдпреБрдХреНрддрд┐рдпрд╛рдБ

1. **рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рд╢реВрдиреНрдп рддрдХ рд╕реНрдХреЗрд▓ рдХрд░реЗрдВ**:
   ```bicep
   scale: {
     minReplicas: 0  // Save $30-40/month when not in use
     maxReplicas: 10
   }
   ```

2. **Cosmos DB рдХреЗ рд▓рд┐рдП рдЦрдкрдд рдпреЛрдЬрдирд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ** (рдЬрдм рдЖрдк рдЗрд╕реЗ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ):
   - рдХреЗрд╡рд▓ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рднреБрдЧрддрд╛рди рдХрд░реЗрдВ
   - рдХреЛрдИ рдиреНрдпреВрдирддрдо рд╢реБрд▓реНрдХ рдирд╣реАрдВ

3. **Application Insights рд╕реИрдВрдкрд▓рд┐рдВрдЧ рд╕реЗрдЯ рдХрд░реЗрдВ**:
   ```javascript
   appInsights.defaultClient.config.samplingPercentage = 50; // 50% рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рдирдореВрдирд╛ рд▓реЗрдВ
   ```

4. **рдЖрд╡рд╢реНрдпрдХ рди рд╣реЛрдиреЗ рдкрд░ рд╕рд╛рдл рдХрд░реЗрдВ**:
   ```bash
   azd down
   ```

### рдореБрдлреНрдд рдЯрд┐рдпрд░ рд╡рд┐рдХрд▓реНрдк
рд╕реАрдЦрдиреЗ/рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ:
- Azure рдХреЗ рдореБрдлреНрдд рдХреНрд░реЗрдбрд┐рдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ (рдкрд╣рд▓реЗ 30 рджрд┐рди)
- рдиреНрдпреВрдирддрдо рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рддрдХ рд╕реАрдорд┐рдд рд░рдЦреЗрдВ
- рдкрд░реАрдХреНрд╖рдг рдХреЗ рдмрд╛рдж рд╣рдЯрд╛ рджреЗрдВ (рдХреЛрдИ рдЪрд▓ рд░рд╣реЗ рд╢реБрд▓реНрдХ рдирд╣реАрдВ)

---

## рд╕рдлрд╛рдИ

рдЪрд▓ рд░рд╣реЗ рд╢реБрд▓реНрдХ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╣рдЯрд╛ рджреЗрдВ:

```bash
azd down --force --purge
```

**рдкреБрд╖реНрдЯрд┐ рд╕рдВрдХреЗрдд**:
```
? Total resources to delete: 6, are you sure you want to continue? (y/N)
```

рдкреБрд╖реНрдЯрд┐ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `y` рдЯрд╛рдЗрдк рдХрд░реЗрдВред

**рдХреНрдпрд╛ рд╣рдЯрд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛**:
- рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ
- рджреЛрдиреЛрдВ рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ (рдЧреЗрдЯрд╡реЗ рдФрд░ рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕)
- рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА
- рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрдирд╕рд╛рдЗрдЯреНрд╕
- рд▓реЙрдЧ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рд╡рд░реНрдХрд╕реНрдкреЗрд╕
- рд░рд┐рд╕реЛрд░реНрд╕ рдЧреНрд░реБрдк

**тЬУ рд╕рдлрд╛рдИ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ**:
```bash
az group list --query "[?starts_with(name,'rg-microservices')]" --output table
```

рдЦрд╛рд▓реА рд▓реМрдЯрдирд╛ рдЪрд╛рд╣рд┐рдПред

---

## рд╡рд┐рд╕реНрддрд╛рд░ рдЧрд╛рдЗрдб: 2 рд╕реЗ 5+ рд╕реЗрд╡рд╛рдУрдВ рддрдХ

рдЬрдм рдЖрдк рдЗрд╕ 2-рд╕реЗрд╡рд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдореЗрдВ рдорд╣рд╛рд░рдд рд╣рд╛рд╕рд┐рд▓ рдХрд░ рд▓реЗрдВ, рддреЛ рдЗрд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдпрд╣рд╛рдВ рд╣реИ:

### рдЪрд░рдг 1: рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реНрдерд╛рдпрд┐рддреНрд╡ рдЬреЛрдбрд╝реЗрдВ (рдЕрдЧрд▓рд╛ рдХрджрдо)

**рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ рдХреЗ рд▓рд┐рдП Cosmos DB рдЬреЛрдбрд╝реЗрдВ**:

1. рдмрдирд╛рдПрдБ `infra/core/cosmos.bicep`:
   ```bicep
   resource cosmosAccount 'Microsoft.DocumentDB/databaseAccounts@2023-04-15' = {
     name: name
     location: location
     kind: 'GlobalDocumentDB'
     properties: {
       databaseAccountOfferType: 'Standard'
       locations: [{ locationName: location, failoverPriority: 0 }]
     }
   }
   ```

2. рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ рдХреЛ рдЗрди-рдореЗрдореЛрд░реА рдбреЗрдЯрд╛ рдХреЗ рдмрдЬрд╛рдп Cosmos DB рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ

3. рдЕрдиреБрдорд╛рдирд┐рдд рдЕрддрд┐рд░рд┐рдХреНрдд рд▓рд╛рдЧрдд: ~$25/рдорд╛рд╣ (рд╕рд░реНрд╡рд░рд▓реЗрд╕)

### рдЪрд░рдг 2: рддреАрд╕рд░реА рд╕реЗрд╡рд╛ рдЬреЛрдбрд╝реЗрдВ (рдСрд░реНрдбрд░ рдкреНрд░рдмрдВрдзрди)

**рдСрд░реНрдбрд░ рд╕рд░реНрд╡рд┐рд╕ рдмрдирд╛рдПрдБ**:

1. рдирдпрд╛ рдлрд╝реЛрд▓реНрдбрд░: `src/order-service/` (Python/Node.js/C#)
2. рдирдпрд╛ Bicep: `infra/app/order-service.bicep`
3. API рдЧреЗрдЯрд╡реЗ рдХреЛ `/api/orders` рд░реВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ
4. рдСрд░реНрдбрд░ рд╕реНрдерд╛рдпрд┐рддреНрд╡ рдХреЗ рд▓рд┐рдП Azure SQL рдбреЗрдЯрд╛рдмреЗрд╕ рдЬреЛрдбрд╝реЗрдВ

**рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдмрди рдЬрд╛рддрд╛ рд╣реИ**:
```
API Gateway тЖТ Product Service (Cosmos DB)
           тЖТ Order Service (Azure SQL)
```

### рдЪрд░рдг 3: рдЕрд╕рд┐рдВрдХреНрд░реЛрдирд╕ рд╕рдВрдЪрд╛рд░ рдЬреЛрдбрд╝реЗрдВ (Service Bus)

**рдЗрд╡реЗрдВрдЯ-рдбреНрд░рд┐рд╡рди рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рд▓рд╛рдЧреВ рдХрд░реЗрдВ**:

1. Azure Service Bus рдЬреЛрдбрд╝реЗрдВ: `infra/core/servicebus.bicep`
2. рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕ "ProductCreated" рдЗрд╡реЗрдВрдЯреНрд╕ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ
3. рдСрд░реНрдбрд░ рд╕рд░реНрд╡рд┐рд╕ рдкреНрд░реЛрдбрдХреНрдЯ рдЗрд╡реЗрдВрдЯреНрд╕ рдХреА рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрддрд╛ рд╣реИ
4. рдЗрд╡реЗрдВрдЯреНрд╕ рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Notification Service рдЬреЛрдбрд╝реЗрдВ

**рдкреИрдЯрд░реНрди**: рдЕрдиреБрд░реЛрдз/рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ (HTTP) + рдЗрд╡реЗрдВрдЯ-рдбреНрд░рд┐рд╡рди (Service Bus)

### рдЪрд░рдг 4: рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдЬреЛрдбрд╝реЗрдВ

**User Service рд▓рд╛рдЧреВ рдХрд░реЗрдВ**:

1. рдмрдирд╛рдПрдБ `src/user-service/` (Go/Node.js)
2. Azure AD B2C рдпрд╛ рдХрд╕реНрдЯрдо JWT рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдЬреЛрдбрд╝реЗрдВ
3. API рдЧреЗрдЯрд╡реЗ рдЯреЛрдХрди рдХреЛ рдорд╛рдиреНрдп рдХрд░рддрд╛ рд╣реИ
4. рд╕реЗрд╡рд╛рдПрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреА рд╣реИрдВ

### рдЪрд░рдг 5: рдЙрддреНрдкрд╛рджрди рддреИрдпрд╛рд░реА

**рдЗрди рдШрдЯрдХреЛрдВ рдХреЛ рдЬреЛрдбрд╝реЗрдВ**:
- Azure Front Door (рд╡реИрд╢реНрд╡рд┐рдХ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ)
- Azure Key Vault (рдЧреБрдкреНрдд рдкреНрд░рдмрдВрдзрди)
- Azure Monitor Workbooks (рдХрд╕реНрдЯрдо рдбреИрд╢рдмреЛрд░реНрдб)
- CI/CD рдкрд╛рдЗрдкрд▓рд╛рдЗрди (GitHub Actions)
- Blue-Green Deployments
- рд╕рднреА рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП Managed Identity

**рдкреВрд░реНрдг рдЙрддреНрдкрд╛рджрди рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рд▓рд╛рдЧрдд**: ~$300-1,400/рдорд╛рд╣

---

## рдЕрдзрд┐рдХ рдЬрд╛рдиреЗрдВ

### рд╕рдВрдмрдВрдзрд┐рдд рджрд╕реНрддрд╛рд╡реЗрдЬрд╝
- [Azure Container Apps Documentation](https://learn.microsoft.com/azure/container-apps/)
- [Microservices Architecture Guide](https://learn.microsoft.com/azure/architecture/guide/architecture-styles/microservices)
- [Application Insights for Distributed Tracing](https://learn.microsoft.com/azure/azure-monitor/app/distributed-tracing)
- [Azure Developer CLI Documentation](https://learn.microsoft.com/azure/developer/azure-developer-cli/)

### рдЗрд╕ рдкрд╛рдареНрдпрдХреНрд░рдо рдореЗрдВ рдЕрдЧрд▓реЗ рдЪрд░рдг
- тЖР рдкрд┐рдЫрд▓рд╛: [Simple Flask API](../../../../../examples/container-app/simple-flask-api) - рд╢реБрд░реБрдЖрддреА рд╕рд┐рдВрдЧрд▓-рдХрдВрдЯреЗрдирд░ рдЙрджрд╛рд╣рд░рдг
- тЖТ рдЕрдЧрд▓рд╛: [AI Integration Guide](../../../../../examples/docs/ai-foundry) - AI рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝реЗрдВ
- ЁЯПа [Course Home](../../README.md)

### рддреБрд▓рдирд╛: рдХрдм рдХреНрдпрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ

**рд╕рд┐рдВрдЧрд▓ рдХрдВрдЯреЗрдирд░ рдРрдк** (Simple Flask API рдЙрджрд╛рд╣рд░рдг):
- тЬЕ рд╕рд░рд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди
- тЬЕ рдореЛрдиреЛрд▓рд┐рдерд┐рдХ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░
- тЬЕ рддреНрд╡рд░рд┐рдд рддреИрдирд╛рддреА
- тЭМ рд╕реАрдорд┐рдд рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА
- **рд▓рд╛рдЧрдд**: ~$15-50/рдорд╛рд╣

**рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕реЗрдЬ** (рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ):
- тЬЕ рдЬрдЯрд┐рд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди
- тЬЕ рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рд╕реНрдХреЗрд▓рд┐рдВрдЧ
- тЬЕ рдЯреАрдо рд╕реНрд╡рд╛рдпрддреНрддрддрд╛ (рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕реЗрд╡рд╛рдПрдВ, рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЯреАрдореЗрдВ)
- тЭМ рдкреНрд░рдмрдВрдзрди рдореЗрдВ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓рддрд╛
- **рд▓рд╛рдЧрдд**: ~$60-250/рдорд╛рд╣

**Kubernetes (AKS)**:
- тЬЕ рдЕрдзрд┐рдХрддрдо рдирд┐рдпрдВрддреНрд░рдг рдФрд░ рд▓рдЪреАрд▓рд╛рдкрди
- тЬЕ рдорд▓реНрдЯреА-рдХреНрд▓рд╛рдЙрдб рдкреЛрд░реНрдЯреЗрдмрд┐рд▓рд┐рдЯреА
- тЬЕ рдЙрдиреНрдирдд рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ
- тЭМ Kubernetes рд╡рд┐рд╢реЗрд╖рдЬреНрдЮрддрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛
- **рд▓рд╛рдЧрдд**: ~$150-500/рдорд╛рд╣ рдиреНрдпреВрдирддрдо

**рд╕рд┐рдлрд╛рд░рд┐рд╢**: рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ (рдЗрд╕ рдЙрджрд╛рд╣рд░рдг) рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ, рдХреЗрд╡рд▓ AKS рдкрд░ рдЬрд╛рдПрдВ рдпрджрд┐ рдЖрдкрдХреЛ Kubernetes-рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛред

---

## рдЕрдХреНрд╕рд░ рдкреВрдЫреЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рд╢реНрди

**рдкреНрд░рд╢реНрди: рдХреЗрд╡рд▓ 2 рд╕реЗрд╡рд╛рдПрдВ рдХреНрдпреЛрдВ, 5+ рдХреНрдпреЛрдВ рдирд╣реАрдВ?**  
рдЙрддреНрддрд░: рд╢реИрдХреНрд╖рд┐рдХ рдкреНрд░рдЧрддрд┐ред рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╕рд╛рде рдореВрд▓ рдмрд╛рддреЗрдВ (рд╕реЗрд╡рд╛ рд╕рдВрдЪрд╛рд░, рдирд┐рдЧрд░рд╛рдиреА, рд╕реНрдХреЗрд▓рд┐рдВрдЧ) рдореЗрдВ рдорд╣рд╛рд░рдд рд╣рд╛рд╕рд┐рд▓ рдХрд░реЗрдВ, рдлрд┐рд░ рдЬрдЯрд┐рд▓рддрд╛ рдЬреЛрдбрд╝реЗрдВред рдпрд╣рд╛рдВ рд╕реАрдЦреЗ рдЧрдП рдкреИрдЯрд░реНрди 100-рд╕реЗрд╡рд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддреЗ рд╣реИрдВред

**рдкреНрд░рд╢реНрди: рдХреНрдпрд╛ рдореИрдВ рдЦреБрдж рдЕрдзрд┐рдХ рд╕реЗрд╡рд╛рдПрдВ рдЬреЛрдбрд╝ рд╕рдХрддрд╛ рд╣реВрдВ?**  
рдЙрддреНрддрд░: рдмрд┐рд▓реНрдХреБрд▓! рдКрдкрд░ рджрд┐рдП рдЧрдП рд╡рд┐рд╕реНрддрд╛рд░ рдЧрд╛рдЗрдб рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред рдкреНрд░рддреНрдпреЗрдХ рдирдИ рд╕реЗрд╡рд╛ рдПрдХ рд╣реА рдкреИрдЯрд░реНрди рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░рддреА рд╣реИ: src рдлрд╝реЛрд▓реНрдбрд░ рдмрдирд╛рдПрдВ, Bicep рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ, azure.yaml рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ, рддреИрдирд╛рдд рдХрд░реЗрдВред

**рдкреНрд░рд╢реНрди: рдХреНрдпрд╛ рдпрд╣ рдЙрддреНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИ?**  
рдЙрддреНрддрд░: рдпрд╣ рдПрдХ рдареЛрд╕ рдЖрдзрд╛рд░ рд╣реИред рдЙрддреНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП, рдЬреЛрдбрд╝реЗрдВ: Managed Identity, Key Vault, рд╕реНрдерд╛рдпреА рдбреЗрдЯрд╛рдмреЗрд╕, CI/CD рдкрд╛рдЗрдкрд▓рд╛рдЗрди, рдирд┐рдЧрд░рд╛рдиреА рдЕрд▓рд░реНрдЯ, рдФрд░ рдмреИрдХрдЕрдк рд░рдгрдиреАрддрд┐ред

**рдкреНрд░рд╢реНрди: Dapr рдпрд╛ рдЕрдиреНрдп рд╕рд░реНрд╡рд┐рд╕ рдореЗрд╖ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛?**  
рдЙрддреНрддрд░: рд╕реАрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рд╕рд░рд▓ рд░рдЦреЗрдВред рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдк рдХрдВрдЯреЗрдирд░ рдРрдкреНрд╕ рдХреА рдореВрд▓ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреЛ рд╕рдордЭ рд▓реЗрдВ, рддреЛ рдЖрдк рдЙрдиреНрдирдд рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП Dapr рдХреЛ рдкрд░рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

**рдкреНрд░рд╢реНрди: рдореИрдВ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдХреИрд╕реЗ рдбрд┐рдмрдЧ рдХрд░реВрдВ?**  
рдЙрддреНрддрд░: Docker рдХреЗ рд╕рд╛рде рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдЪрд▓рд╛рдПрдВ:
```bash
cd src/api-gateway
docker build -t local-gateway .
docker run -p 8080:8080 -e PRODUCT_SERVICE_URL=http://localhost:8000 local-gateway
```

**рдкреНрд░рд╢реНрди: рдХреНрдпрд╛ рдореИрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ?**  
рдЙрддреНрддрд░: рд╣рд╛рдВ! рдпрд╣ рдЙрджрд╛рд╣рд░рдг Node.js (рдЧреЗрдЯрд╡реЗ) + Python (рдкреНрд░реЛрдбрдХреНрдЯ рд╕рд░реНрд╡рд┐рд╕) рджрд┐рдЦрд╛рддрд╛ рд╣реИред рдЖрдк рдХрд┐рд╕реА рднреА рднрд╛рд╖рд╛рдУрдВ рдХреЛ рдорд┐рд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдХрдВрдЯреЗрдирд░реЛрдВ рдореЗрдВ рдЪрд▓рддреА рд╣реИрдВред

**рдкреНрд░рд╢реНрди: рдЕрдЧрд░ рдореЗрд░реЗ рдкрд╛рд╕ Azure рдХреНрд░реЗрдбрд┐рдЯ рдирд╣реАрдВ рд╣реИ рддреЛ рдХреНрдпрд╛ рд╣реЛрдЧрд╛?**  
рдЙрддреНрддрд░: Azure рдХрд╛ рдореБрдлреНрдд рдЯрд┐рдпрд░ (рдкрд╣рд▓реЗ 30 рджрд┐рди рдирдП рдЦрд╛рддреЛрдВ рдХреЗ рд╕рд╛рде) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдпрд╛ рдЫреЛрдЯреЗ рдкрд░реАрдХреНрд╖рдг рдЕрд╡рдзрд┐ рдХреЗ рд▓рд┐рдП рддреИрдирд╛рдд рдХрд░реЗрдВ рдФрд░ рддреБрд░рдВрдд рд╣рдЯрд╛ рджреЗрдВред

---

> **ЁЯОУ рд╕реАрдЦрдиреЗ рдХрд╛ рдкрде рд╕рд╛рд░рд╛рдВрд╢**: рдЖрдкрдиреЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╕реНрдХреЗрд▓рд┐рдВрдЧ, рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ, рдХреЗрдВрджреНрд░реАрдХреГрдд рдирд┐рдЧрд░рд╛рдиреА, рдФрд░ рдЙрддреНрдкрд╛рджрди-рддреИрдпрд╛рд░ рдкреИрдЯрд░реНрди рдХреЗ рд╕рд╛рде рдПрдХ рдорд▓реНрдЯреА-рд╕рд░реНрд╡рд┐рд╕ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЛ рддреИрдирд╛рдд рдХрд░рдирд╛ рд╕реАрдЦрд╛ред рдпрд╣ рдЖрдзрд╛рд░ рдЖрдкрдХреЛ рдЬрдЯрд┐рд▓ рд╡рд┐рддрд░рд┐рдд рд╕рд┐рд╕реНрдЯрдо рдФрд░ рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬ рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕реЗрдЬ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХрд░рддрд╛ рд╣реИред

**ЁЯУЪ рдкрд╛рдареНрдпрдХреНрд░рдо рдиреЗрд╡рд┐рдЧреЗрд╢рди**:
- тЖР рдкрд┐рдЫрд▓рд╛: [Simple Flask API](../../../../../examples/container-app/simple-flask-api)
- тЖТ рдЕрдЧрд▓рд╛: [Database Integration Example](../../../../../examples/database-app)
- ЁЯПа [Course Home](../../README.md)
- ЁЯУЦ [Container Apps Best Practices](../../docs/deployment/deployment-guide.md)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпрд╣ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЬрдмрдХрд┐ рд╣рдо рд╕рдЯреАрдХрддрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рдж рдореЗрдВ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдпрд╛ рдЕрд╢реБрджреНрдзрд┐рдпрд╛рдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред рдореВрд▓ рднрд╛рд╖рд╛ рдореЗрдВ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдкреНрд░рд╛рдорд╛рдгрд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рдкреЗрд╢реЗрд╡рд░ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред рдЗрд╕ рдЕрдиреБрд╡рд╛рдж рдХреЗ рдЙрдкрдпреЛрдЧ рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд┐рд╕реА рднреА рдЧрд▓рддрдлрд╣рдореА рдпрд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреЗ рд▓рд┐рдП рд╣рдо рдЙрддреНрддрд░рджрд╛рдпреА рдирд╣реАрдВ рд╣реИрдВред
<!-- CO-OP TRANSLATOR DISCLAIMER END -->